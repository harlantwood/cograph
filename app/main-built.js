/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */

/*! jquery.caret 2015-02-01 */

/**
 * CoffeeScript Compiler v1.6.1
 * http://coffeescript.org
 *
 * Copyright 2011, Jeremy Ashkenas
 * Released under the MIT License
 */

/**
 * @license cs 0.4.3 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/require-cs for details
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*! Socket.IO.js build:0.9.16, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

/**
   * Parses an URI
   *
   * @author Steven Levithan <stevenlevithan.com> (MIT license)
   * @api public
   */

/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

// Copyright: Hiroshi Ichikawa <http://gimite.net/en/>
// License: New BSD License
// Reference: http://dev.w3.org/html5/websockets/
// Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol

/*!
 * backbone.iobind - Model
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Version
 */

/*!
 * backbone.iobind - Collection
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * backbone.iobind - Backbone.sync replacement
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
	Autosize 1.18.18
	license: MIT
	http://www.jacklmoore.com/autosize
*/

/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/**
 * bootstrap-colorpalette.js
 * (c) 2013~ Jiung Kang
 * Licensed under the Apache License, Version 2.0 (the "License");
 */

/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t="length"in e&&e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function ja(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ka(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function la(e){var t=ga.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ma(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function na(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function oa(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pa(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sa(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function ta(e){var t=l,r=ra[e];return r||(r=sa(e,t),"none"!==r&&r||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qa[0].contentDocument,t.write(),t.close(),r=sa(e,t),qa.detach()),ra[e]=r),r}function xa(e,t,r){var i,s,o,u,a=e.style;return r=r||wa(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),va.test(u)&&ua.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function ya(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fa(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ea.length;while(i--)if(t=Ea[i]+n,t in e)return t;return r}function Ga(e,t,n){var r=Aa.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ha(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ia(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wa(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xa(e,t,o),(0>s||null==s)&&(s=e.style[t]),va.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Ha(e,t,r||(u?"border":"content"),i,o)+"px"}function Ja(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",ta(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Ka(e,t,n,r,i){return new Ka.prototype.init(e,t,n,r,i)}function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ua(e,t,n){for(var r,i=(Ra[t]||[]).concat(Ra["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Va(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||ta(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Na.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?ta(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ua(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wa(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xa(e,t,r){var i,s,o=0,u=Qa.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=La||Sa(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:La||Sa(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wa(c,l.opts.specialEasing);u>o;o++)if(i=Qa[o].call(l,e,c,l.opts))return i;return n.map(c,Ua,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function qb(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function rb(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===mb;return u(t.dataTypes[0])||!s["*"]&&u("*")}function sb(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function tb(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function ub(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Ab(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||wb.test(e)?i(e,n):Ab(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Ab(e+"["+s+"]",t[s],r,i)}function Jb(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=oa(a),o=oa(e),i=0,s=o.length;s>i;i++)pa(o[i],u[i]);if(t)if(r)for(o=o||oa(e),u=u||oa(a),i=0,s=o.length;s>i;i++)na(o[i],u[i]);else na(e,a);return u=oa(a,"script"),u.length>0&&ma(u,!f&&oa(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(ca.test(s)){o=o||c.appendChild(t.createElement("div")),u=(ba.exec(s)||["",""])[1].toLowerCase(),a=ia[u]||ia._default,o.innerHTML=a[1]+s.replace(aa,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=oa(c.appendChild(s),"script"),f&&ma(o),r)){l=0;while(s=o[l++])fa.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ja(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ja(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(oa(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&ma(oa(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(oa(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!da.test(e)&&!ia[(ba.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(aa,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(oa(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(oa(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&ea.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(oa(i,"script"),ka),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,oa(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,la),l=0;u>l;l++)a=o[l],fa.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qa,ra={},ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):a.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.removeChild(t),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xa(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fa(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Ba.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fa(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xa(e,t,i)),"normal"===s&&t in Da&&(s=Da[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?za.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Ca,function(){return Ia(e,t,i)}):Ia(e,t,i):void 0},set:function(e,r,i){var s=i&&wa(e);return Ga(e,r,i?Ha(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xa,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ua.test(e)||(n.cssHooks[e+t].set=Ga)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wa(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Ka.propHooks[this.prop];return e&&e.get?e.get(this):Ka.propHooks._default.get(this)},run:function(e){var t,r=Ka.propHooks[this.prop];return this.options.duration?this.pos=t=n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Oa.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Oa.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xa,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Ra[r]=Ra[r]||[],Ra[r].unshift(t)},prefilter:function(e,t){t?Qa.unshift(e):Qa.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xa(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pa.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Ta(t,!0),e,n,i)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(La=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),La=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Za:Ya)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Za={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$a[t]||n.find.attr;$a[t]=function(e,t,n){var i,s;return n||(s=$a[t],$a[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$a[t]=s),i}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_a.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ab," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ab," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ab," ").indexOf(t)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bb,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cb=n.now(),db=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?sb(sb(e,n.ajaxSettings),t):sb(n.ajaxSettings,e)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=tb(c,S,o)),w=ub(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=gb.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=kb.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pb[1]&&a[2]===pb[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),rb(lb,c,t,S),2===b)return S;f=n.event&&c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ib.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(db.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fb.test(i)?i.replace(fb,"$1_="+cb++):i+(db.test(i)?"&":"?")+"_="+cb++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+nb+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=rb(mb,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Ab(r,e[r],t,s);return i.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(xb,"\r\n")}}):{name:t.name,value:r.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var e in Cb)Cb[e]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(e){var t;return k.cors||Eb&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Bb;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Cb[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Db[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Cb[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fb.pop()||n.expando+"_"+cb++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Gb.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Gb,"$1"+i):e.jsonp!==!1&&(e.url+=(db.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Fb.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Hb=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Hb)return Hb.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Ib=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Jb(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ib;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Jb(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=ya(k.pixelPosition,function(e,r){return r?(r=xa(e,t),va.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Lb),e&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n}),!function(e,t){"function"==typeof define&&define.amd?define("caret",["jquery"],function(n){return e.returnExportsGlobal=t(n)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(e){"use strict";var t,n,r,i,s,o,u,a,f,l,c;l="caret",t=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(){return this.domInputor},t.prototype.getIEPosition=function(){return this.getPosition()},t.prototype.getPosition=function(){var e,t;return t=this.getOffset(),e=this.$inputor.offset(),t.left-=e.left,t.top-=e.top,t},t.prototype.getOldIEPos=function(){var e,t;return t=u.selection.createRange(),e=u.body.createTextRange(),e.moveToElementText(this.domInputor),e.setEndPoint("EndToEnd",t),e.text.length},t.prototype.getPos=function(){var e,t,n;return(n=this.range())?(e=n.cloneRange(),e.selectNodeContents(this.domInputor),e.setEnd(n.endContainer,n.endOffset),t=e.toString().length,e.detach(),t):u.selection?this.getOldIEPos():void 0},t.prototype.getOldIEOffset=function(){var e,t;return e=u.selection.createRange().duplicate(),e.moveStart("character",-1),t=e.getBoundingClientRect(),{height:t.bottom-t.top,left:t.left,top:t.top}},t.prototype.getOffset=function(){var t,n,r,i,s;return f.getSelection&&(r=this.range())?(r.endOffset-1>0&&r.endContainer===!this.domInputor&&(t=r.cloneRange(),t.setStart(r.endContainer,r.endOffset-1),t.setEnd(r.endContainer,r.endOffset),i=t.getBoundingClientRect(),n={height:i.height,left:i.left+i.width,top:i.top},t.detach()),n&&0!==(null!=n?n.height:void 0)||(t=r.cloneRange(),s=e(u.createTextNode("|")),t.insertNode(s[0]),t.selectNode(s[0]),i=t.getBoundingClientRect(),n={height:i.height,left:i.left,top:i.top},s.remove(),t.detach())):u.selection&&(n=this.getOldIEOffset()),n&&(n.top+=e(f).scrollTop(),n.left+=e(f).scrollLeft()),n},t.prototype.range=function(){var e;if(f.getSelection)return e=f.getSelection(),e.rangeCount>0?e.getRangeAt(0):null},t}(),n=function(){function t(e){this.$inputor=e,this.domInputor=this.$inputor[0]}return t.prototype.getIEPos=function(){var e,t,n,r,i,s,o;return t=this.domInputor,s=u.selection.createRange(),i=0,s&&s.parentElement()===t&&(r=t.value.replace(/\r\n/g,"\n"),n=r.length,o=t.createTextRange(),o.moveToBookmark(s.getBookmark()),e=t.createTextRange(),e.collapse(!1),i=o.compareEndPoints("StartToEnd",e)>-1?n:-o.moveStart("character",-n)),i},t.prototype.getPos=function(){return u.selection?this.getIEPos():this.domInputor.selectionStart},t.prototype.setPos=function(e){var t,n;return t=this.domInputor,u.selection?(n=t.createTextRange(),n.move("character",e),n.select()):t.setSelectionRange&&t.setSelectionRange(e,e),t},t.prototype.getIEOffset=function(e){var t,n,r,i;return n=this.domInputor.createTextRange(),e||(e=this.getPos()),n.move("character",e),r=n.boundingLeft,i=n.boundingTop,t=n.boundingHeight,{left:r,top:i,height:t}},t.prototype.getOffset=function(t){var n,r,i;return n=this.$inputor,u.selection?(r=this.getIEOffset(t),r.top+=e(f).scrollTop()+n.scrollTop(),r.left+=e(f).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),i=this.getPosition(t),r={left:r.left+i.left-n.scrollLeft(),top:r.top+i.top-n.scrollTop(),height:i.height})},t.prototype.getPosition=function(e){var t,n,i,s,o,u,a;return t=this.$inputor,s=function(e){return e=e.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(e=e.replace(/\s/g,"&nbsp;")),e},void 0===e&&(e=this.getPos()),a=t.val().slice(0,e),i=t.val().slice(e),o="<span style='position: relative; display: inline;'>"+s(a)+"</span>",o+="<span id='caret' style='position: relative; display: inline;'>|</span>",o+="<span style='position: relative; display: inline;'>"+s(i)+"</span>",u=new r(t),n=u.create(o).rect()},t.prototype.getIEPosition=function(e){var t,n,r,i,s;return r=this.getIEOffset(e),n=this.$inputor.offset(),i=r.left-n.left,s=r.top-n.top,t=r.height,{left:i,top:s,height:t}},t}(),r=function(){function t(e){this.$inputor=e}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],t.prototype.mirrorCss=function(){var t,n=this;return t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),e.each(this.css_attr,function(e,r){return t[r]=n.$inputor.css(r)}),t},t.prototype.create=function(t){return this.$mirror=e("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this.$inputor.after(this.$mirror),this},t.prototype.rect=function(){var e,t,n;return e=this.$mirror.find("#caret"),t=e.position(),n={left:t.left,top:t.top,height:e.height()},this.$mirror.remove(),n},t}(),i={contentEditable:function(e){return!!e[0].contentEditable&&"true"===e[0].contentEditable}},o={pos:function(e){return e||0===e?this.setPos(e):this.getPos()},position:function(e){return u.selection?this.getIEPosition(e):this.getPosition(e)},offset:function(e){var t;return t=this.getOffset(e)}},u=null,f=null,a=null,c=function(e){var t;return(t=null!=e?e.iframe:void 0)?(a=t,f=t.contentWindow,u=t.contentDocument||f.document):(a=void 0,f=window,u=document)},s=function(e){var t;u=e[0].ownerDocument,f=u.defaultView||u.parentWindow;try{return a=f.frameElement}catch(n){t=n}},e.fn.caret=function(r,s,u){var a;return o[r]?(e.isPlainObject(s)?(c(s),s=void 0):c(u),a=i.contentEditable(this)?new t(this):new n(this),o[r].apply(a,[s])):e.error("Method "+r+" does not exist on jQuery.caret")},e.fn.caret.EditableCaret=t,e.fn.caret.InputCaret=n,e.fn.caret.Utils=i,e.fn.caret.apis=o}),function(){!function(e){return"function"==typeof define&&define.amd?define("atwho",["jquery","caret"],e):e(window.jQuery)}(function(e){var t,n,r,i,s,o,u,a=[].slice;n=function(){function t(t){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=e(t),this.setIframe(),this.listen()}return t.prototype.createContainer=function(t){return 0===(this.$el=e("#atwho-container",t)).length?e(t.body).append(this.$el=e("<div id='atwho-container'></div>")):void 0},t.prototype.setIframe=function(e,t){var n;return null==t&&(t=!1),e?(this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e):(this.document=document,this.window=window,this.iframe=null),(this.iframeStandalone=t)?(null!=(n=this.$el)&&n.remove(),this.createContainer(this.document)):this.createContainer(document)},t.prototype.controller=function(e){var t,n,r,i;if(this.alias_maps[e])n=this.controllers[this.alias_maps[e]];else{i=this.controllers;for(r in i)if(t=i[r],r===e){n=t;break}}return n?n:this.controllers[this.current_flag]},t.prototype.set_context_for=function(e){return this.current_flag=e,this},t.prototype.reg=function(e,t){var n,i;return n=(i=this.controllers)[e]||(i[e]=new r(this,e)),t.alias&&(this.alias_maps[t.alias]=e),n.init(t),this},t.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(e){return function(t){return e.on_keyup(t)}}(this)).on("keydown.atwhoInner",function(e){return function(t){return e.on_keydown(t)}}(this)).on("scroll.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this)).on("blur.atwhoInner",function(e){return function(t){var n;return(n=e.controller())?n.view.hide(t,n.get_opt("display_timeout")):void 0}}(this)).on("click.atwhoInner",function(e){return function(t){var n;return null!=(n=e.controller())?n.view.hide(t):void 0}}(this))},t.prototype.shutdown=function(){var e,t,n;n=this.controllers;for(t in n)e=n[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},t.prototype.dispatch=function(){return e.map(this.controllers,function(e){return function(t){var n;return(n=t.get_opt("delay"))?(clearTimeout(e.delayedCallback),e.delayedCallback=setTimeout(function(){return t.look_up()?e.set_context_for(t.at):void 0},n)):t.look_up()?e.set_context_for(t.at):void 0}}(this))},t.prototype.on_keyup=function(t){var n;switch(t.keyCode){case s.ESC:t.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case s.DOWN:case s.UP:case s.CTRL:e.noop();break;case s.P:case s.N:t.ctrlKey||this.dispatch();break;default:this.dispatch()}},t.prototype.on_keydown=function(t){var n,r;if(n=null!=(r=this.controller())?r.view:void 0,n&&n.visible())switch(t.keyCode){case s.ESC:t.preventDefault(),n.hide(t);break;case s.UP:t.preventDefault(),n.prev();break;case s.DOWN:t.preventDefault(),n.next();break;case s.P:if(!t.ctrlKey)return;t.preventDefault(),n.prev();break;case s.N:if(!t.ctrlKey)return;t.preventDefault(),n.next();break;case s.TAB:case s.ENTER:if(!n.visible())return;t.preventDefault(),n.choose(t);break;default:e.noop()}},t}(),r=function(){function t(t,n){this.app=t,this.at=n,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,0===(this.$el=e("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=e("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new o(this),this.view=new u(this)}return t.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},t.prototype.init=function(t){return this.setting=e.extend({},this.setting||e.fn.atwho["default"],t),this.view.init(),this.model.reload(this.setting.data)},t.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},t.prototype.call_default=function(){var t,n,r;r=arguments[0],t=2<=arguments.length?a.call(arguments,1):[];try{return i[r].apply(this,t)}catch(s){return n=s,e.error(""+n+" Or maybe At.js doesn't have function "+r)}},t.prototype.trigger=function(e,t){var n,r;return null==t&&(t=[]),t.push(this),n=this.get_opt("alias"),r=n?""+e+"-"+n+".atwho":""+e+".atwho",this.$inputor.trigger(r,t)},t.prototype.callbacks=function(e){return this.get_opt("callbacks")[e]||i[e]},t.prototype.get_opt=function(e){var t;try{return this.setting[e]}catch(n){return t=n,null}},t.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},t.prototype.catch_query=function(){var e,t,n,r,i,s;return t=this.content(),e=this.$inputor.caret("pos",{iframe:this.app.iframe}),s=t.slice(0,e),r=this.callbacks("matcher").call(this,this.at,s,this.get_opt("start_with_space")),"string"==typeof r&&r.length<=this.get_opt("max_len",20)?(i=e-r.length,n=i+r.length,this.pos=i,r={text:r,head_pos:i,end_pos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},t.prototype.rect=function(){var t,n,r;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeStandalone&&(n=e(this.app.iframe).offset(),t.left+=n.left,t.top+=n.top),this.$inputor.is("[contentEditable]")&&(t=this.cur_rect||(this.cur_rect=t)),r=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+r}},t.prototype.reset_rect=function(){return this.$inputor.is("[contentEditable]")?this.cur_rect=null:void 0},t.prototype.mark_range=function(){var e;if(this.$inputor.is("[contentEditable]"))return this.app.window.getSelection&&(e=this.app.window.getSelection()).rangeCount>0?this.range=e.getRangeAt(0):this.app.document.selection?this.ie8_range=this.app.document.selection.createRange():void 0},t.prototype.insert_content_for=function(t){var n,r,i;return r=t.data("value"),i=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!i?r:(n=e.extend({},t.data("item-data"),{"atwho-data-value":r,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,i,n))},t.prototype.insert=function(t){var n,r,i,s,o,u,a,f,l;return n=this.$inputor,l=this.callbacks("inserting_wrapper").call(this,n,t,this.get_opt("suffix")),n.is("textarea, input")?(u=n.val(),a=u.slice(0,Math.max(this.query.head_pos-this.at.length,0)),f=""+a+l+u.slice(this.query.end_pos||0),n.val(f),n.caret("pos",a.length+l.length,{iframe:this.app.iframe})):(s=this.range)?(i=s.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,s.setStart(s.endContainer,Math.max(i,0)),s.setEnd(s.endContainer,s.endOffset),s.deleteContents(),r=e(l,this.app.document)[0],s.insertNode(r),s.setEndAfter(r),s.collapse(!1),o=this.app.window.getSelection(),o.removeAllRanges(),o.addRange(s)):(s=this.ie8_range)&&(s.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),s.pasteHTML(l),s.collapse(!1),s.select()),n.is(":focus")||n.focus(),n.change()},t.prototype.render_view=function(e){var t;return t=this.get_opt("search_key"),e=this.callbacks("sorter").call(this,this.query.text,e.slice(0,1001),t),this.view.render(e.slice(0,this.get_opt("limit")))},t.prototype.look_up=function(){var t,n;if(t=this.catch_query())return n=function(e){return e&&e.length>0?this.render_view(e):this.view.hide()},this.model.query(t.text,e.proxy(n,this)),t},t}(),o=function(){function t(e){this.context=e,this.at=this.context.at,this.storage=this.context.$inputor}return t.prototype.destroy=function(){return this.storage.data(this.at,null)},t.prototype.saved=function(){return this.fetch()>0},t.prototype.query=function(e,t){var n,r,i;return n=this.fetch(),r=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,e,n,r)||[],i=this.context.callbacks("remote_filter"),n.length>0||!i&&0===n.length?t(n):i.call(this.context,e,t)},t.prototype.fetch=function(){return this.storage.data(this.at)||[]},t.prototype.save=function(e){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,e||[]))},t.prototype.load=function(e){return!this.saved()&&e?this._load(e):void 0},t.prototype.reload=function(e){return this._load(e)},t.prototype._load=function(t){return"string"==typeof t?e.ajax(t,{dataType:"json"}).done(function(e){return function(t){return e.save(t)}}(this)):this.save(t)},t}(),u=function(){function t(t){this.context=t,this.$el=e("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return t.prototype.init=function(){var e;return e=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+e})},t.prototype.destroy=function(){return this.$el.remove()},t.prototype.bind_event=function(){var t;return t=this.$el.find("ul"),t.on("mouseenter.atwho-view","li",function(n){return t.find(".cur").removeClass("cur"),e(n.currentTarget).addClass("cur")}).on("click",function(e){return function(t){return e.choose(t),t.preventDefault()}}(this))},t.prototype.visible=function(){return this.$el.is(":visible")},t.prototype.choose=function(e){var t,n;return(t=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,t),t),this.context.trigger("inserted",[t,e]),this.hide(e)),this.context.get_opt("hide_without_suffix")?this.stop_showing=!0:void 0},t.prototype.reposition=function(t){var n,r,i,s;return s=this.context.app.iframeStandalone?this.context.app.window:window,t.bottom+this.$el.height()-e(s).scrollTop()>e(s).height()&&(t.bottom=t.top-this.$el.height()),t.left>(r=e(s).width()-this.$el.width()-5)&&(t.left=r),n={left:t.left,top:t.bottom},null!=(i=this.context.callbacks("before_reposition"))&&i.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},t.prototype.next=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.next(),t.length||(t=this.$el.find("li:first")),t.addClass("cur")},t.prototype.prev=function(){var e,t;return e=this.$el.find(".cur").removeClass("cur"),t=e.prev(),t.length||(t=this.$el.find("li:last")),t.addClass("cur")},t.prototype.show=function(){var e;return this.stop_showing?void (this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(e=this.context.rect())?this.reposition(e):void 0)},t.prototype.hide=function(e,t){var n;if(this.visible())return isNaN(t)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[e])):(n=function(e){return function(){return e.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,t))},t.prototype.render=function(t){var n,r,i,s,o,u,a;if(!(e.isArray(t)&&t.length>0))return void this.hide();for(this.$el.find("ul").empty(),r=this.$el.find("ul"),o=this.context.get_opt("tpl"),u=0,a=t.length;a>u;u++)i=t[u],i=e.extend({},i,{"atwho-at":this.context.at}),s=this.context.callbacks("tpl_eval").call(this.context,o,i),n=e(this.context.callbacks("highlighter").call(this.context,s,this.context.query.text)),n.data("item-data",i),r.append(n);return this.show(),this.context.get_opt("highlight_first")?r.find("li:first").addClass("cur"):void 0},t}(),s={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},i={before_save:function(t){var n,r,i,s;if(!e.isArray(t))return t;for(s=[],r=0,i=t.length;i>r;r++)n=t[r],s.push(e.isPlainObject(n)?n:{name:n});return s},matcher:function(e,t,n){var r,i,s,o;return e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(e="(?:^|\\s)"+e),s=decodeURI("%C3%80"),o=decodeURI("%C3%BF"),i=new RegExp(""+e+"([A-Za-z"+s+"-"+o+"0-9_+-]*)$|"+e+"([^\\x00-\\xff]*)$","gi"),r=i.exec(t),r?r[2]||r[1]:null},filter:function(e,t,n){var r,i,s,o;for(o=[],i=0,s=t.length;s>i;i++)r=t[i],~(new String(r[n])).toLowerCase().indexOf(e.toLowerCase())&&o.push(r);return o},remote_filter:null,sorter:function(e,t,n){var r,i,s,o;if(!e)return t;for(o=[],i=0,s=t.length;s>i;i++)r=t[i],r.atwho_order=(new String(r[n])).toLowerCase().indexOf(e.toLowerCase()),r.atwho_order>-1&&o.push(r);return o.sort(function(e,t){return e.atwho_order-t.atwho_order})},tpl_eval:function(e,t){var n;try{return e.replace(/\$\{([^\}]*)\}/g,function(e,n){return t[n]})}catch(r){return n=r,""}},highlighter:function(e,t){var n;return t?(n=new RegExp(">\\s*(\\w*?)("+t.replace("+","\\+")+")(\\w*)\\s*<","ig"),e.replace(n,function(e,t,n,r){return"> "+t+"<strong>"+n+"</strong>"+r+" <"})):e},before_insert:function(e){return e},inserting_wrapper:function(e,t,n){var r,i;return r=""===n?n:n||" ",e.is("textarea, input")?""+t+r:"true"===e.attr("contentEditable")?(r=""===n?n:n||"&nbsp;",/firefox/i.test(navigator.userAgent)?i="<span>"+t+r+"</span>":(n="<span contenteditable='false'>"+r+"<span>",i="<span contenteditable='false'>"+t+n+"</span>"),this.app.document.selection&&(i="<span contenteditable='true'>"+t+"</span>"),i):void 0}},t={load:function(e,t){var n;return(n=this.controller(e))?n.model.load(t):void 0},setIframe:function(e,t){return this.setIframe(e,t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e.fn.atwho=function(r){var i,s;return s=arguments,i=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var o,u;return(u=(o=e(this)).data("atwho"))||o.data("atwho",u=new n(this)),"object"!=typeof r&&r?t[r]&&u?i=t[r].apply(u,Array.prototype.slice.call(s,1)):e.error("Method "+r+" does not exist on jQuery.caret"):u.reg(r.at,r)}),i||this},e.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:i,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(root){var CoffeeScript=function(){function require(e){return require[e]}return require["./helpers"]=new function(){var e=this;(function(){var t,n,r,i;e.starts=function(e,t,n){return t===e.substr(n,t.length)},e.ends=function(e,t,n){var r;return r=t.length,t===e.substr(e.length-r-(n||0),r)},e.compact=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],t&&i.push(t);return i},e.count=function(e,t){var n,r;if(n=r=0,!t.length)return 1/0;for(;r=1+e.indexOf(t,r);)n++;return n},e.merge=function(e,t){return n(n({},e),t)},n=e.extend=function(e,t){var n,r;for(n in t)r=t[n],e[n]=r;return e},e.flatten=r=function(e){var t,n,i,s;for(n=[],i=0,s=e.length;s>i;i++)t=e[i],t instanceof Array?n=n.concat(r(t)):n.push(t);return n},e.del=function(e,t){var n;return n=e[t],delete e[t],n},e.last=function(e,t){return e[e.length-(t||0)-1]},e.some=null!=(i=Array.prototype.some)?i:function(e){var t,n,r;for(n=0,r=this.length;r>n;n++)if(t=this[n],e(t))return!0;return!1},t=function(e,t){return t?{first_line:e.first_line,first_column:e.first_column,last_line:t.last_line,last_column:t.last_column}:e},e.addLocationDataFn=function(e,n){return function(r){return"object"==typeof r&&r.updateLocationDataIfMissing&&r.updateLocationDataIfMissing(t(e,n)),r}},e.locationDataToString=function(e){var t;return"2"in e&&"first_line"in e[2]?t=e[2]:"first_line"in e&&(t=e),t?""+(t.first_line+1)+":"+(t.first_column+1)+"-"+(""+(t.last_line+1)+":"+(t.last_column+1)):"No location data"},e.baseFileName=function(e,t){var n;return null==t&&(t=!1),n=e.split("/"),e=n[n.length-1],t?(n=e.split("."),n.pop(),"coffee"===n[n.length-1]&&n.pop(),n.join(".")):e},e.isCoffee=function(e){return/\.((lit)?coffee|coffee\.md)$/.test(e)},e.isLiterate=function(e){return/\.(litcoffee|coffee\.md)$/.test(e)}}).call(this)},require["./rewriter"]=new function(){var e=this;(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},E=[].slice;for(d=function(e,t){var n;return n=[e,t],n.generated=!0,n},e.Rewriter=function(){function e(){}return e.prototype.rewrite=function(e){return this.tokens=e,this.removeLeadingNewlines(),this.removeMidExpressionNewlines(),this.closeOpenCalls(),this.closeOpenIndexes(),this.addImplicitIndentation(),this.tagPostfixConditionals(),this.addImplicitBracesAndParens(),this.addLocationDataToGeneratedTokens(),this.tokens},e.prototype.scanTokens=function(e){var t,n,r;for(r=this.tokens,t=0;n=r[t];)t+=e.call(this,n,t,r);return!0},e.prototype.detectEnd=function(e,t,n){var s,o,u,a,f;for(u=this.tokens,s=0;o=u[e];){if(0===s&&t.call(this,o,e))return n.call(this,o,e);if(!o||0>s)return n.call(this,o,e-1);a=o[0],w.call(i,a)>=0?s+=1:(f=o[0],w.call(r,f)>=0&&(s-=1)),e+=1}return e-1},e.prototype.removeLeadingNewlines=function(){var e,t,n,r,i;for(i=this.tokens,e=n=0,r=i.length;r>n&&(t=i[e][0],"TERMINATOR"===t);e=++n);return e?this.tokens.splice(0,e):void 0},e.prototype.removeMidExpressionNewlines=function(){return this.scanTokens(function(e,t,r){var i;return"TERMINATOR"===e[0]&&(i=this.tag(t+1),w.call(n,i)>=0)?(r.splice(t,1),0):1})},e.prototype.closeOpenCalls=function(){var e,t;return t=function(e,t){var n;return")"===(n=e[0])||"CALL_END"===n||"OUTDENT"===e[0]&&")"===this.tag(t-1)},e=function(e,t){return this.tokens["OUTDENT"===e[0]?t-1:t][0]="CALL_END"},this.scanTokens(function(n,r){return"CALL_START"===n[0]&&this.detectEnd(r+1,t,e),1})},e.prototype.closeOpenIndexes=function(){var e,t;return t=function(e){var t;return"]"===(t=e[0])||"INDEX_END"===t},e=function(e){return e[0]="INDEX_END"},this.scanTokens(function(n,r){return"INDEX_START"===n[0]&&this.detectEnd(r+1,t,e),1})},e.prototype.matchTags=function(){var e,t,n,r,i,s,o;for(t=arguments[0],r=arguments.length>=2?E.call(arguments,1):[],e=0,n=i=0,s=r.length;s>=0?s>i:i>s;n=s>=0?++i:--i){for(;"HERECOMMENT"===this.tag(t+n+e);)e+=2;if(null!=r[n]&&("string"==typeof r[n]&&(r[n]=[r[n]]),o=this.tag(t+n+e),0>w.call(r[n],o)))return!1}return!0},e.prototype.looksObjectish=function(e){return this.matchTags(e,"@",null,":")||this.matchTags(e,null,":")},e.prototype.findTagsBackwards=function(e,t){var n,s,o,u,a,f,l;for(n=[];e>=0&&(n.length||(u=this.tag(e),0>w.call(t,u)&&(a=this.tag(e),0>w.call(i,a)||this.tokens[e].generated)&&(f=this.tag(e),0>w.call(c,f))));)s=this.tag(e),w.call(r,s)>=0&&n.push(this.tag(e)),o=this.tag(e),w.call(i,o)>=0&&n.length&&n.pop(),e-=1;return l=this.tag(e),w.call(t,l)>=0},e.prototype.addImplicitBracesAndParens=function(){var e;return e=[],this.scanTokens(function(t,n,s){var l,h,p,v,m,g,y,b,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F;if(_=t[0],S=(n>0?s[n-1]:[])[0],b=(s.length-1>n?s[n+1]:[])[0],k=function(){return e[e.length-1]},L=n,p=function(e){return n-L+e},v=function(){var e,t;return null!=(e=k())?null!=(t=e[2])?t.ours:void 0:void 0},m=function(){var e;return v()&&"("===(null!=(e=k())?e[0]:void 0)},y=function(){var e;return v()&&"{"===(null!=(e=k())?e[0]:void 0)},g=function(){var e;return v&&"CONTROL"===(null!=(e=k())?e[0]:void 0)},A=function(t){var r;return r=null!=t?t:n,e.push(["(",r,{ours:!0}]),s.splice(r,0,d("CALL_START","(")),null==t?n+=1:void 0},l=function(){return e.pop(),s.splice(n,0,d("CALL_END",")")),n+=1},O=function(t,r){var i;return null==r&&(r=!0),i=null!=t?t:n,e.push(["{",i,{sameLine:!0,startsLine:r,ours:!0}]),s.splice(i,0,d("{",d(new String("{")))),null==t?n+=1:void 0},h=function(t){return t=null!=t?t:n,e.pop(),s.splice(t,0,d("}","}")),n+=1},!m()||"IF"!==_&&"TRY"!==_&&"FINALLY"!==_&&"CATCH"!==_&&"CLASS"!==_&&"SWITCH"!==_){if("INDENT"===_&&v()){if("=>"!==S&&"->"!==S&&"["!==S&&"("!==S&&","!==S&&"{"!==S&&"TRY"!==S&&"ELSE"!==S&&"="!==S)for(;m();)l();return g()&&e.pop(),e.push([_,n]),p(1)}if(w.call(i,_)>=0)return e.push([_,n]),p(1);if(w.call(r,_)>=0){for(;v();)m()?l():y()?h():e.pop();e.pop()}if((w.call(a,_)>=0&&t.spaced||"?"===_&&n>0&&!s[n-1].spaced)&&(w.call(o,b)>=0||w.call(f,b)>=0&&(null!=(D=s[n+1])?!D.spaced:!void 0)&&(null!=(P=s[n+1])?!P.newLine:!void 0)))return"?"===_&&(_=t[0]="FUNC_EXIST"),A(n+1),p(2);if(this.matchTags(n,a,"INDENT",null,":")&&!this.findTagsBackwards(n,["CLASS","EXTENDS","IF","CATCH","SWITCH","LEADING_WHEN","FOR","WHILE","UNTIL"]))return A(n+1),e.push(["INDENT",n+2]),p(3);if(":"===_){for(x="@"===this.tag(n-2)?n-2:n-1;"HERECOMMENT"===this.tag(x-2);)x-=2;return M=0===x||(H=this.tag(x-1),w.call(c,H)>=0)||s[x-1].newLine,k()&&(B=k(),C=B[0],N=B[1],("{"===C||"INDENT"===C&&"{"===this.tag(N-1))&&(M||","===this.tag(x-1)||"{"===this.tag(x-1)))?p(1):(O(x,!!M),p(2))}if("OUTDENT"!==S||!m()||"."!==_&&"?."!==_&&"::"!==_&&"?::"!==_){if(y()&&w.call(c,_)>=0&&(k()[2].sameLine=!1),w.call(u,_)>=0)for(;v();)if(j=k(),C=j[0],N=j[1],F=j[2],T=F.sameLine,M=F.startsLine,m()&&","!==S)l();else if(y()&&T&&!M)h();else{if(!y()||"TERMINATOR"!==_||","===S||M&&this.looksObjectish(n+1))break;h()}if(","===_&&!this.looksObjectish(n+1)&&y()&&("TERMINATOR"!==b||!this.looksObjectish(n+2)))for(E="OUTDENT"===b?1:0;y();)h(n+E);return p(1)}return l(),p(1)}return e.push(["CONTROL",n,{ours:!0}]),p(1)})},e.prototype.addLocationDataToGeneratedTokens=function(){return this.scanTokens(function(e,t,n){var r,i,s,o,u;return e[2]?1:e.generated||e.explicit?(u=null!=(s=null!=(o=n[t-1])?o[2]:void 0)?s:{last_line:0,last_column:0},i=u.last_line,r=u.last_column,e[2]={first_line:i,first_column:r,last_line:i,last_column:r},1):1})},e.prototype.addImplicitIndentation=function(){var e,t,n,r,i;return i=n=r=null,t=function(e){var t;return";"!==e[1]&&(t=e[0],w.call(h,t)>=0)&&("ELSE"!==e[0]||"IF"===i||"THEN"===i)},e=function(e,t){return this.tokens.splice(","===this.tag(t-1)?t-1:t,0,r)},this.scanTokens(function(s,o,u){var a,f,l;return a=s[0],"TERMINATOR"===a&&"THEN"===this.tag(o+1)?(u.splice(o,1),0):"ELSE"===a&&"OUTDENT"!==this.tag(o-1)?(u.splice.apply(u,[o,0].concat(E.call(this.indentation(s)))),2):"CATCH"!==a||"OUTDENT"!==(f=this.tag(o+2))&&"TERMINATOR"!==f&&"FINALLY"!==f?w.call(p,a)>=0&&"INDENT"!==this.tag(o+1)&&("ELSE"!==a||"IF"!==this.tag(o+1))?(i=a,l=this.indentation(s,!0),n=l[0],r=l[1],"THEN"===i&&(n.fromThen=!0),u.splice(o+1,0,n),this.detectEnd(o+2,t,e),"THEN"===a&&u.splice(o,1),1):1:(u.splice.apply(u,[o+2,0].concat(E.call(this.indentation(s)))),4)})},e.prototype.tagPostfixConditionals=function(){var e,t,n;return n=null,t=function(e){var t;return"TERMINATOR"===(t=e[0])||"INDENT"===t},e=function(e){return"INDENT"!==e[0]||e.generated&&!e.fromThen?n[0]="POST_"+n[0]:void 0},this.scanTokens(function(r,i){return"IF"!==r[0]?1:(n=r,this.detectEnd(i+1,t,e),1)})},e.prototype.indentation=function(e,t){var n,r;return null==t&&(t=!1),n=["INDENT",2],r=["OUTDENT",2],t&&(n.generated=r.generated=!0),t||(n.explicit=r.explicit=!0),[n,r]},e.prototype.generate=d,e.prototype.tag=function(e){var t;return null!=(t=this.tokens[e])?t[0]:void 0},e}(),t=[["(",")"],["[","]"],["{","}"],["INDENT","OUTDENT"],["CALL_START","CALL_END"],["PARAM_START","PARAM_END"],["INDEX_START","INDEX_END"]],e.INVERSES=l={},i=[],r=[],g=0,y=t.length;y>g;g++)b=t[g],v=b[0],m=b[1],i.push(l[m]=v),r.push(l[v]=m);n=["CATCH","WHEN","ELSE","FINALLY"].concat(r),a=["IDENTIFIER","SUPER",")","CALL_END","]","INDEX_END","@","THIS"],o=["IDENTIFIER","NUMBER","STRING","JS","REGEX","NEW","PARAM_START","CLASS","IF","TRY","SWITCH","THIS","BOOL","NULL","UNDEFINED","UNARY","SUPER","@","->","=>","[","(","{","--","++"],f=["+","-"],s=["->","=>","{","[",","],u=["POST_IF","FOR","WHILE","UNTIL","WHEN","BY","LOOP","TERMINATOR"],p=["ELSE","->","=>","TRY","FINALLY","THEN"],h=["TERMINATOR","CATCH","FINALLY","ELSE","OUTDENT","LEADING_WHEN"],c=["TERMINATOR","INDENT","OUTDENT"]}).call(this)},require["./lexer"]=new function(){var e=this;(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};Q=require("./rewriter"),j=Q.Rewriter,y=Q.INVERSES,G=require("./helpers"),X=G.count,K=G.starts,W=G.compact,$=G.last,J=G.locationDataToString,e.Lexer=C=function(){function e(){}return e.prototype.tokenize=function(e,t){var n,r,i,s;for(null==t&&(t={}),this.literate=t.literate,this.indent=0,this.indebt=0,this.outdebt=0,this.indents=[],this.ends=[],this.tokens=[],this.chunkLine=t.line||0,this.chunkColumn=t.column||0,e=this.clean(e),r=0;this.chunk=e.slice(r);)n=this.identifierToken()||this.commentToken()||this.whitespaceToken()||this.lineToken()||this.heredocToken()||this.stringToken()||this.numberToken()||this.regexToken()||this.jsToken()||this.literalToken(),s=this.getLineAndColumnFromChunk(n),this.chunkLine=s[0],this.chunkColumn=s[1],r+=n;return this.closeIndentation(),(i=this.ends.pop())&&this.error("missing "+i),t.rewrite===!1?this.tokens:(new j).rewrite(this.tokens)},e.prototype.clean=function(e){var n,r,i;return e.charCodeAt(0)===t&&(e=e.slice(1)),e=e.replace(/\r/g,"").replace(R,""),z.test(e)&&(e="\n"+e,this.chunkLine--),this.literate&&(r=function(){var t,r,s,o;for(s=e.split("\n"),o=[],t=0,r=s.length;r>t;t++)n=s[t],(i=T.exec(n))?o.push(n.slice(i[0].length)):o.push("# "+n);return o}(),e=r.join("\n")),e},e.prototype.identifierToken=function(){var e,t,n,r,i,a,f,l,c,h,p,d,v,g;return(f=m.exec(this.chunk))?(a=f[0],r=f[1],e=f[2],i=r.length,l=void 0,"own"===r&&"FOR"===this.tag()?(this.token("OWN",r),r.length):(n=e||(c=$(this.tokens))&&("."===(d=c[0])||"?."===d||"::"===d||"?::"===d||!c.spaced&&"@"===c[0]),h="IDENTIFIER",!n&&(Y.call(E,r)>=0||Y.call(u,r)>=0)&&(h=r.toUpperCase(),"WHEN"===h&&(v=this.tag(),Y.call(S,v)>=0)?h="LEADING_WHEN":"FOR"===h?this.seenFor=!0:"UNLESS"===h?h="IF":Y.call(U,h)>=0?h="UNARY":Y.call(H,h)>=0&&("INSTANCEOF"!==h&&this.seenFor?(h="FOR"+h,this.seenFor=!1):(h="RELATION","!"===this.value()&&(l=this.tokens.pop(),r="!"+r)))),Y.call(w,r)>=0&&(n?(h="IDENTIFIER",r=new String(r),r.reserved=!0):Y.call(B,r)>=0&&this.error('reserved word "'+r+'"')),n||(Y.call(s,r)>=0&&(r=o[r]),h=function(){switch(r){case"!":return"UNARY";case"==":case"!=":return"COMPARE";case"&&":case"||":return"LOGIC";case"true":case"false":return"BOOL";case"break":case"continue":return"STATEMENT";default:return h}}()),p=this.token(h,r,0,i),l&&(g=[l[2].first_line,l[2].first_column],p[2].first_line=g[0],p[2].first_column=g[1]),e&&(t=a.lastIndexOf(":"),this.token(":",":",t,e.length)),a.length)):0},e.prototype.numberToken=function(){var e,t,n,r,i;return(n=_.exec(this.chunk))?(r=n[0],/^0[BOX]/.test(r)?this.error("radix prefix '"+r+"' must be lowercase"):/E/.test(r)&&!/^0x/.test(r)?this.error("exponential notation '"+r+"' must be indicated with a lowercase 'e'"):/^0\d*[89]/.test(r)?this.error("decimal literal '"+r+"' must not be prefixed with '0'"):/^0\d+/.test(r)&&this.error("octal literal '"+r+"' must be prefixed with '0o'"),t=r.length,(i=/^0o([0-7]+)/.exec(r))&&(r="0x"+parseInt(i[1],8).toString(16)),(e=/^0b([01]+)/.exec(r))&&(r="0x"+parseInt(e[1],2).toString(16)),this.token("NUMBER",r,0,t),t):0},e.prototype.stringToken=function(){var e,t,n;switch(this.chunk.charAt(0)){case"'":if(!(e=I.exec(this.chunk)))return 0;n=e[0],this.token("STRING",n.replace(L,"\\\n"),0,n.length);break;case'"':if(!(n=this.balancedString(this.chunk,'"')))return 0;n.indexOf("#{",1)>0?this.interpolateString(n.slice(1,-1),{strOffset:1,lexedLength:n.length}):this.token("STRING",this.escapeLines(n,0,n.length));break;default:return 0}return(t=/^(?:\\.|[^\\])*\\(?:0[0-7]|[1-7])/.test(n))&&this.error("octal escape sequences "+n+" are not allowed"),n.length},e.prototype.heredocToken=function(){var e,t,n,r;return(n=c.exec(this.chunk))?(t=n[0],r=t.charAt(0),e=this.sanitizeHeredoc(n[2],{quote:r,indent:null}),'"'===r&&e.indexOf("#{")>=0?this.interpolateString(e,{heredoc:!0,strOffset:3,lexedLength:t.length}):this.token("STRING",this.makeString(e,r,!0),0,t.length),t.length):0},e.prototype.commentToken=function(){var e,t,n;return(n=this.chunk.match(a))?(e=n[0],t=n[1],t&&this.token("HERECOMMENT",this.sanitizeHeredoc(t,{herecomment:!0,indent:Array(this.indent+1).join(" ")}),0,e.length),e.length):0},e.prototype.jsToken=function(){var e,t;return"`"===this.chunk.charAt(0)&&(e=b.exec(this.chunk))?(this.token("JS",(t=e[0]).slice(1,-1),0,t.length),t.length):0},e.prototype.regexToken=function(){var e,t,n,r,i,s,o;return"/"!==this.chunk.charAt(0)?0:(n=d.exec(this.chunk))?t=this.heregexToken(n):(r=$(this.tokens),r&&(s=r[0],Y.call(r.spaced?O:M,s)>=0)?0:(n=P.exec(this.chunk))?(o=n,n=o[0],i=o[1],e=o[2],"/*"===i.slice(0,2)&&this.error("regular expressions cannot begin with `*`"),"//"===i&&(i="/(?:)/"),this.token("REGEX",""+i+e,0,n.length),n.length):0)},e.prototype.heregexToken=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,m,g;if(i=e[0],t=e[1],n=e[2],0>t.indexOf("#{"))return u=t.replace(v,"").replace(/\//g,"\\/"),u.match(/^\*/)&&this.error("regular expressions cannot begin with `*`"),this.token("REGEX","/"+(u||"(?:)")+"/"+n,0,i.length),i.length;for(this.token("IDENTIFIER","RegExp",0,0),this.token("CALL_START","(",0,0),l=[],d=this.interpolateString(t,{regex:!0}),h=0,p=d.length;p>h;h++){if(f=d[h],a=f[0],c=f[1],"TOKENS"===a)l.push.apply(l,c);else if("NEOSTRING"===a){if(!(c=c.replace(v,"")))continue;c=c.replace(/\\/g,"\\\\"),f[0]="STRING",f[1]=this.makeString(c,'"',!0),l.push(f)}else this.error("Unexpected "+a);o=$(this.tokens),s=["+","+"],s[2]=o[2],l.push(s)}return l.pop(),"STRING"!==(null!=(m=l[0])?m[0]:void 0)&&(this.token("STRING",'""',0,0),this.token("+","+",0,0)),(g=this.tokens).push.apply(g,l),n&&(r=i.lastIndexOf(n),this.token(",",",",r,0),this.token("STRING",'"'+n+'"',r,n.length)),this.token(")",")",i.length-1,0),i.length},e.prototype.lineToken=function(){var e,t,n,r,i;if(!(n=A.exec(this.chunk)))return 0;if(t=n[0],this.seenFor=!1,i=t.length-1-t.lastIndexOf("\n"),r=this.unfinished(),i-this.indebt===this.indent)return r?this.suppressNewlines():this.newlineToken(0),t.length;if(i>this.indent){if(r)return this.indebt=i-this.indent,this.suppressNewlines(),t.length;e=i-this.indent+this.outdebt,this.token("INDENT",e,0,t.length),this.indents.push(e),this.ends.push("OUTDENT"),this.outdebt=this.indebt=0}else this.indebt=0,this.outdentToken(this.indent-i,r,t.length);return this.indent=i,t.length},e.prototype.outdentToken=function(e,t,n){for(var r,i;e>0;)i=this.indents.length-1,void 0===this.indents[i]?e=0:this.indents[i]===this.outdebt?(e-=this.outdebt,this.outdebt=0):this.indents[i]<this.outdebt?(this.outdebt-=this.indents[i],e-=this.indents[i]):(r=this.indents.pop()+this.outdebt,e-=r,this.outdebt=0,this.pair("OUTDENT"),this.token("OUTDENT",r,0,n));for(r&&(this.outdebt-=e);";"===this.value();)this.tokens.pop();return"TERMINATOR"===this.tag()||t||this.token("TERMINATOR","\n",n,0),this},e.prototype.whitespaceToken=function(){var e,t,n;return(e=z.exec(this.chunk))||(t="\n"===this.chunk.charAt(0))?(n=$(this.tokens),n&&(n[e?"spaced":"newLine"]=!0),e?e[0].length:0):0},e.prototype.newlineToken=function(e){for(;";"===this.value();)this.tokens.pop();return"TERMINATOR"!==this.tag()&&this.token("TERMINATOR","\n",e,0),this},e.prototype.suppressNewlines=function(){return"\\"===this.value()&&this.tokens.pop(),this},e.prototype.literalToken=function(){var e,t,n,s,o,u,a,c;if((e=D.exec(this.chunk))?(s=e[0],i.test(s)&&this.tagParameters()):s=this.chunk.charAt(0),n=s,t=$(this.tokens),"="===s&&t&&(!t[1].reserved&&(o=t[1],Y.call(w,o)>=0)&&this.error('reserved word "'+this.value()+"\" can't be assigned"),"||"===(u=t[1])||"&&"===u))return t[0]="COMPOUND_ASSIGN",t[1]+="=",s.length;if(";"===s)this.seenFor=!1,n="TERMINATOR";else if(Y.call(k,s)>=0)n="MATH";else if(Y.call(f,s)>=0)n="COMPARE";else if(Y.call(l,s)>=0)n="COMPOUND_ASSIGN";else if(Y.call(U,s)>=0)n="UNARY";else if(Y.call(F,s)>=0)n="SHIFT";else if(Y.call(N,s)>=0||"?"===s&&(null!=t?t.spaced:void 0))n="LOGIC";else if(t&&!t.spaced)if("("===s&&(a=t[0],Y.call(r,a)>=0))"?"===t[0]&&(t[0]="FUNC_EXIST"),n="CALL_START";else if("["===s&&(c=t[0],Y.call(g,c)>=0))switch(n="INDEX_START",t[0]){case"?":t[0]="INDEX_SOAK"}switch(s){case"(":case"{":case"[":this.ends.push(y[s]);break;case")":case"}":case"]":this.pair(s)}return this.token(n,s),s.length},e.prototype.sanitizeHeredoc=function(e,t){var n,r,i,s,o;if(i=t.indent,r=t.herecomment){if(h.test(e)&&this.error('block comment cannot contain "*/", starting'),0>e.indexOf("\n"))return e}else for(;s=p.exec(e);)n=s[1],(null===i||(o=n.length)>0&&i.length>o)&&(i=n);return i&&(e=e.replace(RegExp("\\n"+i,"g"),"\n")),this.literate&&(e=e.replace(/\n# \n/g,"\n\n")),r||(e=e.replace(/^\n/,"")),e},e.prototype.tagParameters=function(){var e,t,n,r;if(")"!==this.tag())return this;for(t=[],r=this.tokens,e=r.length,r[--e][0]="PARAM_END";n=r[--e];)switch(n[0]){case")":t.push(n);break;case"(":case"CALL_START":if(!t.length)return"("===n[0]?(n[0]="PARAM_START",this):this;t.pop()}return this},e.prototype.closeIndentation=function(){return this.outdentToken(this.indent)},e.prototype.balancedString=function(e,t){var n,r,i,s,o,u,a,f;for(n=0,u=[t],r=a=1,f=e.length;f>=1?f>a:a>f;r=f>=1?++a:--a)if(n)--n;else{switch(i=e.charAt(r)){case"\\":++n;continue;case t:if(u.pop(),!u.length)return e.slice(0,+r+1||9e9);t=u[u.length-1];continue}"}"!==t||'"'!==i&&"'"!==i?"}"===t&&"/"===i&&(s=d.exec(e.slice(r))||P.exec(e.slice(r)))?n+=s[0].length-1:"}"===t&&"{"===i?u.push(t="}"):'"'===t&&"#"===o&&"{"===i&&u.push(t="}"):u.push(t=i),o=i}return this.error("missing "+u.pop()+", starting")},e.prototype.interpolateString=function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;for(null==n&&(n={}),s=n.heredoc,b=n.regex,v=n.offsetInChunk,w=n.strOffset,c=n.lexedLength,v=v||0,w=w||0,c=c||t.length,s&&t.length>0&&"\n"===t[0]&&(t=t.slice(1),w++),x=[],m=0,o=-1;l=t.charAt(o+=1);)"\\"!==l?"#"===l&&"{"===t.charAt(o+1)&&(i=this.balancedString(t.slice(o+1),"}"))&&(o>m&&x.push(this.makeToken("NEOSTRING",t.slice(m,o),w+m)),u=i.slice(1,-1),u.length&&(k=this.getLineAndColumnFromChunk(w+o+1),h=k[0],r=k[1],d=(new e).tokenize(u,{line:h,column:r,rewrite:!1}),y=d.pop(),"TERMINATOR"===(null!=(L=d[0])?L[0]:void 0)&&(y=d.shift()),(f=d.length)&&(f>1&&(d.unshift(this.makeToken("(","(",w+o+1,0)),d.push(this.makeToken(")",")",w+o+1+u.length,0))),x.push(["TOKENS",d]))),o+=i.length,m=o+1):o+=1;if(o>m&&t.length>m&&x.push(this.makeToken("NEOSTRING",t.slice(m),w+m)),b)return x;if(!x.length)return this.token("STRING",'""',v,c);for("NEOSTRING"!==x[0][0]&&x.unshift(this.makeToken("NEOSTRING","",v)),(a=x.length>1)&&this.token("(","(",v,0),o=N=0,C=x.length;C>N;o=++N)S=x[o],E=S[0],T=S[1],o&&(o&&(g=this.token("+","+")),p="TOKENS"===E?T[0]:S,g[2]={first_line:p[2].first_line,first_column:p[2].first_column,last_line:p[2].first_line,last_column:p[2].first_column}),"TOKENS"===E?(A=this.tokens).push.apply(A,T):"NEOSTRING"===E?(S[0]="STRING",S[1]=this.makeString(T,'"',s),this.tokens.push(S)):this.error("Unexpected "+E);return a&&this.token(")",")",v+c,0),x},e.prototype.pair=function(e){var t,n;return e!==(n=$(this.ends))?("OUTDENT"!==n&&this.error("unmatched "+e),this.indent-=t=$(this.indents),this.outdentToken(t,!0),this.pair(e)):this.ends.pop()},e.prototype.getLineAndColumnFromChunk=function(e){var t,n,r,i;return 0===e?[this.chunkLine,this.chunkColumn]:(i=e>=this.chunk.length?this.chunk:this.chunk.slice(0,+(e-1)+1||9e9),n=X(i,"\n"),t=this.chunkColumn,n>0?(r=i.split("\n"),t=$(r).length):t+=i.length,[this.chunkLine+n,t])},e.prototype.makeToken=function(e,t,n,r){var i,s,o,u,a;return null==n&&(n=0),null==r&&(r=t.length),s={},u=this.getLineAndColumnFromChunk(n),s.first_line=u[0],s.first_column=u[1],i=Math.max(0,r-1),a=this.getLineAndColumnFromChunk(n+(r-1)),s.last_line=a[0],s.last_column=a[1],o=[e,t,s]},e.prototype.token=function(e,t,n,r){var i;return i=this.makeToken(e,t,n,r),this.tokens.push(i),i},e.prototype.tag=function(e,t){var n;return(n=$(this.tokens,e))&&(t?n[0]=t:n[0])},e.prototype.value=function(e,t){var n;return(n=$(this.tokens,e))&&(t?n[1]=t:n[1])},e.prototype.unfinished=function(){var e;return x.test(this.chunk)||"\\"===(e=this.tag())||"."===e||"?."===e||"?::"===e||"UNARY"===e||"MATH"===e||"+"===e||"-"===e||"SHIFT"===e||"RELATION"===e||"COMPARE"===e||"LOGIC"===e||"THROW"===e||"EXTENDS"===e},e.prototype.escapeLines=function(e,t){return e.replace(L,t?"\\n":"")},e.prototype.makeString=function(e,t,n){return e?(e=e.replace(/\\([\s\S])/g,function(e,n){return"\n"===n||n===t?n:e}),e=e.replace(RegExp(""+t,"g"),"\\$&"),t+this.escapeLines(e,n)+t):t+t},e.prototype.error=function(e){throw SyntaxError(""+e+" on line "+(this.chunkLine+1))},e}(),E=["true","false","null","this","new","delete","typeof","in","instanceof","return","throw","break","continue","debugger","if","else","switch","for","while","do","try","catch","finally","class","extends","super"],u=["undefined","then","unless","until","loop","of","by","when"],o={and:"&&",or:"||",is:"==",isnt:"!=",not:"!",yes:"true",no:"false",on:"true",off:"false"},s=function(){var e;e=[];for(V in o)e.push(V);return e}(),u=u.concat(s),B=["case","default","function","var","void","with","const","let","enum","export","import","native","__hasProp","__extends","__slice","__bind","__indexOf","implements","interface","package","private","protected","public","static","yield"],q=["arguments","eval"],w=E.concat(B).concat(q),e.RESERVED=B.concat(E).concat(u).concat(q),e.STRICT_PROSCRIBED=q,t=65279,m=/^([$A-Za-z_\x7f-\uffff][$\w\x7f-\uffff]*)([^\n\S]*:(?!:))?/,_=/^0b[01]+|^0o[0-7]+|^0x[\da-f]+|^\d*\.?\d+(?:e[+-]?\d+)?/i,c=/^("""|''')([\s\S]*?)(?:\n[^\n\S]*)?\1/,D=/^(?:[-=]>|[-+*\/%<>&|^!?=]=|>>>=?|([-+:])\1|([&|<>])\2=?|\?(\.|::)|\.{2,3})/,z=/^[^\n\S]+/,a=/^###([^#][\s\S]*?)(?:###[^\n\S]*|(?:###)$)|^(?:\s*#(?!##[^#]).*)+/,T=/^([ ]{4}|\t)/,i=/^[-=]>/,A=/^(?:\n[^\n\S]*)+/,I=/^'[^\\']*(?:\\.[^\\']*)*'/,b=/^`[^\\`]*(?:\\.[^\\`]*)*`/,P=/^(\/(?![\s=])[^[\/\n\\]*(?:(?:\\[\s\S]|\[[^\]\n\\]*(?:\\[\s\S][^\]\n\\]*)*])[^[\/\n\\]*)*\/)([imgy]{0,4})(?!\w)/,d=/^\/{3}([\s\S]+?)\/{3}([imgy]{0,4})(?!\w)/,v=/\s+(?:#.*)?/g,L=/\n/g,p=/\n+([^\n\S]*)/g,h=/\*\//,x=/^\s*(?:,|\??\.(?![.\d])|::)/,R=/\s+$/,l=["-=","+=","/=","*=","%=","||=","&&=","?=","<<=",">>=",">>>=","&=","^=","|="],U=["!","~","NEW","TYPEOF","DELETE","DO"],N=["&&","||","&","|","^"],F=["<<",">>",">>>"],f=["==","!=","<",">","<=",">="],k=["*","/","%"],H=["IN","OF","INSTANCEOF"],n=["TRUE","FALSE"],O=["NUMBER","REGEX","BOOL","NULL","UNDEFINED","++","--","]"],M=O.concat(")","}","THIS","IDENTIFIER","STRING"),r=["IDENTIFIER","STRING","REGEX",")","]","}","?","::","@","THIS","SUPER"],g=r.concat("NUMBER","BOOL","NULL","UNDEFINED"),S=["INDENT","OUTDENT","TERMINATOR"]}).call(this)},require["./parser"]=new function(){var e=this,t=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,Root:3,Body:4,Block:5,TERMINATOR:6,Line:7,Expression:8,Statement:9,Return:10,Comment:11,STATEMENT:12,Value:13,Invocation:14,Code:15,Operation:16,Assign:17,If:18,Try:19,While:20,For:21,Switch:22,Class:23,Throw:24,INDENT:25,OUTDENT:26,Identifier:27,IDENTIFIER:28,AlphaNumeric:29,NUMBER:30,STRING:31,Literal:32,JS:33,REGEX:34,DEBUGGER:35,UNDEFINED:36,NULL:37,BOOL:38,Assignable:39,"=":40,AssignObj:41,ObjAssignable:42,":":43,ThisProperty:44,RETURN:45,HERECOMMENT:46,PARAM_START:47,ParamList:48,PARAM_END:49,FuncGlyph:50,"->":51,"=>":52,OptComma:53,",":54,Param:55,ParamVar:56,"...":57,Array:58,Object:59,Splat:60,SimpleAssignable:61,Accessor:62,Parenthetical:63,Range:64,This:65,".":66,"?.":67,"::":68,"?::":69,Index:70,INDEX_START:71,IndexValue:72,INDEX_END:73,INDEX_SOAK:74,Slice:75,"{":76,AssignList:77,"}":78,CLASS:79,EXTENDS:80,OptFuncExist:81,Arguments:82,SUPER:83,FUNC_EXIST:84,CALL_START:85,CALL_END:86,ArgList:87,THIS:88,"@":89,"[":90,"]":91,RangeDots:92,"..":93,Arg:94,SimpleArgs:95,TRY:96,Catch:97,FINALLY:98,CATCH:99,THROW:100,"(":101,")":102,WhileSource:103,WHILE:104,WHEN:105,UNTIL:106,Loop:107,LOOP:108,ForBody:109,FOR:110,ForStart:111,ForSource:112,ForVariables:113,OWN:114,ForValue:115,FORIN:116,FOROF:117,BY:118,SWITCH:119,Whens:120,ELSE:121,When:122,LEADING_WHEN:123,IfBlock:124,IF:125,POST_IF:126,UNARY:127,"-":128,"+":129,"--":130,"++":131,"?":132,MATH:133,SHIFT:134,COMPARE:135,LOGIC:136,RELATION:137,COMPOUND_ASSIGN:138,$accept:0,$end:1},terminals_:{2:"error",6:"TERMINATOR",12:"STATEMENT",25:"INDENT",26:"OUTDENT",28:"IDENTIFIER",30:"NUMBER",31:"STRING",33:"JS",34:"REGEX",35:"DEBUGGER",36:"UNDEFINED",37:"NULL",38:"BOOL",40:"=",43:":",45:"RETURN",46:"HERECOMMENT",47:"PARAM_START",49:"PARAM_END",51:"->",52:"=>",54:",",57:"...",66:".",67:"?.",68:"::",69:"?::",71:"INDEX_START",73:"INDEX_END",74:"INDEX_SOAK",76:"{",78:"}",79:"CLASS",80:"EXTENDS",83:"SUPER",84:"FUNC_EXIST",85:"CALL_START",86:"CALL_END",88:"THIS",89:"@",90:"[",91:"]",93:"..",96:"TRY",98:"FINALLY",99:"CATCH",100:"THROW",101:"(",102:")",104:"WHILE",105:"WHEN",106:"UNTIL",108:"LOOP",110:"FOR",114:"OWN",116:"FORIN",117:"FOROF",118:"BY",119:"SWITCH",121:"ELSE",123:"LEADING_WHEN",125:"IF",126:"POST_IF",127:"UNARY",128:"-",129:"+",130:"--",131:"++",132:"?",133:"MATH",134:"SHIFT",135:"COMPARE",136:"LOGIC",137:"RELATION",138:"COMPOUND_ASSIGN"},productions_:[0,[3,0],[3,1],[3,2],[4,1],[4,3],[4,2],[7,1],[7,1],[9,1],[9,1],[9,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[8,1],[5,2],[5,3],[27,1],[29,1],[29,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[32,1],[17,3],[17,4],[17,5],[41,1],[41,3],[41,5],[41,1],[42,1],[42,1],[42,1],[10,2],[10,1],[11,1],[15,5],[15,2],[50,1],[50,1],[53,0],[53,1],[48,0],[48,1],[48,3],[48,4],[48,6],[55,1],[55,2],[55,3],[56,1],[56,1],[56,1],[56,1],[60,2],[61,1],[61,2],[61,2],[61,1],[39,1],[39,1],[39,1],[13,1],[13,1],[13,1],[13,1],[13,1],[62,2],[62,2],[62,2],[62,2],[62,1],[62,1],[70,3],[70,2],[72,1],[72,1],[59,4],[77,0],[77,1],[77,3],[77,4],[77,6],[23,1],[23,2],[23,3],[23,4],[23,2],[23,3],[23,4],[23,5],[14,3],[14,3],[14,1],[14,2],[81,0],[81,1],[82,2],[82,4],[65,1],[65,1],[44,2],[58,2],[58,4],[92,1],[92,1],[64,5],[75,3],[75,2],[75,2],[75,1],[87,1],[87,3],[87,4],[87,4],[87,6],[94,1],[94,1],[95,1],[95,3],[19,2],[19,3],[19,4],[19,5],[97,3],[97,3],[24,2],[63,3],[63,5],[103,2],[103,4],[103,2],[103,4],[20,2],[20,2],[20,2],[20,1],[107,2],[107,2],[21,2],[21,2],[21,2],[109,2],[109,2],[111,2],[111,3],[115,1],[115,1],[115,1],[115,1],[113,1],[113,3],[112,2],[112,2],[112,4],[112,4],[112,4],[112,6],[112,6],[22,5],[22,7],[22,4],[22,6],[120,1],[120,2],[122,3],[122,4],[124,3],[124,5],[18,1],[18,3],[18,3],[18,3],[16,2],[16,2],[16,2],[16,2],[16,2],[16,2],[16,2],[16,2],[16,3],[16,3],[16,3],[16,3],[16,3],[16,3],[16,3],[16,3],[16,5],[16,4],[16,3]],performAction:function(e,t,n,r,i,s,o){var u=s.length-1;switch(i){case 1:return this.$=r.addLocationDataFn(o[u],o[u])(new r.Block);case 2:return this.$=s[u];case 3:return this.$=s[u-1];case 4:this.$=r.addLocationDataFn(o[u],o[u])(r.Block.wrap([s[u]]));break;case 5:this.$=r.addLocationDataFn(o[u-2],o[u])(s[u-2].push(s[u]));break;case 6:this.$=s[u-1];break;case 7:this.$=s[u];break;case 8:this.$=s[u];break;case 9:this.$=s[u];break;case 10:this.$=s[u];break;case 11:this.$=r.addLocationDataFn(o[u],o[u])(new r.Literal(s[u]));break;case 12:this.$=s[u];break;case 13:this.$=s[u];break;case 14:this.$=s[u];break;case 15:this.$=s[u];break;case 16:this.$=s[u];break;case 17:this.$=s[u];break;case 18:this.$=s[u];break;case 19:this.$=s[u];break;case 20:this.$=s[u];break;case 21:this.$=s[u];break;case 22:this.$=s[u];break;case 23:this.$=s[u];break;case 24:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Block);break;case 25:this.$=r.addLocationDataFn(o[u-2],o[u])(s[u-1]);break;case 26:this.$=r.addLocationDataFn(o[u],o[u])(new r.Literal(s[u]));break;case 27:this.$=r.addLocationDataFn(o[u],o[u])(new r.Literal(s[u]));break;case 28:this.$=r.addLocationDataFn(o[u],o[u])(new r.Literal(s[u]));break;case 29:this.$=s[u];break;case 30:this.$=r.addLocationDataFn(o[u],o[u])(new r.Literal(s[u]));break;case 31:this.$=r.addLocationDataFn(o[u],o[u])(new r.Literal(s[u]));break;case 32:this.$=r.addLocationDataFn(o[u],o[u])(new r.Literal(s[u]));break;case 33:this.$=r.addLocationDataFn(o[u],o[u])(new r.Undefined);break;case 34:this.$=r.addLocationDataFn(o[u],o[u])(new r.Null);break;case 35:this.$=r.addLocationDataFn(o[u],o[u])(new r.Bool(s[u]));break;case 36:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Assign(s[u-2],s[u]));break;case 37:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Assign(s[u-3],s[u]));break;case 38:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Assign(s[u-4],s[u-1]));break;case 39:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 40:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Assign(r.addLocationDataFn(o[u-2])(new r.Value(s[u-2])),s[u],"object"));break;case 41:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Assign(r.addLocationDataFn(o[u-4])(new r.Value(s[u-4])),s[u-1],"object"));break;case 42:this.$=s[u];break;case 43:this.$=s[u];break;case 44:this.$=s[u];break;case 45:this.$=s[u];break;case 46:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Return(s[u]));break;case 47:this.$=r.addLocationDataFn(o[u],o[u])(new r.Return);break;case 48:this.$=r.addLocationDataFn(o[u],o[u])(new r.Comment(s[u]));break;case 49:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Code(s[u-3],s[u],s[u-1]));break;case 50:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Code([],s[u],s[u-1]));break;case 51:this.$=r.addLocationDataFn(o[u],o[u])("func");break;case 52:this.$=r.addLocationDataFn(o[u],o[u])("boundfunc");break;case 53:this.$=s[u];break;case 54:this.$=s[u];break;case 55:this.$=r.addLocationDataFn(o[u],o[u])([]);break;case 56:this.$=r.addLocationDataFn(o[u],o[u])([s[u]]);break;case 57:this.$=r.addLocationDataFn(o[u-2],o[u])(s[u-2].concat(s[u]));break;case 58:this.$=r.addLocationDataFn(o[u-3],o[u])(s[u-3].concat(s[u]));break;case 59:this.$=r.addLocationDataFn(o[u-5],o[u])(s[u-5].concat(s[u-2]));break;case 60:this.$=r.addLocationDataFn(o[u],o[u])(new r.Param(s[u]));break;case 61:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Param(s[u-1],null,!0));break;case 62:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Param(s[u-2],s[u]));break;case 63:this.$=s[u];break;case 64:this.$=s[u];break;case 65:this.$=s[u];break;case 66:this.$=s[u];break;case 67:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Splat(s[u-1]));break;case 68:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 69:this.$=r.addLocationDataFn(o[u-1],o[u])(s[u-1].add(s[u]));break;case 70:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Value(s[u-1],[].concat(s[u])));break;case 71:this.$=s[u];break;case 72:this.$=s[u];break;case 73:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 74:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 75:this.$=s[u];break;case 76:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 77:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 78:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 79:this.$=s[u];break;case 80:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Access(s[u]));break;case 81:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Access(s[u],"soak"));break;case 82:this.$=r.addLocationDataFn(o[u-1],o[u])([r.addLocationDataFn(o[u-1])(new r.Access(new r.Literal("prototype"))),r.addLocationDataFn(o[u])(new r.Access(s[u]))]);break;case 83:this.$=r.addLocationDataFn(o[u-1],o[u])([r.addLocationDataFn(o[u-1])(new r.Access(new r.Literal("prototype"),"soak")),r.addLocationDataFn(o[u])(new r.Access(s[u]))]);break;case 84:this.$=r.addLocationDataFn(o[u],o[u])(new r.Access(new r.Literal("prototype")));break;case 85:this.$=s[u];break;case 86:this.$=r.addLocationDataFn(o[u-2],o[u])(s[u-1]);break;case 87:this.$=r.addLocationDataFn(o[u-1],o[u])(r.extend(s[u],{soak:!0}));break;case 88:this.$=r.addLocationDataFn(o[u],o[u])(new r.Index(s[u]));break;case 89:this.$=r.addLocationDataFn(o[u],o[u])(new r.Slice(s[u]));break;case 90:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Obj(s[u-2],s[u-3].generated));break;case 91:this.$=r.addLocationDataFn(o[u],o[u])([]);break;case 92:this.$=r.addLocationDataFn(o[u],o[u])([s[u]]);break;case 93:this.$=r.addLocationDataFn(o[u-2],o[u])(s[u-2].concat(s[u]));break;case 94:this.$=r.addLocationDataFn(o[u-3],o[u])(s[u-3].concat(s[u]));break;case 95:this.$=r.addLocationDataFn(o[u-5],o[u])(s[u-5].concat(s[u-2]));break;case 96:this.$=r.addLocationDataFn(o[u],o[u])(new r.Class);break;case 97:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Class(null,null,s[u]));break;case 98:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Class(null,s[u]));break;case 99:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Class(null,s[u-1],s[u]));break;case 100:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Class(s[u]));break;case 101:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Class(s[u-1],null,s[u]));break;case 102:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Class(s[u-2],s[u]));break;case 103:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Class(s[u-3],s[u-1],s[u]));break;case 104:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Call(s[u-2],s[u],s[u-1]));break;case 105:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Call(s[u-2],s[u],s[u-1]));break;case 106:this.$=r.addLocationDataFn(o[u],o[u])(new r.Call("super",[new r.Splat(new r.Literal("arguments"))]));break;case 107:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Call("super",s[u]));break;case 108:this.$=r.addLocationDataFn(o[u],o[u])(!1);break;case 109:this.$=r.addLocationDataFn(o[u],o[u])(!0);break;case 110:this.$=r.addLocationDataFn(o[u-1],o[u])([]);break;case 111:this.$=r.addLocationDataFn(o[u-3],o[u])(s[u-2]);break;case 112:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(new r.Literal("this")));break;case 113:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(new r.Literal("this")));break;case 114:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Value(r.addLocationDataFn(o[u-1])(new r.Literal("this")),[r.addLocationDataFn(o[u])(new r.Access(s[u]))],"this"));break;case 115:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Arr([]));break;case 116:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Arr(s[u-2]));break;case 117:this.$=r.addLocationDataFn(o[u],o[u])("inclusive");break;case 118:this.$=r.addLocationDataFn(o[u],o[u])("exclusive");break;case 119:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Range(s[u-3],s[u-1],s[u-2]));break;case 120:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Range(s[u-2],s[u],s[u-1]));break;case 121:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Range(s[u-1],null,s[u]));break;case 122:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Range(null,s[u],s[u-1]));break;case 123:this.$=r.addLocationDataFn(o[u],o[u])(new r.Range(null,null,s[u]));break;case 124:this.$=r.addLocationDataFn(o[u],o[u])([s[u]]);break;case 125:this.$=r.addLocationDataFn(o[u-2],o[u])(s[u-2].concat(s[u]));break;case 126:this.$=r.addLocationDataFn(o[u-3],o[u])(s[u-3].concat(s[u]));break;case 127:this.$=r.addLocationDataFn(o[u-3],o[u])(s[u-2]);break;case 128:this.$=r.addLocationDataFn(o[u-5],o[u])(s[u-5].concat(s[u-2]));break;case 129:this.$=s[u];break;case 130:this.$=s[u];break;case 131:this.$=s[u];break;case 132:this.$=r.addLocationDataFn(o[u-2],o[u])([].concat(s[u-2],s[u]));break;case 133:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Try(s[u]));break;case 134:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Try(s[u-1],s[u][0],s[u][1]));break;case 135:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Try(s[u-2],null,null,s[u]));break;case 136:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Try(s[u-3],s[u-2][0],s[u-2][1],s[u]));break;case 137:this.$=r.addLocationDataFn(o[u-2],o[u])([s[u-1],s[u]]);break;case 138:this.$=r.addLocationDataFn(o[u-2],o[u])([r.addLocationDataFn(o[u-1])(new r.Value(s[u-1])),s[u]]);break;case 139:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Throw(s[u]));break;case 140:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Parens(s[u-1]));break;case 141:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Parens(s[u-2]));break;case 142:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.While(s[u]));break;case 143:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.While(s[u-2],{guard:s[u]}));break;case 144:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.While(s[u],{invert:!0}));break;case 145:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.While(s[u-2],{invert:!0,guard:s[u]}));break;case 146:this.$=r.addLocationDataFn(o[u-1],o[u])(s[u-1].addBody(s[u]));break;case 147:this.$=r.addLocationDataFn(o[u-1],o[u])(s[u].addBody(r.addLocationDataFn(o[u-1])(r.Block.wrap([s[u-1]]))));break;case 148:this.$=r.addLocationDataFn(o[u-1],o[u])(s[u].addBody(r.addLocationDataFn(o[u-1])(r.Block.wrap([s[u-1]]))));break;case 149:this.$=r.addLocationDataFn(o[u],o[u])(s[u]);break;case 150:this.$=r.addLocationDataFn(o[u-1],o[u])((new r.While(r.addLocationDataFn(o[u-1])(new r.Literal("true")))).addBody(s[u]));break;case 151:this.$=r.addLocationDataFn(o[u-1],o[u])((new r.While(r.addLocationDataFn(o[u-1])(new r.Literal("true")))).addBody(r.addLocationDataFn(o[u])(r.Block.wrap([s[u]]))));break;case 152:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.For(s[u-1],s[u]));break;case 153:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.For(s[u-1],s[u]));break;case 154:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.For(s[u],s[u-1]));break;case 155:this.$=r.addLocationDataFn(o[u-1],o[u])({source:r.addLocationDataFn(o[u])(new r.Value(s[u]))});break;case 156:this.$=r.addLocationDataFn(o[u-1],o[u])(function(){return s[u].own=s[u-1].own,s[u].name=s[u-1][0],s[u].index=s[u-1][1],s[u]}());break;case 157:this.$=r.addLocationDataFn(o[u-1],o[u])(s[u]);break;case 158:this.$=r.addLocationDataFn(o[u-2],o[u])(function(){return s[u].own=!0,s[u]}());break;case 159:this.$=s[u];break;case 160:this.$=s[u];break;case 161:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 162:this.$=r.addLocationDataFn(o[u],o[u])(new r.Value(s[u]));break;case 163:this.$=r.addLocationDataFn(o[u],o[u])([s[u]]);break;case 164:this.$=r.addLocationDataFn(o[u-2],o[u])([s[u-2],s[u]]);break;case 165:this.$=r.addLocationDataFn(o[u-1],o[u])({source:s[u]});break;case 166:this.$=r.addLocationDataFn(o[u-1],o[u])({source:s[u],object:!0});break;case 167:this.$=r.addLocationDataFn(o[u-3],o[u])({source:s[u-2],guard:s[u]});break;case 168:this.$=r.addLocationDataFn(o[u-3],o[u])({source:s[u-2],guard:s[u],object:!0});break;case 169:this.$=r.addLocationDataFn(o[u-3],o[u])({source:s[u-2],step:s[u]});break;case 170:this.$=r.addLocationDataFn(o[u-5],o[u])({source:s[u-4],guard:s[u-2],step:s[u]});break;case 171:this.$=r.addLocationDataFn(o[u-5],o[u])({source:s[u-4],step:s[u-2],guard:s[u]});break;case 172:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Switch(s[u-3],s[u-1]));break;case 173:this.$=r.addLocationDataFn(o[u-6],o[u])(new r.Switch(s[u-5],s[u-3],s[u-1]));break;case 174:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Switch(null,s[u-1]));break;case 175:this.$=r.addLocationDataFn(o[u-5],o[u])(new r.Switch(null,s[u-3],s[u-1]));break;case 176:this.$=s[u];break;case 177:this.$=r.addLocationDataFn(o[u-1],o[u])(s[u-1].concat(s[u]));break;case 178:this.$=r.addLocationDataFn(o[u-2],o[u])([[s[u-1],s[u]]]);break;case 179:this.$=r.addLocationDataFn(o[u-3],o[u])([[s[u-2],s[u-1]]]);break;case 180:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.If(s[u-1],s[u],{type:s[u-2]}));break;case 181:this.$=r.addLocationDataFn(o[u-4],o[u])(s[u-4].addElse(new r.If(s[u-1],s[u],{type:s[u-2]})));break;case 182:this.$=s[u];break;case 183:this.$=r.addLocationDataFn(o[u-2],o[u])(s[u-2].addElse(s[u]));break;case 184:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.If(s[u],r.addLocationDataFn(o[u-2])(r.Block.wrap([s[u-2]])),{type:s[u-1],statement:!0}));break;case 185:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.If(s[u],r.addLocationDataFn(o[u-2])(r.Block.wrap([s[u-2]])),{type:s[u-1],statement:!0}));break;case 186:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Op(s[u-1],s[u]));break;case 187:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Op("-",s[u]));break;case 188:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Op("+",s[u]));break;case 189:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Op("--",s[u]));break;case 190:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Op("++",s[u]));break;case 191:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Op("--",s[u-1],null,!0));break;case 192:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Op("++",s[u-1],null,!0));break;case 193:this.$=r.addLocationDataFn(o[u-1],o[u])(new r.Existence(s[u-1]));break;case 194:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Op("+",s[u-2],s[u]));break;case 195:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Op("-",s[u-2],s[u]));break;case 196:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Op(s[u-1],s[u-2],s[u]));break;case 197:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Op(s[u-1],s[u-2],s[u]));break;case 198:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Op(s[u-1],s[u-2],s[u]));break;case 199:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Op(s[u-1],s[u-2],s[u]));break;case 200:this.$=r.addLocationDataFn(o[u-2],o[u])(function(){return"!"===s[u-1].charAt(0)?(new r.Op(s[u-1].slice(1),s[u-2],s[u])).invert():new r.Op(s[u-1],s[u-2],s[u])}());break;case 201:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Assign(s[u-2],s[u],s[u-1]));break;case 202:this.$=r.addLocationDataFn(o[u-4],o[u])(new r.Assign(s[u-4],s[u-1],s[u-3]));break;case 203:this.$=r.addLocationDataFn(o[u-3],o[u])(new r.Assign(s[u-3],s[u],s[u-2]));break;case 204:this.$=r.addLocationDataFn(o[u-2],o[u])(new r.Extends(s[u-2],s[u]))}},table:[{1:[2,1],3:1,4:2,5:3,7:4,8:6,9:7,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,5],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[3]},{1:[2,2],6:[1,74]},{6:[1,75]},{1:[2,4],6:[2,4],26:[2,4],102:[2,4]},{4:77,7:4,8:6,9:7,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,26:[1,76],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,7],6:[2,7],26:[2,7],102:[2,7],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,8],6:[2,8],26:[2,8],102:[2,8],103:90,104:[1,65],106:[1,66],109:91,110:[1,68],111:69,126:[1,89]},{1:[2,12],6:[2,12],25:[2,12],26:[2,12],49:[2,12],54:[2,12],57:[2,12],62:93,66:[1,95],67:[1,96],68:[1,97],69:[1,98],70:99,71:[1,100],73:[2,12],74:[1,101],78:[2,12],81:92,84:[1,94],85:[2,108],86:[2,12],91:[2,12],93:[2,12],102:[2,12],104:[2,12],105:[2,12],106:[2,12],110:[2,12],118:[2,12],126:[2,12],128:[2,12],129:[2,12],132:[2,12],133:[2,12],134:[2,12],135:[2,12],136:[2,12],137:[2,12]},{1:[2,13],6:[2,13],25:[2,13],26:[2,13],49:[2,13],54:[2,13],57:[2,13],62:103,66:[1,95],67:[1,96],68:[1,97],69:[1,98],70:99,71:[1,100],73:[2,13],74:[1,101],78:[2,13],81:102,84:[1,94],85:[2,108],86:[2,13],91:[2,13],93:[2,13],102:[2,13],104:[2,13],105:[2,13],106:[2,13],110:[2,13],118:[2,13],126:[2,13],128:[2,13],129:[2,13],132:[2,13],133:[2,13],134:[2,13],135:[2,13],136:[2,13],137:[2,13]},{1:[2,14],6:[2,14],25:[2,14],26:[2,14],49:[2,14],54:[2,14],57:[2,14],73:[2,14],78:[2,14],86:[2,14],91:[2,14],93:[2,14],102:[2,14],104:[2,14],105:[2,14],106:[2,14],110:[2,14],118:[2,14],126:[2,14],128:[2,14],129:[2,14],132:[2,14],133:[2,14],134:[2,14],135:[2,14],136:[2,14],137:[2,14]},{1:[2,15],6:[2,15],25:[2,15],26:[2,15],49:[2,15],54:[2,15],57:[2,15],73:[2,15],78:[2,15],86:[2,15],91:[2,15],93:[2,15],102:[2,15],104:[2,15],105:[2,15],106:[2,15],110:[2,15],118:[2,15],126:[2,15],128:[2,15],129:[2,15],132:[2,15],133:[2,15],134:[2,15],135:[2,15],136:[2,15],137:[2,15]},{1:[2,16],6:[2,16],25:[2,16],26:[2,16],49:[2,16],54:[2,16],57:[2,16],73:[2,16],78:[2,16],86:[2,16],91:[2,16],93:[2,16],102:[2,16],104:[2,16],105:[2,16],106:[2,16],110:[2,16],118:[2,16],126:[2,16],128:[2,16],129:[2,16],132:[2,16],133:[2,16],134:[2,16],135:[2,16],136:[2,16],137:[2,16]},{1:[2,17],6:[2,17],25:[2,17],26:[2,17],49:[2,17],54:[2,17],57:[2,17],73:[2,17],78:[2,17],86:[2,17],91:[2,17],93:[2,17],102:[2,17],104:[2,17],105:[2,17],106:[2,17],110:[2,17],118:[2,17],126:[2,17],128:[2,17],129:[2,17],132:[2,17],133:[2,17],134:[2,17],135:[2,17],136:[2,17],137:[2,17]},{1:[2,18],6:[2,18],25:[2,18],26:[2,18],49:[2,18],54:[2,18],57:[2,18],73:[2,18],78:[2,18],86:[2,18],91:[2,18],93:[2,18],102:[2,18],104:[2,18],105:[2,18],106:[2,18],110:[2,18],118:[2,18],126:[2,18],128:[2,18],129:[2,18],132:[2,18],133:[2,18],134:[2,18],135:[2,18],136:[2,18],137:[2,18]},{1:[2,19],6:[2,19],25:[2,19],26:[2,19],49:[2,19],54:[2,19],57:[2,19],73:[2,19],78:[2,19],86:[2,19],91:[2,19],93:[2,19],102:[2,19],104:[2,19],105:[2,19],106:[2,19],110:[2,19],118:[2,19],126:[2,19],128:[2,19],129:[2,19],132:[2,19],133:[2,19],134:[2,19],135:[2,19],136:[2,19],137:[2,19]},{1:[2,20],6:[2,20],25:[2,20],26:[2,20],49:[2,20],54:[2,20],57:[2,20],73:[2,20],78:[2,20],86:[2,20],91:[2,20],93:[2,20],102:[2,20],104:[2,20],105:[2,20],106:[2,20],110:[2,20],118:[2,20],126:[2,20],128:[2,20],129:[2,20],132:[2,20],133:[2,20],134:[2,20],135:[2,20],136:[2,20],137:[2,20]},{1:[2,21],6:[2,21],25:[2,21],26:[2,21],49:[2,21],54:[2,21],57:[2,21],73:[2,21],78:[2,21],86:[2,21],91:[2,21],93:[2,21],102:[2,21],104:[2,21],105:[2,21],106:[2,21],110:[2,21],118:[2,21],126:[2,21],128:[2,21],129:[2,21],132:[2,21],133:[2,21],134:[2,21],135:[2,21],136:[2,21],137:[2,21]},{1:[2,22],6:[2,22],25:[2,22],26:[2,22],49:[2,22],54:[2,22],57:[2,22],73:[2,22],78:[2,22],86:[2,22],91:[2,22],93:[2,22],102:[2,22],104:[2,22],105:[2,22],106:[2,22],110:[2,22],118:[2,22],126:[2,22],128:[2,22],129:[2,22],132:[2,22],133:[2,22],134:[2,22],135:[2,22],136:[2,22],137:[2,22]},{1:[2,23],6:[2,23],25:[2,23],26:[2,23],49:[2,23],54:[2,23],57:[2,23],73:[2,23],78:[2,23],86:[2,23],91:[2,23],93:[2,23],102:[2,23],104:[2,23],105:[2,23],106:[2,23],110:[2,23],118:[2,23],126:[2,23],128:[2,23],129:[2,23],132:[2,23],133:[2,23],134:[2,23],135:[2,23],136:[2,23],137:[2,23]},{1:[2,9],6:[2,9],26:[2,9],102:[2,9],104:[2,9],106:[2,9],110:[2,9],126:[2,9]},{1:[2,10],6:[2,10],26:[2,10],102:[2,10],104:[2,10],106:[2,10],110:[2,10],126:[2,10]},{1:[2,11],6:[2,11],26:[2,11],102:[2,11],104:[2,11],106:[2,11],110:[2,11],126:[2,11]},{1:[2,75],6:[2,75],25:[2,75],26:[2,75],40:[1,104],49:[2,75],54:[2,75],57:[2,75],66:[2,75],67:[2,75],68:[2,75],69:[2,75],71:[2,75],73:[2,75],74:[2,75],78:[2,75],84:[2,75],85:[2,75],86:[2,75],91:[2,75],93:[2,75],102:[2,75],104:[2,75],105:[2,75],106:[2,75],110:[2,75],118:[2,75],126:[2,75],128:[2,75],129:[2,75],132:[2,75],133:[2,75],134:[2,75],135:[2,75],136:[2,75],137:[2,75]},{1:[2,76],6:[2,76],25:[2,76],26:[2,76],49:[2,76],54:[2,76],57:[2,76],66:[2,76],67:[2,76],68:[2,76],69:[2,76],71:[2,76],73:[2,76],74:[2,76],78:[2,76],84:[2,76],85:[2,76],86:[2,76],91:[2,76],93:[2,76],102:[2,76],104:[2,76],105:[2,76],106:[2,76],110:[2,76],118:[2,76],126:[2,76],128:[2,76],129:[2,76],132:[2,76],133:[2,76],134:[2,76],135:[2,76],136:[2,76],137:[2,76]},{1:[2,77],6:[2,77],25:[2,77],26:[2,77],49:[2,77],54:[2,77],57:[2,77],66:[2,77],67:[2,77],68:[2,77],69:[2,77],71:[2,77],73:[2,77],74:[2,77],78:[2,77],84:[2,77],85:[2,77],86:[2,77],91:[2,77],93:[2,77],102:[2,77],104:[2,77],105:[2,77],106:[2,77],110:[2,77],118:[2,77],126:[2,77],128:[2,77],129:[2,77],132:[2,77],133:[2,77],134:[2,77],135:[2,77],136:[2,77],137:[2,77]},{1:[2,78],6:[2,78],25:[2,78],26:[2,78],49:[2,78],54:[2,78],57:[2,78],66:[2,78],67:[2,78],68:[2,78],69:[2,78],71:[2,78],73:[2,78],74:[2,78],78:[2,78],84:[2,78],85:[2,78],86:[2,78],91:[2,78],93:[2,78],102:[2,78],104:[2,78],105:[2,78],106:[2,78],110:[2,78],118:[2,78],126:[2,78],128:[2,78],129:[2,78],132:[2,78],133:[2,78],134:[2,78],135:[2,78],136:[2,78],137:[2,78]},{1:[2,79],6:[2,79],25:[2,79],26:[2,79],49:[2,79],54:[2,79],57:[2,79],66:[2,79],67:[2,79],68:[2,79],69:[2,79],71:[2,79],73:[2,79],74:[2,79],78:[2,79],84:[2,79],85:[2,79],86:[2,79],91:[2,79],93:[2,79],102:[2,79],104:[2,79],105:[2,79],106:[2,79],110:[2,79],118:[2,79],126:[2,79],128:[2,79],129:[2,79],132:[2,79],133:[2,79],134:[2,79],135:[2,79],136:[2,79],137:[2,79]},{1:[2,106],6:[2,106],25:[2,106],26:[2,106],49:[2,106],54:[2,106],57:[2,106],66:[2,106],67:[2,106],68:[2,106],69:[2,106],71:[2,106],73:[2,106],74:[2,106],78:[2,106],82:105,84:[2,106],85:[1,106],86:[2,106],91:[2,106],93:[2,106],102:[2,106],104:[2,106],105:[2,106],106:[2,106],110:[2,106],118:[2,106],126:[2,106],128:[2,106],129:[2,106],132:[2,106],133:[2,106],134:[2,106],135:[2,106],136:[2,106],137:[2,106]},{6:[2,55],25:[2,55],27:110,28:[1,73],44:111,48:107,49:[2,55],54:[2,55],55:108,56:109,58:112,59:113,76:[1,70],89:[1,114],90:[1,115]},{5:116,25:[1,5]},{8:117,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:119,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:120,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{13:122,14:123,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:124,44:63,58:47,59:48,61:121,63:25,64:26,65:27,76:[1,70],83:[1,28],88:[1,58],89:[1,59],90:[1,57],101:[1,56]},{13:122,14:123,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:124,44:63,58:47,59:48,61:125,63:25,64:26,65:27,76:[1,70],83:[1,28],88:[1,58],89:[1,59],90:[1,57],101:[1,56]},{1:[2,72],6:[2,72],25:[2,72],26:[2,72],40:[2,72],49:[2,72],54:[2,72],57:[2,72],66:[2,72],67:[2,72],68:[2,72],69:[2,72],71:[2,72],73:[2,72],74:[2,72],78:[2,72],80:[1,129],84:[2,72],85:[2,72],86:[2,72],91:[2,72],93:[2,72],102:[2,72],104:[2,72],105:[2,72],106:[2,72],110:[2,72],118:[2,72],126:[2,72],128:[2,72],129:[2,72],130:[1,126],131:[1,127],132:[2,72],133:[2,72],134:[2,72],135:[2,72],136:[2,72],137:[2,72],138:[1,128]},{1:[2,182],6:[2,182],25:[2,182],26:[2,182],49:[2,182],54:[2,182],57:[2,182],73:[2,182],78:[2,182],86:[2,182],91:[2,182],93:[2,182],102:[2,182],104:[2,182],105:[2,182],106:[2,182],110:[2,182],118:[2,182],121:[1,130],126:[2,182],128:[2,182],129:[2,182],132:[2,182],133:[2,182],134:[2,182],135:[2,182],136:[2,182],137:[2,182]},{5:131,25:[1,5]},{5:132,25:[1,5]},{1:[2,149],6:[2,149],25:[2,149],26:[2,149],49:[2,149],54:[2,149],57:[2,149],73:[2,149],78:[2,149],86:[2,149],91:[2,149],93:[2,149],102:[2,149],104:[2,149],105:[2,149],106:[2,149],110:[2,149],118:[2,149],126:[2,149],128:[2,149],129:[2,149],132:[2,149],133:[2,149],134:[2,149],135:[2,149],136:[2,149],137:[2,149]},{5:133,25:[1,5]},{8:134,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,135],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,96],5:136,6:[2,96],13:122,14:123,25:[1,5],26:[2,96],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:124,44:63,49:[2,96],54:[2,96],57:[2,96],58:47,59:48,61:138,63:25,64:26,65:27,73:[2,96],76:[1,70],78:[2,96],80:[1,137],83:[1,28],86:[2,96],88:[1,58],89:[1,59],90:[1,57],91:[2,96],93:[2,96],101:[1,56],102:[2,96],104:[2,96],105:[2,96],106:[2,96],110:[2,96],118:[2,96],126:[2,96],128:[2,96],129:[2,96],132:[2,96],133:[2,96],134:[2,96],135:[2,96],136:[2,96],137:[2,96]},{8:139,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,47],6:[2,47],8:140,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,26:[2,47],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],102:[2,47],103:39,104:[2,47],106:[2,47],107:40,108:[1,67],109:41,110:[2,47],111:69,119:[1,42],124:37,125:[1,64],126:[2,47],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,48],6:[2,48],25:[2,48],26:[2,48],54:[2,48],78:[2,48],102:[2,48],104:[2,48],106:[2,48],110:[2,48],126:[2,48]},{1:[2,73],6:[2,73],25:[2,73],26:[2,73],40:[2,73],49:[2,73],54:[2,73],57:[2,73],66:[2,73],67:[2,73],68:[2,73],69:[2,73],71:[2,73],73:[2,73],74:[2,73],78:[2,73],84:[2,73],85:[2,73],86:[2,73],91:[2,73],93:[2,73],102:[2,73],104:[2,73],105:[2,73],106:[2,73],110:[2,73],118:[2,73],126:[2,73],128:[2,73],129:[2,73],132:[2,73],133:[2,73],134:[2,73],135:[2,73],136:[2,73],137:[2,73]},{1:[2,74],6:[2,74],25:[2,74],26:[2,74],40:[2,74],49:[2,74],54:[2,74],57:[2,74],66:[2,74],67:[2,74],68:[2,74],69:[2,74],71:[2,74],73:[2,74],74:[2,74],78:[2,74],84:[2,74],85:[2,74],86:[2,74],91:[2,74],93:[2,74],102:[2,74],104:[2,74],105:[2,74],106:[2,74],110:[2,74],118:[2,74],126:[2,74],128:[2,74],129:[2,74],132:[2,74],133:[2,74],134:[2,74],135:[2,74],136:[2,74],137:[2,74]},{1:[2,29],6:[2,29],25:[2,29],26:[2,29],49:[2,29],54:[2,29],57:[2,29],66:[2,29],67:[2,29],68:[2,29],69:[2,29],71:[2,29],73:[2,29],74:[2,29],78:[2,29],84:[2,29],85:[2,29],86:[2,29],91:[2,29],93:[2,29],102:[2,29],104:[2,29],105:[2,29],106:[2,29],110:[2,29],118:[2,29],126:[2,29],128:[2,29],129:[2,29],132:[2,29],133:[2,29],134:[2,29],135:[2,29],136:[2,29],137:[2,29]},{1:[2,30],6:[2,30],25:[2,30],26:[2,30],49:[2,30],54:[2,30],57:[2,30],66:[2,30],67:[2,30],68:[2,30],69:[2,30],71:[2,30],73:[2,30],74:[2,30],78:[2,30],84:[2,30],85:[2,30],86:[2,30],91:[2,30],93:[2,30],102:[2,30],104:[2,30],105:[2,30],106:[2,30],110:[2,30],118:[2,30],126:[2,30],128:[2,30],129:[2,30],132:[2,30],133:[2,30],134:[2,30],135:[2,30],136:[2,30],137:[2,30]},{1:[2,31],6:[2,31],25:[2,31],26:[2,31],49:[2,31],54:[2,31],57:[2,31],66:[2,31],67:[2,31],68:[2,31],69:[2,31],71:[2,31],73:[2,31],74:[2,31],78:[2,31],84:[2,31],85:[2,31],86:[2,31],91:[2,31],93:[2,31],102:[2,31],104:[2,31],105:[2,31],106:[2,31],110:[2,31],118:[2,31],126:[2,31],128:[2,31],129:[2,31],132:[2,31],133:[2,31],134:[2,31],135:[2,31],136:[2,31],137:[2,31]},{1:[2,32],6:[2,32],25:[2,32],26:[2,32],49:[2,32],54:[2,32],57:[2,32],66:[2,32],67:[2,32],68:[2,32],69:[2,32],71:[2,32],73:[2,32],74:[2,32],78:[2,32],84:[2,32],85:[2,32],86:[2,32],91:[2,32],93:[2,32],102:[2,32],104:[2,32],105:[2,32],106:[2,32],110:[2,32],118:[2,32],126:[2,32],128:[2,32],129:[2,32],132:[2,32],133:[2,32],134:[2,32],135:[2,32],136:[2,32],137:[2,32]},{1:[2,33],6:[2,33],25:[2,33],26:[2,33],49:[2,33],54:[2,33],57:[2,33],66:[2,33],67:[2,33],68:[2,33],69:[2,33],71:[2,33],73:[2,33],74:[2,33],78:[2,33],84:[2,33],85:[2,33],86:[2,33],91:[2,33],93:[2,33],102:[2,33],104:[2,33],105:[2,33],106:[2,33],110:[2,33],118:[2,33],126:[2,33],128:[2,33],129:[2,33],132:[2,33],133:[2,33],134:[2,33],135:[2,33],136:[2,33],137:[2,33]},{1:[2,34],6:[2,34],25:[2,34],26:[2,34],49:[2,34],54:[2,34],57:[2,34],66:[2,34],67:[2,34],68:[2,34],69:[2,34],71:[2,34],73:[2,34],74:[2,34],78:[2,34],84:[2,34],85:[2,34],86:[2,34],91:[2,34],93:[2,34],102:[2,34],104:[2,34],105:[2,34],106:[2,34],110:[2,34],118:[2,34],126:[2,34],128:[2,34],129:[2,34],132:[2,34],133:[2,34],134:[2,34],135:[2,34],136:[2,34],137:[2,34]},{1:[2,35],6:[2,35],25:[2,35],26:[2,35],49:[2,35],54:[2,35],57:[2,35],66:[2,35],67:[2,35],68:[2,35],69:[2,35],71:[2,35],73:[2,35],74:[2,35],78:[2,35],84:[2,35],85:[2,35],86:[2,35],91:[2,35],93:[2,35],102:[2,35],104:[2,35],105:[2,35],106:[2,35],110:[2,35],118:[2,35],126:[2,35],128:[2,35],129:[2,35],132:[2,35],133:[2,35],134:[2,35],135:[2,35],136:[2,35],137:[2,35]},{4:141,7:4,8:6,9:7,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,142],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:143,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,147],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,60:148,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],87:145,88:[1,58],89:[1,59],90:[1,57],91:[1,144],94:146,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,112],6:[2,112],25:[2,112],26:[2,112],49:[2,112],54:[2,112],57:[2,112],66:[2,112],67:[2,112],68:[2,112],69:[2,112],71:[2,112],73:[2,112],74:[2,112],78:[2,112],84:[2,112],85:[2,112],86:[2,112],91:[2,112],93:[2,112],102:[2,112],104:[2,112],105:[2,112],106:[2,112],110:[2,112],118:[2,112],126:[2,112],128:[2,112],129:[2,112],132:[2,112],133:[2,112],134:[2,112],135:[2,112],136:[2,112],137:[2,112]},{1:[2,113],6:[2,113],25:[2,113],26:[2,113],27:149,28:[1,73],49:[2,113],54:[2,113],57:[2,113],66:[2,113],67:[2,113],68:[2,113],69:[2,113],71:[2,113],73:[2,113],74:[2,113],78:[2,113],84:[2,113],85:[2,113],86:[2,113],91:[2,113],93:[2,113],102:[2,113],104:[2,113],105:[2,113],106:[2,113],110:[2,113],118:[2,113],126:[2,113],128:[2,113],129:[2,113],132:[2,113],133:[2,113],134:[2,113],135:[2,113],136:[2,113],137:[2,113]},{25:[2,51]},{25:[2,52]},{1:[2,68],6:[2,68],25:[2,68],26:[2,68],40:[2,68],49:[2,68],54:[2,68],57:[2,68],66:[2,68],67:[2,68],68:[2,68],69:[2,68],71:[2,68],73:[2,68],74:[2,68],78:[2,68],80:[2,68],84:[2,68],85:[2,68],86:[2,68],91:[2,68],93:[2,68],102:[2,68],104:[2,68],105:[2,68],106:[2,68],110:[2,68],118:[2,68],126:[2,68],128:[2,68],129:[2,68],130:[2,68],131:[2,68],132:[2,68],133:[2,68],134:[2,68],135:[2,68],136:[2,68],137:[2,68],138:[2,68]},{1:[2,71],6:[2,71],25:[2,71],26:[2,71],40:[2,71],49:[2,71],54:[2,71],57:[2,71],66:[2,71],67:[2,71],68:[2,71],69:[2,71],71:[2,71],73:[2,71],74:[2,71],78:[2,71],80:[2,71],84:[2,71],85:[2,71],86:[2,71],91:[2,71],93:[2,71],102:[2,71],104:[2,71],105:[2,71],106:[2,71],110:[2,71],118:[2,71],126:[2,71],128:[2,71],129:[2,71],130:[2,71],131:[2,71],132:[2,71],133:[2,71],134:[2,71],135:[2,71],136:[2,71],137:[2,71],138:[2,71]},{8:150,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:151,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:152,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{5:153,8:154,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,5],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{27:159,28:[1,73],44:160,58:161,59:162,64:155,76:[1,70],89:[1,114],90:[1,57],113:156,114:[1,157],115:158},{112:163,116:[1,164],117:[1,165]},{6:[2,91],11:169,25:[2,91],27:170,28:[1,73],29:171,30:[1,71],31:[1,72],41:167,42:168,44:172,46:[1,46],54:[2,91],77:166,78:[2,91],89:[1,114]},{1:[2,27],6:[2,27],25:[2,27],26:[2,27],43:[2,27],49:[2,27],54:[2,27],57:[2,27],66:[2,27],67:[2,27],68:[2,27],69:[2,27],71:[2,27],73:[2,27],74:[2,27],78:[2,27],84:[2,27],85:[2,27],86:[2,27],91:[2,27],93:[2,27],102:[2,27],104:[2,27],105:[2,27],106:[2,27],110:[2,27],118:[2,27],126:[2,27],128:[2,27],129:[2,27],132:[2,27],133:[2,27],134:[2,27],135:[2,27],136:[2,27],137:[2,27]},{1:[2,28],6:[2,28],25:[2,28],26:[2,28],43:[2,28],49:[2,28],54:[2,28],57:[2,28],66:[2,28],67:[2,28],68:[2,28],69:[2,28],71:[2,28],73:[2,28],74:[2,28],78:[2,28],84:[2,28],85:[2,28],86:[2,28],91:[2,28],93:[2,28],102:[2,28],104:[2,28],105:[2,28],106:[2,28],110:[2,28],118:[2,28],126:[2,28],128:[2,28],129:[2,28],132:[2,28],133:[2,28],134:[2,28],135:[2,28],136:[2,28],137:[2,28]},{1:[2,26],6:[2,26],25:[2,26],26:[2,26],40:[2,26],43:[2,26],49:[2,26],54:[2,26],57:[2,26],66:[2,26],67:[2,26],68:[2,26],69:[2,26],71:[2,26],73:[2,26],74:[2,26],78:[2,26],80:[2,26],84:[2,26],85:[2,26],86:[2,26],91:[2,26],93:[2,26],102:[2,26],104:[2,26],105:[2,26],106:[2,26],110:[2,26],116:[2,26],117:[2,26],118:[2,26],126:[2,26],128:[2,26],129:[2,26],130:[2,26],131:[2,26],132:[2,26],133:[2,26],134:[2,26],135:[2,26],136:[2,26],137:[2,26],138:[2,26]},{1:[2,6],6:[2,6],7:173,8:6,9:7,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,26:[2,6],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],102:[2,6],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,3]},{1:[2,24],6:[2,24],25:[2,24],26:[2,24],49:[2,24],54:[2,24],57:[2,24],73:[2,24],78:[2,24],86:[2,24],91:[2,24],93:[2,24],98:[2,24],99:[2,24],102:[2,24],104:[2,24],105:[2,24],106:[2,24],110:[2,24],118:[2,24],121:[2,24],123:[2,24],126:[2,24],128:[2,24],129:[2,24],132:[2,24],133:[2,24],134:[2,24],135:[2,24],136:[2,24],137:[2,24]},{6:[1,74],26:[1,174]},{1:[2,193],6:[2,193],25:[2,193],26:[2,193],49:[2,193],54:[2,193],57:[2,193],73:[2,193],78:[2,193],86:[2,193],91:[2,193],93:[2,193],102:[2,193],104:[2,193],105:[2,193],106:[2,193],110:[2,193],118:[2,193],126:[2,193],128:[2,193],129:[2,193],132:[2,193],133:[2,193],134:[2,193],135:[2,193],136:[2,193],137:[2,193]},{8:175,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:176,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:177,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:178,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:179,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:180,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:181,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:182,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,148],6:[2,148],25:[2,148],26:[2,148],49:[2,148],54:[2,148],57:[2,148],73:[2,148],78:[2,148],86:[2,148],91:[2,148],93:[2,148],102:[2,148],104:[2,148],105:[2,148],106:[2,148],110:[2,148],118:[2,148],126:[2,148],128:[2,148],129:[2,148],132:[2,148],133:[2,148],134:[2,148],135:[2,148],136:[2,148],137:[2,148]},{1:[2,153],6:[2,153],25:[2,153],26:[2,153],49:[2,153],54:[2,153],57:[2,153],73:[2,153],78:[2,153],86:[2,153],91:[2,153],93:[2,153],102:[2,153],104:[2,153],105:[2,153],106:[2,153],110:[2,153],118:[2,153],126:[2,153],128:[2,153],129:[2,153],132:[2,153],133:[2,153],134:[2,153],135:[2,153],136:[2,153],137:[2,153]},{8:183,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,147],6:[2,147],25:[2,147],26:[2,147],49:[2,147],54:[2,147],57:[2,147],73:[2,147],78:[2,147],86:[2,147],91:[2,147],93:[2,147],102:[2,147],104:[2,147],105:[2,147],106:[2,147],110:[2,147],118:[2,147],126:[2,147],128:[2,147],129:[2,147],132:[2,147],133:[2,147],134:[2,147],135:[2,147],136:[2,147],137:[2,147]},{1:[2,152],6:[2,152],25:[2,152],26:[2,152],49:[2,152],54:[2,152],57:[2,152],73:[2,152],78:[2,152],86:[2,152],91:[2,152],93:[2,152],102:[2,152],104:[2,152],105:[2,152],106:[2,152],110:[2,152],118:[2,152],126:[2,152],128:[2,152],129:[2,152],132:[2,152],133:[2,152],134:[2,152],135:[2,152],136:[2,152],137:[2,152]},{82:184,85:[1,106]},{1:[2,69],6:[2,69],25:[2,69],26:[2,69],40:[2,69],49:[2,69],54:[2,69],57:[2,69],66:[2,69],67:[2,69],68:[2,69],69:[2,69],71:[2,69],73:[2,69],74:[2,69],78:[2,69],80:[2,69],84:[2,69],85:[2,69],86:[2,69],91:[2,69],93:[2,69],102:[2,69],104:[2,69],105:[2,69],106:[2,69],110:[2,69],118:[2,69],126:[2,69],128:[2,69],129:[2,69],130:[2,69],131:[2,69],132:[2,69],133:[2,69],134:[2,69],135:[2,69],136:[2,69],137:[2,69],138:[2,69]},{85:[2,109]},{27:185,28:[1,73]},{27:186,28:[1,73]},{1:[2,84],6:[2,84],25:[2,84],26:[2,84],27:187,28:[1,73],40:[2,84],49:[2,84],54:[2,84],57:[2,84],66:[2,84],67:[2,84],68:[2,84],69:[2,84],71:[2,84],73:[2,84],74:[2,84],78:[2,84],80:[2,84],84:[2,84],85:[2,84],86:[2,84],91:[2,84],93:[2,84],102:[2,84],104:[2,84],105:[2,84],106:[2,84],110:[2,84],118:[2,84],126:[2,84],128:[2,84],129:[2,84],130:[2,84],131:[2,84],132:[2,84],133:[2,84],134:[2,84],135:[2,84],136:[2,84],137:[2,84],138:[2,84]},{27:188,28:[1,73]},{1:[2,85],6:[2,85],25:[2,85],26:[2,85],40:[2,85],49:[2,85],54:[2,85],57:[2,85],66:[2,85],67:[2,85],68:[2,85],69:[2,85],71:[2,85],73:[2,85],74:[2,85],78:[2,85],80:[2,85],84:[2,85],85:[2,85],86:[2,85],91:[2,85],93:[2,85],102:[2,85],104:[2,85],105:[2,85],106:[2,85],110:[2,85],118:[2,85],126:[2,85],128:[2,85],129:[2,85],130:[2,85],131:[2,85],132:[2,85],133:[2,85],134:[2,85],135:[2,85],136:[2,85],137:[2,85],138:[2,85]},{8:190,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],57:[1,194],58:47,59:48,61:36,63:25,64:26,65:27,72:189,75:191,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],92:192,93:[1,193],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{70:195,71:[1,100],74:[1,101]},{82:196,85:[1,106]},{1:[2,70],6:[2,70],25:[2,70],26:[2,70],40:[2,70],49:[2,70],54:[2,70],57:[2,70],66:[2,70],67:[2,70],68:[2,70],69:[2,70],71:[2,70],73:[2,70],74:[2,70],78:[2,70],80:[2,70],84:[2,70],85:[2,70],86:[2,70],91:[2,70],93:[2,70],102:[2,70],104:[2,70],105:[2,70],106:[2,70],110:[2,70],118:[2,70],126:[2,70],128:[2,70],129:[2,70],130:[2,70],131:[2,70],132:[2,70],133:[2,70],134:[2,70],135:[2,70],136:[2,70],137:[2,70],138:[2,70]},{6:[1,198],8:197,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,199],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,107],6:[2,107],25:[2,107],26:[2,107],49:[2,107],54:[2,107],57:[2,107],66:[2,107],67:[2,107],68:[2,107],69:[2,107],71:[2,107],73:[2,107],74:[2,107],78:[2,107],84:[2,107],85:[2,107],86:[2,107],91:[2,107],93:[2,107],102:[2,107],104:[2,107],105:[2,107],106:[2,107],110:[2,107],118:[2,107],126:[2,107],128:[2,107],129:[2,107],132:[2,107],133:[2,107],134:[2,107],135:[2,107],136:[2,107],137:[2,107]},{8:202,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,147],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,60:148,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],86:[1,200],87:201,88:[1,58],89:[1,59],90:[1,57],94:146,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[2,53],25:[2,53],49:[1,203],53:205,54:[1,204]},{6:[2,56],25:[2,56],26:[2,56],49:[2,56],54:[2,56]},{6:[2,60],25:[2,60],26:[2,60],40:[1,207],49:[2,60],54:[2,60],57:[1,206]},{6:[2,63],25:[2,63],26:[2,63],40:[2,63],49:[2,63],54:[2,63],57:[2,63]},{6:[2,64],25:[2,64],26:[2,64],40:[2,64],49:[2,64],54:[2,64],57:[2,64]},{6:[2,65],25:[2,65],26:[2,65],40:[2,65],49:[2,65],54:[2,65],57:[2,65]},{6:[2,66],25:[2,66],26:[2,66],40:[2,66],49:[2,66],54:[2,66],57:[2,66]},{27:149,28:[1,73]},{8:202,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,147],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,60:148,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],87:145,88:[1,58],89:[1,59],90:[1,57],91:[1,144],94:146,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,50],6:[2,50],25:[2,50],26:[2,50],49:[2,50],54:[2,50],57:[2,50],73:[2,50],78:[2,50],86:[2,50],91:[2,50],93:[2,50],102:[2,50],104:[2,50],105:[2,50],106:[2,50],110:[2,50],118:[2,50],126:[2,50],128:[2,50],129:[2,50],132:[2,50],133:[2,50],134:[2,50],135:[2,50],136:[2,50],137:[2,50]},{1:[2,186],6:[2,186],25:[2,186],26:[2,186],49:[2,186],54:[2,186],57:[2,186],73:[2,186],78:[2,186],86:[2,186],91:[2,186],93:[2,186],102:[2,186],103:87,104:[2,186],105:[2,186],106:[2,186],109:88,110:[2,186],111:69,118:[2,186],126:[2,186],128:[2,186],129:[2,186],132:[1,78],133:[2,186],134:[2,186],135:[2,186],136:[2,186],137:[2,186]},{103:90,104:[1,65],106:[1,66],109:91,110:[1,68],111:69,126:[1,89]},{1:[2,187],6:[2,187],25:[2,187],26:[2,187],49:[2,187],54:[2,187],57:[2,187],73:[2,187],78:[2,187],86:[2,187],91:[2,187],93:[2,187],102:[2,187],103:87,104:[2,187],105:[2,187],106:[2,187],109:88,110:[2,187],111:69,118:[2,187],126:[2,187],128:[2,187],129:[2,187],132:[1,78],133:[2,187],134:[2,187],135:[2,187],136:[2,187],137:[2,187]},{1:[2,188],6:[2,188],25:[2,188],26:[2,188],49:[2,188],54:[2,188],57:[2,188],73:[2,188],78:[2,188],86:[2,188],91:[2,188],93:[2,188],102:[2,188],103:87,104:[2,188],105:[2,188],106:[2,188],109:88,110:[2,188],111:69,118:[2,188],126:[2,188],128:[2,188],129:[2,188],132:[1,78],133:[2,188],134:[2,188],135:[2,188],136:[2,188],137:[2,188]},{1:[2,189],6:[2,189],25:[2,189],26:[2,189],49:[2,189],54:[2,189],57:[2,189],66:[2,72],67:[2,72],68:[2,72],69:[2,72],71:[2,72],73:[2,189],74:[2,72],78:[2,189],84:[2,72],85:[2,72],86:[2,189],91:[2,189],93:[2,189],102:[2,189],104:[2,189],105:[2,189],106:[2,189],110:[2,189],118:[2,189],126:[2,189],128:[2,189],129:[2,189],132:[2,189],133:[2,189],134:[2,189],135:[2,189],136:[2,189],137:[2,189]},{62:93,66:[1,95],67:[1,96],68:[1,97],69:[1,98],70:99,71:[1,100],74:[1,101],81:92,84:[1,94],85:[2,108]},{62:103,66:[1,95],67:[1,96],68:[1,97],69:[1,98],70:99,71:[1,100],74:[1,101],81:102,84:[1,94],85:[2,108]},{66:[2,75],67:[2,75],68:[2,75],69:[2,75],71:[2,75],74:[2,75],84:[2,75],85:[2,75]},{1:[2,190],6:[2,190],25:[2,190],26:[2,190],49:[2,190],54:[2,190],57:[2,190],66:[2,72],67:[2,72],68:[2,72],69:[2,72],71:[2,72],73:[2,190],74:[2,72],78:[2,190],84:[2,72],85:[2,72],86:[2,190],91:[2,190],93:[2,190],102:[2,190],104:[2,190],105:[2,190],106:[2,190],110:[2,190],118:[2,190],126:[2,190],128:[2,190],129:[2,190],132:[2,190],133:[2,190],134:[2,190],135:[2,190],136:[2,190],137:[2,190]},{1:[2,191],6:[2,191],25:[2,191],26:[2,191],49:[2,191],54:[2,191],57:[2,191],73:[2,191],78:[2,191],86:[2,191],91:[2,191],93:[2,191],102:[2,191],104:[2,191],105:[2,191],106:[2,191],110:[2,191],118:[2,191],126:[2,191],128:[2,191],129:[2,191],132:[2,191],133:[2,191],134:[2,191],135:[2,191],136:[2,191],137:[2,191]},{1:[2,192],6:[2,192],25:[2,192],26:[2,192],49:[2,192],54:[2,192],57:[2,192],73:[2,192],78:[2,192],86:[2,192],91:[2,192],93:[2,192],102:[2,192],104:[2,192],105:[2,192],106:[2,192],110:[2,192],118:[2,192],126:[2,192],128:[2,192],129:[2,192],132:[2,192],133:[2,192],134:[2,192],135:[2,192],136:[2,192],137:[2,192]},{6:[1,210],8:208,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,209],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:211,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{5:212,25:[1,5],125:[1,213]},{1:[2,133],6:[2,133],25:[2,133],26:[2,133],49:[2,133],54:[2,133],57:[2,133],73:[2,133],78:[2,133],86:[2,133],91:[2,133],93:[2,133],97:214,98:[1,215],99:[1,216],102:[2,133],104:[2,133],105:[2,133],106:[2,133],110:[2,133],118:[2,133],126:[2,133],128:[2,133],129:[2,133],132:[2,133],133:[2,133],134:[2,133],135:[2,133],136:[2,133],137:[2,133]},{1:[2,146],6:[2,146],25:[2,146],26:[2,146],49:[2,146],54:[2,146],57:[2,146],73:[2,146],78:[2,146],86:[2,146],91:[2,146],93:[2,146],102:[2,146],104:[2,146],105:[2,146],106:[2,146],110:[2,146],118:[2,146],126:[2,146],128:[2,146],129:[2,146],132:[2,146],133:[2,146],134:[2,146],135:[2,146],136:[2,146],137:[2,146]},{1:[2,154],6:[2,154],25:[2,154],26:[2,154],49:[2,154],54:[2,154],57:[2,154],73:[2,154],78:[2,154],86:[2,154],91:[2,154],93:[2,154],102:[2,154],104:[2,154],105:[2,154],106:[2,154],110:[2,154],118:[2,154],126:[2,154],128:[2,154],129:[2,154],132:[2,154],133:[2,154],134:[2,154],135:[2,154],136:[2,154],137:[2,154]},{25:[1,217],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{120:218,122:219,123:[1,220]},{1:[2,97],6:[2,97],25:[2,97],26:[2,97],49:[2,97],54:[2,97],57:[2,97],73:[2,97],78:[2,97],86:[2,97],91:[2,97],93:[2,97],102:[2,97],104:[2,97],105:[2,97],106:[2,97],110:[2,97],118:[2,97],126:[2,97],128:[2,97],129:[2,97],132:[2,97],133:[2,97],134:[2,97],135:[2,97],136:[2,97],137:[2,97]},{8:221,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,100],5:222,6:[2,100],25:[1,5],26:[2,100],49:[2,100],54:[2,100],57:[2,100],66:[2,72],67:[2,72],68:[2,72],69:[2,72],71:[2,72],73:[2,100],74:[2,72],78:[2,100],80:[1,223],84:[2,72],85:[2,72],86:[2,100],91:[2,100],93:[2,100],102:[2,100],104:[2,100],105:[2,100],106:[2,100],110:[2,100],118:[2,100],126:[2,100],128:[2,100],129:[2,100],132:[2,100],133:[2,100],134:[2,100],135:[2,100],136:[2,100],137:[2,100]},{1:[2,139],6:[2,139],25:[2,139],26:[2,139],49:[2,139],54:[2,139],57:[2,139],73:[2,139],78:[2,139],86:[2,139],91:[2,139],93:[2,139],102:[2,139],103:87,104:[2,139],105:[2,139],106:[2,139],109:88,110:[2,139],111:69,118:[2,139],126:[2,139],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,46],6:[2,46],26:[2,46],102:[2,46],103:87,104:[2,46],106:[2,46],109:88,110:[2,46],111:69,126:[2,46],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{6:[1,74],102:[1,224]},{4:225,7:4,8:6,9:7,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[2,129],25:[2,129],54:[2,129],57:[1,227],91:[2,129],92:226,93:[1,193],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,115],6:[2,115],25:[2,115],26:[2,115],40:[2,115],49:[2,115],54:[2,115],57:[2,115],66:[2,115],67:[2,115],68:[2,115],69:[2,115],71:[2,115],73:[2,115],74:[2,115],78:[2,115],84:[2,115],85:[2,115],86:[2,115],91:[2,115],93:[2,115],102:[2,115],104:[2,115],105:[2,115],106:[2,115],110:[2,115],116:[2,115],117:[2,115],118:[2,115],126:[2,115],128:[2,115],129:[2,115],132:[2,115],133:[2,115],134:[2,115],135:[2,115],136:[2,115],137:[2,115]},{6:[2,53],25:[2,53],53:228,54:[1,229],91:[2,53]},{6:[2,124],25:[2,124],26:[2,124],54:[2,124],86:[2,124],91:[2,124]},{8:202,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,147],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,60:148,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],87:230,88:[1,58],89:[1,59],90:[1,57],94:146,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[2,130],25:[2,130],26:[2,130],54:[2,130],86:[2,130],91:[2,130]},{1:[2,114],6:[2,114],25:[2,114],26:[2,114],40:[2,114],43:[2,114],49:[2,114],54:[2,114],57:[2,114],66:[2,114],67:[2,114],68:[2,114],69:[2,114],71:[2,114],73:[2,114],74:[2,114],78:[2,114],80:[2,114],84:[2,114],85:[2,114],86:[2,114],91:[2,114],93:[2,114],102:[2,114],104:[2,114],105:[2,114],106:[2,114],110:[2,114],116:[2,114],117:[2,114],118:[2,114],126:[2,114],128:[2,114],129:[2,114],130:[2,114],131:[2,114],132:[2,114],133:[2,114],134:[2,114],135:[2,114],136:[2,114],137:[2,114],138:[2,114]},{5:231,25:[1,5],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,142],6:[2,142],25:[2,142],26:[2,142],49:[2,142],54:[2,142],57:[2,142],73:[2,142],78:[2,142],86:[2,142],91:[2,142],93:[2,142],102:[2,142],103:87,104:[1,65],105:[1,232],106:[1,66],109:88,110:[1,68],111:69,118:[2,142],126:[2,142],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,144],6:[2,144],25:[2,144],26:[2,144],49:[2,144],54:[2,144],57:[2,144],73:[2,144],78:[2,144],86:[2,144],91:[2,144],93:[2,144],102:[2,144],103:87,104:[1,65],105:[1,233],106:[1,66],109:88,110:[1,68],111:69,118:[2,144],126:[2,144],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,150],6:[2,150],25:[2,150],26:[2,150],49:[2,150],54:[2,150],57:[2,150],73:[2,150],78:[2,150],86:[2,150],91:[2,150],93:[2,150],102:[2,150],104:[2,150],105:[2,150],106:[2,150],110:[2,150],118:[2,150],126:[2,150],128:[2,150],129:[2,150],132:[2,150],133:[2,150],134:[2,150],135:[2,150],136:[2,150],137:[2,150]},{1:[2,151],6:[2,151],25:[2,151],26:[2,151],49:[2,151],54:[2,151],57:[2,151],73:[2,151],78:[2,151],86:[2,151],91:[2,151],93:[2,151],102:[2,151],103:87,104:[1,65],105:[2,151],106:[1,66],109:88,110:[1,68],111:69,118:[2,151],126:[2,151],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,155],6:[2,155],25:[2,155],26:[2,155],49:[2,155],54:[2,155],57:[2,155],73:[2,155],78:[2,155],86:[2,155],91:[2,155],93:[2,155],102:[2,155],104:[2,155],105:[2,155],106:[2,155],110:[2,155],118:[2,155],126:[2,155],128:[2,155],129:[2,155],132:[2,155],133:[2,155],134:[2,155],135:[2,155],136:[2,155],137:[2,155]},{116:[2,157],117:[2,157]},{27:159,28:[1,73],44:160,58:161,59:162,76:[1,70],89:[1,114],90:[1,115],113:234,115:158},{54:[1,235],116:[2,163],117:[2,163]},{54:[2,159],116:[2,159],117:[2,159]},{54:[2,160],116:[2,160],117:[2,160]},{54:[2,161],116:[2,161],117:[2,161]},{54:[2,162],116:[2,162],117:[2,162]},{1:[2,156],6:[2,156],25:[2,156],26:[2,156],49:[2,156],54:[2,156],57:[2,156],73:[2,156],78:[2,156],86:[2,156],91:[2,156],93:[2,156],102:[2,156],104:[2,156],105:[2,156],106:[2,156],110:[2,156],118:[2,156],126:[2,156],128:[2,156],129:[2,156],132:[2,156],133:[2,156],134:[2,156],135:[2,156],136:[2,156],137:[2,156]},{8:236,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:237,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[2,53],25:[2,53],53:238,54:[1,239],78:[2,53]},{6:[2,92],25:[2,92],26:[2,92],54:[2,92],78:[2,92]},{6:[2,39],25:[2,39],26:[2,39],43:[1,240],54:[2,39],78:[2,39]},{6:[2,42],25:[2,42],26:[2,42],54:[2,42],78:[2,42]},{6:[2,43],25:[2,43],26:[2,43],43:[2,43],54:[2,43],78:[2,43]},{6:[2,44],25:[2,44],26:[2,44],43:[2,44],54:[2,44],78:[2,44]},{6:[2,45],25:[2,45],26:[2,45],43:[2,45],54:[2,45],78:[2,45]},{1:[2,5],6:[2,5],26:[2,5],102:[2,5]},{1:[2,25],6:[2,25],25:[2,25],26:[2,25],49:[2,25],54:[2,25],57:[2,25],73:[2,25],78:[2,25],86:[2,25],91:[2,25],93:[2,25],98:[2,25],99:[2,25],102:[2,25],104:[2,25],105:[2,25],106:[2,25],110:[2,25],118:[2,25],121:[2,25],123:[2,25],126:[2,25],128:[2,25],129:[2,25],132:[2,25],133:[2,25],134:[2,25],135:[2,25],136:[2,25],137:[2,25]},{1:[2,194],6:[2,194],25:[2,194],26:[2,194],49:[2,194],54:[2,194],57:[2,194],73:[2,194],78:[2,194],86:[2,194],91:[2,194],93:[2,194],102:[2,194],103:87,104:[2,194],105:[2,194],106:[2,194],109:88,110:[2,194],111:69,118:[2,194],126:[2,194],128:[2,194],129:[2,194],132:[1,78],133:[1,81],134:[2,194],135:[2,194],136:[2,194],137:[2,194]},{1:[2,195],6:[2,195],25:[2,195],26:[2,195],49:[2,195],54:[2,195],57:[2,195],73:[2,195],78:[2,195],86:[2,195],91:[2,195],93:[2,195],102:[2,195],103:87,104:[2,195],105:[2,195],106:[2,195],109:88,110:[2,195],111:69,118:[2,195],126:[2,195],128:[2,195],129:[2,195],132:[1,78],133:[1,81],134:[2,195],135:[2,195],136:[2,195],137:[2,195]},{1:[2,196],6:[2,196],25:[2,196],26:[2,196],49:[2,196],54:[2,196],57:[2,196],73:[2,196],78:[2,196],86:[2,196],91:[2,196],93:[2,196],102:[2,196],103:87,104:[2,196],105:[2,196],106:[2,196],109:88,110:[2,196],111:69,118:[2,196],126:[2,196],128:[2,196],129:[2,196],132:[1,78],133:[2,196],134:[2,196],135:[2,196],136:[2,196],137:[2,196]},{1:[2,197],6:[2,197],25:[2,197],26:[2,197],49:[2,197],54:[2,197],57:[2,197],73:[2,197],78:[2,197],86:[2,197],91:[2,197],93:[2,197],102:[2,197],103:87,104:[2,197],105:[2,197],106:[2,197],109:88,110:[2,197],111:69,118:[2,197],126:[2,197],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[2,197],135:[2,197],136:[2,197],137:[2,197]},{1:[2,198],6:[2,198],25:[2,198],26:[2,198],49:[2,198],54:[2,198],57:[2,198],73:[2,198],78:[2,198],86:[2,198],91:[2,198],93:[2,198],102:[2,198],103:87,104:[2,198],105:[2,198],106:[2,198],109:88,110:[2,198],111:69,118:[2,198],126:[2,198],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[2,198],136:[2,198],137:[1,85]},{1:[2,199],6:[2,199],25:[2,199],26:[2,199],49:[2,199],54:[2,199],57:[2,199],73:[2,199],78:[2,199],86:[2,199],91:[2,199],93:[2,199],102:[2,199],103:87,104:[2,199],105:[2,199],106:[2,199],109:88,110:[2,199],111:69,118:[2,199],126:[2,199],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[2,199],137:[1,85]},{1:[2,200],6:[2,200],25:[2,200],26:[2,200],49:[2,200],54:[2,200],57:[2,200],73:[2,200],78:[2,200],86:[2,200],91:[2,200],93:[2,200],102:[2,200],103:87,104:[2,200],105:[2,200],106:[2,200],109:88,110:[2,200],111:69,118:[2,200],126:[2,200],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[2,200],136:[2,200],137:[2,200]},{1:[2,185],6:[2,185],25:[2,185],26:[2,185],49:[2,185],54:[2,185],57:[2,185],73:[2,185],78:[2,185],86:[2,185],91:[2,185],93:[2,185],102:[2,185],103:87,104:[1,65],105:[2,185],106:[1,66],109:88,110:[1,68],111:69,118:[2,185],126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,184],6:[2,184],25:[2,184],26:[2,184],49:[2,184],54:[2,184],57:[2,184],73:[2,184],78:[2,184],86:[2,184],91:[2,184],93:[2,184],102:[2,184],103:87,104:[1,65],105:[2,184],106:[1,66],109:88,110:[1,68],111:69,118:[2,184],126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,104],6:[2,104],25:[2,104],26:[2,104],49:[2,104],54:[2,104],57:[2,104],66:[2,104],67:[2,104],68:[2,104],69:[2,104],71:[2,104],73:[2,104],74:[2,104],78:[2,104],84:[2,104],85:[2,104],86:[2,104],91:[2,104],93:[2,104],102:[2,104],104:[2,104],105:[2,104],106:[2,104],110:[2,104],118:[2,104],126:[2,104],128:[2,104],129:[2,104],132:[2,104],133:[2,104],134:[2,104],135:[2,104],136:[2,104],137:[2,104]},{1:[2,80],6:[2,80],25:[2,80],26:[2,80],40:[2,80],49:[2,80],54:[2,80],57:[2,80],66:[2,80],67:[2,80],68:[2,80],69:[2,80],71:[2,80],73:[2,80],74:[2,80],78:[2,80],80:[2,80],84:[2,80],85:[2,80],86:[2,80],91:[2,80],93:[2,80],102:[2,80],104:[2,80],105:[2,80],106:[2,80],110:[2,80],118:[2,80],126:[2,80],128:[2,80],129:[2,80],130:[2,80],131:[2,80],132:[2,80],133:[2,80],134:[2,80],135:[2,80],136:[2,80],137:[2,80],138:[2,80]},{1:[2,81],6:[2,81],25:[2,81],26:[2,81],40:[2,81],49:[2,81],54:[2,81],57:[2,81],66:[2,81],67:[2,81],68:[2,81],69:[2,81],71:[2,81],73:[2,81],74:[2,81],78:[2,81],80:[2,81],84:[2,81],85:[2,81],86:[2,81],91:[2,81],93:[2,81],102:[2,81],104:[2,81],105:[2,81],106:[2,81],110:[2,81],118:[2,81],126:[2,81],128:[2,81],129:[2,81],130:[2,81],131:[2,81],132:[2,81],133:[2,81],134:[2,81],135:[2,81],136:[2,81],137:[2,81],138:[2,81]},{1:[2,82],6:[2,82],25:[2,82],26:[2,82],40:[2,82],49:[2,82],54:[2,82],57:[2,82],66:[2,82],67:[2,82],68:[2,82],69:[2,82],71:[2,82],73:[2,82],74:[2,82],78:[2,82],80:[2,82],84:[2,82],85:[2,82],86:[2,82],91:[2,82],93:[2,82],102:[2,82],104:[2,82],105:[2,82],106:[2,82],110:[2,82],118:[2,82],126:[2,82],128:[2,82],129:[2,82],130:[2,82],131:[2,82],132:[2,82],133:[2,82],134:[2,82],135:[2,82],136:[2,82],137:[2,82],138:[2,82]},{1:[2,83],6:[2,83],25:[2,83],26:[2,83],40:[2,83],49:[2,83],54:[2,83],57:[2,83],66:[2,83],67:[2,83],68:[2,83],69:[2,83],71:[2,83],73:[2,83],74:[2,83],78:[2,83],80:[2,83],84:[2,83],85:[2,83],86:[2,83],91:[2,83],93:[2,83],102:[2,83],104:[2,83],105:[2,83],106:[2,83],110:[2,83],118:[2,83],126:[2,83],128:[2,83],129:[2,83],130:[2,83],131:[2,83],132:[2,83],133:[2,83],134:[2,83],135:[2,83],136:[2,83],137:[2,83],138:[2,83]},{73:[1,241]},{57:[1,194],73:[2,88],92:242,93:[1,193],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{73:[2,89]},{8:243,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,73:[2,123],76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{12:[2,117],28:[2,117],30:[2,117],31:[2,117],33:[2,117],34:[2,117],35:[2,117],36:[2,117],37:[2,117],38:[2,117],45:[2,117],46:[2,117],47:[2,117],51:[2,117],52:[2,117],73:[2,117],76:[2,117],79:[2,117],83:[2,117],88:[2,117],89:[2,117],90:[2,117],96:[2,117],100:[2,117],101:[2,117],104:[2,117],106:[2,117],108:[2,117],110:[2,117],119:[2,117],125:[2,117],127:[2,117],128:[2,117],129:[2,117],130:[2,117],131:[2,117]},{12:[2,118],28:[2,118],30:[2,118],31:[2,118],33:[2,118],34:[2,118],35:[2,118],36:[2,118],37:[2,118],38:[2,118],45:[2,118],46:[2,118],47:[2,118],51:[2,118],52:[2,118],73:[2,118],76:[2,118],79:[2,118],83:[2,118],88:[2,118],89:[2,118],90:[2,118],96:[2,118],100:[2,118],101:[2,118],104:[2,118],106:[2,118],108:[2,118],110:[2,118],119:[2,118],125:[2,118],127:[2,118],128:[2,118],129:[2,118],130:[2,118],131:[2,118]},{1:[2,87],6:[2,87],25:[2,87],26:[2,87],40:[2,87],49:[2,87],54:[2,87],57:[2,87],66:[2,87],67:[2,87],68:[2,87],69:[2,87],71:[2,87],73:[2,87],74:[2,87],78:[2,87],80:[2,87],84:[2,87],85:[2,87],86:[2,87],91:[2,87],93:[2,87],102:[2,87],104:[2,87],105:[2,87],106:[2,87],110:[2,87],118:[2,87],126:[2,87],128:[2,87],129:[2,87],130:[2,87],131:[2,87],132:[2,87],133:[2,87],134:[2,87],135:[2,87],136:[2,87],137:[2,87],138:[2,87]},{1:[2,105],6:[2,105],25:[2,105],26:[2,105],49:[2,105],54:[2,105],57:[2,105],66:[2,105],67:[2,105],68:[2,105],69:[2,105],71:[2,105],73:[2,105],74:[2,105],78:[2,105],84:[2,105],85:[2,105],86:[2,105],91:[2,105],93:[2,105],102:[2,105],104:[2,105],105:[2,105],106:[2,105],110:[2,105],118:[2,105],126:[2,105],128:[2,105],129:[2,105],132:[2,105],133:[2,105],134:[2,105],135:[2,105],136:[2,105],137:[2,105]},{1:[2,36],6:[2,36],25:[2,36],26:[2,36],49:[2,36],54:[2,36],57:[2,36],73:[2,36],78:[2,36],86:[2,36],91:[2,36],93:[2,36],102:[2,36],103:87,104:[2,36],105:[2,36],106:[2,36],109:88,110:[2,36],111:69,118:[2,36],126:[2,36],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{8:244,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:245,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,110],6:[2,110],25:[2,110],26:[2,110],49:[2,110],54:[2,110],57:[2,110],66:[2,110],67:[2,110],68:[2,110],69:[2,110],71:[2,110],73:[2,110],74:[2,110],78:[2,110],84:[2,110],85:[2,110],86:[2,110],91:[2,110],93:[2,110],102:[2,110],104:[2,110],105:[2,110],106:[2,110],110:[2,110],118:[2,110],126:[2,110],128:[2,110],129:[2,110],132:[2,110],133:[2,110],134:[2,110],135:[2,110],136:[2,110],137:[2,110]},{6:[2,53],25:[2,53],53:246,54:[1,229],86:[2,53]},{6:[2,129],25:[2,129],26:[2,129],54:[2,129],57:[1,247],86:[2,129],91:[2,129],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{50:248,51:[1,60],52:[1,61]},{6:[2,54],25:[2,54],26:[2,54],27:110,28:[1,73],44:111,55:249,56:109,58:112,59:113,76:[1,70],89:[1,114],90:[1,115]},{6:[1,250],25:[1,251]},{6:[2,61],25:[2,61],26:[2,61],49:[2,61],54:[2,61]},{8:252,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,201],6:[2,201],25:[2,201],26:[2,201],49:[2,201],54:[2,201],57:[2,201],73:[2,201],78:[2,201],86:[2,201],91:[2,201],93:[2,201],102:[2,201],103:87,104:[2,201],105:[2,201],106:[2,201],109:88,110:[2,201],111:69,118:[2,201],126:[2,201],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{8:253,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:254,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,204],6:[2,204],25:[2,204],26:[2,204],49:[2,204],54:[2,204],57:[2,204],73:[2,204],78:[2,204],86:[2,204],91:[2,204],93:[2,204],102:[2,204],103:87,104:[2,204],105:[2,204],106:[2,204],109:88,110:[2,204],111:69,118:[2,204],126:[2,204],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,183],6:[2,183],25:[2,183],26:[2,183],49:[2,183],54:[2,183],57:[2,183],73:[2,183],78:[2,183],86:[2,183],91:[2,183],93:[2,183],102:[2,183],104:[2,183],105:[2,183],106:[2,183],110:[2,183],118:[2,183],126:[2,183],128:[2,183],129:[2,183],132:[2,183],133:[2,183],134:[2,183],135:[2,183],136:[2,183],137:[2,183]},{8:255,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,134],6:[2,134],25:[2,134],26:[2,134],49:[2,134],54:[2,134],57:[2,134],73:[2,134],78:[2,134],86:[2,134],91:[2,134],93:[2,134],98:[1,256],102:[2,134],104:[2,134],105:[2,134],106:[2,134],110:[2,134],118:[2,134],126:[2,134],128:[2,134],129:[2,134],132:[2,134],133:[2,134],134:[2,134],135:[2,134],136:[2,134],137:[2,134]},{5:257,25:[1,5]},{27:258,28:[1,73],59:259,76:[1,70]},{120:260,122:219,123:[1,220]},{26:[1,261],121:[1,262],122:263,123:[1,220]},{26:[2,176],121:[2,176],123:[2,176]},{8:265,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],95:264,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,98],5:266,6:[2,98],25:[1,5],26:[2,98],49:[2,98],54:[2,98],57:[2,98],73:[2,98],78:[2,98],86:[2,98],91:[2,98],93:[2,98],102:[2,98],103:87,104:[1,65],105:[2,98],106:[1,66],109:88,110:[1,68],111:69,118:[2,98],126:[2,98],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,101],6:[2,101],25:[2,101],26:[2,101],49:[2,101],54:[2,101],57:[2,101],73:[2,101],78:[2,101],86:[2,101],91:[2,101],93:[2,101],102:[2,101],104:[2,101],105:[2,101],106:[2,101],110:[2,101],118:[2,101],126:[2,101],128:[2,101],129:[2,101],132:[2,101],133:[2,101],134:[2,101],135:[2,101],136:[2,101],137:[2,101]},{8:267,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,140],6:[2,140],25:[2,140],26:[2,140],49:[2,140],54:[2,140],57:[2,140],66:[2,140],67:[2,140],68:[2,140],69:[2,140],71:[2,140],73:[2,140],74:[2,140],78:[2,140],84:[2,140],85:[2,140],86:[2,140],91:[2,140],93:[2,140],102:[2,140],104:[2,140],105:[2,140],106:[2,140],110:[2,140],118:[2,140],126:[2,140],128:[2,140],129:[2,140],132:[2,140],133:[2,140],134:[2,140],135:[2,140],136:[2,140],137:[2,140]},{6:[1,74],26:[1,268]},{8:269,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[2,67],12:[2,118],25:[2,67],28:[2,118],30:[2,118],31:[2,118],33:[2,118],34:[2,118],35:[2,118],36:[2,118],37:[2,118],38:[2,118],45:[2,118],46:[2,118],47:[2,118],51:[2,118],52:[2,118],54:[2,67],76:[2,118],79:[2,118],83:[2,118],88:[2,118],89:[2,118],90:[2,118],91:[2,67],96:[2,118],100:[2,118],101:[2,118],104:[2,118],106:[2,118],108:[2,118],110:[2,118],119:[2,118],125:[2,118],127:[2,118],128:[2,118],129:[2,118],130:[2,118],131:[2,118]},{6:[1,271],25:[1,272],91:[1,270]},{6:[2,54],8:202,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[2,54],26:[2,54],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,60:148,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],86:[2,54],88:[1,58],89:[1,59],90:[1,57],91:[2,54],94:273,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[2,53],25:[2,53],26:[2,53],53:274,54:[1,229]},{1:[2,180],6:[2,180],25:[2,180],26:[2,180],49:[2,180],54:[2,180],57:[2,180],73:[2,180],78:[2,180],86:[2,180],91:[2,180],93:[2,180],102:[2,180],104:[2,180],105:[2,180],106:[2,180],110:[2,180],118:[2,180],121:[2,180],126:[2,180],128:[2,180],129:[2,180],132:[2,180],133:[2,180],134:[2,180],135:[2,180],136:[2,180],137:[2,180]},{8:275,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:276,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{116:[2,158],117:[2,158]},{27:159,28:[1,73],44:160,58:161,59:162,76:[1,70],89:[1,114],90:[1,115],115:277},{1:[2,165],6:[2,165],25:[2,165],26:[2,165],49:[2,165],54:[2,165],57:[2,165],73:[2,165],78:[2,165],86:[2,165],91:[2,165],93:[2,165],102:[2,165],103:87,104:[2,165],105:[1,278],106:[2,165],109:88,110:[2,165],111:69,118:[1,279],126:[2,165],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,166],6:[2,166],25:[2,166],26:[2,166],49:[2,166],54:[2,166],57:[2,166],73:[2,166],78:[2,166],86:[2,166],91:[2,166],93:[2,166],102:[2,166],103:87,104:[2,166],105:[1,280],106:[2,166],109:88,110:[2,166],111:69,118:[2,166],126:[2,166],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{6:[1,282],25:[1,283],78:[1,281]},{6:[2,54],11:169,25:[2,54],26:[2,54],27:170,28:[1,73],29:171,30:[1,71],31:[1,72],41:284,42:168,44:172,46:[1,46],78:[2,54],89:[1,114]},{8:285,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,286],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,86],6:[2,86],25:[2,86],26:[2,86],40:[2,86],49:[2,86],54:[2,86],57:[2,86],66:[2,86],67:[2,86],68:[2,86],69:[2,86],71:[2,86],73:[2,86],74:[2,86],78:[2,86],80:[2,86],84:[2,86],85:[2,86],86:[2,86],91:[2,86],93:[2,86],102:[2,86],104:[2,86],105:[2,86],106:[2,86],110:[2,86],118:[2,86],126:[2,86],128:[2,86],129:[2,86],130:[2,86],131:[2,86],132:[2,86],133:[2,86],134:[2,86],135:[2,86],136:[2,86],137:[2,86],138:[2,86]},{8:287,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,73:[2,121],76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{73:[2,122],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,37],6:[2,37],25:[2,37],26:[2,37],49:[2,37],54:[2,37],57:[2,37],73:[2,37],78:[2,37],86:[2,37],91:[2,37],93:[2,37],102:[2,37],103:87,104:[2,37],105:[2,37],106:[2,37],109:88,110:[2,37],111:69,118:[2,37],126:[2,37],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{26:[1,288],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{6:[1,271],25:[1,272],86:[1,289]},{6:[2,67],25:[2,67],26:[2,67],54:[2,67],86:[2,67],91:[2,67]},{5:290,25:[1,5]},{6:[2,57],25:[2,57],26:[2,57],49:[2,57],54:[2,57]},{27:110,28:[1,73],44:111,55:291,56:109,58:112,59:113,76:[1,70],89:[1,114],90:[1,115]},{6:[2,55],25:[2,55],26:[2,55],27:110,28:[1,73],44:111,48:292,54:[2,55],55:108,56:109,58:112,59:113,76:[1,70],89:[1,114],90:[1,115]},{6:[2,62],25:[2,62],26:[2,62],49:[2,62],54:[2,62],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{26:[1,293],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,203],6:[2,203],25:[2,203],26:[2,203],49:[2,203],54:[2,203],57:[2,203],73:[2,203],78:[2,203],86:[2,203],91:[2,203],93:[2,203],102:[2,203],103:87,104:[2,203],105:[2,203],106:[2,203],109:88,110:[2,203],111:69,118:[2,203],126:[2,203],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{5:294,25:[1,5],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{5:295,25:[1,5]},{1:[2,135],6:[2,135],25:[2,135],26:[2,135],49:[2,135],54:[2,135],57:[2,135],73:[2,135],78:[2,135],86:[2,135],91:[2,135],93:[2,135],102:[2,135],104:[2,135],105:[2,135],106:[2,135],110:[2,135],118:[2,135],126:[2,135],128:[2,135],129:[2,135],132:[2,135],133:[2,135],134:[2,135],135:[2,135],136:[2,135],137:[2,135]},{5:296,25:[1,5]},{5:297,25:[1,5]},{26:[1,298],121:[1,299],122:263,123:[1,220]},{1:[2,174],6:[2,174],25:[2,174],26:[2,174],49:[2,174],54:[2,174],57:[2,174],73:[2,174],78:[2,174],86:[2,174],91:[2,174],93:[2,174],102:[2,174],104:[2,174],105:[2,174],106:[2,174],110:[2,174],118:[2,174],126:[2,174],128:[2,174],129:[2,174],132:[2,174],133:[2,174],134:[2,174],135:[2,174],136:[2,174],137:[2,174]},{5:300,25:[1,5]},{26:[2,177],121:[2,177],123:[2,177]},{5:301,25:[1,5],54:[1,302]},{25:[2,131],54:[2,131],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,99],6:[2,99],25:[2,99],26:[2,99],49:[2,99],54:[2,99],57:[2,99],73:[2,99],78:[2,99],86:[2,99],91:[2,99],93:[2,99],102:[2,99],104:[2,99],105:[2,99],106:[2,99],110:[2,99],118:[2,99],126:[2,99],128:[2,99],129:[2,99],132:[2,99],133:[2,99],134:[2,99],135:[2,99],136:[2,99],137:[2,99]},{1:[2,102],5:303,6:[2,102],25:[1,5],26:[2,102],49:[2,102],54:[2,102],57:[2,102],73:[2,102],78:[2,102],86:[2,102],91:[2,102],93:[2,102],102:[2,102],103:87,104:[1,65],105:[2,102],106:[1,66],109:88,110:[1,68],111:69,118:[2,102],126:[2,102],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{102:[1,304]},{91:[1,305],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,116],6:[2,116],25:[2,116],26:[2,116],40:[2,116],49:[2,116],54:[2,116],57:[2,116],66:[2,116],67:[2,116],68:[2,116],69:[2,116],71:[2,116],73:[2,116],74:[2,116],78:[2,116],84:[2,116],85:[2,116],86:[2,116],91:[2,116],93:[2,116],102:[2,116],104:[2,116],105:[2,116],106:[2,116],110:[2,116],116:[2,116],117:[2,116],118:[2,116],126:[2,116],128:[2,116],129:[2,116],132:[2,116],133:[2,116],134:[2,116],135:[2,116],136:[2,116],137:[2,116]},{8:202,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,60:148,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],94:306,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:202,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,25:[1,147],27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,60:148,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],87:307,88:[1,58],89:[1,59],90:[1,57],94:146,96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[2,125],25:[2,125],26:[2,125],54:[2,125],86:[2,125],91:[2,125]},{6:[1,271],25:[1,272],26:[1,308]},{1:[2,143],6:[2,143],25:[2,143],26:[2,143],49:[2,143],54:[2,143],57:[2,143],73:[2,143],78:[2,143],86:[2,143],91:[2,143],93:[2,143],102:[2,143],103:87,104:[1,65],105:[2,143],106:[1,66],109:88,110:[1,68],111:69,118:[2,143],126:[2,143],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,145],6:[2,145],25:[2,145],26:[2,145],49:[2,145],54:[2,145],57:[2,145],73:[2,145],78:[2,145],86:[2,145],91:[2,145],93:[2,145],102:[2,145],103:87,104:[1,65],105:[2,145],106:[1,66],109:88,110:[1,68],111:69,118:[2,145],126:[2,145],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{116:[2,164],117:[2,164]},{8:309,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:310,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:311,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,90],6:[2,90],25:[2,90],26:[2,90],40:[2,90],49:[2,90],54:[2,90],57:[2,90],66:[2,90],67:[2,90],68:[2,90],69:[2,90],71:[2,90],73:[2,90],74:[2,90],78:[2,90],84:[2,90],85:[2,90],86:[2,90],91:[2,90],93:[2,90],102:[2,90],104:[2,90],105:[2,90],106:[2,90],110:[2,90],116:[2,90],117:[2,90],118:[2,90],126:[2,90],128:[2,90],129:[2,90],132:[2,90],133:[2,90],134:[2,90],135:[2,90],136:[2,90],137:[2,90]},{11:169,27:170,28:[1,73],29:171,30:[1,71],31:[1,72],41:312,42:168,44:172,46:[1,46],89:[1,114]},{6:[2,91],11:169,25:[2,91],26:[2,91],27:170,28:[1,73],29:171,30:[1,71],31:[1,72],41:167,42:168,44:172,46:[1,46],54:[2,91],77:313,89:[1,114]},{6:[2,93],25:[2,93],26:[2,93],54:[2,93],78:[2,93]},{6:[2,40],25:[2,40],26:[2,40],54:[2,40],78:[2,40],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{8:314,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{73:[2,120],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,38],6:[2,38],25:[2,38],26:[2,38],49:[2,38],54:[2,38],57:[2,38],73:[2,38],78:[2,38],86:[2,38],91:[2,38],93:[2,38],102:[2,38],104:[2,38],105:[2,38],106:[2,38],110:[2,38],118:[2,38],126:[2,38],128:[2,38],129:[2,38],132:[2,38],133:[2,38],134:[2,38],135:[2,38],136:[2,38],137:[2,38]},{1:[2,111],6:[2,111],25:[2,111],26:[2,111],49:[2,111],54:[2,111],57:[2,111],66:[2,111],67:[2,111],68:[2,111],69:[2,111],71:[2,111],73:[2,111],74:[2,111],78:[2,111],84:[2,111],85:[2,111],86:[2,111],91:[2,111],93:[2,111],102:[2,111],104:[2,111],105:[2,111],106:[2,111],110:[2,111],118:[2,111],126:[2,111],128:[2,111],129:[2,111],132:[2,111],133:[2,111],134:[2,111],135:[2,111],136:[2,111],137:[2,111]},{1:[2,49],6:[2,49],25:[2,49],26:[2,49],49:[2,49],54:[2,49],57:[2,49],73:[2,49],78:[2,49],86:[2,49],91:[2,49],93:[2,49],102:[2,49],104:[2,49],105:[2,49],106:[2,49],110:[2,49],118:[2,49],126:[2,49],128:[2,49],129:[2,49],132:[2,49],133:[2,49],134:[2,49],135:[2,49],136:[2,49],137:[2,49]},{6:[2,58],25:[2,58],26:[2,58],49:[2,58],54:[2,58]},{6:[2,53],25:[2,53],26:[2,53],53:315,54:[1,204]},{1:[2,202],6:[2,202],25:[2,202],26:[2,202],49:[2,202],54:[2,202],57:[2,202],73:[2,202],78:[2,202],86:[2,202],91:[2,202],93:[2,202],102:[2,202],104:[2,202],105:[2,202],106:[2,202],110:[2,202],118:[2,202],126:[2,202],128:[2,202],129:[2,202],132:[2,202],133:[2,202],134:[2,202],135:[2,202],136:[2,202],137:[2,202]},{1:[2,181],6:[2,181],25:[2,181],26:[2,181],49:[2,181],54:[2,181],57:[2,181],73:[2,181],78:[2,181],86:[2,181],91:[2,181],93:[2,181],102:[2,181],104:[2,181],105:[2,181],106:[2,181],110:[2,181],118:[2,181],121:[2,181],126:[2,181],128:[2,181],129:[2,181],132:[2,181],133:[2,181],134:[2,181],135:[2,181],136:[2,181],137:[2,181]},{1:[2,136],6:[2,136],25:[2,136],26:[2,136],49:[2,136],54:[2,136],57:[2,136],73:[2,136],78:[2,136],86:[2,136],91:[2,136],93:[2,136],102:[2,136],104:[2,136],105:[2,136],106:[2,136],110:[2,136],118:[2,136],126:[2,136],128:[2,136],129:[2,136],132:[2,136],133:[2,136],134:[2,136],135:[2,136],136:[2,136],137:[2,136]},{1:[2,137],6:[2,137],25:[2,137],26:[2,137],49:[2,137],54:[2,137],57:[2,137],73:[2,137],78:[2,137],86:[2,137],91:[2,137],93:[2,137],98:[2,137],102:[2,137],104:[2,137],105:[2,137],106:[2,137],110:[2,137],118:[2,137],126:[2,137],128:[2,137],129:[2,137],132:[2,137],133:[2,137],134:[2,137],135:[2,137],136:[2,137],137:[2,137]},{1:[2,138],6:[2,138],25:[2,138],26:[2,138],49:[2,138],54:[2,138],57:[2,138],73:[2,138],78:[2,138],86:[2,138],91:[2,138],93:[2,138],98:[2,138],102:[2,138],104:[2,138],105:[2,138],106:[2,138],110:[2,138],118:[2,138],126:[2,138],128:[2,138],129:[2,138],132:[2,138],133:[2,138],134:[2,138],135:[2,138],136:[2,138],137:[2,138]},{1:[2,172],6:[2,172],25:[2,172],26:[2,172],49:[2,172],54:[2,172],57:[2,172],73:[2,172],78:[2,172],86:[2,172],91:[2,172],93:[2,172],102:[2,172],104:[2,172],105:[2,172],106:[2,172],110:[2,172],118:[2,172],126:[2,172],128:[2,172],129:[2,172],132:[2,172],133:[2,172],134:[2,172],135:[2,172],136:[2,172],137:[2,172]},{5:316,25:[1,5]},{26:[1,317]},{6:[1,318],26:[2,178],121:[2,178],123:[2,178]},{8:319,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{1:[2,103],6:[2,103],25:[2,103],26:[2,103],49:[2,103],54:[2,103],57:[2,103],73:[2,103],78:[2,103],86:[2,103],91:[2,103],93:[2,103],102:[2,103],104:[2,103],105:[2,103],106:[2,103],110:[2,103],118:[2,103],126:[2,103],128:[2,103],129:[2,103],132:[2,103],133:[2,103],134:[2,103],135:[2,103],136:[2,103],137:[2,103]},{1:[2,141],6:[2,141],25:[2,141],26:[2,141],49:[2,141],54:[2,141],57:[2,141],66:[2,141],67:[2,141],68:[2,141],69:[2,141],71:[2,141],73:[2,141],74:[2,141],78:[2,141],84:[2,141],85:[2,141],86:[2,141],91:[2,141],93:[2,141],102:[2,141],104:[2,141],105:[2,141],106:[2,141],110:[2,141],118:[2,141],126:[2,141],128:[2,141],129:[2,141],132:[2,141],133:[2,141],134:[2,141],135:[2,141],136:[2,141],137:[2,141]},{1:[2,119],6:[2,119],25:[2,119],26:[2,119],49:[2,119],54:[2,119],57:[2,119],66:[2,119],67:[2,119],68:[2,119],69:[2,119],71:[2,119],73:[2,119],74:[2,119],78:[2,119],84:[2,119],85:[2,119],86:[2,119],91:[2,119],93:[2,119],102:[2,119],104:[2,119],105:[2,119],106:[2,119],110:[2,119],118:[2,119],126:[2,119],128:[2,119],129:[2,119],132:[2,119],133:[2,119],134:[2,119],135:[2,119],136:[2,119],137:[2,119]},{6:[2,126],25:[2,126],26:[2,126],54:[2,126],86:[2,126],91:[2,126]},{6:[2,53],25:[2,53],26:[2,53],53:320,54:[1,229]},{6:[2,127],25:[2,127],26:[2,127],54:[2,127],86:[2,127],91:[2,127]},{1:[2,167],6:[2,167],25:[2,167],26:[2,167],49:[2,167],54:[2,167],57:[2,167],73:[2,167],78:[2,167],86:[2,167],91:[2,167],93:[2,167],102:[2,167],103:87,104:[2,167],105:[2,167],106:[2,167],109:88,110:[2,167],111:69,118:[1,321],126:[2,167],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,169],6:[2,169],25:[2,169],26:[2,169],49:[2,169],54:[2,169],57:[2,169],73:[2,169],78:[2,169],86:[2,169],91:[2,169],93:[2,169],102:[2,169],103:87,104:[2,169],105:[1,322],106:[2,169],109:88,110:[2,169],111:69,118:[2,169],126:[2,169],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,168],6:[2,168],25:[2,168],26:[2,168],49:[2,168],54:[2,168],57:[2,168],73:[2,168],78:[2,168],86:[2,168],91:[2,168],93:[2,168],102:[2,168],103:87,104:[2,168],105:[2,168],106:[2,168],109:88,110:[2,168],111:69,118:[2,168],126:[2,168],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{6:[2,94],25:[2,94],26:[2,94],54:[2,94],78:[2,94]},{6:[2,53],25:[2,53],26:[2,53],53:323,54:[1,239]},{26:[1,324],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{6:[1,250],25:[1,251],26:[1,325]},{26:[1,326]},{1:[2,175],6:[2,175],25:[2,175],26:[2,175],49:[2,175],54:[2,175],57:[2,175],73:[2,175],78:[2,175],86:[2,175],91:[2,175],93:[2,175],102:[2,175],104:[2,175],105:[2,175],106:[2,175],110:[2,175],118:[2,175],126:[2,175],128:[2,175],129:[2,175],132:[2,175],133:[2,175],134:[2,175],135:[2,175],136:[2,175],137:[2,175]},{26:[2,179],121:[2,179],123:[2,179]},{25:[2,132],54:[2,132],103:87,104:[1,65],106:[1,66],109:88,110:[1,68],111:69,126:[1,86],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{6:[1,271],25:[1,272],26:[1,327]},{8:328,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{8:329,9:118,10:20,11:21,12:[1,22],13:8,14:9,15:10,16:11,17:12,18:13,19:14,20:15,21:16,22:17,23:18,24:19,27:62,28:[1,73],29:49,30:[1,71],31:[1,72],32:24,33:[1,50],34:[1,51],35:[1,52],36:[1,53],37:[1,54],38:[1,55],39:23,44:63,45:[1,45],46:[1,46],47:[1,29],50:30,51:[1,60],52:[1,61],58:47,59:48,61:36,63:25,64:26,65:27,76:[1,70],79:[1,43],83:[1,28],88:[1,58],89:[1,59],90:[1,57],96:[1,38],100:[1,44],101:[1,56],103:39,104:[1,65],106:[1,66],107:40,108:[1,67],109:41,110:[1,68],111:69,119:[1,42],124:37,125:[1,64],127:[1,31],128:[1,32],129:[1,33],130:[1,34],131:[1,35]},{6:[1,282],25:[1,283],26:[1,330]},{6:[2,41],25:[2,41],26:[2,41],54:[2,41],78:[2,41]},{6:[2,59],25:[2,59],26:[2,59],49:[2,59],54:[2,59]},{1:[2,173],6:[2,173],25:[2,173],26:[2,173],49:[2,173],54:[2,173],57:[2,173],73:[2,173],78:[2,173],86:[2,173],91:[2,173],93:[2,173],102:[2,173],104:[2,173],105:[2,173],106:[2,173],110:[2,173],118:[2,173],126:[2,173],128:[2,173],129:[2,173],132:[2,173],133:[2,173],134:[2,173],135:[2,173],136:[2,173],137:[2,173]},{6:[2,128],25:[2,128],26:[2,128],54:[2,128],86:[2,128],91:[2,128]},{1:[2,170],6:[2,170],25:[2,170],26:[2,170],49:[2,170],54:[2,170],57:[2,170],73:[2,170],78:[2,170],86:[2,170],91:[2,170],93:[2,170],102:[2,170],103:87,104:[2,170],105:[2,170],106:[2,170],109:88,110:[2,170],111:69,118:[2,170],126:[2,170],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{1:[2,171],6:[2,171],25:[2,171],26:[2,171],49:[2,171],54:[2,171],57:[2,171],73:[2,171],78:[2,171],86:[2,171],91:[2,171],93:[2,171],102:[2,171],103:87,104:[2,171],105:[2,171],106:[2,171],109:88,110:[2,171],111:69,118:[2,171],126:[2,171],128:[1,80],129:[1,79],132:[1,78],133:[1,81],134:[1,82],135:[1,83],136:[1,84],137:[1,85]},{6:[2,95],25:[2,95],26:[2,95],54:[2,95],78:[2,95]}],defaultActions:{60:[2,51],61:[2,52],75:[2,3],94:[2,109],191:[2,89]},parseError:function(e){throw Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var c=this.lexer.yylloc;s.push(c);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,v,m,g,y,b,w,E,S={};;){if(v=r[r.length-1],this.defaultActions[v]?m=this.defaultActions[v]:((null===p||p===void 0)&&(p=t()),m=o[v]&&o[v][p]),m===void 0||!m.length||!m[0]){var x="";if(!l){E=[];for(y in o[v])this.terminals_[y]&&y>2&&E.push("'"+this.terminals_[y]+"'");x=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:c,expected:E})}}if(m[0]instanceof Array&&m.length>1)throw Error("Parse Error: multiple actions possible at state: "+v+", token: "+p);switch(m[0]){case 1:r.push(p),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(m[1]),p=null,d?(p=d,d=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,l>0&&l--);break;case 2:if(b=this.productions_[m[1]][1],S.$=i[i.length-b],S._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},h&&(S._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),g=this.performAction.call(S,u,f,a,this.yy,m[1],i,s),g!==void 0)return g;b&&(r=r.slice(0,-2*b),i=i.slice(0,-1*b),s=s.slice(0,-1*b)),r.push(this.productions_[m[1]][0]),i.push(S.$),s.push(S._$),w=o[r[r.length-2]][r[r.length-1]],r.push(w);break;case 3:return!0}}return!0}};return e.prototype=t,t.Parser=e,new e}();require!==void 0&&e!==void 0&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)},e.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var n=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return e.parser.parse(n)},"undefined"!=typeof module&&require.main===module&&e.main(process.argv.slice(1)))},require["./scope"]=new function(){var e=this;(function(){var t,n,r,i;i=require("./helpers"),n=i.extend,r=i.last,e.Scope=t=function(){function e(t,n,r){this.parent=t,this.expressions=n,this.method=r,this.variables=[{name:"arguments",type:"arguments"}],this.positions={},this.parent||(e.root=this)}return e.root=null,e.prototype.add=function(e,t,n){return this.shared&&!n?this.parent.add(e,t,n):Object.prototype.hasOwnProperty.call(this.positions,e)?this.variables[this.positions[e]].type=t:this.positions[e]=this.variables.push({name:e,type:t})-1},e.prototype.namedMethod=function(){var e;return(null!=(e=this.method)?e.name:void 0)||!this.parent?this.method:this.parent.namedMethod()},e.prototype.find=function(e){return this.check(e)?!0:(this.add(e,"var"),!1)},e.prototype.parameter=function(e){return this.shared&&this.parent.check(e,!0)?void 0:this.add(e,"param")},e.prototype.check=function(e){var t;return!!(this.type(e)||(null!=(t=this.parent)?t.check(e):void 0))},e.prototype.temporary=function(e,t){return e.length>1?"_"+e+(t>1?t-1:""):"_"+(t+parseInt(e,36)).toString(36).replace(/\d/g,"a")},e.prototype.type=function(e){var t,n,r,i;for(i=this.variables,n=0,r=i.length;r>n;n++)if(t=i[n],t.name===e)return t.type;return null},e.prototype.freeVariable=function(e,t){var n,r;for(null==t&&(t=!0),n=0;this.check(r=this.temporary(e,n));)n++;return t&&this.add(r,"var",!0),r},e.prototype.assign=function(e,t){return this.add(e,{value:t,assigned:!0},!0),this.hasAssignments=!0},e.prototype.hasDeclarations=function(){return!!this.declaredVariables().length},e.prototype.declaredVariables=function(){var e,t,n,r,i,s;for(e=[],t=[],s=this.variables,r=0,i=s.length;i>r;r++)n=s[r],"var"===n.type&&("_"===n.name.charAt(0)?t:e).push(n.name);return e.sort().concat(t.sort())},e.prototype.assignedVariables=function(){var e,t,n,r,i;for(r=this.variables,i=[],t=0,n=r.length;n>t;t++)e=r[t],e.type.assigned&&i.push(""+e.name+" = "+e.type.value);return i},e}()}).call(this)},require["./nodes"]=new function(){var e=this;(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt={}.hasOwnProperty,mt=function(e,t){function n(){this.constructor=e}for(var r in t)vt.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},gt=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},yt=[].slice;Error.stackTraceLimit=1/0,q=require("./scope").Scope,pt=require("./lexer"),H=pt.RESERVED,I=pt.STRICT_PROSCRIBED,dt=require("./helpers"),Z=dt.compact,rt=dt.flatten,nt=dt.extend,ut=dt.merge,et=dt.del,lt=dt.starts,tt=dt.ends,st=dt.last,ft=dt.some,Y=dt.addLocationDataFn,ot=dt.locationDataToString,e.extend=nt,e.addLocationDataFn=Y,G=function(){return!0},O=function(){return!1},X=function(){return this},A=function(){return this.negated=!this.negated,this},e.CodeFragment=l=function(){function e(e,t){var n;this.code=""+t,this.locationData=null!=e?e.locationData:void 0,this.type=(null!=e?null!=(n=e.constructor)?n.name:void 0:void 0)||"unknown"}return e.prototype.toString=function(){return""+this.code+[this.locationData?": "+ot(this.locationData):void 0]},e}(),it=function(e){var t;return function(){var n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(t.code);return i}().join("")},e.Base=i=function(){function e(){}return e.prototype.compile=function(e,t){return it(this.compileToFragments(e,t))},e.prototype.compileToFragments=function(e,t){var n;return e=nt({},e),t&&(e.level=t),n=this.unfoldSoak(e)||this,n.tab=e.indent,e.level!==C&&n.isStatement(e)?n.compileClosure(e):n.compileNode(e)},e.prototype.compileClosure=function(e){if(this.jumps())throw SyntaxError("cannot use a pure statement in an expression.");return e.sharedScope=!0,a.wrap(this).compileNode(e)},e.prototype.cache=function(e,t,n){var i,s;return this.isComplex()?(i=new k(n||e.scope.freeVariable("ref")),s=new r(i,this),t?[s.compileToFragments(e,t),[this.makeCode(i.value)]]:[s,i]):(i=t?this.compileToFragments(e,t):this,[i,i])},e.prototype.cacheToCodeFragments=function(e){return[it(e[0]),it(e[1])]},e.prototype.makeReturn=function(e){var t;return t=this.unwrapAll(),e?new o(new k(""+e+".push"),[t]):new j(t)},e.prototype.contains=function(e){var t;return t=!1,this.traverseChildren(!1,function(n){return e(n)?(t=!0,!1):void 0}),t},e.prototype.containsType=function(e){return this instanceof e||this.contains(function(t){return t instanceof e})},e.prototype.lastNonComment=function(e){var t;for(t=e.length;t--;)if(!(e[t]instanceof c))return e[t];return null},e.prototype.toString=function(e,t){var n,r;return null==e&&(e=""),null==t&&(t=this.constructor.name),n=this.locationData?ot(this.locationData):"??",r="\n"+e+n+": "+t,this.soak&&(r+="?"),this.eachChild(function(t){return r+=t.toString(e+W)}),r},e.prototype.eachChild=function(e){var t,n,r,i,s,o,u,a;if(!this.children)return this;for(u=this.children,r=0,s=u.length;s>r;r++)if(t=u[r],this[t])for(a=rt([this[t]]),i=0,o=a.length;o>i;i++)if(n=a[i],e(n)===!1)return this;return this},e.prototype.traverseChildren=function(e,t){return this.eachChild(function(n){return t(n)===!1?!1:n.traverseChildren(e,t)})},e.prototype.invert=function(){return new _("!",this)},e.prototype.unwrapAll=function(){var e;for(e=this;e!==(e=e.unwrap()););return e},e.prototype.children=[],e.prototype.isStatement=O,e.prototype.jumps=O,e.prototype.isComplex=G,e.prototype.isChainable=O,e.prototype.isAssignable=O,e.prototype.unwrap=X,e.prototype.unfoldSoak=O,e.prototype.assigns=O,e.prototype.updateLocationDataIfMissing=function(e){return this.locationData||(this.locationData={},nt(this.locationData,e)),this.eachChild(function(t){return t.updateLocationDataIfMissing(e)})},e.prototype.makeCode=function(e){return new l(this,e)},e.prototype.wrapInBraces=function(e){return[].concat(this.makeCode("("),e,this.makeCode(")"))},e.prototype.joinFragmentArrays=function(e,t){var n,r,i,s,o;for(n=[],i=s=0,o=e.length;o>s;i=++s)r=e[i],i&&n.push(this.makeCode(t)),n=n.concat(r);return n},e}(),e.Block=s=function(e){function t(e){this.expressions=Z(rt(e||[]))}return mt(t,e),t.prototype.children=["expressions"],t.prototype.push=function(e){return this.expressions.push(e),this},t.prototype.pop=function(){return this.expressions.pop()},t.prototype.unshift=function(e){return this.expressions.unshift(e),this},t.prototype.unwrap=function(){return 1===this.expressions.length?this.expressions[0]:this},t.prototype.isEmpty=function(){return!this.expressions.length},t.prototype.isStatement=function(e){var t,n,r,i;for(i=this.expressions,n=0,r=i.length;r>n;n++)if(t=i[n],t.isStatement(e))return!0;return!1},t.prototype.jumps=function(e){var t,n,r,i;for(i=this.expressions,n=0,r=i.length;r>n;n++)if(t=i[n],t.jumps(e))return t},t.prototype.makeReturn=function(e){var t,n;for(n=this.expressions.length;n--;)if(t=this.expressions[n],!(t instanceof c)){this.expressions[n]=t.makeReturn(e),t instanceof j&&!t.expression&&this.expressions.splice(n,1);break}return this},t.prototype.compileToFragments=function(e,n){return null==e&&(e={}),e.scope?t.__super__.compileToFragments.call(this,e,n):this.compileRoot(e)},t.prototype.compileNode=function(e){var n,r,i,s,o,u,a,f,l;for(this.tab=e.indent,u=e.level===C,r=[],l=this.expressions,s=a=0,f=l.length;f>a;s=++a)o=l[s],o=o.unwrapAll(),o=o.unfoldSoak(e)||o,o instanceof t?r.push(o.compileNode(e)):u?(o.front=!0,i=o.compileToFragments(e),o.isStatement(e)||(i.unshift(this.makeCode(""+this.tab)),i.push(this.makeCode(";"))),r.push(i)):r.push(o.compileToFragments(e,x));return u?this.spaced?[].concat(this.makeCode("\n"),this.joinFragmentArrays(r,"\n\n"),this.makeCode("\n")):this.joinFragmentArrays(r,"\n"):(n=r.length?this.joinFragmentArrays(r,", "):[this.makeCode("void 0")],r.length>1&&e.level>=x?this.wrapInBraces(n):n)},t.prototype.compileRoot=function(e){var t,n,r,i,s,o;return e.indent=e.bare?"":W,e.scope=new q(null,this,null),e.level=C,this.spaced=!0,i=[],e.bare||(s=function(){var e,n,i,s;for(i=this.expressions,s=[],r=e=0,n=i.length;n>e&&(t=i[r],t.unwrap()instanceof c);r=++e)s.push(t);return s}.call(this),o=this.expressions.slice(s.length),this.expressions=s,s.length&&(i=this.compileNode(ut(e,{indent:""})),i.push(this.makeCode("\n"))),this.expressions=o),n=this.compileWithDeclarations(e),e.bare?n:[].concat(i,this.makeCode("(function() {\n"),n,this.makeCode("\n}).call(this);\n"))},t.prototype.compileWithDeclarations=function(e){var t,n,r,i,s,o,u,a,f,l,h,p,d,v;for(i=[],o=[],p=this.expressions,s=l=0,h=p.length;h>l&&(r=p[s],r=r.unwrap(),r instanceof c||r instanceof k);s=++l);return e=ut(e,{level:C}),s&&(u=this.expressions.splice(s,9e9),d=[this.spaced,!1],f=d[0],this.spaced=d[1],v=[this.compileNode(e),f],i=v[0],this.spaced=v[1],this.expressions=u),o=this.compileNode(e),a=e.scope,a.expressions===this&&(n=e.scope.hasDeclarations(),t=a.hasAssignments,(n||t)&&(s&&i.push(this.makeCode("\n")),i.push(this.makeCode(""+this.tab+"var ")),n&&i.push(this.makeCode(a.declaredVariables().join(", "))),t&&(n&&i.push(this.makeCode(",\n"+(this.tab+W))),i.push(this.makeCode(a.assignedVariables().join(",\n"+(this.tab+W))))),i.push(this.makeCode(";\n")))),i.concat(o)},t.wrap=function(e){return 1===e.length&&e[0]instanceof t?e[0]:new t(e)},t}(i),e.Literal=k=function(e){function t(e){this.value=e}return mt(t,e),t.prototype.makeReturn=function(){return this.isStatement()?this:t.__super__.makeReturn.apply(this,arguments)},t.prototype.isAssignable=function(){return v.test(this.value)},t.prototype.isStatement=function(){var e;return"break"===(e=this.value)||"continue"===e||"debugger"===e},t.prototype.isComplex=O,t.prototype.assigns=function(e){return e===this.value},t.prototype.jumps=function(e){return"break"!==this.value||(null!=e?e.loop:void 0)||(null!=e?e.block:void 0)?"continue"!==this.value||(null!=e?e.loop:void 0)?void 0:this:this},t.prototype.compileNode=function(e){var t,n,r;return n="this"===this.value?(null!=(r=e.scope.method)?r.bound:void 0)?e.scope.method.context:this.value:this.value.reserved?'"'+this.value+'"':this.value,t=this.isStatement()?""+this.tab+n+";":n,[this.makeCode(t)]},t.prototype.toString=function(){return' "'+this.value+'"'},t}(i),e.Undefined=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mt(t,e),t.prototype.isAssignable=O,t.prototype.isComplex=O,t.prototype.compileNode=function(e){return[this.makeCode(e.level>=E?"(void 0)":"void 0")]},t}(i),e.Null=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return mt(t,e),t.prototype.isAssignable=O,t.prototype.isComplex=O,t.prototype.compileNode=function(){return[this.makeCode("null")]},t}(i),e.Bool=function(e){function t(e){this.val=e}return mt(t,e),t.prototype.isAssignable=O,t.prototype.isComplex=O,t.prototype.compileNode=function(){return[this.makeCode(this.val)]},t}(i),e.Return=j=function(e){function t(e){e&&!e.unwrap().isUndefined&&(this.expression=e)}return mt(t,e),t.prototype.children=["expression"],t.prototype.isStatement=G,t.prototype.makeReturn=X,t.prototype.jumps=X,t.prototype.compileToFragments=function(e,n){var r,i;return r=null!=(i=this.expression)?i.makeReturn():void 0,!r||r instanceof t?t.__super__.compileToFragments.call(this,e,n):r.compileToFragments(e,n)},t.prototype.compileNode=function(e){var t;return t=[],t.push(this.makeCode(this.tab+("return"+[this.expression?" ":void 0]))),this.expression&&(t=t.concat(this.expression.compileToFragments(e,N))),t.push(this.makeCode(";")),t},t}(i),e.Value=K=function(e){function t(e,n,r){return!n&&e instanceof t?e:(this.base=e,this.properties=n||[],r&&(this[r]=!0),this)}return mt(t,e),t.prototype.children=["base","properties"],t.prototype.add=function(e){return this.properties=this.properties.concat(e),this},t.prototype.hasProperties=function(){return!!this.properties.length},t.prototype.isArray=function(){return!this.properties.length&&this.base instanceof n},t.prototype.isComplex=function(){return this.hasProperties()||this.base.isComplex()},t.prototype.isAssignable=function(){return this.hasProperties()||this.base.isAssignable()},t.prototype.isSimpleNumber=function(){return this.base instanceof k&&F.test(this.base.value)},t.prototype.isString=function(){return this.base instanceof k&&g.test(this.base.value)},t.prototype.isAtomic=function(){var e,t,n,r;for(r=this.properties.concat(this.base),t=0,n=r.length;n>t;t++)if(e=r[t],e.soak||e instanceof o)return!1;return!0},t.prototype.isStatement=function(e){return!this.properties.length&&this.base.isStatement(e)},t.prototype.assigns=function(e){return!this.properties.length&&this.base.assigns(e)},t.prototype.jumps=function(e){return!this.properties.length&&this.base.jumps(e)},t.prototype.isObject=function(e){return this.properties.length?!1:this.base instanceof M&&(!e||this.base.generated)},t.prototype.isSplice=function(){return st(this.properties)instanceof R},t.prototype.unwrap=function(){return this.properties.length?this:this.base},t.prototype.cacheReference=function(e){var n,i,s,o;return s=st(this.properties),2>this.properties.length&&!this.base.isComplex()&&(null!=s?!s.isComplex():!void 0)?[this,this]:(n=new t(this.base,this.properties.slice(0,-1)),n.isComplex()&&(i=new k(e.scope.freeVariable("base")),n=new t(new P(new r(i,n)))),s?(s.isComplex()&&(o=new k(e.scope.freeVariable("name")),s=new w(new r(o,s.index)),o=new w(o)),[n.add(s),new t(i||n.base,[o||s])]):[n,i])},t.prototype.compileNode=function(e){var t,n,r,i,s;for(this.base.front=this.front,r=this.properties,t=this.base.compileToFragments(e,r.length?E:null),(this.base instanceof P||r.length)&&F.test(it(t))&&t.push(this.makeCode(".")),i=0,s=r.length;s>i;i++)n=r[i],t.push.apply(t,n.compileToFragments(e));return t},t.prototype.unfoldSoak=function(e){var n,i=this;return null!=(n=this.unfoldedSoak)?n:this.unfoldedSoak=function(){var n,s,o,u,a,f,l,c,p,d;if(o=i.base.unfoldSoak(e))return(p=o.body.properties).push.apply(p,i.properties),o;for(d=i.properties,s=l=0,c=d.length;c>l;s=++l)if(u=d[s],u.soak)return u.soak=!1,n=new t(i.base,i.properties.slice(0,s)),f=new t(i.base,i.properties.slice(s)),n.isComplex()&&(a=new k(e.scope.freeVariable("ref")),n=new P(new r(a,n)),f.base=a),new y(new h(n),f,{soak:!0});return!1}()},t}(i),e.Comment=c=function(e){function t(e){this.comment=e}return mt(t,e),t.prototype.isStatement=G,t.prototype.makeReturn=X,t.prototype.compileNode=function(e,t){var n;return n="/*"+at(this.comment,this.tab)+("\n"+this.tab+"*/\n"),(t||e.level)===C&&(n=e.indent+n),[this.makeCode(n)]},t}(i),e.Call=o=function(e){function n(e,t,n){this.args=null!=t?t:[],this.soak=n,this.isNew=!1,this.isSuper="super"===e,this.variable=this.isSuper?null:e}return mt(n,e),n.prototype.children=["variable","args"],n.prototype.newInstance=function(){var e,t;return e=(null!=(t=this.variable)?t.base:void 0)||this.variable,e instanceof n&&!e.isNew?e.newInstance():this.isNew=!0,this},n.prototype.superReference=function(e){var n,r;if(r=e.scope.namedMethod(),null!=r?r.klass:void 0)return n=[new t(new k("__super__"))],r["static"]&&n.push(new t(new k("constructor"))),n.push(new t(new k(r.name))),(new K(new k(r.klass),n)).compile(e);if(null!=r?r.ctor:void 0)return""+r.name+".__super__.constructor";throw SyntaxError("cannot call super outside of an instance method.")},n.prototype.superThis=function(e){var t;return t=e.scope.method,t&&!t.klass&&t.context||"this"},n.prototype.unfoldSoak=function(e){var t,r,i,s,o,u,a,f,l;if(this.soak){if(this.variable){if(r=ct(e,this,"variable"))return r;f=(new K(this.variable)).cacheReference(e),i=f[0],o=f[1]}else i=new k(this.superReference(e)),o=new K(i);return o=new n(o,this.args),o.isNew=this.isNew,i=new k("typeof "+i.compile(e)+' === "function"'),new y(i,new K(o),{soak:!0})}for(t=this,s=[];;)if(t.variable instanceof n)s.push(t),t=t.variable;else{if(!(t.variable instanceof K))break;if(s.push(t),!((t=t.variable.base)instanceof n))break}for(l=s.reverse(),u=0,a=l.length;a>u;u++)t=l[u],r&&(t.variable instanceof n?t.variable=r:t.variable.base=r),r=ct(e,t,"variable");return r},n.prototype.compileNode=function(e){var t,n,r,i,s,o,u,a,f,l;if(null!=(f=this.variable)&&(f.front=this.front),i=U.compileSplattedArray(e,this.args,!0),i.length)return this.compileSplat(e,i);for(r=[],l=this.args,n=u=0,a=l.length;a>u;n=++u)t=l[n],n&&r.push(this.makeCode(", ")),r.push.apply(r,t.compileToFragments(e,x));return s=[],this.isSuper?(o=this.superReference(e)+(".call("+this.superThis(e)),r.length&&(o+=", "),s.push(this.makeCode(o))):(this.isNew&&s.push(this.makeCode("new ")),s.push.apply(s,this.variable.compileToFragments(e,E)),s.push(this.makeCode("("))),s.push.apply(s,r),s.push(this.makeCode(")")),s},n.prototype.compileSplat=function(e,t){var n,r,i,s,o,u;return this.isSuper?[].concat(this.makeCode(""+this.superReference(e)+".apply("+this.superThis(e)+", "),t,this.makeCode(")")):this.isNew?(s=this.tab+W,[].concat(this.makeCode("(function(func, args, ctor) {\n"+s+"ctor.prototype = func.prototype;\n"+s+"var child = new ctor, result = func.apply(child, args);\n"+s+"return Object(result) === result ? result : child;\n"+this.tab+"})("),this.variable.compileToFragments(e,x),this.makeCode(", "),t,this.makeCode(", function(){})"))):(n=[],r=new K(this.variable),(o=r.properties.pop())&&r.isComplex()?(u=e.scope.freeVariable("ref"),n=n.concat(this.makeCode("("+u+" = "),r.compileToFragments(e,x),this.makeCode(")"),o.compileToFragments(e))):(i=r.compileToFragments(e,E),F.test(it(i))&&(i=this.wrapInBraces(i)),o?(u=it(i),i.push.apply(i,o.compileToFragments(e))):u="null",n=n.concat(i)),n=n.concat(this.makeCode(".apply("+u+", "),t,this.makeCode(")")))},n}(i),e.Extends=p=function(e){function t(e,t){this.child=e,this.parent=t}return mt(t,e),t.prototype.children=["child","parent"],t.prototype.compileToFragments=function(e){return(new o(new K(new k(ht("extends"))),[this.child,this.parent])).compileToFragments(e)},t}(i),e.Access=t=function(e){function t(e,t){this.name=e,this.name.asKey=!0,this.soak="soak"===t}return mt(t,e),t.prototype.children=["name"],t.prototype.compileToFragments=function(e){var t;return t=this.name.compileToFragments(e),v.test(it(t))?t.unshift(this.makeCode(".")):(t.unshift(this.makeCode("[")),t.push(this.makeCode("]"))),t},t.prototype.isComplex=O,t}(i),e.Index=w=function(e){function t(e){this.index=e}return mt(t,e),t.prototype.children=["index"],t.prototype.compileToFragments=function(e){return[].concat(this.makeCode("["),this.index.compileToFragments(e,N),this.makeCode("]"))},t.prototype.isComplex=function(){return this.index.isComplex()},t}(i),e.Range=B=function(e){function t(e,t,n){this.from=e,this.to=t,this.exclusive="exclusive"===n,this.equals=this.exclusive?"":"="}return mt(t,e),t.prototype.children=["from","to"],t.prototype.compileVariables=function(e){var t,n,r,i,s;return e=ut(e,{top:!0}),n=this.cacheToCodeFragments(this.from.cache(e,x)),this.fromC=n[0],this.fromVar=n[1],r=this.cacheToCodeFragments(this.to.cache(e,x)),this.toC=r[0],this.toVar=r[1],(t=et(e,"step"))&&(i=this.cacheToCodeFragments(t.cache(e,x)),this.step=i[0],this.stepVar=i[1]),s=[this.fromVar.match(F),this.toVar.match(F)],this.fromNum=s[0],this.toNum=s[1],this.stepVar?this.stepNum=this.stepVar.match(F):void 0},t.prototype.compileNode=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d;return this.fromVar||this.compileVariables(e),e.index?(u=this.fromNum&&this.toNum,s=et(e,"index"),o=et(e,"name"),f=o&&o!==s,h=""+s+" = "+this.fromC,this.toC!==this.toVar&&(h+=", "+this.toC),this.step!==this.stepVar&&(h+=", "+this.step),p=[""+s+" <"+this.equals,""+s+" >"+this.equals],a=p[0],i=p[1],n=this.stepNum?+this.stepNum>0?""+a+" "+this.toVar:""+i+" "+this.toVar:u?(d=[+this.fromNum,+this.toNum],r=d[0],c=d[1],d,c>=r?""+a+" "+c:""+i+" "+c):(t=this.stepVar?""+this.stepVar+" > 0":""+this.fromVar+" <= "+this.toVar,""+t+" ? "+a+" "+this.toVar+" : "+i+" "+this.toVar),l=this.stepVar?""+s+" += "+this.stepVar:u?f?c>=r?"++"+s:"--"+s:c>=r?""+s+"++":""+s+"--":f?""+t+" ? ++"+s+" : --"+s:""+t+" ? "+s+"++ : "+s+"--",f&&(h=""+o+" = "+h),f&&(l=""+o+" = "+l),[this.makeCode(""+h+"; "+n+"; "+l)]):this.compileArray(e)},t.prototype.compileArray=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;return this.fromNum&&this.toNum&&20>=Math.abs(this.fromNum-this.toNum)?(f=function(){p=[];for(var e=h=+this.fromNum,t=+this.toNum;t>=h?t>=e:e>=t;t>=h?e++:e--)p.push(e);return p}.apply(this),this.exclusive&&f.pop(),[this.makeCode("["+f.join(", ")+"]")]):(o=this.tab+W,s=e.scope.freeVariable("i"),l=e.scope.freeVariable("results"),a="\n"+o+l+" = [];",this.fromNum&&this.toNum?(e.index=s,n=it(this.compileNode(e))):(c=""+s+" = "+this.fromC+(this.toC!==this.toVar?", "+this.toC:""),r=""+this.fromVar+" <= "+this.toVar,n="var "+c+"; "+r+" ? "+s+" <"+this.equals+" "+this.toVar+" : "+s+" >"+this.equals+" "+this.toVar+"; "+r+" ? "+s+"++ : "+s+"--"),u="{ "+l+".push("+s+"); }\n"+o+"return "+l+";\n"+e.indent,i=function(e){return null!=e?e.contains(function(e){return e instanceof k&&"arguments"===e.value&&!e.asKey}):void 0},(i(this.from)||i(this.to))&&(t=", arguments"),[this.makeCode("(function() {"+a+"\n"+o+"for ("+n+")"+u+"}).apply(this"+(null!=t?t:"")+")")])},t}(i),e.Slice=R=function(e){function t(e){this.range=e,t.__super__.constructor.call(this)}return mt(t,e),t.prototype.children=["range"],t.prototype.compileNode=function(e){var t,n,r,i,s,o,u;return u=this.range,s=u.to,r=u.from,i=r&&r.compileToFragments(e,N)||[this.makeCode("0")],s&&(t=s.compileToFragments(e,N),n=it(t),(this.range.exclusive||-1!==+n)&&(o=", "+(this.range.exclusive?n:F.test(n)?""+(+n+1):(t=s.compileToFragments(e,E),"+"+it(t)+" + 1 || 9e9")))),[this.makeCode(".slice("+it(i)+(o||"")+")")]},t}(i),e.Obj=M=function(e){function t(e,t){this.generated=null!=t?t:!1,this.objects=this.properties=e||[]}return mt(t,e),t.prototype.children=["properties"],t.prototype.compileNode=function(e){var t,n,i,s,o,u,a,f,l,h,p,d,v;if(l=this.properties,!l.length)return[this.makeCode(this.front?"({})":"{}")];if(this.generated)for(h=0,d=l.length;d>h;h++)if(a=l[h],a instanceof K)throw Error("cannot have an implicit value in an implicit object");for(i=e.indent+=W,u=this.lastNonComment(this.properties),t=[],n=p=0,v=l.length;v>p;n=++p)f=l[n],o=n===l.length-1?"":f===u||f instanceof c?"\n":",\n",s=f instanceof c?"":i,f instanceof K&&f["this"]&&(f=new r(f.properties[0].name,f,"object")),f instanceof c||(f instanceof r||(f=new r(f,f,"object")),(f.variable.base||f.variable).asKey=!0),s&&t.push(this.makeCode(s)),t.push.apply(t,f.compileToFragments(e,C)),o&&t.push(this.makeCode(o));return t.unshift(this.makeCode("{"+(l.length&&"\n"))),t.push(this.makeCode(""+(l.length&&"\n"+this.tab)+"}")),this.front?this.wrapInBraces(t):t},t.prototype.assigns=function(e){var t,n,r,i;for(i=this.properties,n=0,r=i.length;r>n;n++)if(t=i[n],t.assigns(e))return!0;return!1},t}(i),e.Arr=n=function(e){function t(e){this.objects=e||[]}return mt(t,e),t.prototype.children=["objects"],t.prototype.compileNode=function(e){var t,n,r,i,s,o,u;if(!this.objects.length)return[this.makeCode("[]")];if(e.indent+=W,t=U.compileSplattedArray(e,this.objects),t.length)return t;for(t=[],n=function(){var t,n,r,i;for(r=this.objects,i=[],t=0,n=r.length;n>t;t++)s=r[t],i.push(s.compileToFragments(e,x));return i}.call(this),i=o=0,u=n.length;u>o;i=++o)r=n[i],i&&t.push(this.makeCode(", ")),t.push.apply(t,r);return it(t).indexOf("\n")>=0?(t.unshift(this.makeCode("[\n"+e.indent)),t.push(this.makeCode("\n"+this.tab+"]"))):(t.unshift(this.makeCode("[")),t.push(this.makeCode("]"))),t},t.prototype.assigns=function(e){var t,n,r,i;for(i=this.objects,n=0,r=i.length;r>n;n++)if(t=i[n],t.assigns(e))return!0;return!1},t}(i),e.Class=u=function(e){function n(e,t,n){this.variable=e,this.parent=t,this.body=null!=n?n:new s,this.boundFuncs=[],this.body.classBody=!0}return mt(n,e),n.prototype.children=["variable","parent","body"],n.prototype.determineName=function(){var e,n;if(!this.variable)return null;if(e=(n=st(this.variable.properties))?n instanceof t&&n.name.value:this.variable.base.value,gt.call(I,e)>=0)throw SyntaxError("variable name may not be "+e);return e&&(e=v.test(e)&&e)},n.prototype.setContext=function(e){return this.body.traverseChildren(!1,function(t){return t.classBody?!1:t instanceof k&&"this"===t.value?t.value=e:t instanceof f&&(t.klass=e,t.bound)?t.context=e:void 0})},n.prototype.addBoundFunctions=function(e){var n,i,o,u,a,l,c,h,p,d;if(this.boundFuncs.length)for(e.scope.assign("_this","this"),p=this.boundFuncs,c=0,h=p.length;h>c;c++)d=p[c],a=d[0],o=d[1],u=new K(new k("this"),[new t(a)]),n=new s([new j(new k(""+this.ctor.name+".prototype."+a.value+".apply(_this, arguments)"))]),l=new f(o.params,n,"boundfunc"),i=new r(u,l),this.ctor.body.unshift(i)},n.prototype.addProperties=function(e,n,i){var s,o,u,a,l;return l=e.base.properties.slice(0),u=function(){var e;for(e=[];s=l.shift();){if(s instanceof r)if(o=s.variable.base,delete s.context,a=s.value,"constructor"===o.value){if(this.ctor)throw Error("cannot define more than one constructor in a class");if(a.bound)throw Error("cannot define a constructor as a bound function");a instanceof f?s=this.ctor=a:(this.externalCtor=i.scope.freeVariable("class"),s=new r(new k(this.externalCtor),a))}else s.variable["this"]?(a["static"]=!0,a.bound&&(a.context=n)):(s.variable=new K(new k(n),[new t(new k("prototype")),new t(o)]),a instanceof f&&a.bound&&(this.boundFuncs.push([o,a]),a.bound=!1));e.push(s)}return e}.call(this),Z(u)},n.prototype.walkBody=function(e,t){var r=this;return this.traverseChildren(!1,function(i){var o,u,a,f,l,c,h;if(o=!0,i instanceof n)return!1;if(i instanceof s){for(h=u=i.expressions,a=l=0,c=h.length;c>l;a=++l)f=h[a],f instanceof K&&f.isObject(!0)&&(o=!1,u[a]=r.addProperties(f,e,t));i.expressions=u=rt(u)}return o&&!(i instanceof n)})},n.prototype.hoistDirectivePrologue=function(){var e,t,n;for(t=0,e=this.body.expressions;(n=e[t])&&n instanceof c||n instanceof K&&n.isString();)++t;return this.directives=e.splice(0,t)},n.prototype.ensureConstructor=function(e){return this.ctor||(this.ctor=new f,this.parent&&this.ctor.body.push(new k(""+e+".__super__.constructor.apply(this, arguments)")),this.externalCtor&&this.ctor.body.push(new k(""+this.externalCtor+".apply(this, arguments)")),this.ctor.body.makeReturn(),this.body.expressions.unshift(this.ctor)),this.ctor.ctor=this.ctor.name=e,this.ctor.klass=null,this.ctor.noReturn=!0},n.prototype.compileNode=function(e){var t,n,i,s,o,u,l;return n=this.determineName(),o=n||"_Class",o.reserved&&(o="_"+o),s=new k(o),this.hoistDirectivePrologue(),this.setContext(o),this.walkBody(o,e),this.ensureConstructor(o),this.body.spaced=!0,this.ctor instanceof f||this.body.expressions.unshift(this.ctor),this.body.expressions.push(s),(l=this.body.expressions).unshift.apply(l,this.directives),this.addBoundFunctions(e),t=a.wrap(this.body),this.parent&&(this.superClass=new k(e.scope.freeVariable("super",!1)),this.body.expressions.unshift(new p(s,this.superClass)),t.args.push(this.parent),u=t.variable.params||t.variable.base.params,u.push(new D(this.superClass))),i=new P(t,!0),this.variable&&(i=new r(this.variable,i)),i.compileToFragments(e)},n}(i),e.Assign=r=function(e){function n(e,t,n,r){var i,s,o;if(this.variable=e,this.value=t,this.context=n,this.param=r&&r.param,this.subpattern=r&&r.subpattern,o=s=this.variable.unwrapAll().value,i=gt.call(I,o)>=0,i&&"object"!==this.context)throw SyntaxError('variable name may not be "'+s+'"')}return mt(n,e),n.prototype.children=["variable","value"],n.prototype.isStatement=function(e){return(null!=e?e.level:void 0)===C&&null!=this.context&&gt.call(this.context,"?")>=0},n.prototype.assigns=function(e){return this["object"===this.context?"value":"variable"].assigns(e)},n.prototype.unfoldSoak=function(e){return ct(e,this,"variable")},n.prototype.compileNode=function(e){var t,n,r,i,s,o,u,a,l,c,h;if(r=this.variable instanceof K){if(this.variable.isArray()||this.variable.isObject())return this.compilePatternMatch(e);if(this.variable.isSplice())return this.compileSplice(e);if("||="===(a=this.context)||"&&="===a||"?="===a)return this.compileConditional(e)}if(n=this.variable.compileToFragments(e,x),s=it(n),!this.context){if(!(u=this.variable.unwrapAll()).isAssignable())throw SyntaxError('"'+this.variable.compile(e)+'" cannot be assigned.');("function"==typeof u.hasProperties?u.hasProperties():void 0)||(this.param?e.scope.add(s,"var"):e.scope.find(s))}return this.value instanceof f&&(i=L.exec(s))&&(i[1]&&(this.value.klass=i[1]),this.value.name=null!=(l=null!=(c=null!=(h=i[2])?h:i[3])?c:i[4])?l:i[5]),o=this.value.compileToFragments(e,x),"object"===this.context?n.concat(this.makeCode(": "),o):(t=n.concat(this.makeCode(" "+(this.context||"=")+" "),o),x>=e.level?t:this.wrapInBraces(t))},n.prototype.compilePatternMatch=function(e){var r,i,s,o,u,a,f,l,c,h,p,d,m,g,y,b,E,S,N,L,A,O,M,_,D,B,j,F;if(b=e.level===C,S=this.value,p=this.variable.base.objects,!(d=p.length))return s=S.compileToFragments(e),e.level>=T?this.wrapInBraces(s):s;if(f=this.variable.isObject(),b&&1===d&&!((h=p[0])instanceof U)){if(h instanceof n?(M=h,_=M.variable,a=_.base,h=M.value):a=f?h["this"]?h.properties[0].name:h:new k(0),r=v.test(a.unwrap().value||0),S=new K(S),S.properties.push(new(r?t:w)(a)),D=h.unwrap().value,gt.call(H,D)>=0)throw new SyntaxError("assignment to a reserved word: "+h.compile(e)+" = "+S.compile(e));return(new n(h,S,null,{param:this.param})).compileToFragments(e,C)}for(N=S.compileToFragments(e,x),L=it(N),i=[],y=!1,(!v.test(L)||this.variable.assigns(L))&&(i.push([this.makeCode(""+(m=e.scope.freeVariable("ref"))+" = ")].concat(yt.call(N))),N=[this.makeCode(m)],L=m),u=A=0,O=p.length;O>A;u=++A){if(h=p[u],a=u,f&&(h instanceof n?(B=h,j=B.variable,a=j.base,h=B.value):h.base instanceof P?(F=(new K(h.unwrapAll())).cacheReference(e),h=F[0],a=F[1]):a=h["this"]?h.properties[0].name:h),!y&&h instanceof U)c=h.name.unwrap().value,h=h.unwrap(),E=""+d+" <= "+L+".length ? "+ht("slice")+".call("+L+", "+u,(g=d-u-1)?(l=e.scope.freeVariable("i"),E+=", "+l+" = "+L+".length - "+g+") : ("+l+" = "+u+", [])"):E+=") : []",E=new k(E),y=""+l+"++";else{if(c=h.unwrap().value,h instanceof U)throw h=h.name.compileToFragments(e),new SyntaxError("multiple splats are disallowed in an assignment: "+h+"...");"number"==typeof a?(a=new k(y||a),r=!1):r=f&&v.test(a.unwrap().value||0),E=new K(new k(L),[new(r?t:w)(a)])}if(null!=c&&gt.call(H,c)>=0)throw new SyntaxError("assignment to a reserved word: "+h.compile(e)+" = "+E.compile(e));i.push((new n(h,E,null,{param:this.param,subpattern:!0})).compileToFragments(e,x))}return b||this.subpattern||i.push(N),o=this.joinFragmentArrays(i,", "),x>e.level?o:this.wrapInBraces(o)},n.prototype.compileConditional=function(e){var t,r,i;if(i=this.variable.cacheReference(e),t=i[0],r=i[1],!t.properties.length&&t.base instanceof k&&"this"!==t.base.value&&!e.scope.check(t.base.value))throw Error('the variable "'+t.base.value+"\" can't be assigned with "+this.context+" because it has not been defined.");return gt.call(this.context,"?")>=0&&(e.isExistentialEquals=!0),(new _(this.context.slice(0,-1),t,new n(r,this.value,"="))).compileToFragments(e)},n.prototype.compileSplice=function(e){var t,n,r,i,s,o,u,a,f,l,c,h;return l=this.variable.properties.pop().range,r=l.from,u=l.to,n=l.exclusive,o=this.variable.compile(e),r?(c=this.cacheToCodeFragments(r.cache(e,T)),i=c[0],s=c[1]):i=s="0",u?(null!=r?r.isSimpleNumber():void 0)&&u.isSimpleNumber()?(u=+u.compile(e)- +s,n||(u+=1)):(u=u.compile(e,E)+" - "+s,n||(u+=" + 1")):u="9e9",h=this.value.cache(e,x),a=h[0],f=h[1],t=[].concat(this.makeCode("[].splice.apply("+o+", ["+i+", "+u+"].concat("),a,this.makeCode(")), "),f),e.level>C?this.wrapInBraces(t):t},n}(i),e.Code=f=function(e){function t(e,t,n){this.params=e||[],this.body=t||new s,this.bound="boundfunc"===n,this.bound&&(this.context="_this")}return mt(t,e),t.prototype.children=["params","body"],t.prototype.isStatement=function(){return!!this.ctor},t.prototype.jumps=O,t.prototype.compileNode=function(e){var t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,b,w,S,x,T,N,C,L,A,O,M,D,P,H,B,j,F,I,R,U,z;for(e.scope=new q(e.scope,this.body,this),e.scope.shared=et(e,"sharedScope"),e.indent+=W,delete e.bare,delete e.isExistentialEquals,h=[],s=[],B=this.paramNames(),b=0,T=B.length;T>b;b++)f=B[b],e.scope.check(f)||e.scope.parameter(f);for(j=this.params,w=0,N=j.length;N>w;w++)if(c=j[w],c.splat){for(F=this.params,S=0,C=F.length;C>S;S++)l=F[S].name,l["this"]&&(l=l.properties[0].name),l.value&&e.scope.add(l.value,"var",!0);d=new r(new K(new n(function(){var t,n,r,i;for(r=this.params,i=[],t=0,n=r.length;n>t;t++)l=r[t],i.push(l.asReference(e));return i}.call(this))),new K(new k("arguments")));break}for(I=this.params,x=0,L=I.length;L>x;x++)c=I[x],c.isComplex()?(m=p=c.asReference(e),c.value&&(m=new _("?",p,c.value)),s.push(new r(new K(c.name),m,"=",{param:!0}))):(p=c,c.value&&(a=new k(p.name.value+" == null"),m=new r(new K(c.name),c.value,"="),s.push(new y(a,m)))),d||h.push(p);for(g=this.body.isEmpty(),d&&s.unshift(d),s.length&&(R=this.body.expressions).unshift.apply(R,s),o=D=0,A=h.length;A>D;o=++D)l=h[o],h[o]=l.compileToFragments(e),e.scope.parameter(it(h[o]));for(v=[],U=this.paramNames(),P=0,O=U.length;O>P;P++){if(f=U[P],gt.call(v,f)>=0)throw SyntaxError("multiple parameters named '"+f+"'");v.push(f)}for(g||this.noReturn||this.body.makeReturn(),this.bound&&((null!=(z=e.scope.parent.method)?z.bound:void 0)?this.bound=this.context=e.scope.parent.method.context:this["static"]||e.scope.parent.assign("_this","this")),u=e.indent,i="function",this.ctor&&(i+=" "+this.name),i+="(",t=[this.makeCode(i)],o=H=0,M=h.length;M>H;o=++H)l=h[o],o&&t.push(this.makeCode(", ")),t.push.apply(t,l);return t.push(this.makeCode(") {")),this.body.isEmpty()||(t=t.concat(this.makeCode("\n"),this.body.compileWithDeclarations(e),this.makeCode("\n"+this.tab))),t.push(this.makeCode("}")),this.ctor?[this.makeCode(this.tab)].concat(yt.call(t)):this.front||e.level>=E?this.wrapInBraces(t):t},t.prototype.paramNames=function(){var e,t,n,r,i;for(e=[],i=this.params,n=0,r=i.length;r>n;n++)t=i[n],e.push.apply(e,t.names());return e},t.prototype.traverseChildren=function(e,n){return e?t.__super__.traverseChildren.call(this,e,n):void 0},t}(i),e.Param=D=function(e){function t(e,t,n){var r;if(this.name=e,this.value=t,this.splat=n,r=e=this.name.unwrapAll().value,gt.call(I,r)>=0)throw SyntaxError('parameter name "'+e+'" is not allowed')}return mt(t,e),t.prototype.children=["name","value"],t.prototype.compileToFragments=function(e){return this.name.compileToFragments(e,x)},t.prototype.asReference=function(e){var t;return this.reference?this.reference:(t=this.name,t["this"]?(t=t.properties[0].name,t.value.reserved&&(t=new k(e.scope.freeVariable(t.value)))):t.isComplex()&&(t=new k(e.scope.freeVariable("arg"))),t=new K(t),this.splat&&(t=new U(t)),this.reference=t)},t.prototype.isComplex=function(){return this.name.isComplex()},t.prototype.names=function(e){var t,n,i,s,o,u;if(null==e&&(e=this.name),t=function(e){var t;return t=e.properties[0].name.value,t.reserved?[]:[t]},e instanceof k)return[e.value];if(e instanceof K)return t(e);for(n=[],u=e.objects,s=0,o=u.length;o>s;s++)if(i=u[s],i instanceof r)n.push.apply(n,this.names(i.value.unwrap()));else if(i instanceof U)n.push(i.name.unwrap().value);else{if(!(i instanceof K))throw SyntaxError("illegal parameter "+i.compile());i.isArray()||i.isObject()?n.push.apply(n,this.names(i.base)):i["this"]?n.push.apply(n,t(i)):n.push(i.base.value)}return n},t}(i),e.Splat=U=function(e){function t(e){this.name=e.compile?e:new k(e)}return mt(t,e),t.prototype.children=["name"],t.prototype.isAssignable=G,t.prototype.assigns=function(e){return this.name.assigns(e)},t.prototype.compileToFragments=function(e){return this.name.compileToFragments(e)},t.prototype.unwrap=function(){return this.name},t.compileSplattedArray=function(e,n,r){var i,s,o,u,a,f,l,c,h,p;for(l=-1;(c=n[++l])&&!(c instanceof t););if(l>=n.length)return[];if(1===n.length)return c=n[0],a=c.compileToFragments(e,x),r?a:[].concat(c.makeCode(""+ht("slice")+".call("),a,c.makeCode(")"));for(i=n.slice(l),f=h=0,p=i.length;p>h;f=++h)c=i[f],o=c.compileToFragments(e,x),i[f]=c instanceof t?[].concat(c.makeCode(""+ht("slice")+".call("),o,c.makeCode(")")):[].concat(c.makeCode("["),o,c.makeCode("]"));return 0===l?(c=n[0],u=c.joinFragmentArrays(i.slice(1),", "),i[0].concat(c.makeCode(".concat("),u,c.makeCode(")"))):(s=function(){var t,r,i,s;for(i=n.slice(0,l),s=[],t=0,r=i.length;r>t;t++)c=i[t],s.push(c.compileToFragments(e,x));return s}(),s=n[0].joinFragmentArrays(s,", "),u=n[l].joinFragmentArrays(i,", "),[].concat(n[0].makeCode("["),s,n[l].makeCode("].concat("),u,st(n).makeCode(")")))},t}(i),e.While=Q=function(e){function t(e,t){this.condition=(null!=t?t.invert:void 0)?e.invert():e,this.guard=null!=t?t.guard:void 0}return mt(t,e),t.prototype.children=["condition","guard","body"],t.prototype.isStatement=G,t.prototype.makeReturn=function(e){return e?t.__super__.makeReturn.apply(this,arguments):(this.returns=!this.jumps({loop:!0}),this)},t.prototype.addBody=function(e){return this.body=e,this},t.prototype.jumps=function(){var e,t,n,r;if(e=this.body.expressions,!e.length)return!1;for(n=0,r=e.length;r>n;n++)if(t=e[n],t.jumps({loop:!0}))return t;return!1},t.prototype.compileNode=function(e){var t,n,r,i;return e.indent+=W,i="",n=this.body,n.isEmpty()?n="":(this.returns&&(n.makeReturn(r=e.scope.freeVariable("results")),i=""+this.tab+r+" = [];\n"),this.guard&&(n.expressions.length>1?n.expressions.unshift(new y((new P(this.guard)).invert(),new k("continue"))):this.guard&&(n=s.wrap([new y(this.guard,n)]))),n=[].concat(this.makeCode("\n"),n.compileToFragments(e,C),this.makeCode("\n"+this.tab))),t=[].concat(this.makeCode(i+this.tab+"while ("),this.condition.compileToFragments(e,N),this.makeCode(") {"),n,this.makeCode("}")),this.returns&&t.push(this.makeCode("\n"+this.tab+"return "+r+";")),t},t}(i),e.Op=_=function(e){function t(e,t,r,i){if("in"===e)return new b(t,r);if("do"===e)return this.generateDo(t);if("new"===e){if(t instanceof o&&!t["do"]&&!t.isNew)return t.newInstance();(t instanceof f&&t.bound||t["do"])&&(t=new P(t))}return this.operator=n[e]||e,this.first=t,this.second=r,this.flip=!!i,this}var n,i;return mt(t,e),n={"==":"===","!=":"!==",of:"in"},i={"!==":"===","===":"!=="},t.prototype.children=["first","second"],t.prototype.isSimpleNumber=O,t.prototype.isUnary=function(){return!this.second},t.prototype.isComplex=function(){var e;return!this.isUnary()||"+"!==(e=this.operator)&&"-"!==e||this.first.isComplex()},t.prototype.isChainable=function(){var e;return"<"===(e=this.operator)||">"===e||">="===e||"<="===e||"==="===e||"!=="===e},t.prototype.invert=function(){var e,n,r,s,o;if(this.isChainable()&&this.first.isChainable()){for(e=!0,n=this;n&&n.operator;)e&&(e=n.operator in i),n=n.first;if(!e)return(new P(this)).invert();for(n=this;n&&n.operator;)n.invert=!n.invert,n.operator=i[n.operator],n=n.first;return this}return(s=i[this.operator])?(this.operator=s,this.first.unwrap()instanceof t&&this.first.invert(),this):this.second?(new P(this)).invert():"!"===this.operator&&(r=this.first.unwrap())instanceof t&&("!"===(o=r.operator)||"in"===o||"instanceof"===o)?r:new t("!",this)},t.prototype.unfoldSoak=function(e){var t;return("++"===(t=this.operator)||"--"===t||"delete"===t)&&ct(e,this,"first")},t.prototype.generateDo=function(e){var t,n,i,s,u,a,l,c;for(s=[],n=e instanceof r&&(u=e.value.unwrap())instanceof f?u:e,c=n.params||[],a=0,l=c.length;l>a;a++)i=c[a],i.value?(s.push(i.value),delete i.value):s.push(i);return t=new o(e,s),t["do"]=!0,t},t.prototype.compileNode=function(e){var t,n,r,i;if(n=this.isChainable()&&this.first.isChainable(),n||(this.first.front=this.front),"delete"===this.operator&&e.scope.check(this.first.unwrapAll().value))throw SyntaxError("delete operand may not be argument or var");if(("--"===(r=this.operator)||"++"===r)&&(i=this.first.unwrapAll().value,gt.call(I,i)>=0))throw SyntaxError("prefix increment/decrement may not have eval or arguments operand");return this.isUnary()?this.compileUnary(e):n?this.compileChain(e):"?"===this.operator?this.compileExistence(e):(t=[].concat(this.first.compileToFragments(e,T),this.makeCode(" "+this.operator+" "),this.second.compileToFragments(e,T)),T>=e.level?t:this.wrapInBraces(t))},t.prototype.compileChain=function(e){var t,n,r,i;return i=this.first.second.cache(e),this.first.second=i[0],r=i[1],n=this.first.compileToFragments(e,T),t=n.concat(this.makeCode(" "+(this.invert?"&&":"||")+" "),r.compileToFragments(e),this.makeCode(" "+this.operator+" "),this.second.compileToFragments(e,T)),this.wrapInBraces(t)},t.prototype.compileExistence=function(e){var t,n;return this.first.isComplex()?(n=new k(e.scope.freeVariable("ref")),t=new P(new r(n,this.first))):(t=this.first,n=t),(new y(new h(t),n,{type:"if"})).addElse(this.second).compileToFragments(e)},t.prototype.compileUnary=function(e){var n,r,i;return r=[],n=this.operator,r.push([this.makeCode(n)]),"!"===n&&this.first instanceof h?(this.first.negated=!this.first.negated,this.first.compileToFragments(e)):e.level>=E?(new P(this)).compileToFragments(e):(i="+"===n||"-"===n,("new"===n||"typeof"===n||"delete"===n||i&&this.first instanceof t&&this.first.operator===n)&&r.push([this.makeCode(" ")]),(i&&this.first instanceof t||"new"===n&&this.first.isStatement(e))&&(this.first=new P(this.first)),r.push(this.first.compileToFragments(e,T)),this.flip&&r.reverse(),this.joinFragmentArrays(r,""))},t.prototype.toString=function(e){return t.__super__.toString.call(this,e,this.constructor.name+" "+this.operator)},t}(i),e.In=b=function(e){function t(e,t){this.object=e,this.array=t}return mt(t,e),t.prototype.children=["object","array"],t.prototype.invert=A,t.prototype.compileNode=function(e){var t,n,r,i,s;if(this.array instanceof K&&this.array.isArray()){for(s=this.array.base.objects,r=0,i=s.length;i>r;r++)if(n=s[r],n instanceof U){t=!0;break}if(!t)return this.compileOrTest(e)}return this.compileLoopTest(e)},t.prototype.compileOrTest=function(e){var t,n,r,i,s,o,u,a,f,l,c,h;if(0===this.array.base.objects.length)return[this.makeCode(""+!!this.negated)];for(l=this.object.cache(e,T),o=l[0],s=l[1],c=this.negated?[" !== "," && "]:[" === "," || "],t=c[0],n=c[1],u=[],h=this.array.base.objects,r=a=0,f=h.length;f>a;r=++a)i=h[r],r&&u.push(this.makeCode(n)),u=u.concat(r?s:o,this.makeCode(t),i.compileToFragments(e,E));return T>e.level?u:this.wrapInBraces(u)},t.prototype.compileLoopTest=function(e){var t,n,r,i;return i=this.object.cache(e,x),r=i[0],n=i[1],t=[].concat(this.makeCode(ht("indexOf")+".call("),this.array.compileToFragments(e,x),this.makeCode(", "),n,this.makeCode(") "+(this.negated?"< 0":">= 0"))),it(r)===it(n)?t:(t=r.concat(this.makeCode(", "),t),x>e.level?t:this.wrapInBraces(t))},t.prototype.toString=function(e){return t.__super__.toString.call(this,e,this.constructor.name+(this.negated?"!":""))},t}(i),e.Try=$=function(e){function t(e,t,n,r){this.attempt=e,this.error=t,this.recovery=n,this.ensure=r}return mt(t,e),t.prototype.children=["attempt","recovery","ensure"],t.prototype.isStatement=G,t.prototype.jumps=function(e){var t;return this.attempt.jumps(e)||(null!=(t=this.recovery)?t.jumps(e):void 0)},t.prototype.makeReturn=function(e){return this.attempt&&(this.attempt=this.attempt.makeReturn(e)),this.recovery&&(this.recovery=this.recovery.makeReturn(e)),this},t.prototype.compileNode=function(e){var t,n,i,s;return e.indent+=W,s=this.attempt.compileToFragments(e,C),t=function(){var t,n;if(this.recovery){if(("function"==typeof (t=this.error).isObject?t.isObject():void 0)&&(i=new k("_error"),this.recovery.unshift(new r(this.error,i)),this.error=i),n=this.error.value,gt.call(I,n)>=0)throw SyntaxError('catch variable may not be "'+this.error.value+'"');return e.scope.check(this.error.value)||e.scope.add(this.error.value,"param"),[].concat(this.makeCode(" catch ("),this.error.compileToFragments(e),this.makeCode(") {\n"),this.recovery.compileToFragments(e,C),this.makeCode("\n"+this.tab+"}"))}return this.ensure||this.recovery?[]:[this.makeCode(" catch (_error) {}")]}.call(this),n=this.ensure?[].concat(this.makeCode(" finally {\n"),this.ensure.compileToFragments(e,C),this.makeCode("\n"+this.tab+"}")):[],[].concat(this.makeCode(""+this.tab+"try {\n"),s,this.makeCode("\n"+this.tab+"}"),t,n)},t}(i),e.Throw=V=function(e){function t(e){this.expression=e}return mt(t,e),t.prototype.children=["expression"],t.prototype.isStatement=G,t.prototype.jumps=O,t.prototype.makeReturn=X,t.prototype.compileNode=function(e){return[].concat(this.makeCode(this.tab+"throw "),this.expression.compileToFragments(e),this.makeCode(";"))},t}(i),e.Existence=h=function(e){function t(e){this.expression=e}return mt(t,e),t.prototype.children=["expression"],t.prototype.invert=A,t.prototype.compileNode=function(e){var t,n,r,i;return this.expression.front=this.front,r=this.expression.compile(e,T),v.test(r)&&!e.scope.check(r)?(i=this.negated?["===","||"]:["!==","&&"],t=i[0],n=i[1],r="typeof "+r+" "+t+' "undefined" '+n+" "+r+" "+t+" null"):r=""+r+" "+(this.negated?"==":"!=")+" null",[this.makeCode(S>=e.level?r:"("+r+")")]},t}(i),e.Parens=P=function(e){function t(e){this.body=e}return mt(t,e),t.prototype.children=["body"],t.prototype.unwrap=function(){return this.body},t.prototype.isComplex=function(){return this.body.isComplex()},t.prototype.compileNode=function(e){var t,n,r;return n=this.body.unwrap(),n instanceof K&&n.isAtomic()?(n.front=this.front,n.compileToFragments(e)):(r=n.compileToFragments(e,N),t=T>e.level&&(n instanceof _||n instanceof o||n instanceof d&&n.returns),t?r:this.wrapInBraces(r))},t}(i),e.For=d=function(e){function t(e,t){var n;if(this.source=t.source,this.guard=t.guard,this.step=t.step,this.name=t.name,this.index=t.index,this.body=s.wrap([e]),this.own=!!t.own,this.object=!!t.object,this.object&&(n=[this.index,this.name],this.name=n[0],this.index=n[1]),this.index instanceof K)throw SyntaxError("index cannot be a pattern matching expression");if(this.range=this.source instanceof K&&this.source.base instanceof B&&!this.source.properties.length,this.pattern=this.name instanceof K,this.range&&this.index)throw SyntaxError("indexes do not apply to range loops");if(this.range&&this.pattern)throw SyntaxError("cannot pattern match over range loops");this.returns=!1}return mt(t,e),t.prototype.children=["body","source","guard","step"],t.prototype.compileNode=function(e){var t,n,i,o,u,a,f,l,c,h,p,d,m,g,b,w,E,S,T,N,L,A,O,M,_,D,H,B,I,q,R,U,z,X;return t=s.wrap([this.body]),S=null!=(z=st(t.expressions))?z.jumps():void 0,S&&S instanceof j&&(this.returns=!1),H=this.range?this.source.base:this.source,D=e.scope,N=this.name&&this.name.compile(e,x),g=this.index&&this.index.compile(e,x),N&&!this.pattern&&D.find(N),g&&D.find(g),this.returns&&(_=D.freeVariable("results")),b=this.object&&g||D.freeVariable("i"),w=this.range&&N||g||b,E=w!==b?""+w+" = ":"",this.step&&!this.range&&(X=this.cacheToCodeFragments(this.step.cache(e,x)),B=X[0],q=X[1],I=q.match(F)),this.pattern&&(N=b),U="",p="",f="",d=this.tab+W,this.range?h=H.compileToFragments(ut(e,{index:b,name:N,step:this.step})):(R=this.source.compile(e,x),!N&&!this.own||v.test(R)||(f+=""+this.tab+(A=D.freeVariable("ref"))+" = "+R+";\n",R=A),N&&!this.pattern&&(L=""+N+" = "+R+"["+w+"]"),this.object||(B!==q&&(f+=""+this.tab+B+";\n"),this.step&&I&&(c=0>+I)||(T=D.freeVariable("len")),u=""+E+b+" = 0, "+T+" = "+R+".length",a=""+E+b+" = "+R+".length - 1",i=""+b+" < "+T,o=""+b+" >= 0",this.step?(I?c&&(i=o,u=a):(i=""+q+" > 0 ? "+i+" : "+o,u="("+q+" > 0 ? ("+u+") : "+a+")"),m=""+b+" += "+q):m=""+(w!==b?"++"+b:""+b+"++"),h=[this.makeCode(""+u+"; "+i+"; "+E+m)])),this.returns&&(O=""+this.tab+_+" = [];\n",M="\n"+this.tab+"return "+_+";",t.makeReturn(_)),this.guard&&(t.expressions.length>1?t.expressions.unshift(new y((new P(this.guard)).invert(),new k("continue"))):this.guard&&(t=s.wrap([new y(this.guard,t)]))),this.pattern&&t.expressions.unshift(new r(this.name,new k(""+R+"["+w+"]"))),l=[].concat(this.makeCode(f),this.pluckDirectCall(e,t)),L&&(U="\n"+d+L+";"),this.object&&(h=[this.makeCode(""+w+" in "+R)],this.own&&(p="\n"+d+"if (!"+ht("hasProp")+".call("+R+", "+w+")) continue;")),n=t.compileToFragments(ut(e,{indent:d}),C),n&&n.length>0&&(n=[].concat(this.makeCode("\n"),n,this.makeCode("\n"))),[].concat(l,this.makeCode(""+(O||"")+this.tab+"for ("),h,this.makeCode(") {"+p+U),n,this.makeCode(""+this.tab+"}"+(M||"")))},t.prototype.pluckDirectCall=function(e,t){var n,i,s,u,a,l,c,h,p,d,v,m,g,y,b;for(i=[],d=t.expressions,a=h=0,p=d.length;p>h;a=++h)s=d[a],s=s.unwrapAll(),s instanceof o&&(c=s.variable.unwrapAll(),(c instanceof f||c instanceof K&&(null!=(v=c.base)?v.unwrapAll():void 0)instanceof f&&1===c.properties.length&&("call"===(m=null!=(g=c.properties[0].name)?g.value:void 0)||"apply"===m))&&(u=(null!=(y=c.base)?y.unwrapAll():void 0)||c,l=new k(e.scope.freeVariable("fn")),n=new K(l),c.base&&(b=[n,c],c.base=b[0],n=b[1]),t.expressions[a]=new o(n,s.args),i=i.concat(this.makeCode(this.tab),(new r(l,u)).compileToFragments(e,C),this.makeCode(";\n"))));return i},t}(Q),e.Switch=z=function(e){function t(e,t,n){this.subject=e,this.cases=t,this.otherwise=n}return mt(t,e),t.prototype.children=["subject","cases","otherwise"],t.prototype.isStatement=G,t.prototype.jumps=function(e){var t,n,r,i,s,o,u;for(null==e&&(e={block:!0}),s=this.cases,r=0,i=s.length;i>r;r++)if(o=s[r],n=o[0],t=o[1],t.jumps(e))return t;return null!=(u=this.otherwise)?u.jumps(e):void 0},t.prototype.makeReturn=function(e){var t,n,r,i,o;for(i=this.cases,n=0,r=i.length;r>n;n++)t=i[n],t[1].makeReturn(e);return e&&(this.otherwise||(this.otherwise=new s([new k("void 0")]))),null!=(o=this.otherwise)&&o.makeReturn(e),this},t.prototype.compileNode=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;for(a=e.indent+W,f=e.indent=a+W,o=[].concat(this.makeCode(this.tab+"switch ("),this.subject?this.subject.compileToFragments(e,N):this.makeCode("false"),this.makeCode(") {\n")),d=this.cases,u=l=0,h=d.length;h>l;u=++l){for(v=d[u],i=v[0],t=v[1],m=rt([i]),c=0,p=m.length;p>c;c++)r=m[c],this.subject||(r=r.invert()),o=o.concat(this.makeCode(a+"case "),r.compileToFragments(e,N),this.makeCode(":\n"));if((n=t.compileToFragments(e,C)).length>0&&(o=o.concat(n,this.makeCode("\n"))),u===this.cases.length-1&&!this.otherwise)break;s=this.lastNonComment(t.expressions),s instanceof j||s instanceof k&&s.jumps()&&"debugger"!==s.value||o.push(r.makeCode(f+"break;\n"))}return this.otherwise&&this.otherwise.expressions.length&&o.push.apply(o,[this.makeCode(a+"default:\n")].concat(yt.call(this.otherwise.compileToFragments(e,C)),[this.makeCode("\n")])),o.push(this.makeCode(this.tab+"}")),o},t}(i),e.If=y=function(e){function t(e,t,n){this.body=t,null==n&&(n={}),this.condition="unless"===n.type?e.invert():e,this.elseBody=null,this.isChain=!1,this.soak=n.soak}return mt(t,e),t.prototype.children=["condition","body","elseBody"],t.prototype.bodyNode=function(){var e;return null!=(e=this.body)?e.unwrap():void 0},t.prototype.elseBodyNode=function(){var e;return null!=(e=this.elseBody)?e.unwrap():void 0},t.prototype.addElse=function(e){return this.isChain?this.elseBodyNode().addElse(e):(this.isChain=e instanceof t,this.elseBody=this.ensureBlock(e)),this},t.prototype.isStatement=function(e){var t;return(null!=e?e.level:void 0)===C||this.bodyNode().isStatement(e)||(null!=(t=this.elseBodyNode())?t.isStatement(e):void 0)},t.prototype.jumps=function(e){var t;return this.body.jumps(e)||(null!=(t=this.elseBody)?t.jumps(e):void 0)},t.prototype.compileNode=function(e){return this.isStatement(e)?this.compileStatement(e):this.compileExpression(e)},t.prototype.makeReturn=function(e){return e&&(this.elseBody||(this.elseBody=new s([new k("void 0")]))),this.body&&(this.body=new s([this.body.makeReturn(e)])),this.elseBody&&(this.elseBody=new s([this.elseBody.makeReturn(e)])),this},t.prototype.ensureBlock=function(e){return e instanceof s?e:new s([e])},t.prototype.compileStatement=function(e){var n,r,i,s,o,u,a;return i=et(e,"chainChild"),(o=et(e,"isExistentialEquals"))?(new t(this.condition.invert(),this.elseBodyNode(),{type:"if"})).compileToFragments(e):(a=e.indent+W,s=this.condition.compileToFragments(e,N),r=this.ensureBlock(this.body).compileToFragments(ut(e,{indent:a})),u=[].concat(this.makeCode("if ("),s,this.makeCode(") {\n"),r,this.makeCode("\n"+this.tab+"}")),i||u.unshift(this.makeCode(this.tab)),this.elseBody?(n=u.concat(this.makeCode(" else ")),this.isChain?(e.chainChild=!0,n=n.concat(this.elseBody.unwrap().compileToFragments(e,C))):n=n.concat(this.makeCode("{\n"),this.elseBody.compileToFragments(ut(e,{indent:a}),C),this.makeCode("\n"+this.tab+"}")),n):u)},t.prototype.compileExpression=function(e){var t,n,r,i;return r=this.condition.compileToFragments(e,S),n=this.bodyNode().compileToFragments(e,x),t=this.elseBodyNode()?this.elseBodyNode().compileToFragments(e,x):[this.makeCode("void 0")],i=r.concat(this.makeCode(" ? "),n,this.makeCode(" : "),t),e.level>=S?this.wrapInBraces(i):i},t.prototype.unfoldSoak=function(){return this.soak&&this},t}(i),a={wrap:function(e,n,r){var i,u,a,l,c;if(e.jumps())return e;if(a=new f([],s.wrap([e])),i=[],(l=e.contains(this.literalArgs))||e.contains(this.literalThis)){if(l&&e.classBody)throw SyntaxError("Class bodies shouldn't reference arguments");c=new k(l?"apply":"call"),i=[new k("this")],l&&i.push(new k("arguments")),a=new K(a,[new t(c)])}return a.noReturn=r,u=new o(a,i),n?s.wrap([u]):u},literalArgs:function(e){return e instanceof k&&"arguments"===e.value&&!e.asKey},literalThis:function(e){return e instanceof k&&"this"===e.value&&!e.asKey||e instanceof f&&e.bound||e instanceof o&&e.isSuper}},ct=function(e,t,n){var r;if(r=t[n].unfoldSoak(e))return t[n]=r.body,r.body=new K(t),r},J={"extends":function(){return"function(child, parent) { for (var key in parent) { if ("+ht("hasProp")+".call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; }"},indexOf:function(){return"[].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; }"},hasProp:function(){return"{}.hasOwnProperty"},slice:function(){return"[].slice"}},C=1,N=2,x=3,S=4,T=5,E=6,W="  ",m="[$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*",v=RegExp("^"+m+"$"),F=/^[+-]?\d+$/,L=RegExp("^(?:("+m+")\\.prototype(?:\\.("+m+")|\\[(\"(?:[^\\\\\"\\r\\n]|\\\\.)*\"|'(?:[^\\\\'\\r\\n]|\\\\.)*')\\]|\\[(0x[\\da-fA-F]+|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\]))|("+m+")$"),g=/^['"]/,ht=function(e){var t;return t="__"+e,q.root.assign(t,J[e]()),t},at=function(e,t){return e=e.replace(/\n/g,"$&"+t),e.replace(/\s+$/,"")}}).call(this)},require["./sourcemap"]=new function(){var e=this;(function(){var t,n,r,i,s,o,u,a;n=function(){function e(e){this.generatedLine=e,this.columnMap={},this.columnMappings=[]}return e.prototype.addMapping=function(e,t,n){var r,i;return i=t[0],r=t[1],null==n&&(n={}),this.columnMap[e]&&n.noReplace?void 0:(this.columnMap[e]={generatedLine:this.generatedLine,generatedColumn:e,sourceLine:i,sourceColumn:r},this.columnMappings.push(this.columnMap[e]),this.columnMappings.sort(function(e,t){return e.generatedColumn-t.generatedColumn}))},e.prototype.getSourcePosition=function(e){var t,n,r,i,s,o;for(t=null,r=null,o=this.columnMappings,i=0,s=o.length;s>i&&(n=o[i],!(n.generatedColumn>e));i++)r=n;return r?t=[r.sourceLine,r.sourceColumn]:void 0},e}(),e.SourceMap=function(){function e(){this.generatedLines=[]}return e.prototype.addMapping=function(e,t,r){var i,s,o;return null==r&&(r={}),s=t[0],i=t[1],o=this.generatedLines[s],o||(o=this.generatedLines[s]=new n(s)),o.addMapping(i,e,r)},e.prototype.getSourcePosition=function(e){var t,n,r,i;return r=e[0],n=e[1],t=null,i=this.generatedLines[r],i&&(t=i.getSourcePosition(n)),t},e.prototype.forEachMapping=function(e){var t,n,r,i,s,o,u;for(o=this.generatedLines,u=[],n=i=0,s=o.length;s>i;n=++i)r=o[n],r?u.push(function(){var n,i,s,o;for(s=r.columnMappings,o=[],n=0,i=s.length;i>n;n++)t=s[n],o.push(e(t));return o}()):u.push(void 0);return u},e}(),e.generateV3SourceMap=function(t,n,r){var i,s,o,u,a,f,l;return null==n&&(n=null),null==r&&(r=null),l=0,s=0,u=0,o=0,f=!1,a="",t.forEachMapping(function(t){for(;t.generatedLine>l;)s=0,f=!1,a+=";",l++;return f&&(a+=",",f=!1),a+=e.vlqEncodeValue(t.generatedColumn-s),s=t.generatedColumn,a+=e.vlqEncodeValue(0),a+=e.vlqEncodeValue(t.sourceLine-u),u=t.sourceLine,a+=e.vlqEncodeValue(t.sourceColumn-o),o=t.sourceColumn,f=!0}),i={version:3,file:r,sourceRoot:"",sources:n?[n]:[],names:[],mappings:a},JSON.stringify(i,null,2)},e.loadV3SourceMap=function(){return todo()},t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=t.length-1,a=function(e){if(e>r)throw Error("Cannot encode value "+e+" > "+r);if(0>e)throw Error("Cannot encode value "+e+" < 0");return t[e]},u=function(e){var n;if(n=t.indexOf(e),-1===n)throw Error("Invalid Base 64 character: "+e);return n},s=5,i=1<<s,o=i-1,e.vlqEncodeValue=function(e){var t,n,r,u;for(r=0>e?1:0,u=(Math.abs(e)<<1)+r,t="";u||!t;)n=u&o,u>>=s,u&&(n|=i),t+=a(n);return t},e.vlqDecodeValue=function(e,t){var n,r,a,f,l,c,h,p;for(null==t&&(t=0),c=t,a=!1,p=0,r=0;!a;)l=u(e[c]),c+=1,f=l&o,p+=f<<r,l&i||(a=!0),r+=s;return n=c-t,h=1&p,p>>=1,h&&(p=-p),[p,n]}}).call(this)},require["./coffee-script"]=new function(){var e=this;(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v={}.hasOwnProperty;if(i=require("fs"),f=require("path"),t=require("./lexer").Lexer,a=require("./parser").parser,s=require("./helpers"),c=require("vm"),l=require("./sourcemap"),u=function(e,t){var r,o;return r=i.readFileSync(t,"utf8"),o=65279===r.charCodeAt(0)?r.substring(1):r,e._compile(n(o,{filename:t,literate:s.isLiterate(t)}),t)},require.extensions)for(d=[".coffee",".litcoffee",".md",".coffee.md"],h=0,p=d.length;p>h;h++)r=d[h],require.extensions[r]=u;e.VERSION="1.6.1",e.helpers=s,e.compile=n=function(t,n){var r,i,u,f,c,h,p,d,v,m,g,y,b,w;null==n&&(n={}),m=e.helpers.merge;try{for(n.sourceMap&&(i=s.baseFileName(n.filename),v=s.baseFileName(n.filename,!0)+".js",y=new l.SourceMap),h=a.parse(o.tokenize(t,n)).compileToFragments(n),f=0,n.header&&(f+=1),n.sourceMap&&(f+=1),u=0,d="",b=0,w=h.length;w>b;b++)c=h[b],y&&(c.locationData&&y.addMapping([c.locationData.first_line,c.locationData.first_column],[f,u],{noReplace:!0}),g=s.count(c.code,"\n"),f+=g,u=c.code.length-(g?c.code.lastIndexOf("\n"):0)),d+=c.code}catch(E){throw n.filename&&(E.message="In "+n.filename+", "+E.message),E}return n.header&&(p="Generated by CoffeeScript "+this.VERSION,d="// "+p+"\n"+d),n.sourceMap?(r={js:d},y&&(r.sourceMap=y,r.v3SourceMap=l.generateV3SourceMap(y,i,v)),r):d},e.tokens=function(e,t){return o.tokenize(e,t)},e.nodes=function(e,t){return"string"==typeof e?a.parse(o.tokenize(e,t)):a.parse(e)},e.run=function(e,t){var r;return null==t&&(t={}),r=require.main,r.filename=process.argv[1]=t.filename?i.realpathSync(t.filename):".",r.moduleCache&&(r.moduleCache={}),r.paths=require("module")._nodeModulePaths(f.dirname(i.realpathSync(t.filename))),!s.isCoffee(r.filename)||require.extensions?r._compile(n(e,t),r.filename):r._compile(e,r.filename)},e.eval=function(e,t){var r,i,s,o,u,a,l,h,p,d,g,y,b,w;if(null==t&&(t={}),e=e.trim()){if(i=c.Script){if(null!=t.sandbox){if(t.sandbox instanceof i.createContext().constructor)l=t.sandbox;else{l=i.createContext(),y=t.sandbox;for(o in y)v.call(y,o)&&(h=y[o],l[o]=h)}l.global=l.root=l.GLOBAL=l}else l=global;if(l.__filename=t.filename||"eval",l.__dirname=f.dirname(l.__filename),l===global&&!l.module&&!l.require){for(r=require("module"),l.module=g=new r(t.modulename||"eval"),l.require=w=function(e){return r._load(e,g,!0)},g.filename=l.__filename,b=Object.getOwnPropertyNames(require),p=0,d=b.length;d>p;p++)a=b[p],"paths"!==a&&(w[a]=require[a]);w.paths=g.paths=r._nodeModulePaths(process.cwd()),w.resolve=function(e){return r._resolveFilename(e,g)}}}u={};for(o in t)v.call(t,o)&&(h=t[o],u[o]=h);return u.bare=!0,s=n(e,u),l===global?c.runInThisContext(s):c.runInContext(s,l)}},o=new t,a.lexer={lex:function(){var e,t;return t=this.tokens[this.pos++],t?(e=t[0],this.yytext=t[1],this.yylloc=t[2],this.yylineno=this.yylloc.first_line):e="",e},setInput:function(e){return this.tokens=e,this.pos=0},upcomingInput:function(){return""}},a.yy=require("./nodes")}).call(this)},require["./browser"]=new function(){var exports=this;(function(){var CoffeeScript,runScripts,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};CoffeeScript=require("./coffee-script"),CoffeeScript.require=require,CoffeeScript.eval=function(code,options){var _ref;return null==options&&(options={}),null==(_ref=options.bare)&&(options.bare=!0),eval(CoffeeScript.compile(code,options))},CoffeeScript.run=function(e,t){return null==t&&(t={}),t.bare=!0,Function(CoffeeScript.compile(e,t))()},"undefined"!=typeof window&&null!==window&&(CoffeeScript.load=function(e,t,n){var r;return null==n&&(n={}),r=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,r.open("GET",e,!0),"overrideMimeType"in r&&r.overrideMimeType("text/plain"),r.onreadystatechange=function(){var s;if(4===r.readyState){if(0!==(s=r.status)&&200!==s)throw Error("Could not load "+e);if(CoffeeScript.run(r.responseText,n),t)return t()}},r.send(null)},runScripts=function(){var e,t,n,r,i,s,o;return o=document.getElementsByTagName("script"),t=["text/coffeescript","text/literate-coffeescript"],e=function(){var e,n,r,i;for(i=[],e=0,n=o.length;n>e;e++)s=o[e],r=s.type,__indexOf.call(t,r)>=0&&i.push(s);return i}(),r=0,i=e.length,(n=function(){var i,s,o;return o=e[r++],i=null!=o?o.type:void 0,__indexOf.call(t,i)>=0?(s={literate:"text/literate-coffeescript"===i},o.src?CoffeeScript.load(o.src,n,s):(CoffeeScript.run(o.innerHTML,s),n())):void 0})(),null},window.addEventListener?addEventListener("DOMContentLoaded",runScripts,!1):attachEvent("onload",runScripts))}).call(this)},require["./coffee-script"]}();"function"==typeof define&&define.amd?define("coffee-script/index",[],function(){return CoffeeScript}):root.CoffeeScript=CoffeeScript}(this),define("coffee-script",["coffee-script/index"],function(e){return e}),define("cs/cs",["coffee-script"],function(e){"use strict";var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=function(){throw new Error("Environment unsupported.")},s={};return typeof process!="undefined"&&process.versions&&!!process.versions.node?(t=require.nodeRequire("fs"),i=function(e,n){n(t.readFileSync(e,"utf8"))}):typeof window!="undefined"&&window.navigator&&window.document||typeof importScripts!="undefined"?(n=function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}if(!e)throw new Error("getXhr(): XMLHttpRequest not available");return e},i=function(e,t){var r=n();r.open("GET",e,!0),r.onreadystatechange=function(e){r.readyState===4&&t(r.responseText)},r.send(null)}):typeof Packages!="undefined"&&(i=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)}),{fetchText:i,get:function(){return e},write:function(e,t,n){if(s.hasOwnProperty(t)){var r=s[t];n.asModule(e+"!"+t,r)}},version:"0.4.3",load:function(t,n,r,o){var u=n.toUrl(/\.((lit)?coffee|coffee\.md)$/.test(t)?t:t+".coffee");i(u,function(i){var a=o.CoffeeScript||{};a.literate=/\.(litcoffee|coffee\.md)$/.test(u);try{i=e.compile(i,a)}catch(f){throw f.message="In "+u+", "+f.message,f}o.isBuild&&(s[t]=i),o.isBuild||(i+="\r\n//@ sourceURL="+u),r.fromText(t,i),n([t],function(e){r(e)})})}}}),define("cs",["cs/cs"],function(e){return e}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!models/ObjectModel",["underscore","backbone"],function(e,n){var r;return r=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,r),i.prototype.idAttribute="_id",i.prototype.defaults={name:"",description:"",url:"",color:"black",tags:[],_id:-1,_docId:0,image:""},i.prototype.isNew=function(){return this.get(this.idAttribute)<0},i.prototype.ignoredAttributes=["selected","dim"],i.prototype.parse=function(e,t){var n,r,i,s;if(e.tags&&typeof tagToColor!="undefined"&&tagToColor!==null){s=e.tags;for(r=0,i=s.length;r<i;r++)n=s[r],e.color=this.tagToColor[n]}return e._id&&(e._id=parseInt(e._id,10)),e},i.prototype.sync=function(e,t,r){return r=r||{},r.data=this.serialize(),r.contentType="application/json",n.sync.apply(this,[e,t,r])},i.prototype.serialize=function(){return e.omit(this.clone().toJSON(),this.ignoredAttributes)},i}(n.Model)})}.call(this);var io="undefined"==typeof module?{}:module.exports;(function(){(function(e,t){var n=e;n.version="0.9.16",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i=n.util.parseUri(e),s,o;t&&t.location&&(i.protocol=i.protocol||t.location.protocol.slice(0,-1),i.host=i.host||(t.document?t.document.domain:t.location.hostname),i.port=i.port||t.location.port),s=n.util.uniqueUri(i);var u={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(u,r);if(u["force new connection"]||!n.sockets[s])o=new n.Socket(u);return!u["force new connection"]&&o&&(n.sockets[s]=o),o=o||n.sockets[s],o.of(i.path.length>1?i.path:"")}})("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=r.exec(e||""),n={},s=14;while(s--)n[i[s]]=t[s]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(r=r||"localhost",!i&&n=="https"&&(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var s in r)r.hasOwnProperty(s)&&i.push(s+"="+r[s]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){var t={},n=e.split("&"),r=0,i=n.length,s;for(;r<i;++r)s=n[r].split("="),s[0]&&(t[s[0]]=s[1]);return t};var s=!1;n.load=function(e){if("document"in t&&document.readyState==="complete"||s)return e();n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){s=!0}),n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts)return e();n.load(function(){setTimeout(e,100)})},n.merge=function(t,r,i,s){var o=s||[],u=typeof i=="undefined"?2:i,a;for(a in r)r.hasOwnProperty(a)&&n.indexOf(o,a)<0&&(typeof t[a]!="object"||!u?(t[a]=r[a],o.push(r[a])):n.merge(t[a],r[a],u-1,o));return t},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},n.intersect=function(e,t){var r=[],i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(var o=0,u=s.length;o<u;o++)~n.indexOf(i,s[o])&&r.push(s[o]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return e.withCredentials!=undefined}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}var n=this;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){var i=-1;for(var s=0,o=r.length;s<o;s++)if(r[s]===n||r[s].listener&&r[s].listener===n){i=s;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return e===undefined?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;var i=n.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a instanceof Date&&(a=date(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],s=n.advice=["reconnect"],o=t.JSON,u=t.util.indexOf;n.encodePacket=function(e){var t=u(r,e.type),n=e.id||"",a=e.endpoint||"",f=e.ack,l=null;switch(e.type){case"error":var c=e.reason?u(i,e.reason):"",h=e.advice?u(s,e.advice):"";if(c!==""||h!=="")l=c+(h!==""?"+"+h:"");break;case"message":e.data!==""&&(l=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),l=o.stringify(p);break;case"json":l=o.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}var d=[t,n+(f=="data"?"+":""),a];return l!==null&&l!==undefined&&d.push(l),d.join(":")},n.encodePayload=function(e){var t="";if(e.length==1)return e[0];for(var n=0,r=e.length;n<r;n++){var i=e[n];t+="�"+i.length+"�"+e[n]}return t};var a=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(a);if(!t)return{};var n=t[2]||"",e=t[5]||"",u={type:r[t[1]],endpoint:t[4]||""};n&&(u.id=n,t[3]?u.ack="data":u.ack=!0);switch(u.type){case"error":var t=e.split("+");u.reason=i[t[0]]||"",u.advice=s[t[1]]||"";break;case"message":u.data=e||"";break;case"event":try{var f=o.parse(e);u.name=f.name,u.args=f.args}catch(l){}u.args=u.args||[];break;case"json":try{u.data=o.parse(e)}catch(l){}break;case"connect":u.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){u.ackId=t[1],u.args=[];if(t[3])try{u.args=t[3]?o.parse(t[3]):[]}catch(l){}}break;case"disconnect":case"heartbeat":}return u},n.decodePayload=function(e){if(e.charAt(0)=="�"){var t=[];for(var r=1,i="";r<e.length;r++)e.charAt(r)=="�"?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(e!==""){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;r<i;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),e.type=="heartbeat"?this.onHeartbeat():(e.type=="connect"&&e.endpoint==""&&this.onConnect(),e.type=="error"&&e.advice=="reconnect"&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){var e=this;this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),e!==""&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function s(t){t instanceof Error?(n.connecting=!1,n.onError(t.message)):e.apply(null,t.split(":"))}var n=this,r=this.options,o=["http"+(r.secure?"s":"")+":/",r.host+":"+r.port,r.resource,t.protocol,t.util.query(this.options.query,"t="+ +(new Date))].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var u=document.getElementsByTagName("script")[0],a=document.createElement("script");a.src=o+"&jsonp="+t.j.length,u.parentNode.insertBefore(a,u),t.j.push(function(e){s(e),a.parentNode.removeChild(a)})}else{var f=t.util.request();f.open("GET",o,!0),this.isXDomain()&&(f.withCredentials=!0),f.onreadystatechange=function(){f.readyState==4&&(f.onreadystatechange=i,f.status==200?s(f.responseText):f.status==403?n.onError(f.responseText):(n.connecting=!1,!n.reconnecting&&n.onError(f.responseText)))},f.send(null)}},r.prototype.getTransport=function(e){var n=e||this.transports,r;for(var i=0,s;s=n[i];i++)if(t.Transport[s]&&t.Transport[s].check(this)&&(!this.isXDomain()||t.Transport[s].xdomainCheck(this)))return new t.Transport[s](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(r,i,s,o){function u(e){n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=!1;if(n.options["try multiple transports"]){var e=n.transports;while(e.length>0&&e.splice(0,1)[0]!=n.transport.name);e.length?u(e):n.publish("connect_failed")}}},n.options["connect timeout"]))})}n.sessionid=r,n.closeTimeout=s*1e3,n.heartbeatTimeout=i*1e3,n.transports||(n.transports=n.origTransports=o?t.util.intersect(o.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),u(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&typeof e=="function"&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&e.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1;if(t||n)this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},r.prototype.reconnect=function(){function i(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer),e.removeListener("connect_failed",s),e.removeListener("connect",s),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=n}function s(){if(!e.reconnecting)return;if(e.connected)return i();if(e.connecting&&e.reconnecting)return e.reconnectionTimer=setTimeout(s,1e3);e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),i()):(e.on("connect_failed",s),e.options["try multiple transports"]=!0,e.transports=e.origTransports,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<r&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(s,e.reconnectionDelay))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],r=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(s,this.reconnectionDelay),this.on("connect",s)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function r(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var n=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];e.ack=="data"?i.push(r):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);e.ack=="data"&&i.push(r),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):e.reason=="unauthorized"?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e=t.util.query(this.socket.options.query),r=this,i;return i||(i=n.MozWebSocket||n.WebSocket),this.websocket=new i(this.prepareUrl()+e),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},t.util.ua.iDevice?r.prototype.send=function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,r){function i(){var t=e.options,i=t["flash policy port"],o=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||(typeof WEB_SOCKET_SWF_LOCATION=="undefined"&&(WEB_SOCKET_SWF_LOCATION=o.join("/")),i!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+i),WebSocket.__initialize(),n.loaded=!0),r.call(s)}var s=this;if(document.body)return i();t.util.load(i)},n.check=function(){return typeof WebSocket!="undefined"&&"__initialize"in WebSocket&&!!swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window)var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?["Active"].concat("").join("X"):"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u[["Active"].concat("Object").join("X")]!=e)try{var y=new(window[["Active"].concat("Object").join("X")])(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();(function(){if("undefined"==typeof window||window.WebSocket)return;var e=window.console;if(!e||!e.log||!e.error)e={log:function(){},error:function(){}};if(!swfobject.hasFlashPlayerVersion("10.0.0")){e.error("Flash Player >= 10.0.0 is required.");return}location.protocol=="file:"&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,r,i){var s=this;s.__id=WebSocket.__nextId++,WebSocket.__instances[s.__id]=s,s.readyState=WebSocket.CONNECTING,s.bufferedAmount=0,s.__events={},t?typeof t=="string"&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(s.__id,e,t,n||null,r||0,i||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return t<0?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)return;this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)},WebSocket.prototype.addEventListener=function(e,t,n){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t,n){if(!(e in this.__events))return;var r=this.__events[e];for(var i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){var t=this.__events[e.type]||[];for(var n=0;n<t.length;++n)t[n](e);var r=this["on"+e.type];r&&r(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if(e.type=="open"||e.type=="error")t=this.__createSimpleEvent(e.type);else if(e.type=="close")t=this.__createSimpleEvent("close");else{if(e.type!="message")throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(WebSocket.__flash)return;WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation);if(!window.WEB_SOCKET_SWF_LOCATION){e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{var t=WebSocket.__flash.receiveEvents();for(var n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(r){e.error(r)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!e||!e.enabledPlugin||!e.enabledPlugin.filename?!1:e.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))})(),function(e,t,n){function r(e){if(!e)return;t.Transport.apply(this,arguments),this.sendBuffer=[]}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function r(){this.readyState==4&&(this.onreadystatechange=i,t.posting=!1,this.status==200?t.socket.setBuffer(!1):t.onClose())}function s(){this.onload=i,t.socket.setBuffer(!1)}var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=s:this.sendXHR.onreadystatechange=r,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +(new Date));n.open(e||"GET",this.prepareUrl()+r,!0);if(e=="POST")try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),s=n.XDomainRequest&&i instanceof XDomainRequest,o=e&&e.options&&e.options.secure?"https:":"http:",u=n.location&&o!=n.location.protocol;if(i&&(!s||!u))return!0}catch(a){}return!1},r.xdomainCheck=function(e){return r.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date));this.iframe.src=this.prepareUrl()+r,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){e=e.replace(/\\\//g,"/"),this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(r){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&t.Transport.XHR.check(e)}catch(r){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function t(){this.readyState==4&&(this.onreadystatechange=i,this.status==200?(e.onData(this.responseText),e.get()):e.onClose())}function r(){this.onload=i,this.onerror=i,e.retryCounter=1,e.onData(this.responseText),e.get()}function s(){e.retryCounter++,!e.retryCounter||e.retryCounter>3?e.onClose():e.get()}if(!this.isOpen)return;var e=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=r,this.xhr.onerror=s):this.xhr.onreadystatechange=t,this.xhr.send(null)},r.prototype.onClose=function(){t.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(e){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}var r=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function a(){f(),n.socket.setBuffer(!1)}function f(){n.iframe&&n.form.removeChild(n.iframe);try{u=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){u=document.createElement("iframe"),u.name=n.iframeId}u.id=n.iframeId,n.form.appendChild(u),n.iframe=u}var n=this,r=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);if(!this.form){var i=document.createElement("form"),s=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index,u;i.className="socketio",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.display="none",i.target=o,i.method="POST",i.setAttribute("accept-charset","utf-8"),s.name="d",i.appendChild(s),document.body.appendChild(i),this.form=i,this.area=s}this.form.action=this.prepareUrl()+r,f(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?u.onreadystatechange=function(){n.iframe.readyState=="complete"&&a()}:this.iframe.onload=a,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +(new Date)+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s),this.script=n,r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},i.prototype.ready=function(e,n){var i=this;if(!r)return n.call(this);t.util.load(function(){n.call(i)})},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),typeof define=="function"&&define.amd&&define("socket-io",[],function(){return io})})(),function(e,t){if(typeof define=="function"&&define.amd)define("b-iobind",["backbone","underscore","socket-io","jquery"],t);else if(typeof exports=="object"){var n=require("underscore"),r=require("backbone"),i=require("socket.io-client"),s=require("jquery");module.exports=t(r,n,i,s)}else t(e.Backbone,e._,e.io,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){return e.Model.prototype.ioBindVersion="0.4.8",e.Model.prototype.ioBind=function(n,r,i,s){var o=this._ioEvents||(this._ioEvents={}),u=t.result(this,"url")+":"+n,a=this;"function"==typeof r&&(s=i,i=r,r=this.socket||window.socket||e.socket);var f={name:n,global:u,cbLocal:i,cbGlobal:function(){var e=[n];e.push.apply(e,arguments),a.trigger.apply(a,e)}};return this.bind(f.name,f.cbLocal,s||a),r.on(f.global,f.cbGlobal),o[f.name]?o[f.name].push(f):o[f.name]=[f],this},e.Model.prototype.ioUnbind=function(n,r,i){var s=this._ioEvents||(this._ioEvents={}),o=this.url()+":"+n;"function"==typeof r&&(i=r,r=this.socket||window.socket||e.socket);var u=s[n];if(!t.isEmpty(u)){if(i&&"function"==typeof i){for(var a=0,f=u.length;a<f;a++)i==u[a].cbLocal&&(this.unbind(u[a].name,u[a].cbLocal),r.removeListener(u[a].global,u[a].cbGlobal),u[a]=!1);u=t.compact(u)}else this.unbind(n),r.removeAllListeners(o),r.$events&&delete r.$events[o];u.length===0&&delete s[n]}return this},e.Model.prototype.ioUnbindAll=function(t){var n=this._ioEvents||(this._ioEvents={});t||(t=this.socket||window.socket||e.socket);for(var r in n)this.ioUnbind(r,t);return this},e.Collection.prototype.ioBindVersion="0.4.8",e.Collection.prototype.ioBind=function(n,r,i,s){var o=this._ioEvents||(this._ioEvents={}),u=t.result(this,"url")+":"+n,a=this;"function"==typeof r&&(s=i,i=r,r=this.socket||window.socket||e.socket);var f={name:n,global:u,cbLocal:i,cbGlobal:function(){var e=[n];e.push.apply(e,arguments),a.trigger.apply(a,e)}};return this.bind(f.name,f.cbLocal,s),r.on(f.global,f.cbGlobal),o[f.name]?o[f.name].push(f):o[f.name]=[f],this},e.Collection.prototype.ioUnbind=function(n,r,i){var s=this._ioEvents||(this._ioEvents={}),o=this.url+":"+n;"function"==typeof r&&(i=r,r=this.socket||window.socket||e.socket);var u=s[n];if(!t.isEmpty(u)){if(i&&"function"==typeof i){for(var a=0,f=u.length;a<f;a++)i==u[a].cbLocal&&(this.unbind(u[a].name,u[a].cbLocal),r.removeListener(u[a].global,u[a].cbGlobal),u[a]=!1);u=t.compact(u)}else this.unbind(n),r.removeAllListeners(o),r.$events&&delete r.$events[o];u.length===0&&delete s[n]}return this},e.Collection.prototype.ioUnbindAll=function(t){var n=this._ioEvents||(this._ioEvents={});t||(t=this.socket||window.socket||e.socket);for(var r in n)this.ioUnbind(r,t);return this},e}),function(e,t){if(typeof define=="function"&&define.amd)define("b-iosync",["backbone","underscore","socket-io","jquery"],t);else if(typeof exports=="object"){var n=require("underscore"),r=require("backbone"),i=require("socket.io-client"),s=require("jquery");module.exports=t(r,n,i,s)}else t(e.Backbone,e._,e.io,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.sync,s=function(n,i,s){var o=t.extend({},s);o.url?o.url=t.result(o,"url"):o.url=t.result(i,"url")||u();var a=o.url.split("/"),f=a[0]!==""?a[0]:a[1];!o.data&&i&&(o.data=o.attrs||i.toJSON(s)||{}),o.patch===!0&&o.data.id==null&&i&&(o.data.id=i.id);var l=i.socket||e.socket||window.socket,c=r.Deferred();l.emit(f+":"+n,o.data,function(e,t){e?(s.error&&s.error(e),c.reject()):(s.success&&s.success(t),c.resolve())});var h=c.promise();return i.trigger("request",i,h,s),h},o=function(e){return t.result(e.ajaxSync)?i:s};e.sync=function(e,t,n){return o(t).apply(this,[e,t,n])};var u=function(){throw new Error('A "url" property or function must be specified')};return e}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!models/NodeModel",["jquery","underscore","backbone","cs!models/ObjectModel","b-iobind","b-iosync","socket-io"],function(e,n,r,i,s,o,u){var a,f=this;return a=function(n){function r(){var e=this;return this.getNeighbors=function(t){return r.prototype.getNeighbors.apply(e,arguments)},r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.urlRoot=function(){return"/node"},r.prototype.ajaxURL=function(){return"/document/"+this.get("_docId")+"/nodes/"+this.get("_id")},r.prototype.noIoBind=!1,r.prototype.socket=u.connect(""),r.prototype.isNode=!0,r.prototype.defaults={name:"",description:"",url:"",color:"black",tags:[],_id:-1,_docId:0,neighborCount:0},r.prototype.schema={name:{type:"Text",validators:["required"]},url:{type:"Text",validators:[{type:"regexp",regexp:/((www|http|https)([^\s]+))|([a-z0-9!#$%&'+\/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'+\/=?^_`{|}~-]+)*@(?:a-z0-9?.)+a-z0-9?)/}]},description:{type:"AtWhoEditor"},image:{type:"Text",title:"Image url",validators:[{type:"regexp",regexp:/((www|http|https)([^\s]+))|([a-z0-9!#$%&'+\/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'+\/=?^_`{|}~-]+)*@(?:a-z0-9?.)+a-z0-9?)/}]}},r.prototype.validate=function(){if(!this.get("name"))return"Your node must have a name.";if(typeof this.get("_id")!="number")return"_id must be a number."},r.prototype.getNeighbors=function(t){var n=this;return e.get(this.ajaxURL()+"/neighbors/",function(e){var r;return t(function(){var t,n,i;i=[];for(t=0,n=e.length;t<n;t++)r=e[t],i.push(this.parse(r));return i}.call(n))})},r.prototype.getSpokes=function(t){return e.get(this.ajaxURL()+"/spokes/",function(e){return t(e)})},r.prototype.getConnections=function(t,n){var r,i;return i=t.pluck("_id"),r={nodeIds:i},e.post(this.ajaxURL()+"/get_connections/",r,function(e){return n(e)})},r}(i)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!models/ConnectionModel",["backbone","cs!models/ObjectModel","b-iobind","b-iosync","socket-io"],function(e,n,r,i,s){var o;return o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.urlRoot=function(){return"/connection"},n.prototype.noIoBind=!1,n.prototype.socket=s.connect(""),n.prototype.isConnection=!0,n.prototype.defaults={name:"",description:"",url:"",source:void 0,target:void 0,color:"white",tags:[],_id:-1,_docId:0},n.prototype.schema={name:{type:"ConnDropdown",title:"Connection Type e.g. 'relates to'"},url:"Text",description:{type:"AtWhoEditor"},image:{type:"Text",title:"Image (url to an image)",validators:[{type:"regexp",regexp:/((www|http|https)([^\s]+))|([a-z0-9!#$%&'+\/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'+\/=?^_`{|}~-]+)*@(?:a-z0-9?.)+a-z0-9?)/}]}},n.prototype.ignoredAttributes=["selected","dim"],n.prototype.validate=function(){(typeof this.get("source")!="number"||typeof this.get("target")!="number")&&"_id of source and target must be a number.";if(typeof this.get("_id")!="number")return"_id of connection must be a number."},n.prototype.serialize=function(){var e;return e=_.omit(this.clone().toJSON(),this.ignoredAttributes),this.get("tags").length===0?_.omit(e,["tags"]):e},n}(n)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!models/FilterModel",["backbone","cs!models/NodeModel"],function(e,n){var r,i=this;return r=function(e){function n(){var e=this;return this.passes=function(t){return n.prototype.passes.apply(e,arguments)},n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={initial_tags:["untagged"],node_tags:["untagged"],connection_tags:[]},n.prototype.addInitialTags=function(e){return this.set("initial_tags",_.union(this.get("initial_tags"),e))},n.prototype.addNodeTags=function(e){return this.set("node_tags",_.union(this.get("node_tags"),e))},n.prototype.getTags=function(e){return _.filter(this.get(e+"_tags"),function(e){return e!=="untagged"})},n.prototype.passes=function(e){var t;return t=_.contains(this.get("node_tags"),"untagged"),_.intersection(e.get("tags"),this.get("node_tags")).length>0||e.get("tags").length===0&&t},n}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!models/DocumentModel",["backbone","b-iobind","b-iosync","socket-io"],function(e,n,r,i){var s;return s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.urlRoot="/document",r.prototype.idAttribute="_id",r.prototype.noIoBind=!1,r.prototype.socket=i.connect(""),r.prototype.defaults={name:"Untitled",_id:-1,workspaces:[],publicView:0,publicEdit:0,createdBy:"",description:""},r.prototype.initialize=function(){var e=this;return this.socket.on(this.urlRoot+":update",function(t){return e.set(t)}),this.socket.on("/workspace:update",function(t){var n;n=e.get("workspaces");if(!_.contains(_.pluck(n,"_.id"),t._id))return n.push({_id:t._id,name:t.name})}),this.socket.on("/workspace:delete",function(t){var n;return n=e.get("workspaces"),e.set("workspaces",_.filter(n,function(e){return parseInt(e._id)!==parseInt(t._id)}))})},r.prototype.isNew=function(){return this.get(this.idAttribute)<0},r.prototype.serialize=function(){return{name:this.get("name"),_id:this.get("_id"),publicView:this.get("publicView"),publicEdit:this.get("publicEdit"),createdBy:this.get("createdBy"),description:this.get("description")}},r.prototype.sync=function(t,n,r){var i;return r=r||{},r.data=this.serialize(),t==="create"&&(i=window.user,r.data.createdBy=i!=null?i.name:""),r.contentType="application/json",e.sync.apply(this,[t,n,r])},r.prototype.getNodeNames=function(e){var t=this;return $.get(this.url()+"/nodes/names",{},function(t){return e(t)})},r.prototype.getTagNames=function(e){var t=this;return $.get(this.url()+"/tags",{},function(t){return e(t)})},r.prototype.getNodeByName=function(e,t){var n=this;return $.get(this.url()+"/getNodeByName",{name:e},function(e){return t(e)})},r.prototype.getConnsByName=function(e,t){var n=this;return $.get(this.url()+"/getConnsByName",{name:e},function(e){return t(e)})},r.prototype.getNodesByTag=function(e,t){var n=this;return $.get(this.url()+"/getNodesByTag",{tag:e},function(e){return t(e)})},r.prototype.getAnalytics=function(e){return $.get(this.url()+"/analytics",{},function(t){return e(t)})},r}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!models/WorkspaceModel",["jquery","backbone","cs!models/NodeModel","cs!models/ConnectionModel","cs!models/FilterModel","cs!models/DocumentModel","socket-io"],function(e,n,r,i,s,o,u){var a,f,l,c,h=this;return l=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype._docId=0,r.prototype.socket=u.connect(""),r.prototype.initialize=function(){var e=this;return this.initBroadcastCreate(),this.socket.on(this.url()+":update",function(t){var n,r;t._id=parseInt(t._id),r=t._id,n=e.findWhere({_id:r});if(n!=null)return n.set(t)}),this.initBroadcastDelete()},r.prototype.initBroadcastCreate=function(){var e=this;return this.socket.on(this.url()+":create",function(t){return e.add(new e.model(t,{parse:!0}))})},r.prototype.initBroadcastDelete=function(){var e=this;return this.socket.on(this.url()+":delete",function(t){var n;n=e.findWhere({_id:t._id});if(n!=null)return e.remove(n)})},r.prototype.sync=function(e,t,r){return e==="read"&&(r=_.extend(r,{attrs:{_docId:this._docId}})),n.sync(e,t,r)},r}(n.Collection),a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=i,n.prototype.url=function(){return"/connections"},n.prototype.initBroadcastCreate=function(){var e=this;return this.socket.on(this.url()+":create",function(t){return e.trigger("create:req",new e.model(t,{parse:!0}))})},n}(l),f=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=r,n.prototype.url=function(){return"/nodes"},n.prototype.initBroadcastDelete=function(){var e=this;return this.socket.on(this.url()+":delete",function(t){var n;return n=e.findWhere({_id:t._id}),n!=null&&e.trigger("remove:req",n),e.map(function(e){return e.fetch()})})},n}(l),c=function(i){function l(){var e=this;return this.filter=function(){return l.prototype.filter.apply(e,arguments)},l.__super__.constructor.apply(this,arguments)}return t(l,i),l.prototype.socket=u.connect(""),l.prototype.urlRoot=function(){return"/workspace"},l.prototype.defaults={_id:0,name:""},l.prototype.selectedColor="#3498db",l.prototype.defaultColors={defaultHex:"#000",white:"#cdcdcd",red:"#E3A390",yellow:"#F2DB9D",green:"#B3E2B1",blue:"#B1CDE2",purple:"#E0B4E6"},l.prototype.initialize=function(){var e=this;return this.socket=u.connect(""),this.socket.on(this.url()+":create",function(t){return e.set(t)}),this.nodes=new f,this.nodes.on("remove:req",function(t){return e.removeNode(t)}),this.connections=new a,this.connections.on("create:req",function(t){if(gm.connections.where({source:t.get("source"),target:t.get("target")}).length===0)return e.getSourceOf(t).fetch(),e.getTargetOf(t).fetch(),e.putConnection(t)}),this.filterModel=new s,this.nodes.on("change:tags",this.updateFilter,this),this.documentModel=new o},l.prototype.updateFilter=function(e){return this.filterModel.set("initial_tags",_.union(this.filterModel.get("node_tags"),e.get("tags"))),this.filterModel.addNodeTags(e.get("tags"))},l.prototype.setDocument=function(t){var n=this;return this.documentModel=t,this.nodes._docId=t.id,this.connections._docId=t.id,this.trigger("document:change"),this.socket.emit("open:document",t.attributes),this.connections.reset(),e.when(this.nodes.fetch()).then(function(){return n.connections.fetch()})},l.prototype.getDocument=function(){return this.documentModel},l.prototype.filter=function(){var e,t,n,r,i,s=this;t=this.nodes.filter(function(e){return!s.filterModel.passes(e)}),i=[];for(n=0,r=t.length;n<r;n++)e=t[n],i.push(this.removeNode(e));return i},l.prototype.putNode=function(e,t){return this.nodes.add(e),e},l.prototype.putNodeFromData=function(e,t){var n;return n=new r(e),this.putNode(n,t)},l.prototype.putConnection=function(e){var t,n;t=e.get("source"),n=e.get("target");if(this.nodes.findWhere({_id:t})&&this.nodes.findWhere({_id:n}))return this.connections.add(e)},l.prototype.newConnectionCreated=function(e){return this.trigger("create:connection",e)},l.prototype.removeNode=function(e){return this.connections.remove(this.connections.where({source:e.get("_id")})),this.connections.remove(this.connections.where({target:e.get("_id")})),this.nodes.remove(e)},l.prototype.removeConnection=function(e){return this.connections.remove(e)},l.prototype.deleteNode=function(e,t){return this.removeNode(e),e.destroy({success:t})},l.prototype.deleteConnection=function(e){return this.removeConnection(e),e.destroy()},l.prototype.deSelect=function(e,t){return t?e.set({selected:!1},{silent:!0}):e.set("selected",!1)},l.prototype.select=function(e){var t=this;return this.nodes.each(function(e){return t.deSelect(e,!0)}),this.connections.each(function(e){return t.deSelect(e,!0)}),e.set("selected",!0)},l.prototype.getSourceOf=function(e){return this.nodes.findWhere({_id:e.get("source")})},l.prototype.getTargetOf=function(e){return this.nodes.findWhere({_id:e.get("target")})},l.prototype.highlight=function(e,t){return this.nodes.each(function(e){return e.set("dim",!0)}),_.each(e,function(e){return e.set("dim",!1)}),this.connections.each(function(e){return e.set("dim",!0)}),_.each(t,function(e){return e.set("dim",!1)}),this.nodes.trigger("change")},l.prototype.dehighlight=function(){return this.connections.each(function(e){return e.set("dim",!1)}),this.nodes.each(function(e){return e.set("dim",!1)}),this.nodes.trigger("change")},l.prototype.getSpokes=function(e){return this.connections.where({source:e.get("_id")}).concat(this.connections.where({target:e.get("_id")}))},l.prototype.getFilter=function(){return this.filterModel},l.prototype.getNodeNames=function(e){return this.documentModel.getNodeNames(e)},l.prototype.getTagNames=function(e){return this.documentModel.getTagNames(e)},l.prototype.getNodeByName=function(e,t){return this.documentModel.getNodeByName(e,t)},l.prototype.getNodesByTag=function(e,t){return this.documentModel.getNodesByTag(e,t)},l.prototype.getConnsByName=function(e,t){return this.documentModel.getConnsByName(e,t)},l.prototype.sync=function(e,t,r){return r=r||{},r.data=this.serialize(),r.contentType="application/json",n.sync.apply(this,[e,t,r])},l.prototype.serialize=function(){var e,t,n,r,i,s;return i=this.nodes.pluck("_id"),e=this.connections.pluck("_id"),t=this.getDocument().get("_id"),r=function(){var e,t,r,i;r=this.nodes.models,i=[];for(e=0,t=r.length;e<t;e++)n=r[e],i.push({x:n.x,y:n.y,_id:n.get("_id")});return i}.call(this),s={nodes:i,connections:e,nodeTags:this.filterModel.get("node_tags"),_id:this.get("_id"),_docId:t,name:this.get("name"),nodePositions:JSON.stringify(r),zoom:this.get("zoom"),translate:this.get("translate")}},l.prototype.getWorkspace=function(e){return this.sync("read",this,{success:e})},l.prototype.deleteWorkspace=function(e,t){return this.socket.emit("workspace:destroy",{_id:e,_docId:this.getDocument().get("_id")}),t(e)},l}(n.Model)})}.call(this),!function(){function p(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function d(e){return e===null?NaN:+e}function v(e){return!isNaN(e)}function m(e){return{left:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function y(e){return e.length}function w(e){var t=1;while(e*t%1)t*=10;return t}function E(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function S(){this._=Object.create(null)}function N(e){return(e+="")===x||e[0]===T?T+e:e}function C(e){return(e+="")[0]===T?e.slice(1):e}function k(e){return N(e)in this._}function L(e){return(e=N(e))in this._&&delete this._[e]}function A(){var e=[];for(var t in this._)e.push(C(t));return e}function O(){var e=0;for(var t in this._)++e;return e}function M(){for(var e in this._)return!1;return!0}function _(){this._=Object.create(null)}function D(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function P(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=H.length;n<r;++n){var i=H[n]+t;if(i in e)return i}}function B(){}function j(){}function F(e){function r(){var n=t,r=-1,i=n.length,s;while(++r<i)(s=n[r].on)&&s.apply(this,arguments);return e}var t=[],n=new S;return r.on=function(r,i){var s=n.get(r),o;return arguments.length<2?s&&s.on:(s&&(s.on=null,t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function I(){e.event.preventDefault()}function q(){var t=e.event,n;while(n=t.sourceEvent)t=n;return t}function R(t){var n=new j,r=0,i=arguments.length;while(++r<i)n[arguments[r]]=F(n);return n.of=function(r,i){return function(s){try{var o=s.sourceEvent=e.event;s.target=t,e.event=s,n[s.type].apply(r,i)}finally{e.event=o}}},n}function W(e){return z(e,K),e}function Q(e){return typeof e=="function"?e:function(){return X(e,this)}}function G(e){return typeof e=="function"?e:function(){return V(e,this)}}function Z(t,n){function r(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function s(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=e.ns.qualify(t),n==null?t.local?i:r:typeof n=="function"?t.local?a:u:t.local?o:s}function et(e){return e.trim().replace(/\s+/g," ")}function tt(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function nt(e){return(e+"").trim().split(/^|\s+/)}function rt(e,t){function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}e=nt(e).map(it);var n=e.length;return typeof t=="function"?i:r}function it(e){var t=tt(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",et(i+" "+e))):n.setAttribute("class",et(i.replace(t," ")))}}function st(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return t==null?r:typeof t=="function"?s:i}function ot(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return t==null?n:typeof t=="function"?i:r}function ut(t){return typeof t=="function"?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function at(e){return{__data__:e}}function ft(e){return function(){return J(this,e)}}function lt(e){return arguments.length||(e=p),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function ct(e,t){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],s=0,o=i.length,u;s<o;s++)(u=i[s])&&t(u,s,n);return e}function ht(e){return z(e,pt),e}function dt(e){var t,n;return function(r,i,s){var o=e[s].update,u=o.length,a;s!=n&&(n=s,t=0),i>=t&&(t=i+1);while(!(a=o[t])&&++t<u);return a}}function vt(){var e=this.__transition__;e&&++e.active}function gt(t,r,i){function f(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function l(){var e=u(r,n(arguments));f.call(this),this.addEventListener(t,this[s]=e,e.$=i),e._=r}function c(){var n=new RegExp("^__on([^.]+)"+e.requote(t)+"$"),r;for(var i in this)if(r=i.match(n)){var s=this[i];this.removeEventListener(r[1],s,s.$),delete this[i]}}var s="__on"+t,o=t.indexOf("."),u=bt;o>0&&(t=t.slice(0,o));var a=yt.get(t);return a&&(t=a,u=wt),o?r?l:f:r?B:c}function bt(t,n){return function(r){var i=e.event;e.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=i}}}function wt(e,t){var n=bt(e,t);return function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!(r.compareDocumentPosition(t)&8))&&n.call(t,e)}}function xt(){var t=".dragsuppress-"+ ++St,n="click"+t,r=e.select(s).on("touchmove"+t,I).on("dragstart"+t,I).on("selectstart"+t,I);if(Et){var o=i.style,u=o[Et];o[Et]="none"}return function(e){r.on(t,null),Et&&(o[Et]=u);if(e){function i(){r.on(n,null)}r.on(n,function(){I(),i()},!0),setTimeout(i,0)}}}function Nt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(Tt<0&&(s.scrollX||s.scrollY)){r=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Tt=!o.f&&!o.e,r.remove()}return Tt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function Ct(){return e.event.changedTouches[0].identifier}function kt(){return e.event.target}function Lt(){return s}function Bt(e){return e>0?1:e<0?-1:0}function jt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Ft(e){return e>1?0:e<-1?At:Math.acos(e)}function It(e){return e>1?Mt:e<-1?-Mt:Math.asin(e)}function qt(e){return((e=Math.exp(e))-1/e)/2}function Rt(e){return((e=Math.exp(e))+1/e)/2}function Ut(e){return((e=Math.exp(2*e))-1)/(e+1)}function zt(e){return(e=Math.sin(e/2))*e}function Qt(){}function Gt(e,t,n){return this instanceof Gt?void (this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof Gt?new Gt(e.h,e.s,e.l):wn(""+e,En,Gt):new Gt(e,t,n)}function Zt(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,new vn(o(e+120),o(e),o(e-120))}function en(t,n,r){return this instanceof en?void (this.h=+t,this.c=+n,this.l=+r):arguments.length<2?t instanceof en?new en(t.h,t.c,t.l):t instanceof rn?cn(t.l,t.a,t.b):cn((t=Sn((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new en(t,n,r)}function nn(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new rn(n,Math.cos(e*=Pt)*t,Math.sin(e)*t)}function rn(e,t,n){return this instanceof rn?void (this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof rn?new rn(e.l,e.a,e.b):e instanceof en?nn(e.h,e.c,e.l):Sn((e=vn(e)).r,e.g,e.b):new rn(e,t,n)}function ln(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=hn(i)*on,r=hn(r)*un,s=hn(s)*an,new vn(dn(3.2404542*i-1.5371385*r-.4985314*s),dn(-0.969266*i+1.8760108*r+.041556*s),dn(.0556434*i-.2040259*r+1.0572252*s))}function cn(e,t,n){return e>0?new en(Math.atan2(n,t)*Ht,Math.sqrt(t*t+n*n),e):new en(NaN,NaN,e)}function hn(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function pn(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function dn(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function vn(e,t,n){return this instanceof vn?void (this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof vn?new vn(e.r,e.g,e.b):wn(""+e,vn,Zt):new vn(e,t,n)}function mn(e){return new vn(e>>16,e>>8&255,e&255)}function gn(e){return mn(e)+""}function bn(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function wn(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(Tn(u[0]),Tn(u[1]),Tn(u[2]))}}return(a=Nn.get(e))?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&!isNaN(a=parseInt(e.slice(1),16))&&(e.length===4?(r=(a&3840)>>4,r=r>>4|r,i=a&240,i=i>>4|i,s=a&15,s=s<<4|s):e.length===7&&(r=(a&16711680)>>16,i=(a&65280)>>8,s=a&255)),t(r,i,s))}function En(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):(o=NaN,u=a>0&&a<1?0:o),new Gt(o,u,a)}function Sn(e,t,n){e=xn(e),t=xn(t),n=xn(n);var r=pn((.4124564*e+.3575761*t+.1804375*n)/on),i=pn((.2126729*e+.7151522*t+.072175*n)/un),s=pn((.0193339*e+.119192*t+.9503041*n)/an);return rn(116*i-16,500*(r-i),200*(i-s))}function xn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Tn(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function Cn(e){return typeof e=="function"?e:function(){return e}}function kn(e){return e}function Ln(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=null),An(t,n,e,r)}}function An(t,r,i,o){function h(){var e=l.status,t;if(!e&&Mn(l)||e>=200&&e<300||e===304){try{t=i.call(u,l)}catch(n){a.error.call(u,n);return}a.load.call(u,t)}else a.error.call(u,l)}var u={},a=e.dispatch("beforesend","progress","load","error"),f={},l=new XMLHttpRequest,c=null;return s.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=h:l.onreadystatechange=function(){l.readyState>3&&h()},l.onprogress=function(t){var n=e.event;e.event=t;try{a.progress.call(u,l)}finally{e.event=n}},u.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?f[e]:(t==null?delete f[e]:f[e]=t+"",u)},u.mimeType=function(e){return arguments.length?(r=e==null?null:e+"",u):r},u.responseType=function(e){return arguments.length?(c=e,u):c},u.response=function(e){return i=e,u},["get","post"].forEach(function(e){u[e]=function(){return u.send.apply(u,[e].concat(n(arguments)))}}),u.send=function(e,n,i){arguments.length===2&&typeof n=="function"&&(i=n,n=null),l.open(e,t,!0),r!=null&&!("accept"in f)&&(f.accept=r+",*/*");if(l.setRequestHeader)for(var s in f)l.setRequestHeader(s,f[s]);return r!=null&&l.overrideMimeType&&l.overrideMimeType(r),c!=null&&(l.responseType=c),i!=null&&u.on("error",i).on("load",function(e){i(null,e)}),a.beforesend.call(u,l),l.send(n==null?null:n),u},u.abort=function(){return l.abort(),u},e.rebind(u,a,"on"),o==null?u:u.get(On(o))}function On(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function Mn(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function Fn(){var e=In(),t=qn()-e;t>24?(isFinite(t)&&(clearTimeout(Hn),Hn=setTimeout(Fn,t)),Pn=0):(Pn=1,jn(Fn))}function In(){var e=Date.now();Bn=_n;while(Bn)e>=Bn.t&&(Bn.f=Bn.c(e-Bn.t)),Bn=Bn.n;return e}function qn(){var e,t=_n,n=Infinity;while(t)t.f?t=e?e.n=t.n:_n=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Dn=e,n}function Rn(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function zn(e,t){var n=Math.pow(10,b(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Wn(t){var n=t.decimal,r=t.thousands,i=t.grouping,s=t.currency,o=i&&r?function(e,t){var n=e.length,s=[],o=0,u=i[0],a=0;while(n>0&&u>0){a+u+1>t&&(u=Math.max(1,t-a)),s.push(e.substring(n-=u,n+u));if((a+=u+1)>t)break;u=i[o=(o+1)%i.length]}return s.reverse().join(r)}:kn;return function(t){var r=Xn.exec(t),i=r[1]||" ",u=r[2]||">",a=r[3]||"-",f=r[4]||"",l=r[5],c=+r[6],h=r[7],p=r[8],d=r[9],v=1,m="",g="",y=!1,b=!0;p&&(p=+p.substring(1));if(l||i==="0"&&u==="=")l=i="0",u="=";switch(d){case"n":h=!0,d="g";break;case"%":v=100,g="%",d="f";break;case"p":v=100,g="%",d="r";break;case"b":case"o":case"x":case"X":f==="#"&&(m="0"+d.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":v=-1,d="r"}f==="$"&&(m=s[0],g=s[1]),d=="r"&&!p&&(d="g");if(p!=null)if(d=="g")p=Math.max(1,Math.min(21,p));else if(d=="e"||d=="f")p=Math.max(0,Math.min(20,p));d=Vn.get(d)||$n;var w=l&&h;return function(t){var r=g;if(y&&t%1)return"";var s=t<0||t===0&&1/t<0?(t=-t,"-"):a==="-"?"":a;if(v<0){var f=e.formatPrefix(t,p);t=f.scale(t),r=f.symbol+g}else t*=v;t=d(t,p);var E=t.lastIndexOf("."),S,x;if(E<0){var T=b?t.lastIndexOf("e"):-1;T<0?(S=t,x=""):(S=t.substring(0,T),x=t.substring(T))}else S=t.substring(0,E),x=n+t.substring(E+1);!l&&h&&(S=o(S,Infinity));var N=m.length+S.length+x.length+(w?0:s.length),C=N<c?(new Array(N=c-N+1)).join(i):"";return w&&(S=o(C+S,C.length?c-x.length:Infinity)),s+=m,t=S+x,(u==="<"?s+t+C:u===">"?C+s+t:u==="^"?C.substring(0,N>>=1)+s+t+C.substring(N):s+(w?t:C+t))+r}}}function $n(e){return e+""}function Qn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Yn(e,t,n){function r(t){var n=e(t),r=s(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Kn(n-1)),1),n}function s(e,n){return t(e=new Kn(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)while(o<r)n(o)%s||u.push(new Date(+o)),t(o,1);else while(o<r)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{Kn=Qn;var r=new Qn;return r._=e,o(r,t,n)}finally{Kn=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=Zn(e);return a.floor=a,a.round=Zn(r),a.ceil=Zn(i),a.offset=Zn(s),a.range=u,e}function Zn(e){return function(t,n){try{Kn=Qn;var r=new Qn;return r._=t,e(r,n)._}finally{Kn=Date}}}function er(t){function l(e){function n(n){var r=[],i=-1,s=0,o,u,a;while(++i<t)if(e.charCodeAt(i)===37){r.push(e.slice(s,i)),(u=tr[o=e.charAt(++i)])!=null&&(o=e.charAt(++i));if(a=E[o])o=a(n,u==null?o==="e"?" ":"0":u);r.push(o),s=i+1}return r.push(e.slice(s,i)),r.join("")}var t=e.length;return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=c(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+n.p*12);var i=n.Z!=null&&Kn!==Qn,s=new(i?Qn:Kn);return"j"in n?s.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(s.setFullYear(n.y,0,1),s.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(s.getDay()+5)%7:n.w+n.U*7-(s.getDay()+6)%7)):s.setFullYear(n.y,n.m,n.d),s.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?s._:s},n.toString=function(){return e},n}function c(e,t,n,r){var i,s,o,u=0,a=t.length,f=n.length;while(u<a){if(r>=f)return-1;i=t.charCodeAt(u++);if(i===37){o=t.charAt(u++),s=S[o in tr?t.charAt(u++):o];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function x(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1}function T(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1}function N(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=w.get(r[0].toLowerCase()),n+r[0].length):-1}function C(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function k(e,t,n){return c(e,E.c.toString(),t,n)}function L(e,t,n){return c(e,E.x.toString(),t,n)}function A(e,t,n){return c(e,E.X.toString(),t,n)}function O(e,t,n){var r=h.get(t.slice(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}var n=t.dateTime,r=t.date,i=t.time,s=t.periods,o=t.days,u=t.shortDays,a=t.months,f=t.shortMonths;l.utc=function(e){function n(e){try{Kn=Qn;var n=new Kn;return n._=e,t(n)}finally{Kn=Date}}var t=l(e);return n.parse=function(e){try{Kn=Qn;var n=t.parse(e);return n&&n._}finally{Kn=Date}},n.toString=t.toString,n},l.multi=l.utc.multi=xr;var h=e.map(),p=sr(o),d=or(o),v=sr(u),m=or(u),g=sr(a),y=or(a),b=sr(f),w=or(f);s.forEach(function(e,t){h.set(e.toLowerCase(),t)});var E={a:function(e){return u[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return f[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:l(n),d:function(e,t){return ir(e.getDate(),t,2)},e:function(e,t){return ir(e.getDate(),t,2)},H:function(e,t){return ir(e.getHours(),t,2)},I:function(e,t){return ir(e.getHours()%12||12,t,2)},j:function(e,t){return ir(1+Jn.dayOfYear(e),t,3)},L:function(e,t){return ir(e.getMilliseconds(),t,3)},m:function(e,t){return ir(e.getMonth()+1,t,2)},M:function(e,t){return ir(e.getMinutes(),t,2)},p:function(e){return s[+(e.getHours()>=12)]},S:function(e,t){return ir(e.getSeconds(),t,2)},U:function(e,t){return ir(Jn.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return ir(Jn.mondayOfYear(e),t,2)},x:l(r),X:l(i),y:function(e,t){return ir(e.getFullYear()%100,t,2)},Y:function(e,t){return ir(e.getFullYear()%1e4,t,4)},Z:Er,"%":function(){return"%"}},S={a:x,A:T,b:N,B:C,c:k,d:vr,e:vr,H:gr,I:gr,j:mr,L:wr,m:dr,M:yr,p:O,S:br,U:ar,w:ur,W:fr,x:L,X:A,y:cr,Y:lr,Z:hr,"%":Sr};return l}function ir(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function sr(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function or(e){var t=new S,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function ur(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ar(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function fr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function lr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.y=pr(+r[0]),n+r[0].length):-1}function hr(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function pr(e){return e+(e>68?1900:2e3)}function dr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function vr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function mr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function gr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function yr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function br(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function wr(e,t,n){nr.lastIndex=0;var r=nr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Er(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=b(t)/60|0,i=b(t)%60;return n+ir(r,"0",2)+ir(i,"0",2)}function Sr(e,t,n){rr.lastIndex=0;var r=rr.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xr(e){var t=e.length,n=-1;while(++n<t)e[n][0]=this(e[n][0]);return function(t){var n=0,r=e[n];while(!r[1](t))r=e[++n];return r[0](t)}}function Nr(){}function kr(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function Lr(e,t){e&&Or.hasOwnProperty(e.type)&&Or[e.type](e,t)}function Mr(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function _r(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)Mr(e[n],t,1);t.polygonEnd()}function Br(){function s(e,t){e*=Pt,t=t*Pt/2+At/4;var s=e-n,o=s>=0?1:-1,u=o*s,a=Math.cos(t),f=Math.sin(t),l=i*f,c=r*a+l*Math.cos(u),h=l*o*Math.sin(u);Pr.add(Math.atan2(h,c)),n=e,r=a,i=f}var e,t,n,r,i;Hr.point=function(o,u){Hr.point=s,n=(e=o)*Pt,r=Math.cos(u=(t=u)*Pt/2+At/4),i=Math.sin(u)},Hr.lineEnd=function(){s(e,t)}}function jr(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Fr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ir(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qr(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Rr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ur(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function zr(e){return[Math.atan2(e[1],e[0]),It(e[2])]}function Wr(e,t){return b(e[0]-t[0])<_t&&b(e[1]-t[1])<_t}function ri(e,t){e*=Pt;var n=Math.cos(t*=Pt);ii(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ii(e,t,n){++Xr,$r+=(e-$r)/Xr,Jr+=(t-Jr)/Xr,Kr+=(n-Kr)/Xr}function si(){function r(r,i){r*=Pt;var s=Math.cos(i*=Pt),o=s*Math.cos(r),u=s*Math.sin(r),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=t*a-n*u)*f+(f=n*o-e*a)*f+(f=e*u-t*o)*f),e*o+t*u+n*a);Vr+=f,Qr+=f*(e+(e=o)),Gr+=f*(t+(t=u)),Yr+=f*(n+(n=a)),ii(e,t,n)}var e,t,n;ni.point=function(i,s){i*=Pt;var o=Math.cos(s*=Pt);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(s),ni.point=r,ii(e,t,n)}}function oi(){ni.point=ri}function ui(){function s(e,t){e*=Pt;var s=Math.cos(t*=Pt),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(t),f=r*a-i*u,l=i*o-n*a,c=n*u-r*o,h=Math.sqrt(f*f+l*l+c*c),p=n*o+r*u+i*a,d=h&&-Ft(p)/h,v=Math.atan2(h,p);Zr+=d*f,ei+=d*l,ti+=d*c,Vr+=v,Qr+=v*(n+(n=o)),Gr+=v*(r+(r=u)),Yr+=v*(i+(i=a)),ii(n,r,i)}var e,t,n,r,i;ni.point=function(o,u){e=o,t=u,ni.point=s,o*=Pt;var a=Math.cos(u*=Pt);n=a*Math.cos(o),r=a*Math.sin(o),i=Math.sin(u),ii(n,r,i)},ni.lineEnd=function(){s(e,t),ni.lineEnd=oi,ni.point=ri}}function ai(){return!0}function fi(e,t,n,r,i){var s=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(Wr(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}var a=new ci(n,e,null,!0),f=new ci(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new ci(r,e,null,!1),f=new ci(r,null,a,!0),a.o=f,s.push(a),o.push(f)}),o.sort(t),li(s),li(o);if(!s.length)return;for(var u=0,a=n,f=o.length;u<f;++u)o[u].e=a=!a;var l=s[0],c,h;for(;;){var p=l,d=!0;while(p.v)if((p=p.n)===l)return;c=p.z,i.lineStart();do{p.v=p.o.v=!0;if(p.e){if(d)for(var u=0,f=c.length;u<f;++u)i.point((h=c[u])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((h=c[u])[0],h[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}function li(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}function ci(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function hi(t,n,r,i){return function(s,o){function l(e,n){var r=s(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function c(e,t){var n=s(e,t);u.point(n[0],n[1])}function h(){f.point=c,u.lineStart()}function p(){f.point=l,u.lineEnd()}function w(e,t){b.push([e,t]);var n=s(e,t);m.point(n[0],n[1])}function E(){m.lineStart(),b=[]}function S(){w(b[0][0],b[0][1]),m.lineEnd();var e=m.clean(),t=v.buffer(),n,r=t.length;b.pop(),y.push(b),b=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,s;if(r>0){g||(o.polygonStart(),g=!0),o.lineStart();while(++i<r)o.point((s=n[i])[0],s[1]);o.lineEnd()}return}r>1&&e&2&&t.push(t.pop().concat(t.shift())),d.push(t.filter(pi))}var u=n(o),a=s.invert(i[0],i[1]),f={point:l,lineStart:h,lineEnd:p,polygonStart:function(){f.point=w,f.lineStart=E,f.lineEnd=S,d=[],y=[]},polygonEnd:function(){f.point=l,f.lineStart=h,f.lineEnd=p,d=e.merge(d);var t=wi(a,y);d.length?(g||(o.polygonStart(),g=!0),fi(d,vi,t,r,o)):t&&(g||(o.polygonStart(),g=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),d=y=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}},d,v=di(),m=n(v),g=!1,y,b;return f}}function pi(e){return e.length>1}function di(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:B,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function vi(e,t){return((e=e.x)[0]<0?e[1]-Mt-_t:Mt-e[1])-((t=t.x)[0]<0?t[1]-Mt-_t:Mt-t[1])}function gi(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?At:-At,a=b(s-t);b(a-At)<_t?(e.point(t,n=(n+o)/2>0?Mt:-Mt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&a>=At&&(b(t-r)<_t&&(t-=r*_t),b(s-u)<_t&&(s-=u*_t),n=yi(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function yi(e,t,n,r){var i,s,o=Math.sin(e-n);return b(o)>_t?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function bi(e,t,n,r){var i;if(e==null)i=n*Mt,r.point(-At,i),r.point(0,i),r.point(At,i),r.point(At,0),r.point(At,-i),r.point(0,-i),r.point(-At,-i),r.point(-At,0),r.point(-At,i);else if(b(e[0]-t[0])>_t){var s=e[0]<t[0]?At:-At;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function wi(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;Pr.reset();for(var u=0,a=t.length;u<a;++u){var f=t[u],l=f.length;if(!l)continue;var c=f[0],h=c[0],p=c[1]/2+At/4,d=Math.sin(p),v=Math.cos(p),m=1;for(;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+At/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>At,N=d*b;Pr.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Ot:E;if(T^h>=n^g>=n){var C=Ir(jr(c),jr(e));Ur(C);var k=Ir(i,C);Ur(k);var L=(T^E>=0?-1:1)*It(k[2]);if(r>L||r===L&&(C[0]||C[1]))o+=T^E>=0?1:-1}if(!(m++))break;h=g,d=b,v=w,c=e}}return(s<-_t||s<_t&&Pr<0)^o&1}function Ei(e){function s(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,f,l;return{lineStart:function(){f=o=!1,l=1},point:function(c,h){var p=[c,h],d,v=s(c,h),m=n?v?0:a(c,h):v?a(c+(c<0?At:-At),h):0;!t&&(f=o=v)&&e.lineStart();if(v!==o){d=u(t,p);if(Wr(t,d)||Wr(p,d))p[0]+=_t,p[1]+=_t,v=s(p[0],p[1])}if(v!==o)l=0,v?(e.lineStart(),d=u(p,t),e.point(d[0],d[1])):(d=u(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(r&&t&&n^v){var g;!(m&i)&&(g=u(p,t,!0))&&(l=0,n?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}v&&(!t||!Wr(t,p))&&e.point(p[0],p[1]),t=p,o=v,i=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return l|(f&&o)<<1}}}function u(e,n,r){var i=jr(e),s=jr(n),o=[1,0,0],u=Ir(i,s),a=Fr(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=t*a/l,h=-t*f/l,p=Ir(o,u),d=Rr(o,c),v=Rr(u,h);qr(d,v);var m=p,g=Fr(d,m),y=Fr(m,m),w=g*g-y*(Fr(d,d)-1);if(w<0)return;var E=Math.sqrt(w),S=Rr(m,(-g-E)/y);qr(S,d),S=zr(S);if(!r)return S;var x=e[0],T=n[0],N=e[1],C=n[1],k;T<x&&(k=x,x=T,T=k);var L=T-x,A=b(L-At)<_t,O=A||L<_t;!A&&C<N&&(k=N,N=C,C=k);if(O?A?N+C>0^S[1]<(b(S[0]-x)<_t?N:C):N<=S[1]&&S[1]<=C:L>At^(x<=S[0]&&S[0]<=T)){var M=Rr(m,(-g+E)/y);return qr(M,d),[S,zr(M)]}}function a(t,r){var i=n?e:At-e,s=0;return t<-i?s|=1:t>i&&(s|=2),r<-i?s|=4:r>i&&(s|=8),s}var t=Math.cos(e),n=t>0,r=b(t)>_t,i=ss(e,6*Pt);return hi(s,o,i,n?[0,-e]:[-At,e-At])}function Si(e,t,n,r){return function(i){var s=i.a,o=i.b,u=s.x,a=s.y,f=o.x,l=o.y,c=0,h=1,p=f-u,d=l-a,v;v=e-u;if(!p&&v>0)return;v/=p;if(p<0){if(v<c)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>c&&(c=v)}v=n-u;if(!p&&v<0)return;v/=p;if(p<0){if(v>h)return;v>c&&(c=v)}else if(p>0){if(v<c)return;v<h&&(h=v)}v=t-a;if(!d&&v>0)return;v/=d;if(d<0){if(v<c)return;v<h&&(h=v)}else if(d>0){if(v>h)return;v>c&&(c=v)}v=r-a;if(!d&&v<0)return;v/=d;if(d<0){if(v>h)return;v>c&&(c=v)}else if(d>0){if(v<c)return;v<h&&(h=v)}return c>0&&(i.a={x:u+c*p,y:a+c*d}),h<1&&(i.b={x:u+h*p,y:a+h*d}),i}}function Ti(t,n,r,i){function s(e,i){return b(e[0]-t)<_t?i>0?0:3:b(e[0]-r)<_t?i>0?2:1:b(e[1]-n)<_t?i>0?1:0:i>0?3:2}function o(e,t){return u(e.x,t.x)}function u(e,t){var n=s(e,1),r=s(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}return function(a){function m(e){var t=0,n=p.length,r=e[1];for(var i=0;i<n;++i)for(var s=1,o=p[i],u=o.length,a=o[0],f;s<u;++s)f=o[s],a[1]<=r?f[1]>r&&jt(a,f,e)>0&&++t:f[1]<=r&&jt(a,f,e)<0&&--t,a=f;return t!==0}function g(e,o,a,f){var l=0,c=0;if(e==null||(l=s(e,a))!==(c=s(o,a))||u(e,o)<0^a>0){do f.point(l===0||l===3?t:r,l>1?i:n);while((l=(l+a+4)%4)!==c)}else f.point(o[0],o[1])}function y(e,s){return t<=e&&e<=r&&n<=s&&s<=i}function b(e,t){y(e,t)&&a.point(e,t)}function L(){v.point=O,p&&p.push(d=[]),C=!0,N=!1,x=T=NaN}function A(){h&&(O(w,E),S&&N&&l.rejoin(),h.push(l.buffer())),v.point=b,N&&a.lineEnd()}function O(e,t){e=Math.max(-xi,Math.min(xi,e)),t=Math.max(-xi,Math.min(xi,t));var n=y(e,t);p&&d.push([e,t]);if(C)w=e,E=t,S=n,C=!1,n&&(a.lineStart(),a.point(e,t));else if(n&&N)a.point(e,t);else{var r={a:{x:x,y:T},b:{x:e,y:t}};c(r)?(N||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),k=!1):n&&(a.lineStart(),a.point(e,t),k=!1)}x=e,T=t,N=n}var f=a,l=di(),c=Si(t,n,r,i),h,p,d,v={point:b,lineStart:L,lineEnd:A,polygonStart:function(){a=l,h=[],p=[],k=!0},polygonEnd:function(){a=f,h=e.merge(h);var n=m([t,i]),r=k&&n,s=h.length;if(r||s)a.polygonStart(),r&&(a.lineStart(),g(null,null,1,a),a.lineEnd()),s&&fi(h,o,n,g,a),a.polygonEnd();h=p=d=null}},w,E,S,x,T,N,C,k;return v}}function Ni(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Ci(e){var t=0,n=At/3,r=Gi(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*At/180,n=e[1]*At/180):[t/At*180,n/At*180]},i}function ki(e,t){function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),s-n*Math.cos(e)]}var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),s=Math.sqrt(i)/r;return o.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/r,It((i-(e*e+n*n)*r*r)/(2*r))]},o}function Mi(){function i(e,t){Ai+=r*e-n*t,n=e,r=t}var e,t,n,r;Oi.point=function(s,o){Oi.point=i,e=n=s,t=r=o},Oi.lineEnd=function(){i(e,t)}}function ji(e,t){e<_i&&(_i=e),e>Pi&&(Pi=e),t<Di&&(Di=t),t>Hi&&(Hi=t)}function Fi(){function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=s}function s(e,n){t.push("L",e,",",n)}function o(){n.point=r}function u(){t.push("Z")}var e=Ii(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=Ii(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};return n}function Ii(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ri(e,t){$r+=e,Jr+=t,++Kr}function Ui(){function n(n,r){var i=n-e,s=r-t,o=Math.sqrt(i*i+s*s);Qr+=o*(e+n)/2,Gr+=o*(t+r)/2,Yr+=o,Ri(e=n,t=r)}var e,t;qi.point=function(r,i){qi.point=n,Ri(e=r,t=i)}}function zi(){qi.point=Ri}function Wi(){function i(e,t){var i=e-n,s=t-r,o=Math.sqrt(i*i+s*s);Qr+=o*(n+e)/2,Gr+=o*(r+t)/2,Yr+=o,o=r*e-n*t,Zr+=o*(n+e),ei+=o*(r+t),ti+=o*3,Ri(n=e,r=t)}var e,t,n,r;qi.point=function(s,o){qi.point=i,Ri(e=n=s,t=r=o)},qi.lineEnd=function(){i(e,t)}}function Xi(e){function r(n,r){e.moveTo(n,r),e.arc(n,r,t,0,Ot)}function i(t,r){e.moveTo(t,r),n.point=s}function s(t,n){e.lineTo(t,n)}function o(){n.point=r}function u(){e.closePath()}var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:B};return n}function Vi(e){function i(e){return(r?o:s)(e)}function s(t){return Ki(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function o(t){function y(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){h=NaN,g.point=w,t.lineStart()}function w(n,i){var s=jr([n,i]),o=e(n,i);u(h,p,c,d,v,m,h=o[0],p=o[1],c=n,d=s[0],v=s[1],m=s[2],r,t),t.point(h,p)}function E(){g.point=y,t.lineEnd()}function S(){b(),g.point=x,g.lineEnd=T}function x(e,t){w(n=e,i=t),s=h,o=p,a=d,f=v,l=m,g.point=w}function T(){u(h,p,c,d,v,m,s,o,n,a,f,l,r,t),g.lineEnd=E,E()}var n,i,s,o,a,f,l,c,h,p,d,v,m,g={point:y,lineStart:b,lineEnd:E,polygonStart:function(){t.polygonStart(),g.lineStart=S},polygonEnd:function(){t.polygonEnd(),g.lineStart=b}};return g}function u(r,i,s,o,a,f,l,c,h,p,d,v,m,g){var y=l-r,w=c-i,E=y*y+w*w;if(E>4*t&&m--){var S=o+p,x=a+d,T=f+v,N=Math.sqrt(S*S+x*x+T*T),C=Math.asin(T/=N),k=b(b(T)-1)<_t||b(s-h)<_t?(s+h)/2:Math.atan2(x,S),L=e(k,C),A=L[0],O=L[1],M=A-r,_=O-i,D=w*M-y*_;if(D*D/E>t||b((y*M+w*_)/E-.5)>.3||o*p+a*d+f*v<n)u(r,i,s,o,a,f,A,O,k,S/=N,x/=N,T,m,g),g.point(A,O),u(A,O,k,S,x,T,l,c,h,p,d,v,m,g)}}var t=.5,n=Math.cos(30*Pt),r=16;return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function $i(e){var t=Vi(function(t,n){return e([t*Ht,n*Ht])});return function(e){return Yi(t(e))}}function Ji(e){this.stream=e}function Ki(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Qi(e){return Gi(function(){return e})()}function Gi(t){function E(e){return e=i(e[0]*Pt,e[1]*Pt),[e[0]*o+d,v-e[1]*o]}function S(e){return e=i.invert((e[0]-d)/o,(v-e[1])/o),e&&[e[0]*Ht,e[1]*Ht]}function x(){i=Ni(r=ts(c,h,p),n);var e=n(f,l);return d=u-e[0]*o,v=a+e[1]*o,T()}function T(){return w&&(w.valid=!1,w=null),E}var n,r,i,s=Vi(function(e,t){return e=n(e,t),[e[0]*o+d,v-e[1]*o]}),o=150,u=480,a=250,f=0,l=0,c=0,h=0,p=0,d,v,m=mi,g=kn,y=null,b=null,w;return E.stream=function(e){return w&&(w.valid=!1),w=Yi(m(r,s(g(e)))),w.valid=!0,w},E.clipAngle=function(e){return arguments.length?(m=e==null?(y=e,mi):Ei((y=+e)*Pt),T()):y},E.clipExtent=function(e){return arguments.length?(b=e,g=e?Ti(e[0][0],e[0][1],e[1][0],e[1][1]):kn,T()):b},E.scale=function(e){return arguments.length?(o=+e,x()):o},E.translate=function(e){return arguments.length?(u=+e[0],a=+e[1],x()):[u,a]},E.center=function(e){return arguments.length?(f=e[0]%360*Pt,l=e[1]%360*Pt,x()):[f*Ht,l*Ht]},E.rotate=function(e){return arguments.length?(c=e[0]%360*Pt,h=e[1]%360*Pt,p=e.length>2?e[2]%360*Pt:0,x()):[c*Ht,h*Ht,p*Ht]},e.rebind(E,s,"precision"),function(){return n=t.apply(this,arguments),E.invert=n.invert&&S,x()}}function Yi(e){return Ki(e,function(t,n){e.point(t*Pt,n*Pt)})}function Zi(e,t){return[e,t]}function es(e,t){return[e>At?e-Ot:e<-At?e+Ot:e,t]}function ts(e,t,n){return e?t||n?Ni(rs(e),is(t,n)):rs(e):t||n?is(t,n):es}function ns(e){return function(t,n){return t+=e,[t>At?t-Ot:t<-At?t+Ot:t,n]}}function rs(e){var t=ns(e);return t.invert=ns(-e),t}function is(e,t){function o(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*n+u*r;return[Math.atan2(a*i-l*s,u*n-f*r),It(l*i+a*s)]}var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),s=Math.sin(t);return o.invert=function(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*i-a*s;return[Math.atan2(a*i+f*s,u*n+l*r),It(l*n-u*r)]},o}function ss(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;if(i!=null){i=os(n,i),s=os(n,s);if(o>0?i<s:i>s)i+=o*Ot}else i=e+o*Ot,s=e-.5*a;for(var f,l=i;o>0?l>s:l<s;l-=a)u.point((f=zr([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function os(e,t){var n=jr(t);n[0]-=e,Ur(n);var r=Ft(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-_t)%(2*Math.PI)}function us(t,n,r){var i=e.range(t,n-_t,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function as(t,n,r){var i=e.range(t,n-_t,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function fs(e){return e.source}function ls(e){return e.target}function cs(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(zt(r-t)+i*o*zt(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Ht,Math.atan2(o,Math.sqrt(r*r+i*i))*Ht]}:function(){return[e*Ht,t*Ht]};return d.distance=h,d}function ds(){function r(r,i){var s=Math.sin(i*=Pt),o=Math.cos(i),u=b((r*=Pt)-e),a=Math.cos(u);hs+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=n*s-t*o*a)*u),t*s+n*o*a),e=r,t=s,n=o}var e,t,n;ps.point=function(i,s){e=i*Pt,t=Math.sin(s*=Pt),n=Math.cos(s),ps.point=r},ps.lineEnd=function(){ps.point=ps.lineEnd=B}}function vs(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function ys(e,t){function o(e,t){s>0?t<-Mt+_t&&(t=-Mt+_t):t>Mt-_t&&(t=Mt-_t);var n=s/Math.pow(r(t),i);return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var n=Math.cos(e),r=function(e){return Math.tan(At/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),s=n*Math.pow(r(e),i)/i;return i?(o.invert=function(e,t){var n=s-t,r=Bt(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(s/r,1/i))-Mt]},o):Es}function bs(e,t){function s(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;return b(r)<_t?Zi:(s.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-Bt(r)*Math.sqrt(e*e+n*n)]},s)}function Es(e,t){return[e,Math.log(Math.tan(At/4+t/2))]}function Ss(e){var t=Qi(e),n=t.scale,r=t.translate,i=t.clipExtent,s;return t.scale=function(){var e=n.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.translate=function(){var e=r.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(s=e==null){var u=At*n(),a=r();i([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else s&&(o=null);return o},t.clipExtent(null)}function Ns(e,t){return[Math.log(Math.tan(At/4+t/2)),-e]}function Cs(e){return e[0]}function ks(e){return e[1]}function Ls(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;i++){while(r>1&&jt(e[n[r-2]],e[n[r-1]],e[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function As(e,t){return e[0]-t[0]||e[1]-t[1]}function Ms(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function _s(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Ds(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Rs(){ao(this),this.edge=this.site=this.circle=null}function Us(e){var t=js.pop()||new Rs;return t.site=e,t}function zs(e){Zs(e),Bs.remove(e),js.push(e),ao(e)}function Ws(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];zs(e);var a=s;while(a.circle&&b(n-a.circle.x)<_t&&b(r-a.circle.cy)<_t)s=a.P,u.unshift(a),zs(a),a=s;u.unshift(a),Zs(a);var f=o;while(f.circle&&b(n-f.circle.x)<_t&&b(r-f.circle.cy)<_t)o=f.N,u.push(f),zs(f),f=o;u.push(f),Zs(f);var l=u.length,c;for(c=1;c<l;++c)f=u[c],a=u[c-1],so(f.edge,a.site,f.site,i);a=u[0],f=u[l-1],f.edge=ro(a.site,f.site,null,i),Ys(a),Ys(f)}function Xs(e){var t=e.x,n=e.y,r,i,s,o,u=Bs._;while(u){s=Vs(u,n)-t;if(s>_t)u=u.L;else{o=t-$s(u,n);if(!(o>_t)){s>-_t?(r=u.P,i=u):o>-_t?(r=u,i=u.N):r=i=u;break}if(!u.R){r=u;break}u=u.R}}var a=Us(e);Bs.insert(r,a);if(!r&&!i)return;if(r===i){Zs(r),i=Us(r.site),Bs.insert(a,i),a.edge=i.edge=ro(r.site,a.site),Ys(r),Ys(i);return}if(!i){a.edge=ro(r.site,a.site);return}Zs(r),Zs(i);var f=r.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=i.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};so(i.edge,f,d,w),a.edge=ro(f,e,null,w),i.edge=ro(e,d,null,w),Ys(r),Ys(i)}function Vs(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function $s(e,t){var n=e.N;if(n)return Vs(n,t);var r=e.site;return r.y===t?r.x:Infinity}function Js(e){this.site=e,this.edges=[]}function Ks(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],s,o,u,a,f=Hs,l=f.length,c,h,p,d,v,m;while(l--){c=f[l];if(!c||!c.prepare())continue;p=c.edges,d=p.length,h=0;while(h<d){m=p[h].end(),u=m.x,a=m.y,v=p[++h%d].start(),s=v.x,o=v.y;if(b(u-s)>_t||b(a-o)>_t)p.splice(h,0,new oo(io(c.site,m,b(u-t)<_t&&i-a>_t?{x:t,y:b(s-t)<_t?o:i}:b(a-i)<_t&&n-u>_t?{x:b(o-i)<_t?s:n,y:i}:b(u-n)<_t&&a-r>_t?{x:n,y:b(s-n)<_t?o:r}:b(a-r)<_t&&u-t>_t?{x:b(o-r)<_t?s:t,y:r}:null),c.site,null)),++d}}}function Qs(e,t){return t.angle-e.angle}function Gs(){ao(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ys(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,s=n.site;if(r===s)return;var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(h>=-Dt)return;var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=qs.pop()||new Gs;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;var y=null,b=Is._;while(b)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Is.insert(y,g),y||(Fs=g)}function Zs(e){var t=e.circle;t&&(t.P||(Fs=t.N),Is.remove(t),qs.push(t),ao(t),e.circle=null)}function eo(e){var t=Ps,n=Si(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!to(i,e)||!n(i)||b(i.a.x-i.b.x)<_t&&b(i.a.y-i.b.y)<_t)i.a=i.b=null,t.splice(r,1)}}function to(e,t){var n=e.b;if(n)return!0;var r=e.a,i=t[0][0],s=t[1][0],o=t[0][1],u=t[1][1],a=e.l,f=e.r,l=a.x,c=a.y,h=f.x,p=f.y,d=(l+h)/2,v=(c+p)/2,m,g;if(p===c){if(d<i||d>=s)return;if(l>h){if(!r)r={x:d,y:o};else if(r.y>=u)return;n={x:d,y:u}}else{if(!r)r={x:d,y:u};else if(r.y<o)return;n={x:d,y:o}}}else{m=(l-h)/(p-c),g=v-m*d;if(m<-1||m>1)if(l>h){if(!r)r={x:(o-g)/m,y:o};else if(r.y>=u)return;n={x:(u-g)/m,y:u}}else{if(!r)r={x:(u-g)/m,y:u};else if(r.y<o)return;n={x:(o-g)/m,y:o}}else if(c<p){if(!r)r={x:i,y:m*i+g};else if(r.x>=s)return;n={x:s,y:m*s+g}}else{if(!r)r={x:s,y:m*s+g};else if(r.x<i)return;n={x:i,y:m*i+g}}}return e.a=r,e.b=n,!0}function no(e,t){this.l=e,this.r=t,this.a=this.b=null}function ro(e,t,n,r){var i=new no(e,t);return Ps.push(i),n&&so(i,e,t,n),r&&so(i,t,e,r),Hs[e.i].edges.push(new oo(i,e,t)),Hs[t.i].edges.push(new oo(i,t,e)),i}function io(e,t,n){var r=new no(e,null);return r.a=t,r.b=n,Ps.push(r),r}function so(e,t,n,r){!e.a&&!e.b?(e.a=r,e.l=t,e.r=n):e.l===n?e.b=r:e.a=r}function oo(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function uo(){this._=null}function ao(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function fo(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function lo(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function co(e){while(e.L)e=e.L;return e}function ho(e,t){var n=e.sort(po).pop(),r,i,s;Ps=[],Hs=new Array(e.length),Bs=new uo,Is=new uo;for(;;){s=Fs;if(n&&(!s||n.y<s.y||n.y===s.y&&n.x<s.x)){if(n.x!==r||n.y!==i)Hs[n.i]=new Js(n),Xs(n),r=n.x,i=n.y;n=e.pop()}else{if(!s)break;Ws(s.arc)}}t&&(eo(t),Ks(t));var o={cells:Hs,edges:Ps};return Bs=Is=Ps=Hs=null,o}function po(e,t){return t.y-e.y||t.x-e.x}function mo(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function go(e){return e.x}function yo(e){return e.y}function bo(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function wo(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&wo(e,a[0],n,r,o,u),a[1]&&wo(e,a[1],o,r,i,u),a[2]&&wo(e,a[2],n,u,o,s),a[3]&&wo(e,a[3],o,u,i,s)}}function Eo(t,n){t=e.rgb(t),n=e.rgb(n);var r=t.r,i=t.g,s=t.b,o=n.r-r,u=n.g-i,a=n.b-s;return function(e){return"#"+bn(Math.round(r+o*e))+bn(Math.round(i+u*e))+bn(Math.round(s+a*e))}}function So(e,t){var n={},r={},i;for(i in e)i in t?n[i]=ko(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}}function xo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function To(e,t){var n=No.lastIndex=Co.lastIndex=0,r,i,s,o=-1,u=[],a=[];e+="",t+="";while((r=No.exec(e))&&(i=Co.exec(t)))(s=i.index)>n&&(s=t.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,a.push({i:o,x:xo(r,i)})),n=Co.lastIndex;return n<t.length&&(s=t.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n=0,r;n<t;++n)u[(r=a[n]).i]=r.x(e);return u.join("")})}function ko(t,n){var r=e.interpolators.length,i;while(--r>=0&&!(i=e.interpolators[r](t,n)));return i}function Lo(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(ko(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}}function _o(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Do(e){return function(t){return 1-e(1-t)}}function Po(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Ho(e){return e*e}function Bo(e){return e*e*e}function jo(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Fo(e){return function(t){return Math.pow(t,e)}}function Io(e){return 1-Math.cos(e*Mt)}function qo(e){return Math.pow(2,10*(e-1))}function Ro(e){return 1-Math.sqrt(1-e*e)}function Uo(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Ot*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ot/t)}}function zo(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Wo(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Xo(t,n){t=e.hcl(t),n=e.hcl(n);var r=t.h,i=t.c,s=t.l,o=n.h-r,u=n.c-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return nn(r+o*e,i+u*e,s+a*e)+""}}function Vo(t,n){t=e.hsl(t),n=e.hsl(n);var r=t.h,i=t.s,s=t.l,o=n.h-r,u=n.s-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return Zt(r+o*e,i+u*e,s+a*e)+""}}function $o(t,n){t=e.lab(t),n=e.lab(n);var r=t.l,i=t.a,s=t.b,o=n.l-r,u=n.a-i,a=n.b-s;return function(e){return ln(r+o*e,i+u*e,s+a*e)+""}}function Jo(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Ko(e){var t=[e.a,e.b],n=[e.c,e.d],r=Go(t),i=Qo(t,n),s=Go(Yo(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ht,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Ht:0}function Qo(e,t){return e[0]*t[0]+e[1]*t[1]}function Go(e){var t=Math.sqrt(Qo(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Yo(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function eu(t,n){var r=[],i=[],s,o=e.transform(t),u=e.transform(n),a=o.translate,f=u.translate,l=o.rotate,c=u.rotate,h=o.skew,p=u.skew,d=o.scale,v=u.scale;return a[0]!=f[0]||a[1]!=f[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:xo(a[0],f[0])},{i:3,x:xo(a[1],f[1])})):f[0]||f[1]?r.push("translate("+f+")"):r.push(""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:xo(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),h!=p?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:xo(h,p)}):p&&r.push(r.pop()+"skewX("+p+")"),d[0]!=v[0]||d[1]!=v[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:s-4,x:xo(d[0],v[0])},{i:s-2,x:xo(d[1],v[1])})):(v[0]!=1||v[1]!=1)&&r.push(r.pop()+"scale("+v+")"),s=i.length,function(e){var t=-1,n;while(++t<s)r[(n=i[t]).i]=n.x(e);return r.join("")}}function tu(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function nu(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function ru(e){var t=e.source,n=e.target,r=su(t,n),i=[t];while(t!==r)t=t.parent,i.push(t);var s=i.length;while(n!==r)i.splice(s,0,n),n=n.parent;return i}function iu(e){var t=[],n=e.parent;while(n!=null)t.push(e),e=n,n=n.parent;return t.push(e),t}function su(e,t){if(e===t)return e;var n=iu(e),r=iu(t),i=n.pop(),s=r.pop(),o=null;while(i===s)o=i,i=n.pop(),s=r.pop();return o}function ou(e){e.fixed|=2}function uu(e){e.fixed&=-7}function au(e){e.fixed|=4,e.px=e.x,e.py=e.y}function fu(e){e.fixed&=-5}function lu(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var s=e.nodes,o=s.length,u=-1,a;while(++u<o){a=s[u];if(a==null)continue;lu(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy}}if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function du(t,n){return e.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=wu,t}function vu(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((i=e.children)&&(r=i.length)){var r,i;while(--r>=0)n.push(i[r])}}}function mu(e,t){var n=[e],r=[];while((e=n.pop())!=null){r.push(e);if((o=e.children)&&(s=o.length)){var i=-1,s,o;while(++i<s)n.push(o[i])}}while((e=r.pop())!=null)t(e)}function gu(e){return e.children}function yu(e){return e.value}function bu(e,t){return t.value-e.value}function wu(t){return e.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Su(e){return e.x}function xu(e){return e.y}function Tu(e,t,n){e.y0=t,e.y=n}function ku(t){return e.range(t.length)}function Lu(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function Au(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)(i=e[t][1])>r&&(n=t,r=i);return n}function Ou(e){return e.reduce(Mu,0)}function Mu(e,t){return e+t[1]}function _u(e,t){return Du(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Du(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function Pu(t){return[e.min(t),e.max(t)]}function Hu(e,t){return e.value-t.value}function Bu(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ju(e,t){e._pack_next=t,t._pack_prev=e}function Fu(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Iu(e){function p(e){n=Math.min(e.x-e.r,n),r=Math.max(e.x+e.r,r),i=Math.min(e.y-e.r,i),s=Math.max(e.y+e.r,s)}if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,s=-Infinity,o,u,a,f,l,c,h;t.forEach(qu),o=t[0],o.x=-o.r,o.y=0,p(o);if(h>1){u=t[1],u.x=u.r,u.y=0,p(u);if(h>2){a=t[2],zu(o,u,a),p(a),Bu(o,a),o._pack_prev=a,Bu(a,u),u=o._pack_next;for(f=3;f<h;f++){zu(o,u,a=t[f]);var d=0,v=1,m=1;for(l=u._pack_next;l!==u;l=l._pack_next,v++)if(Fu(l,a)){d=1;break}if(d==1)for(c=o._pack_prev;c!==l._pack_prev;c=c._pack_prev,m++)if(Fu(c,a))break;d?(v<m||v==m&&u.r<o.r?ju(o,u=l):ju(o=c,u),f--):(Bu(o,a),u=a,p(a))}}}var g=(n+r)/2,y=(i+s)/2,b=0;for(f=0;f<h;f++)a=t[f],a.x-=g,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,t.forEach(Ru)}function qu(e){e._pack_next=e._pack_prev=e}function Ru(e){delete e._pack_next,delete e._pack_prev}function Uu(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)Uu(i[s],t,n,r)}}function zu(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Wu(e,t){return e.parent==t.parent?1:2}function Xu(e){var t=e.children;return t.length?t[0]:e.t}function Vu(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function $u(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ju(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Ku(e,t,n){return e.a.parent===t.parent?e.a:n}function Qu(t){return 1+e.max(t,function(e){return e.y})}function Gu(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Yu(e){var t=e.children;return t&&t.length?Yu(t[0]):e}function Zu(e){var t=e.children,n;return t&&(n=t.length)?Zu(t[n-1]):e}function ea(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function ta(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function na(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function ra(e){return e.rangeExtent?e.rangeExtent():na(e.range())}function ia(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function sa(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function oa(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ua}function aa(t,n,r,i){var s=[],o=[],u=0,a=Math.min(t.length,n.length)-1;t[a]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());while(++u<=a)s.push(r(t[u-1],t[u])),o.push(i(n[u-1],n[u]));return function(n){var r=e.bisect(t,n,1,a)-1;return o[r](s[r](n))}}function fa(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?aa:ia,a=r?nu:tu;return i=o(e,t,a,n),s=o(t,e,a,ko),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate(Jo)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return pa(e,t)},u.tickFormat=function(t,n){return da(e,t,n)},u.nice=function(t){return ca(e,t),o()},u.copy=function(){return fa(e,t,n,r)},o()}function la(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function ca(e,t){return sa(e,oa(ha(e,t)[2]))}function ha(e,t){t==null&&(t=10);var n=na(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function pa(t,n){return e.range.apply(e,ha(t,n))}function da(t,n,r){var i=ha(t,n);if(r){var s=Xn.exec(r);s.shift();if(s[8]==="s"){var o=e.formatPrefix(Math.max(b(i[0]),b(i[1])));return s[7]||(s[7]="."+ma(o.scale(i[2]))),s[8]="f",r=e.format(s.join("")),function(e){return r(o.scale(e))+o.symbol}}s[7]||(s[7]="."+ga(s[8],i)),r=s.join("")}else r=",."+ma(i[2])+"f";return e.format(r)}function ma(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ga(e,t){var n=ma(t[2]);return e in va?Math.abs(n-ma(Math.max(b(t[0]),b(t[1]))))+ +(e!=="e"):n-(e==="%")*2}function ya(t,n,r,i){function s(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(e){return t(s(e))}return u.invert=function(e){return o(t.invert(e))},u.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((i=e.map(Number)).map(s)),u):i},u.base=function(e){return arguments.length?(n=+e,t.domain(i.map(s)),u):n},u.nice=function(){var e=sa(i.map(s),r?Math:wa);return t.domain(e),i=e.map(o),u},u.ticks=function(){var e=na(i),t=[],u=e[0],a=e[1],f=Math.floor(s(u)),l=Math.ceil(s(a)),c=n%1?2:n;if(isFinite(l-f)){if(r){for(;f<l;f++)for(var h=1;h<c;h++)t.push(o(f)*h);t.push(o(f))}else{t.push(o(f));for(;f++<l;)for(var h=c-1;h>0;h--)t.push(o(f)*h)}for(f=0;t[f]<u;f++);for(l=t.length;t[l-1]>a;l--);t=t.slice(f,l)}return t},u.tickFormat=function(t,n){if(!arguments.length)return ba;arguments.length<2?n=ba:typeof n!="function"&&(n=e.format(n));var i=Math.max(.1,t/u.ticks().length),a=r?(f=1e-12,Math.ceil):(f=-1e-12,Math.floor),f;return function(e){return e/o(a(s(e)+f))<=i?n(e):""}},u.copy=function(){return ya(t.copy(),n,r,i)},la(u,t)}function Ea(e,t,n){function s(t){return e(r(t))}var r=Sa(t),i=Sa(1/t);return s.invert=function(t){return i(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),s):n},s.ticks=function(e){return pa(n,e)},s.tickFormat=function(e,t){return da(n,e,t)},s.nice=function(e){return s.domain(ca(n,e))},s.exponent=function(o){return arguments.length?(r=Sa(t=o),i=Sa(1/t),e.domain(n.map(r)),s):t},s.copy=function(){return Ea(e.copy(),t,n)},la(s,e)}function Sa(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xa(t,n){function o(e){return i[((r.get(e)||(n.t==="range"?r.set(e,t.push(e)):NaN))-1)%i.length]}function u(n,r){return e.range(t.length).map(function(e){return n+r*e})}var r,i,s;return o.domain=function(e){if(!arguments.length)return t;t=[],r=new S;var i=-1,s=e.length,u;while(++i<s)r.has(u=e[i])||r.set(u,t.push(u));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(i=e,s=0,n={t:"range",a:arguments},o):i},o.rangePoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],f=e[1],l=(f-a)/(Math.max(1,t.length-1)+r);return i=u(t.length<2?(a+f)/2:a+l*r/2,l),s=0,n={t:"rangePoints",a:arguments},o},o.rangeBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=(c-l)/(t.length-r+2*a);return i=u(l+h*a,h),f&&i.reverse(),s=h*(1-r),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=Math.floor((c-l)/(t.length-r+2*a)),p=c-l-(t.length-r)*h;return i=u(l+Math.round(p/2),h),f&&i.reverse(),s=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return s},o.rangeExtent=function(){return na(n.a[0])},o.copy=function(){return xa(t,n)},o.domain(t)}function La(t,n){function i(){var i=0,o=n.length;r=[];while(++i<o)r[i-1]=e.quantile(t,i/o);return s}function s(t){if(!isNaN(t=+t))return n[e.bisect(r,t)]}var r;return s.domain=function(e){return arguments.length?(t=e.map(d).filter(v).sort(p),i()):t},s.range=function(e){return arguments.length?(n=e,i()):n},s.quantiles=function(){return r},s.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]},s.copy=function(){return La(t,n)},i()}function Aa(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/r+e,[t,t+1/r]},s.copy=function(){return Aa(e,t,n)},o()}function Oa(t,n){function r(r){if(r<=r)return n[e.bisect(t,r)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(e){return arguments.length?(n=e,r):n},r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},r.copy=function(){return Oa(t,n)},r}function Ma(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return pa(e,t)},t.tickFormat=function(t,n){return da(e,t,n)},t.copy=function(){return Ma(e)},t}function Pa(e){return e.innerRadius}function Ha(e){return e.outerRadius}function Ba(e){return e.startAngle}function ja(e){return e.endAngle}function Fa(e){function u(s){function d(){u.push("M",i(e(a),o))}var u=[],a=[],f=-1,l=s.length,c,h=Cn(t),p=Cn(n);while(++f<l)r.call(this,c=s[f],f)?a.push([+h.call(this,c,f),+p.call(this,c,f)]):a.length&&(d(),a=[]);return a.length&&d(),u.length?u.join(""):null}var t=Cs,n=ks,r=ai,i=qa,s=i.key,o=.7;return u.x=function(e){return arguments.length?(t=e,u):t},u.y=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(r=e,u):r},u.interpolate=function(e){return arguments.length?(typeof e=="function"?s=i=e:s=(i=Ia.get(e)||qa).key,u):s},u.tension=function(e){return arguments.length?(o=e,u):o},u}function qa(e){return e.join("L")}function Ra(e){return qa(e)+"Z"}function Ua(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function za(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Wa(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Xa(e,t){return e.length<4?qa(e):e[1]+Ja(e.slice(1,e.length-1),Ka(e,t))}function Va(e,t){return e.length<3?qa(e):e[0]+Ja((e.push(e[0]),e),Ka([e[e.length-2]].concat(e,[e[1]]),t))}function $a(e,t){return e.length<3?qa(e):e[0]+Ja(e,Ka(e,t))}function Ja(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return qa(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function Ka(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function Qa(e){if(e.length<3)return qa(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",ef(rf,o),",",ef(rf,u)];e.push(e[n-1]);while(++t<=n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),sf(a,o,u);return e.pop(),a.push("L",r),a.join("")}function Ga(e){if(e.length<4)return qa(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(ef(rf,s)+","+ef(rf,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),sf(t,s,o);return t.join("")}function Ya(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[ef(rf,o),",",ef(rf,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),sf(t,o,u);return t.join("")}function Za(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o)}return Qa(e)}function ef(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function sf(e,t,n){e.push("C",ef(tf,t),",",ef(tf,n),",",ef(nf,t),",",ef(nf,n),",",ef(rf,t),",",ef(rf,n))}function of(e,t){return(t[1]-e[1])/(t[0]-e[0])}function uf(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=of(i,s);while(++t<n)r[t]=(o+(o=of(i=s,s=e[t+1])))/2;return r[t]=o,r}function af(e){var t=[],n,r,i,s,o=uf(e),u=-1,a=e.length-1;while(++u<a)n=of(e[u],e[u+1]),b(n)<_t?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function ff(e){return e.length<3?qa(e):e[0]+Ja(e,af(e))}function lf(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]+_a,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function cf(e){function c(u){function x(){c.push("M",o(e(p),l),f,a(e(h.reverse()),l),"Z")}var c=[],h=[],p=[],d=-1,v=u.length,m,g=Cn(t),y=Cn(r),b=t===n?function(){return E}:Cn(n),w=r===i?function(){return S}:Cn(i),E,S;while(++d<v)s.call(this,m=u[d],d)?(h.push([E=+g.call(this,m,d),S=+y.call(this,m,d)]),p.push([+b.call(this,m,d),+w.call(this,m,d)])):h.length&&(x(),h=[],p=[]);return h.length&&x(),c.length?c.join(""):null}var t=Cs,n=Cs,r=0,i=ks,s=ai,o=qa,u=o.key,a=o,f="L",l=.7;return c.x=function(e){return arguments.length?(t=n=e,c):n},c.x0=function(e){return arguments.length?(t=e,c):t},c.x1=function(e){return arguments.length?(n=e,c):n},c.y=function(e){return arguments.length?(r=i=e,c):i},c.y0=function(e){return arguments.length?(r=e,c):r},c.y1=function(e){return arguments.length?(i=e,c):i},c.defined=function(e){return arguments.length?(s=e,c):s},c.interpolate=function(e){return arguments.length?(typeof e=="function"?u=o=e:u=(o=Ia.get(e)||qa).key,a=o.reverse||o,f=o.closed?"M":"L",c):u},c.tension=function(e){return arguments.length?(l=e,c):l},c}function hf(e){return e.radius}function pf(e){return[e.x,e.y]}function df(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+_a;return[n*Math.cos(r),n*Math.sin(r)]}}function vf(){return 64}function mf(){return"circle"}function gf(e){var t=Math.sqrt(e/At);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Ef(e,t){return z(e,Sf),e.id=t,e}function Cf(e,t,n,r){var i=e.id;return ct(e,typeof n=="function"?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function kf(e){return e==null&&(e=""),function(){this.textContent=e}}function Lf(t,n,r,i){var s=t.__transition__||(t.__transition__={active:0,count:0}),o=s[r];if(!o){var u=i.time;o=s[r]={tween:new S,time:u,ease:i.ease,delay:i.delay,duration:i.duration},++s.count,e.timer(function(i){function d(i){if(s.active>r)return m();s.active=r,o.event&&o.event.start.call(t,a,n),o.tween.forEach(function(e,r){(r=r.call(t,a,n))&&p.push(r)}),e.timer(function(){return h.c=v(i||1)?ai:v,1},0,u)}function v(e){if(s.active!==r)return m();var i=e/c,u=f(i),l=p.length;while(l>0)p[--l].call(t,u);if(i>=1)return o.event&&o.event.end.call(t,a,n),m()}function m(){return--s.count?delete s[r]:delete t.__transition__,1}var a=t.__data__,f=o.ease,l=o.delay,c=o.duration,h=Bn,p=[];h.t=l+u;if(l<=i)return d(i-l);h.c=d},0,u)}}function Mf(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function _f(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function Ff(e){return e.toISOString()}function If(t,n,r){function i(e){return t(e)}function s(t,r){var i=t[1]-t[0],s=i/r,o=e.bisect(Rf,s);return o==Rf.length?[n.year,ha(t.map(function(e){return e/31536e6}),r)[2]]:o?n[s/Rf[o-1]<Rf[o]/s?o-1:o]:[Wf,ha(t,r)[2]]}return i.invert=function(e){return qf(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(qf)},i.nice=function(e,t){function u(n){return!isNaN(n)&&!e.range(n,qf(+n+1),t).length}var n=i.domain(),r=na(n),o=e==null?s(r,10):typeof e=="number"&&s(r,e);return o&&(e=o[0],t=o[1]),i.domain(sa(n,t>1?{floor:function(t){while(u(t=e.floor(t)))t=qf(t-1);return t},ceil:function(t){while(u(t=e.ceil(t)))t=qf(+t+1);return t}}:e))},i.ticks=function(e,t){var n=na(i.domain()),r=e==null?s(n,10):typeof e=="number"?s(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],qf(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return r},i.copy=function(){return If(t.copy(),n,r)},la(i,t)}function qf(e){return new Date(e)}function $f(e){return JSON.parse(e.responseText)}function Jf(e){var t=r.createRange();return t.selectNode(r.body),t.createContextualFragment(e.responseText)}var e={version:"3.4.13"};Date.now||(Date.now=function(){return+(new Date)});var t=[].slice,n=function(e){return t.call(e)},r=document,i=r.documentElement,s=window;try{n(i.childNodes)[0].nodeType}catch(o){n=function(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}}try{r.createElement("div").style.setProperty("opacity",0,"")}catch(u){var a=s.Element.prototype,f=a.setAttribute,l=a.setAttributeNS,c=s.CSSStyleDeclaration.prototype,h=c.setProperty;a.setAttribute=function(e,t){f.call(this,e,t+"")},a.setAttributeNS=function(e,t,n){l.call(this,e,t,n+"")},c.setProperty=function(e,t,n){h.call(this,e,t+"",n)}}e.ascending=p,e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},e.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},e.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r&&!((i=o=e[n])!=null&&i<=i))i=o=undefined;while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r&&!((i=o=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},e.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)v(i=+e[s])&&(n+=i);else while(++s<r)v(i=+t.call(e,e[s],s))&&(n+=i);return n},e.mean=function(e,t){var n=0,r=e.length,i,s=-1,o=r;if(arguments.length===1)while(++s<r)v(i=d(e[s]))?n+=i:--o;else while(++s<r)v(i=d(t.call(e,e[s],s)))?n+=i:--o;return o?n/o:undefined},e.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},e.median=function(t,n){var r=[],i=t.length,s,o=-1;if(arguments.length===1)while(++o<i)v(s=d(t[o]))&&r.push(s);else while(++o<i)v(s=d(n.call(t,t[o],o)))&&r.push(s);return r.length?e.quantile(r.sort(p),.5):undefined};var g=m(p);e.bisectLeft=g.left,e.bisect=e.bisectRight=g.right,e.bisector=function(e){return m(e.length===1?function(t,n){return p(e(t),n)}:e)},e.shuffle=function(e){var t=e.length,n,r;while(t)r=Math.random()*t--|0,n=e[t],e[t]=e[r],e[r]=n;return e},e.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r},e.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],s=new Array(n<0?0:n);while(t<n)s[t]=[r=i,i=e[++t]];return s},e.zip=function(){if(!(s=arguments.length))return[];for(var t=-1,n=e.min(arguments,y),r=new Array(n);++t<n;)for(var i=-1,s,o=r[t]=new Array(s);++i<s;)o[i]=arguments[i][t];return r},e.transpose=function(t){return e.zip.apply(e,t)},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.merge=function(e){var t=e.length,n,r=-1,i=0,s,o;while(++r<t)i+=e[r].length;s=new Array(i);while(--t>=0){o=e[t],n=o.length;while(--n>=0)s[--i]=o[n]}return s};var b=Math.abs;e.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=w(b(n)),s=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++s)>t)r.push(o/i);else while((o=e+n*++s)<t)r.push(o/i);return r},e.map=function(e){var t=new S;if(e instanceof S)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t};var x="__proto__",T="\0";E(S,{has:k,get:function(e){return this._[N(e)]},set:function(e,t){return this._[N(e)]=t},remove:L,keys:A,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:C(t),value:this._[t]});return e},size:O,empty:M,forEach:function(e){for(var t in this._)e.call(this,C(t),this._[t])}}),e.nest=function(){function o(e,r,u){if(u>=n.length)return s?s.call(t,r):i?r.sort(i):r;var a=-1,f=r.length,l=n[u++],c,h,p,d=new S,v;while(++a<f)(v=d.get(c=l(h=r[a])))?v.push(h):d.set(c,[h]);return e?(h=e(),p=function(t,n){h.set(t,o(e,n,u))}):(h={},p=function(t,n){h[t]=o(e,n,u)}),d.forEach(p),h}function u(e,t){if(t>=n.length)return e;var i=[],s=r[t++];return e.forEach(function(e,n){i.push({key:e,values:u(n,t)})}),s?i.sort(function(e,t){return s(e.key,t.key)}):i}var t={},n=[],r=[],i,s;return t.map=function(e,t){return o(t,e,0)},t.entries=function(t){return u(o(e.map,t,0),0)},t.key=function(e){return n.push(e),t},t.sortKeys=function(e){return r[n.length-1]=e,t},t.sortValues=function(e){return i=e,t},t.rollup=function(e){return s=e,t},t},e.set=function(e){var t=new _;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},E(_,{has:k,add:function(e){return this._[N(e+="")]=!0,e},remove:L,values:A,size:O,empty:M,forEach:function(e){for(var t in this._)e.call(this,C(t))}}),e.behavior={},e.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=D(e,t,t[i]);return e};var H=["webkit","ms","moz","Moz","o","O"];e.dispatch=function(){var e=new j,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=F(e);return e},j.prototype.on=function(e,t){var n=e.indexOf("."),r="";n>=0&&(r=e.slice(n+1),e=e.slice(0,n));if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},e.event=null,e.requote=function(e){return e.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,z={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},X=function(e,t){return t.querySelector(e)},V=function(e,t){return t.querySelectorAll(e)},$=i.matches||i[P(i,"matchesSelector")],J=function(e,t){return $.call(e,t)};typeof Sizzle=="function"&&(X=function(e,t){return Sizzle(e,t)[0]||null},V=Sizzle,J=Sizzle.matchesSelector),e.selection=function(){return mt};var K=e.selection.prototype=[];K.select=function(e){var t=[],n,r,i,s;e=Q(e);for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a,o)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return W(t)},K.selectAll=function(e){var t=[],r,i;e=G(e);for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a])t.push(r=n(e.call(i,i.__data__,a,s))),r.parentNode=i;return W(t)};var Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:Y,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),Y.hasOwnProperty(n)?{space:Y[n],local:e}:e}},K.attr=function(t,n){if(arguments.length<2){if(typeof t=="string"){var r=this.node();return t=e.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(Z(n,t[n]));return this}return this.each(Z(t,n))},K.classed=function(e,t){if(arguments.length<2){if(typeof e=="string"){var n=this.node(),r=(e=nt(e)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return!1}else{t=n.getAttribute("class");while(++i<r)if(!tt(e[i]).test(t))return!1}return!0}for(t in e)this.each(rt(t,e[t]));return this}return this.each(rt(e,t))},K.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.each(st(n,e[n],t));return this}if(r<2)return s.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(st(e,t,n))},K.property=function(e,t){if(arguments.length<2){if(typeof e=="string")return this.node()[e];for(t in e)this.each(ot(t,e[t]));return this}return this.each(ot(e,t))},K.text=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},K.html=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},K.append=function(e){return e=ut(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},K.insert=function(e,t){return e=ut(e),t=Q(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},K.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},K.data=function(e,t){function o(e,n){var r,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(s),c=new Array(s),h=new Array(i),p,d;if(t){var v=new S,m=new Array(i),g;for(r=-1;++r<i;)v.has(g=t.call(p=e[r],p.__data__,r))?h[r]=p:v.set(g,p),m[r]=g;for(r=-1;++r<s;)(p=v.get(g=t.call(n,d=n[r],r)))?p!==!0&&(l[r]=p,p.__data__=d):c[r]=at(d),v.set(g,!0);for(r=-1;++r<i;)v.get(m[r])!==!0&&(h[r]=e[r])}else{for(r=-1;++r<o;)p=e[r],d=n[r],p?(p.__data__=d,l[r]=p):c[r]=at(d);for(;r<s;++r)c[r]=at(n[r]);for(;r<i;++r)h[r]=e[r]}c.update=l,c.parentNode=l.parentNode=h.parentNode=e.parentNode,u.push(c),a.push(l),f.push(h)}var n=-1,r=this.length,i,s;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r)if(s=i[n])e[n]=s.__data__;return e}var u=ht([]),a=W([]),f=W([]);if(typeof e=="function")while(++n<r)o(i=this[n],e.call(i,i.parentNode.__data__,n));else while(++n<r)o(i=this[n],e);return a.enter=function(){return u},a.exit=function(){return f},a},K.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},K.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=ft(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u,s)&&n.push(i)}return W(t)},K.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},K.sort=function(e){e=lt.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},K.each=function(e){return ct(this,function(t,n,r){e.call(t,t.__data__,n,r)})},K.call=function(e){var t=n(arguments);return e.apply(t[0]=this,t),this},K.empty=function(){return!this.node()},K.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var s=n[r];if(s)return s}return null},K.size=function(){var e=0;return ct(this,function(){++e}),e};var pt=[];e.selection.enter=ht,e.selection.enter.prototype=pt,pt.append=K.append,pt.empty=K.empty,pt.node=K.node,pt.call=K.call,pt.size=K.size,pt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f,u)),r.__data__=o.__data__):n.push(null)}return W(t)},pt.insert=function(e,t){return arguments.length<2&&(t=dt(this)),K.insert.call(this,e,t)},K.transition=function(){var e=Tf||++xf,t=[],n,r,i=Nf||{time:Date.now(),ease:jo,delay:0,duration:250};for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(r=u[a])&&Lf(r,a,e,i),n.push(r)}return Ef(t,e)},K.interrupt=function(){return this.each(vt)},e.select=function(e){var t=[typeof e=="string"?X(e,r):e];return t.parentNode=i,W([t])},e.selectAll=function(e){var t=n(typeof e=="string"?V(e,r):e);return t.parentNode=i,W([t])};var mt=e.select(i);K.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t=!1);for(n in e)this.each(gt(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(gt(e,t,n))};var yt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});yt.forEach(function(e){"on"+e in r&&yt.remove(e)});var Et="onselectstart"in r?null:P(i.style,"userSelect"),St=0;e.mouse=function(e){return Nt(e,q())};var Tt=/WebKit/.test(s.navigator.userAgent)?-1:0;e.touch=function(e,t,n){arguments.length<3&&(n=t,t=q().changedTouches);if(t)for(var r=0,i=t.length,s;r<i;++r)if((s=t[r]).identifier===n)return Nt(e,s)},e.behavior.drag=function(){function s(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function o(r,i,s,o,u){return function(){function b(){var e=i(l,p),t,n;if(!e)return;t=e[0]-y[0],n=e[1]-y[1],h|=t|n,y=e,c({type:"drag",x:e[0]+v[0],y:e[1]+v[1],dx:t,dy:n})}function w(){if(!i(l,p))return;m.on(o+d,null).on(u+d,null),g(h&&e.event.target===f),c({type:"dragend"})}var a=this,f=e.event.target,l=a.parentNode,c=t.of(a,arguments),h=0,p=r(),d=".drag"+(p==null?"":"-"+p),v,m=e.select(s()).on(o+d,b).on(u+d,w),g=xt(),y=i(l,p);n?(v=n.apply(a,arguments),v=[v.x-y[0],v.y-y[1]]):v=[0,0],c({type:"dragstart"})}}var t=R(s,"drag","dragstart","dragend"),n=null,r=o(B,e.mouse,Lt,"mousemove","mouseup"),i=o(Ct,e.touch,kt,"touchmove","touchend");return s.origin=function(e){return arguments.length?(n=e,s):n},e.rebind(s,t,"on")},e.touches=function(e,t){return arguments.length<2&&(t=q().touches),t?n(t).map(function(t){var n=Nt(e,t);return n.identifier=t.identifier,n}):[]};var At=Math.PI,Ot=2*At,Mt=At/2,_t=1e-6,Dt=_t*_t,Pt=At/180,Ht=180/At,Wt=Math.SQRT2,Xt=2,Vt=4;e.interpolateZoom=function(e,t){function y(e){var t=e*g;if(m){var s=Rt(d),o=i/(Xt*c)*(s*Ut(Wt*t+d)-qt(d));return[n+o*a,r+o*f,i*s/Rt(Wt*t+d)]}return[n+e*a,r+e*f,i*Math.exp(Wt*t)]}var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],u=t[2],a=s-n,f=o-r,l=a*a+f*f,c=Math.sqrt(l),h=(u*u-i*i+Vt*l)/(2*i*Xt*c),p=(u*u-i*i-Vt*l)/(2*u*Xt*c),d=Math.log(Math.sqrt(h*h+1)-h),v=Math.log(Math.sqrt(p*p+1)-p),m=v-d,g=(m||Math.log(u/i))/Wt;return y.duration=g*1e3,y},e.behavior.zoom=function(){function b(e){e.on(a,L).on(Kt+".zoom",O).on("dblclick.zoom",M).on(h,A)}function w(e){return[(e[0]-t.x)/t.k,(e[1]-t.y)/t.k]}function E(e){return[e[0]*t.k+t.x,e[1]*t.k+t.y]}function S(e){t.k=Math.max(u[0],Math.min(u[1],e))}function x(e,n){n=E(n),t.x+=e[0]-n[0],t.y+=e[1]-n[1]}function T(){m&&m.domain(v.range().map(function(e){return(e-t.x)/t.k}).map(v.invert)),y&&y.domain(g.range().map(function(e){return(e-t.y)/t.k}).map(g.invert))}function N(e){e({type:"zoomstart"})}function C(e){T(),e({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function k(e){e({type:"zoomend"})}function L(){function c(){i=1,x(e.mouse(t),u),C(r)}function h(){o.on(f,null).on(l,null),a(i&&e.event.target===n),k(r)}var t=this,n=e.event.target,r=d.of(t,arguments),i=0,o=e.select(s).on(f,c).on(l,h),u=w(e.mouse(t)),a=xt();vt.call(t),N(r)}function A(){function g(){var r=e.touches(n);return o=t.k,r.forEach(function(e){e.identifier in i&&(i[e.identifier]=w(e))}),r}function y(){var n=e.event.target;e.select(n).on(f,b).on(l,E),c.push(n);var o=e.event.changedTouches;for(var u=0,a=o.length;u<a;++u)i[o[u].identifier]=null;var h=g(),d=Date.now();if(h.length===1){if(d-p<500){var v=h[0],m=i[v.identifier];S(t.k*2),x(v,m),I(),C(r)}p=d}else if(h.length>1){var v=h[0],y=h[1],w=v[0]-y[0],T=v[1]-y[1];s=w*w+T*T}}function b(){var t=e.touches(n),u,a,f,l;for(var c=0,h=t.length;c<h;++c,l=null){f=t[c];if(l=i[f.identifier]){if(a)break;u=f,a=l}}if(l){var d=(d=f[0]-u[0])*d+(d=f[1]-u[1])*d,v=s&&Math.sqrt(d/s);u=[(u[0]+f[0])/2,(u[1]+f[1])/2],a=[(a[0]+l[0])/2,(a[1]+l[1])/2],S(v*o)}p=null,x(u,a),C(r)}function E(){if(e.event.touches.length){var t=e.event.changedTouches;for(var n=0,s=t.length;n<s;++n)delete i[t[n].identifier];for(var o in i)return void g()}e.selectAll(c).on(u,null),v.on(a,L).on(h,A),m(),k(r)}var n=this,r=d.of(n,arguments),i={},s=0,o,u=".zoom-"+e.event.changedTouches[0].identifier,f="touchmove"+u,l="touchend"+u,c=[],v=e.select(n),m=xt();vt.call(n),y(),N(r),v.on(a,null).on(h,y)}function O(){var s=d.of(this,arguments);c?clearTimeout(c):(n=w(r=i||e.mouse(this)),vt.call(this),N(s)),c=setTimeout(function(){c=null,k(s)},50),I(),S(Math.pow(2,Jt()*.002)*t.k),x(r,n),C(s)}function M(){var n=d.of(this,arguments),r=e.mouse(this),i=w(r),s=Math.log(t.k)/Math.LN2;N(n),S(Math.pow(2,e.event.shiftKey?Math.ceil(s)-1:Math.floor(s)+1)),x(r,i),C(n),k(n)}var t={x:0,y:0,k:1},n,r,i,o=[960,500],u=$t,a="mousedown.zoom",f="mousemove.zoom",l="mouseup.zoom",c,h="touchstart.zoom",p,d=R(b,"zoomstart","zoom","zoomend"),v,m,g,y;return b.event=function(n){n.each(function(){var n=d.of(this,arguments),r=t;Tf?e.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},N(n)}).tween("zoom:zoom",function(){var i=o[0],s=o[1],u=i/2,a=s/2,f=e.interpolateZoom([(u-t.x)/t.k,(a-t.y)/t.k,i/t.k],[(u-r.x)/r.k,(a-r.y)/r.k,i/r.k]);return function(e){var r=f(e),s=i/r[2];this.__chart__=t={x:u-r[0]*s,y:a-r[1]*s,k:s},C(n)}}).each("end.zoom",function(){k(n)}):(this.__chart__=t,N(n),C(n),k(n))})},b.translate=function(e){return arguments.length?(t={x:+e[0],y:+e[1],k:t.k},T(),b):[t.x,t.y]},b.scale=function(e){return arguments.length?(t={x:t.x,y:t.y,k:+e},T(),b):t.k},b.scaleExtent=function(e){return arguments.length?(u=e==null?$t:[+e[0],+e[1]],b):u},b.center=function(e){return arguments.length?(i=e&&[+e[0],+e[1]],b):i},b.size=function(e){return arguments.length?(o=e&&[+e[0],+e[1]],b):o},b.x=function(e){return arguments.length?(m=e,v=e.copy(),t={x:0,y:0,k:1},b):m},b.y=function(e){return arguments.length?(y=e,g=e.copy(),t={x:0,y:0,k:1},b):y},e.rebind(b,d,"on")};var $t=[0,Infinity],Jt,Kt="onwheel"in r?(Jt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(Jt=function(){return e.event.wheelDelta},"mousewheel"):(Jt=function(){return-e.event.detail},"MozMousePixelScroll");e.color=Qt,Qt.prototype.toString=function(){return this.rgb()+""},e.hsl=Gt;var Yt=Gt.prototype=new Qt;Yt.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Gt(this.h,this.s,this.l/e)},Yt.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Gt(this.h,this.s,e*this.l)},Yt.rgb=function(){return Zt(this.h,this.s,this.l)},e.hcl=en;var tn=en.prototype=new Qt;tn.brighter=function(e){return new en(this.h,this.c,Math.min(100,this.l+sn*(arguments.length?e:1)))},tn.darker=function(e){return new en(this.h,this.c,Math.max(0,this.l-sn*(arguments.length?e:1)))},tn.rgb=function(){return nn(this.h,this.c,this.l).rgb()},e.lab=rn;var sn=18,on=.95047,un=1,an=1.08883,fn=rn.prototype=new Qt;fn.brighter=function(e){return new rn(Math.min(100,this.l+sn*(arguments.length?e:1)),this.a,this.b)},fn.darker=function(e){return new rn(Math.max(0,this.l-sn*(arguments.length?e:1)),this.a,this.b)},fn.rgb=function(){return ln(this.l,this.a,this.b)},e.rgb=vn;var yn=vn.prototype=new Qt;yn.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?new vn(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new vn(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e)))},yn.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new vn(e*this.r,e*this.g,e*this.b)},yn.hsl=function(){return En(this.r,this.g,this.b)},yn.toString=function(){return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var Nn=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Nn.forEach(function(e,t){Nn.set(e,mn(t))}),e.functor=Cn,e.xhr=Ln(kn),e.dsv=function(e,t){function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=An(e,t,n==null?s:o(n),r);return i.row=function(e){return arguments.length?i.response((n=e)==null?s:o(e)):n},i}function s(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function u(t){return t.map(a).join(e)}function a(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);return i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},i.parseRows=function(e,t){function c(){if(u>=o)return i;if(l)return l=!1,n;var t=u;if(e.charCodeAt(t)===34){var s=t;while(s++<o)if(e.charCodeAt(s)===34){if(e.charCodeAt(s+1)!==34)break;++s}u=s+2;var a=e.charCodeAt(s+1);return a===13?(l=!0,e.charCodeAt(s+2)===10&&++u):a===10&&(l=!0),e.slice(t+1,s).replace(/""/g,'"')}while(u<o){var a=e.charCodeAt(u++),f=1;if(a===10)l=!0;else if(a===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(a!==r)continue;return e.slice(t,u-f)}return e.slice(t)}var n={},i={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==i){var h=[];while(f!==n&&f!==i)h.push(f),f=c();if(t&&(h=t(h,a++))==null)continue;s.push(h)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new _,r=[];return t.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(a).join(e)].concat(t.map(function(t){return r.map(function(e){return a(t[e])}).join(e)})).join("\n")},i.formatRows=function(e){return e.map(u).join("\n")},i},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var _n,Dn,Pn,Hn,Bn,jn=s[P(s,"requestAnimationFrame")]||function(e){setTimeout(e,17)};e.timer=function(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};Dn?Dn.n=s:_n=s,Dn=s,Pn||(Hn=clearTimeout(Hn),Pn=1,jn(Fn))},e.timer.flush=function(){In(),qn()},e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Un=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(zn);e.formatPrefix=function(t,n){var r=0;return t&&(t<0&&(t*=-1),n&&(t=e.round(t,Rn(t,n))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))),Un[8+r/3]};var Xn=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Vn=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,n){return(t=e.round(t,Rn(t,n))).toFixed(Math.max(0,Math.min(20,Rn(t*(1+1e-15),n))))}}),Jn=e.time={},Kn=Date;Qn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Gn.setUTCDate.apply(this._,arguments)},setDay:function(){Gn.setUTCDay.apply(this._,arguments)},setFullYear:function(){Gn.setUTCFullYear.apply(this._,arguments)},setHours:function(){Gn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Gn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Gn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Gn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Gn.setUTCSeconds.apply(this._,arguments)},setTime:function(){Gn.setTime.apply(this._,arguments)}};var Gn=Date.prototype;Jn.year=Yn(function(e){return e=Jn.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Jn.years=Jn.year.range,Jn.years.utc=Jn.year.utc.range,Jn.day=Yn(function(e){var t=new Kn(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Jn.days=Jn.day.range,Jn.days.utc=Jn.day.utc.range,Jn.dayOfYear=function(e){var t=Jn.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Jn[e]=Yn(function(e){return(e=Jn.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=Jn.year(e).getDay();return Math.floor((Jn.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Jn[e+"s"]=n.range,Jn[e+"s"].utc=n.utc.range,Jn[e+"OfYear"]=function(e){var n=Jn.year(e).getDay();return Math.floor((Jn.dayOfYear(e)+(n+t)%7)/7)}}),Jn.week=Jn.sunday,Jn.weeks=Jn.sunday.range,Jn.weeks.utc=Jn.sunday.utc.range,Jn.weekOfYear=Jn.sundayOfYear;var tr={"-":"",_:" ",0:"0"},nr=/^\s*\d+/,rr=/^%/;e.locale=function(e){return{numberFormat:Wn(e),timeFormat:er(e)}};var Tr=e.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});e.format=Tr.numberFormat,e.geo={},Nr.prototype={s:0,t:0,add:function(e){kr(e,this.t,Cr),kr(Cr.s,this.s,this),this.s?this.t+=Cr.t:this.s=Cr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cr=new Nr;e.geo.stream=function(e,t){e&&Ar.hasOwnProperty(e.type)?Ar[e.type](e,t):Lr(e,t)};var Ar={Feature:function(e,t){Lr(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)Lr(n[r].geometry,t)}},Or={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Mr(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Mr(n[r],t,0)},Polygon:function(e,t){_r(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)_r(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)Lr(n[r],t)}};e.geo.area=function(t){return Dr=0,e.geo.stream(t,Hr),Dr};var Dr,Pr=new Nr,Hr={sphere:function(){Dr+=4*At},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Pr.reset(),Hr.lineStart=Br},polygonEnd:function(){var e=2*Pr;Dr+=e<0?4*At+e:e,Hr.lineStart=Hr.lineEnd=Hr.point=B}};e.geo.bounds=function(){function p(e,s){l.push(c=[t=e,r=e]),s<n&&(n=s),s>i&&(i=s)}function d(e,o){var u=jr([e*Pt,o*Pt]);if(a){var f=Ir(a,u),l=[f[1],-f[0],0],c=Ir(l,f);Ur(c),c=zr(c);var h=e-s,d=h>0?1:-1,v=c[0]*Ht*d,m=b(h)>180;if(m^(d*s<v&&v<d*e)){var g=c[1]*Ht;g>i&&(i=g)}else if(v=(v+360)%360-180,m^(d*s<v&&v<d*e)){var g=-c[1]*Ht;g<n&&(n=g)}else o<n&&(n=o),o>i&&(i=o);m?e<s?E(t,e)>E(t,r)&&(r=e):E(e,r)>E(t,r)&&(t=e):r>=t?(e<t&&(t=e),e>r&&(r=e)):e>s?E(t,e)>E(t,r)&&(r=e):E(e,r)>E(t,r)&&(t=e)}else p(e,o);a=u,s=e}function v(){h.point=d}function m(){c[0]=t,c[1]=r,h.point=p,a=null}function g(e,t){if(a){var n=e-s;f+=b(n)>180?n+(n>0?360:-360):n}else o=e,u=t;Hr.point(e,t),d(e,t)}function y(){Hr.lineStart()}function w(){g(o,u),Hr.lineEnd(),b(f)>_t&&(t=-(r=180)),c[0]=t,c[1]=r,a=null}function E(e,t){return(t-=e)<0?t+360:t}function S(e,t){return e[0]-t[0]}function x(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var t,n,r,i,s,o,u,a,f,l,c,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=y,h.lineEnd=w,f=0,Hr.polygonStart()},polygonEnd:function(){Hr.polygonEnd(),h.point=p,h.lineStart=v,h.lineEnd=m,Pr<0?(t=-(r=180),n=-(i=90)):f>_t?i=90:f<-_t&&(n=-90),c[0]=t,c[1]=r}};return function(s){i=r=-(t=n=Infinity),l=[],e.geo.stream(s,h);var o=l.length;if(o){l.sort(S);for(var u=1,a=l[0],f,p=[a];u<o;++u)f=l[u],x(f[0],a)||x(f[1],a)?(E(a[0],f[1])>E(a[0],a[1])&&(a[1]=f[1]),E(f[0],a[1])>E(a[0],a[1])&&(a[0]=f[0])):p.push(a=f);var d=-Infinity,v;for(var o=p.length-1,u=0,a=p[o],f;u<=o;a=f,++u)f=p[u],(v=E(a[1],f[0]))>d&&(d=v,t=f[0],r=a[1])}return l=c=null,t===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[t,n],[r,i]]}}(),e.geo.centroid=function(t){Xr=Vr=$r=Jr=Kr=Qr=Gr=Yr=Zr=ei=ti=0,e.geo.stream(t,ni);var n=Zr,r=ei,i=ti,s=n*n+r*r+i*i;if(s<Dt){n=Qr,r=Gr,i=Yr,Vr<_t&&(n=$r,r=Jr,i=Kr),s=n*n+r*r+i*i;if(s<Dt)return[NaN,NaN]}return[Math.atan2(r,n)*Ht,It(i/Math.sqrt(s))*Ht]};var Xr,Vr,$r,Jr,Kr,Qr,Gr,Yr,Zr,ei,ti,ni={sphere:B,point:ri,lineStart:si,lineEnd:oi,polygonStart:function(){ni.lineStart=ui},polygonEnd:function(){ni.lineStart=si}},mi=hi(ai,gi,bi,[-At,-At/2]),xi=1e9;e.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=Ti(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(e.geo.conicEqualArea=function(){return Ci(ki)}).raw=ki,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){function f(e){var t=e[0],n=e[1];return i=null,(o(t,n),i)||(u(t,n),i)||a(t,n),i}var t=e.geo.albers(),n=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i,s={point:function(e,t){i=[e,t]}},o,u,a;return f.invert=function(e){var i=t.scale(),s=t.translate(),o=(e[0]-s[0])/i,u=(e[1]-s[1])/i;return(u>=.12&&u<.234&&o>=-0.425&&o<-0.214?n:u>=.166&&u<.234&&o>=-0.214&&o<-0.115?r:t).invert(e)},f.stream=function(e){var i=t.stream(e),s=n.stream(e),o=r.stream(e);return{point:function(e,t){i.point(e,t),s.point(e,t),o.point(e,t)},sphere:function(){i.sphere(),s.sphere(),o.sphere()},lineStart:function(){i.lineStart(),s.lineStart(),o.lineStart()},lineEnd:function(){i.lineEnd(),s.lineEnd(),o.lineEnd()},polygonStart:function(){i.polygonStart(),s.polygonStart(),o.polygonStart()},polygonEnd:function(){i.polygonEnd(),s.polygonEnd(),o.polygonEnd()}}},f.precision=function(e){return arguments.length?(t.precision(e),n.precision(e),r.precision(e),f):t.precision()},f.scale=function(e){return arguments.length?(t.scale(e),n.scale(e*.35),r.scale(e),f.translate(t.translate())):t.scale()},f.translate=function(e){if(!arguments.length)return t.translate();var i=t.scale(),l=+e[0],c=+e[1];return o=t.translate(e).clipExtent([[l-.455*i,c-.238*i],[l+.455*i,c+.238*i]]).stream(s).point,u=n.translate([l-.307*i,c+.201*i]).clipExtent([[l-.425*i+_t,c+.12*i+_t],[l-.214*i-_t,c+.234*i-_t]]).stream(s).point,a=r.translate([l-.205*i,c+.212*i]).clipExtent([[l-.214*i+_t,c+.166*i+_t],[l-.115*i-_t,c+.234*i-_t]]).stream(s).point,f},f.scale(1070)};var Li,Ai,Oi={point:B,lineStart:B,lineEnd:B,polygonStart:function(){Ai=0,Oi.lineStart=Mi},polygonEnd:function(){Oi.lineStart=Oi.lineEnd=Oi.point=B,Li+=b(Ai/2)}},_i,Di,Pi,Hi,Bi={point:ji,lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B},qi={point:Ri,lineStart:Ui,lineEnd:zi,polygonStart:function(){qi.lineStart=Wi},polygonEnd:function(){qi.point=Ri,qi.lineStart=Ui,qi.lineEnd=zi}};e.geo.path=function(){function u(n){if(n){typeof t=="function"&&s.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=i(s);e.geo.stream(n,o)}return s.result()}function a(){return o=null,u}var t=4.5,n,r,i,s,o;return u.area=function(t){return Li=0,e.geo.stream(t,i(Oi)),Li},u.centroid=function(t){return $r=Jr=Kr=Qr=Gr=Yr=Zr=ei=ti=0,e.geo.stream(t,i(qi)),ti?[Zr/ti,ei/ti]:Yr?[Qr/Yr,Gr/Yr]:Kr?[$r/Kr,Jr/Kr]:[NaN,NaN]},u.bounds=function(t){return Pi=Hi=-(_i=Di=Infinity),e.geo.stream(t,i(Bi)),[[_i,Di],[Pi,Hi]]},u.projection=function(e){return arguments.length?(i=(n=e)?e.stream||$i(e):kn,a()):n},u.context=function(e){return arguments.length?(s=(r=e)==null?new Fi:new Xi(e),typeof t!="function"&&s.pointRadius(t),a()):r},u.pointRadius=function(e){return arguments.length?(t=typeof e=="function"?e:(s.pointRadius(+e),+e),u):t},u.projection(e.geo.albersUsa()).context(null)},e.geo.transform=function(e){return{stream:function(t){var n=new Ji(t);for(var r in e)n[r]=e[r];return n}}},Ji.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},e.geo.projection=Qi,e.geo.projectionMutator=Gi,(e.geo.equirectangular=function(){return Qi(Zi)}).raw=Zi.invert=Zi,e.geo.rotation=function(e){function t(t){return t=e(t[0]*Pt,t[1]*Pt),t[0]*=Ht,t[1]*=Ht,t}return e=ts(e[0]%360*Pt,e[1]*Pt,e.length>2?e[2]*Pt:0),t.invert=function(t){return t=e.invert(t[0]*Pt,t[1]*Pt),t[0]*=Ht,t[1]*=Ht,t},t},es.invert=Zi,e.geo.circle=function(){function i(){var t=typeof e=="function"?e.apply(this,arguments):e,n=ts(-t[0]*Pt,-t[1]*Pt,0).invert,i=[];return r(null,null,1,{point:function(e,t){i.push(e=n(e,t)),e[0]*=Ht,e[1]*=Ht}}),{type:"Polygon",coordinates:[i]}}var e=[0,0],t,n=6,r;return i.origin=function(t){return arguments.length?(e=t,i):e},i.angle=function(e){return arguments.length?(r=ss((t=+e)*Pt,n*Pt),i):t},i.precision=function(e){return arguments.length?(r=ss(t*Pt,(n=+e)*Pt),i):n},i.angle(90)},e.geo.distance=function(e,t){var n=(t[0]-e[0])*Pt,r=e[1]*Pt,i=t[1]*Pt,s=Math.sin(n),o=Math.cos(n),u=Math.sin(r),a=Math.cos(r),f=Math.sin(i),l=Math.cos(i),c;return Math.atan2(Math.sqrt((c=l*s)*c+(c=a*f-u*l*o)*c),u*f+a*l*o)},e.geo.graticule=function(){function y(){return{type:"MultiLineString",coordinates:w()}}function w(){return e.range(Math.ceil(i/c)*c,r,c).map(v).concat(e.range(Math.ceil(a/h)*h,u,h).map(m)).concat(e.range(Math.ceil(n/f)*f,t,f).filter(function(e){return b(e%c)>_t}).map(p)).concat(e.range(Math.ceil(o/l)*l,s,l).filter(function(e){return b(e%h)>_t}).map(d))}var t,n,r,i,s,o,u,a,f=10,l=f,c=90,h=360,p,d,v,m,g=2.5;return y.lines=function(){return w().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(m(u).slice(1),v(r).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],a=+e[0][1],u=+e[1][1],i>r&&(e=i,i=r,r=e),a>u&&(e=a,a=u,u=e),y.precision(g)):[[i,a],[r,u]]},y.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],s=+e[1][1],n>t&&(e=n,n=t,t=e),o>s&&(e=o,o=s,s=e),y.precision(g)):[[n,o],[t,s]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(c=+e[0],h=+e[1],y):[c,h]},y.minorStep=function(e){return arguments.length?(f=+e[0],l=+e[1],y):[f,l]},y.precision=function(e){return arguments.length?(g=+e,p=us(o,s,90),d=as(n,t,g),v=us(a,u,90),m=as(i,r,g),y):g},y.majorExtent([[-180,-90+_t],[180,90-_t]]).minorExtent([[-180,-80-_t],[180,80+_t]])},e.geo.greatArc=function(){function s(){return{type:"LineString",coordinates:[n||t.apply(this,arguments),i||r.apply(this,arguments)]}}var t=fs,n,r=ls,i;return s.distance=function(){return e.geo.distance(n||t.apply(this,arguments),i||r.apply(this,arguments))},s.source=function(e){return arguments.length?(t=e,n=typeof e=="function"?null:e,s):t},s.target=function(e){return arguments.length?(r=e,i=typeof e=="function"?null:e,s):r},s.precision=function(){return arguments.length?s:0},s},e.geo.interpolate=function(e,t){return cs(e[0]*Pt,e[1]*Pt,t[0]*Pt,t[1]*Pt)},e.geo.length=function(t){return hs=0,e.geo.stream(t,ps),hs};var hs,ps={sphere:B,point:B,lineStart:ds,lineEnd:B,polygonStart:B,polygonEnd:B},ms=vs(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(e.geo.azimuthalEqualArea=function(){return Qi(ms)}).raw=ms;var gs=vs(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},kn);(e.geo.azimuthalEquidistant=function(){return Qi(gs)}).raw=gs,(e.geo.conicConformal=function(){return Ci(ys)}).raw=ys,(e.geo.conicEquidistant=function(){return Ci(bs)}).raw=bs;var ws=vs(function(e){return 1/e},Math.atan);(e.geo.gnomonic=function(){return Qi(ws)}).raw=ws,Es.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Mt]},(e.geo.mercator=function(){return Ss(Es)}).raw=Es;var xs=vs(function(){return 1},Math.asin);(e.geo.orthographic=function(){return Qi(xs)}).raw=xs;var Ts=vs(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(e.geo.stereographic=function(){return Qi(Ts)}).raw=Ts,Ns.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Mt]},(e.geo.transverseMercator=function(){var e=Ss(Ns),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Ns,e.geom={},e.geom.hull=function(e){function r(e){if(e.length<3)return[];var r=Cn(t),i=Cn(n),s,o=e.length,u=[],a=[];for(s=0;s<o;s++)u.push([+r.call(this,e[s],s),+i.call(this,e[s],s),s]);u.sort(As);for(s=0;s<o;s++)a.push([u[s][0],-u[s][1]]);var f=Ls(u),l=Ls(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(s=f.length-1;s>=0;--s)p.push(e[u[f[s]][2]]);for(s=+c;s<l.length-h;++s)p.push(e[u[l[s]][2]]);return p}var t=Cs,n=ks;return arguments.length?r(e):(r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r)},e.geom.polygon=function(e){return z(e,Os),e};var Os=e.geom.polygon.prototype=[];Os.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t)n=r,r=this[e],i+=n[1]*r[0]-n[0]*r[1];return i*.5},Os.centroid=function(e){var t=-1,n=this.length,r=0,i=0,s,o=this[n-1],u;arguments.length||(e=-1/(6*this.area()));while(++t<n)s=o,o=this[t],u=s[0]*o[1]-o[0]*s[1],r+=(s[0]+o[0])*u,i+=(s[1]+o[1])*u;return[r*e,i*e]},Os.clip=function(e){var t,n=Ds(e),r=-1,i=this.length-Ds(this),s,o,u=this[i-1],a,f,l;while(++r<i){t=e.slice(),e.length=0,a=this[r],f=t[(o=t.length-n)-1],s=-1;while(++s<o)l=t[s],Ms(l,u,a)?(Ms(f,u,a)||e.push(_s(f,l,u,a)),e.push(l)):Ms(f,u,a)&&e.push(_s(f,l,u,a)),f=l;n&&e.push(e[0]),u=a}return e};var Ps,Hs,Bs,js=[],Fs,Is,qs=[];Js.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--)n=e[t].edge,(!n.b||!n.a)&&e.splice(t,1);return e.sort(Qs),e.length},oo.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},uo.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=co(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);t.L=t.R=null,t.U=n,t.C=!0,e=t;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(fo(this,n),e=n,n=e.U),n.C=!1,r.C=!0,lo(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(lo(this,n),e=n,n=e.U),n.C=!1,r.C=!0,fo(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,s,o;r?i?s=co(i):s=r:s=i,t?t.L===e?t.L=s:t.R=s:this._=s,r&&i?(o=s.C,s.C=e.C,s.L=r,r.U=s,s!==i?(t=s.U,s.U=e.U,e=s.R,t.L=e,s.R=i,i.U=s):(s.U=t,t=s,e=s.R)):(o=e.C,e=s),e&&(e.U=t);if(o)return;if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){n=t.R,n.C&&(n.C=!1,t.C=!0,fo(this,t),n=t.R);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C)n.L.C=!1,n.C=!0,lo(this,n),n=t.R;n.C=t.C,t.C=n.R.C=!1,fo(this,t),e=this._;break}}else{n=t.L,n.C&&(n.C=!1,t.C=!0,lo(this,t),n=t.L);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C)n.R.C=!1,n.C=!0,fo(this,n),n=t.L;n.C=t.C,t.C=n.L.C=!1,lo(this,t),e=this._;break}}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}},e.geom.voronoi=function(e){function o(e){var t=new Array(e.length),n=s[0][0],r=s[0][1],i=s[1][0],o=s[1][1];return ho(u(e),s).cells.forEach(function(s,u){var a=s.edges,f=s.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=n&&f.x<=i&&f.y>=r&&f.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];l.point=e[u]}),t}function u(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/_t)*_t,y:Math.round(i(e,t)/_t)*_t,i:t}})}var t=Cs,n=ks,r=t,i=n,s=vo;return e?o(e):(o.links=function(e){return ho(u(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(e){var t=[];return ho(u(e)).cells.forEach(function(n,r){var i=n.site,s=n.edges.sort(Qs),o=-1,u=s.length,a,f,l=s[u-1].edge,c=l.l===i?l.r:l.l;while(++o<u)a=l,f=c,l=s[o].edge,c=l.l===i?l.r:l.l,r<f.i&&r<c.i&&mo(i,f,c)<0&&t.push([e[r],e[f.i],e[c.i]])}),t},o.x=function(e){return arguments.length?(r=Cn(t=e),o):t},o.y=function(e){return arguments.length?(i=Cn(n=e),o):n},o.clipExtent=function(e){return arguments.length?(s=e==null?vo:e,o):s===vo?null:s},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):s===vo?null:s&&s[1]},o)};var vo=[[-1e6,-1e6],[1e6,1e6]];e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(e,t,n,r,i){function a(e){function T(e,t,n,r,i,s,o,u){if(isNaN(n)||isNaN(r))return;if(e.leaf){var a=e.x,f=e.y;if(a!=null)if(b(a-n)+b(f-r)<.01)N(e,t,n,r,i,s,o,u);else{var l=e.point;e.x=e.y=e.point=null,N(e,l,a,f,i,s,o,u),N(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else N(e,t,n,r,i,s,o,u)}function N(e,t,n,r,i,s,o,u){var a=(i+o)*.5,f=(s+u)*.5,l=n>=a,c=r>=f,h=(c<<1)+l;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=bo()),l?i=a:o=a,c?s=f:u=f,T(e,t,n,r,i,s,o,u)}var a,f=Cn(s),l=Cn(o),c,h,p,d,v,m,g,y;if(t!=null)v=t,m=n,g=r,y=i;else{g=y=-(v=m=Infinity),c=[],h=[],d=e.length;if(u)for(p=0;p<d;++p)a=e[p],a.x<v&&(v=a.x),a.y<m&&(m=a.y),a.x>g&&(g=a.x),a.y>y&&(y=a.y),c.push(a.x),h.push(a.y);else for(p=0;p<d;++p){var w=+f(a=e[p],p),E=+l(a,p);w<v&&(v=w),E<m&&(m=E),w>g&&(g=w),E>y&&(y=E),c.push(w),h.push(E)}}var S=g-v,x=y-m;S>x?y=m+S:g=v+x;var C=bo();C.add=function(e){T(C,e,+f(e,++p),+l(e,p),v,m,g,y)},C.visit=function(e){wo(e,C,v,m,g,y)},p=-1;if(t==null){while(++p<d)T(C,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(C.add);return c=h=e=a=null,C}var s=Cs,o=ks,u;return(u=arguments.length)?(s=go,o=yo,u===3&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(o=e,a):o},a.extent=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):t==null?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):t==null?null:[r-t,i-n]},a)},e.interpolateRgb=Eo,e.interpolateObject=So,e.interpolateNumber=xo,e.interpolateString=To;var No=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Co=new RegExp(No.source,"g");e.interpolate=ko,e.interpolators=[function(e,t){var n=typeof t;return(n==="string"?Nn.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Eo:To:t instanceof Qt?Eo:Array.isArray(t)?Lo:n==="object"&&isNaN(t)?So:xo)(e,t)}],e.interpolateArray=Lo;var Ao=function(){return kn},Oo=e.map({linear:Ao,poly:Fo,quad:function(){return Ho},cubic:function(){return Bo},sin:function(){return Io},exp:function(){return qo},circle:function(){return Ro},elastic:Uo,back:zo,bounce:function(){return Wo}}),Mo=e.map({"in":kn,out:Do,"in-out":Po,"out-in":function(e){return Po(Do(e))}});e.ease=function(e){var n=e.indexOf("-"),r=n>=0?e.slice(0,n):e,i=n>=0?e.slice(n+1):"in";return r=Oo.get(r)||Ao,i=Mo.get(i)||kn,_o(i(r.apply(null,t.call(arguments,1))))},e.interpolateHcl=Xo,e.interpolateHsl=Vo,e.interpolateLab=$o,e.interpolateRound=Jo,e.transform=function(t){var n=r.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(e!=null){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new Ko(t?t.matrix:Zo)})(t)},Ko.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Zo={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=eu,e.layout={},e.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(ru(e[n]));return t}},e.layout.chord=function(){function l(){var t={},l=[],h=e.range(s),p=[],d,v,m,g,y;n=[],r=[],d=0,g=-1;while(++g<s){v=0,y=-1;while(++y<s)v+=i[g][y];l.push(v),p.push(e.range(s)),d+=v}u&&h.sort(function(e,t){return u(l[e],l[t])}),a&&p.forEach(function(e,t){e.sort(function(e,n){return a(i[t][e],i[t][n])})}),d=(Ot-o*s)/d,v=0,g=-1;while(++g<s){m=v,y=-1;while(++y<s){var b=h[g],w=p[b][y],E=i[b][w],S=v,x=v+=E*d;t[b+"-"+w]={index:b,subindex:w,startAngle:S,endAngle:x,value:E}}r[b]={index:b,startAngle:m,endAngle:v,value:(v-m)/d},v+=o}g=-1;while(++g<s){y=g-1;while(++y<s){var T=t[g+"-"+y],N=t[y+"-"+g];(T.value||N.value)&&n.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}}f&&c()}function c(){n.sort(function(e,t){return f((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var t={},n,r,i,s,o=0,u,a,f;return t.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,t):i},t.padding=function(e){return arguments.length?(o=e,n=r=null,t):o},t.sortGroups=function(e){return arguments.length?(u=e,n=r=null,t):u},t.sortSubgroups=function(e){return arguments.length?(a=e,n=null,t):a},t.sortChords=function(e){return arguments.length?(f=e,n&&c(),t):f},t.chords=function(){return n||l(),n},t.groups=function(){return r||l(),r},t},e.layout.force=function(){function y(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(u*u/h<a){if(a<l){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&a<l){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function b(n){n.px=e.event.x,n.py=e.event.y,t.resume()}var t={},n=e.dispatch("start","tick","end"),r=[1,1],i,s,o=.9,u=cu,a=hu,f=-30,l=pu,c=.1,h=.64,p=[],d=[],v,m,g;return t.tick=function(){if((s*=.99)<.005)return n.end({type:"end",alpha:s=0}),!0;var t=p.length,i=d.length,u,a,l,h,b,w,E,S,x;for(a=0;a<i;++a){l=d[a],h=l.source,b=l.target,S=b.x-h.x,x=b.y-h.y;if(w=S*S+x*x)w=s*m[a]*((w=Math.sqrt(w))-v[a])/w,S*=w,x*=w,b.x-=S*(E=h.weight/(b.weight+h.weight)),b.y-=x*E,h.x+=S*(E=1-E),h.y+=x*E}if(E=s*c){S=r[0]/2,x=r[1]/2,a=-1;if(E)while(++a<t)l=p[a],l.x+=(S-l.x)*E,l.y+=(x-l.y)*E}if(f){lu(u=e.geom.quadtree(p),s,g),a=-1;while(++a<t)(l=p[a]).fixed||u.visit(y(l))}a=-1;while(++a<t)l=p[a],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*o,l.y-=(l.py-(l.py=l.y))*o);n.tick({type:"tick",alpha:s})},t.nodes=function(e){return arguments.length?(p=e,t):p},t.links=function(e){return arguments.length?(d=e,t):d},t.size=function(e){return arguments.length?(r=e,t):r},t.linkDistance=function(e){return arguments.length?(u=typeof e=="function"?e:+e,t):u},t.distance=t.linkDistance,t.linkStrength=function(e){return arguments.length?(a=typeof e=="function"?e:+e,t):a},t.friction=function(e){return arguments.length?(o=+e,t):o},t.charge=function(e){return arguments.length?(f=typeof e=="function"?e:+e,t):f},t.chargeDistance=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t.gravity=function(e){return arguments.length?(c=+e,t):c},t.theta=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t.alpha=function(r){return arguments.length?(r=+r,s?r>0?s=r:s=0:r>0&&(n.start({type:"start",alpha:s=r}),e.timer(t.tick)),t):s},t.start=function(){function h(t,r){if(!l){l=new Array(n);for(o=0;o<n;++o)l[o]=[];for(o=0;o<u;++o){var i=d[o];l[i.source.index].push(i.target),l[i.target.index].push(i.source)}}var s=l[e],o=-1,u=s.length,a;while(++o<u)if(!isNaN(a=s[o][t]))return a;return Math.random()*r}var e,n=p.length,i=d.length,s=r[0],o=r[1],l,c;for(e=0;e<n;++e)(c=p[e]).index=e,c.weight=0;for(e=0;e<i;++e)c=d[e],typeof c.source=="number"&&(c.source=p[c.source]),typeof c.target=="number"&&(c.target=p[c.target]),++c.source.weight,++c.target.weight;for(e=0;e<n;++e)c=p[e],isNaN(c.x)&&(c.x=h("x",s)),isNaN(c.y)&&(c.y=h("y",o)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);v=[];if(typeof u=="function")for(e=0;e<i;++e)v[e]=+u.call(this,d[e],e);else for(e=0;e<i;++e)v[e]=u;m=[];if(typeof a=="function")for(e=0;e<i;++e)m[e]=+a.call(this,d[e],e);else for(e=0;e<i;++e)m[e]=a;g=[];if(typeof f=="function")for(e=0;e<n;++e)g[e]=+f.call(this,p[e],e);else for(e=0;e<n;++e)g[e]=f;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){i||(i=e.behavior.drag().origin(kn).on("dragstart.force",ou).on("drag.force",b).on("dragend.force",uu));if(!arguments.length)return i;this.on("mouseover.force",au).on("mouseout.force",fu).call(i)},e.rebind(t,n,"on")};var cu=20,hu=1,pu=Infinity;e.layout.hierarchy=function(){function r(i){var s=[i],o=[],u;i.depth=0;while((u=s.pop())!=null){o.push(u);if((f=t.call(r,u,u.depth))&&(a=f.length)){var a,f,l;while(--a>=0)s.push(l=f[a]),l.parent=u,l.depth=u.depth+1;n&&(u.value=0),u.children=f}else n&&(u.value=+n.call(r,u,u.depth)||0),delete u.children}return mu(i,function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)}),o}var e=bu,t=gu,n=yu;return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(vu(e,function(e){e.children&&(e.value=0)}),mu(e,function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0);if(t=e.parent)t.value+=e.value})),e},r},e.layout.partition=function(){function r(e,t,n,i){var s=e.children;e.x=t,e.y=e.depth*i,e.dx=n,e.dy=i;if(s&&(u=s.length)){var o=-1,u,a,f;n=e.value?n/e.value:0;while(++o<u)r(a=s[o],t,f=a.value*n,i),t+=f}}function i(e){var t=e.children,n=0;if(t&&(s=t.length)){var r=-1,s;while(++r<s)n=Math.max(n,i(t[r]))}return 1+n}function s(e,s){var o=t.call(this,e,s);return r(o[0],0,n[0],n[1]/i(o[0])),o}var t=e.layout.hierarchy(),n=[1,1];return s.size=function(e){return arguments.length?(n=e,s):n},du(s,t)},e.layout.pie=function(){function s(o){var u=o.map(function(e,n){return+t.call(s,e,n)}),a=+(typeof r=="function"?r.apply(this,arguments):r),f=((typeof i=="function"?i.apply(this,arguments):i)-a)/e.sum(u),l=e.range(o.length);n!=null&&l.sort(n===Eu?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])});var c=[];return l.forEach(function(e){var t;c[e]={data:o[e],value:t=u[e],startAngle:a,endAngle:a+=t*f}}),c}var t=Number,n=Eu,r=0,i=Ot;return s.value=function(e){return arguments.length?(t=e,s):t},s.sort=function(e){return arguments.length?(n=e,s):n},s.startAngle=function(e){return arguments.length?(r=e,s):r},s.endAngle=function(e){return arguments.length?(i=e,s):i},s};var Eu={};e.layout.stack=function(){function u(a,f){if(!(v=a.length))return a;var l=a.map(function(e,n){return t.call(u,e,n)}),c=l.map(function(e){return e.map(function(e,t){return[s.call(u,e,t),o.call(u,e,t)]})}),h=n.call(u,c,f);l=e.permute(l,h),c=e.permute(c,h);var p=r.call(u,c,f),d=l[0].length,v,m,g,y;for(g=0;g<d;++g){i.call(u,l[0][g],y=p[g],c[0][g][1]);for(m=1;m<v;++m)i.call(u,l[m][g],y+=c[m-1][g][1],c[m][g][1])}return a}var t=kn,n=ku,r=Lu,i=Tu,s=Su,o=xu;return u.values=function(e){return arguments.length?(t=e,u):t},u.order=function(e){return arguments.length?(n=typeof e=="function"?e:Nu.get(e)||ku,u):n},u.offset=function(e){return arguments.length?(r=typeof e=="function"?e:Cu.get(e)||Lu,u):r},u.x=function(e){return arguments.length?(s=e,u):s},u.y=function(e){return arguments.length?(o=e,u):o},u.out=function(e){return arguments.length?(i=e,u):i},u};var Nu=e.map({"inside-out":function(t){var n=t.length,r,i,s=t.map(Au),o=t.map(Ou),u=e.range(n).sort(function(e,t){return s[e]-s[t]}),a=0,f=0,l=[],c=[];for(r=0;r<n;++r)i=u[r],a<f?(a+=o[i],l.push(i)):(f+=o[i],c.push(i));return c.reverse().concat(l)},reverse:function(t){return e.range(t.length).reverse()},"default":ku}),Cu=e.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,s,o,u,a,f,l,c,h,p=[];p[0]=c=h=0;for(s=1;s<r;++s){for(i=0,u=0;i<t;++i)u+=e[i][s][1];for(i=0,a=0,l=n[s][0]-n[s-1][0];i<t;++i){for(o=0,f=(e[i][s][1]-e[i][s-1][1])/(2*l);o<i;++o)f+=(e[o][s][1]-e[o][s-1][1])/l;a+=f*e[i][s][1]}p[s]=c-=u?a/u*l:0,c<h&&(h=c)}for(s=0;s<r;++s)p[s]-=h;return p},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:Lu});e.layout.histogram=function(){function s(s,o){var u=[],a=s.map(n,this),f=r.call(this,a,o),l=i.call(this,f,a,o),c,o=-1,h=a.length,p=l.length-1,d=t?1:1/h,v;while(++o<p)c=u[o]=[],c.dx=l[o+1]-(c.x=l[o]),c.y=0;if(p>0){o=-1;while(++o<h)v=a[o],v>=f[0]&&v<=f[1]&&(c=u[e.bisect(l,v,1,p)-1],c.y+=d,c.push(s[o]))}return u}var t=!0,n=Number,r=Pu,i=_u;return s.value=function(e){return arguments.length?(n=e,s):n},s.range=function(e){return arguments.length?(r=Cn(e),s):r},s.bins=function(e){return arguments.length?(i=typeof e=="number"?function(t){return Du(t,e)}:Cn(e),s):i},s.frequency=function(e){return arguments.length?(t=!!e,s):t},s},e.layout.pack=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a=r[0],f=r[1],l=i==null?Math.sqrt:typeof i=="function"?i:function(){return i};u.x=u.y=0,mu(u,function(e){e.r=+l(e.value)}),mu(u,Iu);if(n){var c=n*(i?1:Math.max(2*u.r/a,2*u.r/f))/2;mu(u,function(e){e.r+=c}),mu(u,Iu),mu(u,function(e){e.r-=c})}return Uu(u,a/2,f/2,i?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t=e.layout.hierarchy().sort(Hu),n=0,r=[1,1],i;return s.size=function(e){return arguments.length?(r=e,s):r},s.radius=function(e){return arguments.length?(i=e==null||typeof e=="function"?e:+e,s):i},s.padding=function(e){return arguments.length?(n=+e,s):n},du(s,t)},e.layout.tree=function(){function s(e,s){var f=t.call(this,e,s),c=f[0],h=o(c);mu(h,u),h.parent.m=-h.z,vu(h,a);if(i)vu(c,l);else{var p=c,d=c,v=c;vu(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=n(p,d)/2-p.x,g=r[0]/(d.x+n(d,p)/2+m),y=r[1]/(v.depth||1);vu(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return f}function o(e){var t={A:null,children:[e]},n=[t],r;while((r=n.pop())!=null)for(var i=r.children,s,o=0,u=i.length;o<u;++o)n.push((i[o]=s={_:i[o],parent:r,children:(s=i[o].children)&&s.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=s);return t.children[0]}function u(e){var t=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(t.length){Ju(e);var s=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+n(e._,i._),e.m=e.z-s):e.z=s}else i&&(e.z=i.z+n(e._,i._));e.parent.A=f(e,i,e.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function f(e,t,r){if(t){var i=e,s=e,o=t,u=i.parent.children[0],a=i.m,f=s.m,l=o.m,c=u.m,h;while(o=Vu(o),i=Xu(i),o&&i)u=Xu(u),s=Vu(s),s.a=e,h=o.z+l-i.z-a+n(o._,i._),h>0&&($u(Ku(o,e,r),e,h),a+=h,f+=h),l+=o.m,a+=i.m,c+=u.m,f+=s.m;o&&!Vu(s)&&(s.t=o,s.m+=l-f),i&&!Xu(u)&&(u.t=i,u.m+=a-c,r=e)}return r}function l(e){e.x*=r[0],e.y=e.depth*r[1]}var t=e.layout.hierarchy().sort(null).value(null),n=Wu,r=[1,1],i=null;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null?l:null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)==null?null:l,s):i?r:null},du(s,t)},e.layout.cluster=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a,f=0;mu(u,function(e){var t=e.children;t&&t.length?(e.x=Gu(t),e.y=Qu(t)):(e.x=a?f+=n(e,a):0,e.y=0,a=e)});var l=Yu(u),c=Zu(u),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return mu(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),o}var t=e.layout.hierarchy().sort(null).value(null),n=Wu,r=[1,1],i=!1;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)!=null,s):i?r:null},du(s,t)},e.layout.treemap=function(){function l(e,t){var n=-1,r=e.length,i,s;while(++n<r)s=(i=e[n]).value*(t<0?0:t),i.area=isNaN(s)||s<=0?0:s}function c(e){var t=e.children;if(t&&t.length){var n=s(e),r=[],i=t.slice(),o,u=Infinity,f,h=a==="slice"?n.dx:a==="dice"?n.dy:a==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),v;l(i,n.dx*n.dy/e.value),r.area=0;while((v=i.length)>0)r.push(o=i[v-1]),r.area+=o.area,a!=="squarify"||(f=p(r,h))<=u?(i.pop(),u=f):(r.area-=r.pop().area,d(r,h,n,!1),h=Math.min(n.dx,n.dy),r.length=r.area=0,u=Infinity);r.length&&(d(r,h,n,!0),r.length=r.area=0),t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var n=s(e),r=t.slice(),i,o=[];l(r,n.dx*n.dy/e.value),o.area=0;while(i=r.pop())o.push(i),o.area+=i.area,i.z!=null&&(d(o,i.z?n.dx:n.dy,n,!r.length),o.length=o.area=0);t.forEach(h)}}function p(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,u=e.length;while(++o<u){if(!(r=e[o].area))continue;r<s&&(s=r),r>i&&(i=r)}return n*=n,t*=t,n?Math.max(t*i*f/n,n/(t*s*f)):Infinity}function d(e,t,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=t?n(e.area/t):0,l;if(t==r.dx){if(i||f>r.dy)f=r.dy;while(++s<o)l=e[s],l.x=u,l.y=a,l.dy=f,u+=l.dx=Math.min(r.x+r.dx-u,f?n(l.area/f):0);l.z=!0,l.dx+=r.x+r.dx-u,r.y+=f,r.dy-=f}else{if(i||f>r.dx)f=r.dx;while(++s<o)l=e[s],l.x=u,l.y=a,l.dx=f,a+=l.dy=Math.min(r.y+r.dy-a,f?n(l.area/f):0);l.z=!1,l.dy+=r.y+r.dy-a,r.x+=f,r.dx-=f}}function v(e){var n=u||t(e),i=n[0];return i.x=0,i.y=0,i.dx=r[0],i.dy=r[1],u&&t.revalue(i),l([i],i.dx*i.dy/i.value),(u?h:c)(i),o&&(u=n),n}var t=e.layout.hierarchy(),n=Math.round,r=[1,1],i=null,s=ea,o=!1,u,a="squarify",f=.5*(1+Math.sqrt(5));return v.size=function(e){return arguments.length?(r=e,v):r},v.padding=function(e){function t(t){var n=e.call(v,t,t.depth);return n==null?ea(t):ta(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return ta(t,e)}if(!arguments.length)return i;var r;return s=(i=e)==null?ea:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n,v},v.round=function(e){return arguments.length?(n=e?Math.round:Number,v):n!=Number},v.sticky=function(e){return arguments.length?(o=e,u=null,v):o},v.ratio=function(e){return arguments.length?(f=e,v):f},v.mode=function(e){return arguments.length?(a=e+"",v):a},du(v,t)},e.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=e.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},e.scale={};var ua={floor:kn,ceil:kn};e.scale.linear=function(){return fa([0,1],[0,1],ko,!1)};var va={s:1,g:1,p:1,r:1,e:1};e.scale.log=function(){return ya(e.scale.linear().domain([0,1]),10,!0,[1,10])};var ba=e.format(".0e"),wa={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};e.scale.pow=function(){return Ea(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return xa([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(Ta)},e.scale.category20=function(){return e.scale.ordinal().range(Na)},e.scale.category20b=function(){return e.scale.ordinal().range(Ca)},e.scale.category20c=function(){return e.scale.ordinal().range(ka)};var Ta=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(gn),Na=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(gn),Ca=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(gn),ka=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(gn);e.scale.quantile=function(){return La([],[])},e.scale.quantize=function(){return Aa(0,1,[0,1])},e.scale.threshold=function(){return Oa([.5],[0,1])},e.scale.identity=function(){return Ma([0,1])},e.svg={},e.svg.arc=function(){function i(){var i=e.apply(this,arguments),s=t.apply(this,arguments),o=n.apply(this,arguments)+_a,u=r.apply(this,arguments)+_a,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<At?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=Da?i?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+ -i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":i?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+i*h+","+i*p+"A"+i+","+i+" 0 "+f+",0 "+i*l+","+i*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var e=Pa,t=Ha,n=Ba,r=ja;return i.innerRadius=function(t){return arguments.length?(e=Cn(t),i):e},i.outerRadius=function(e){return arguments.length?(t=Cn(e),i):t},i.startAngle=function(e){return arguments.length?(n=Cn(e),i):n},i.endAngle=function(e){return arguments.length?(r=Cn(e),i):r},i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+_a;return[Math.cos(s)*i,Math.sin(s)*i]},i};var _a=-Mt,Da=Ot-_t;e.svg.line=function(){return Fa(kn)};var Ia=e.map({linear:qa,"linear-closed":Ra,step:Ua,"step-before":za,"step-after":Wa,basis:Qa,"basis-open":Ga,"basis-closed":Ya,bundle:Za,cardinal:$a,"cardinal-open":Xa,"cardinal-closed":Va,monotone:ff});Ia.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var tf=[0,2/3,1/3,0],nf=[0,1/3,2/3,0],rf=[0,1/6,2/3,1/6];e.svg.line.radial=function(){var e=Fa(lf);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},za.reverse=Wa,Wa.reverse=za,e.svg.area=function(){return cf(kn)},e.svg.area.radial=function(){var e=cf(lf);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},e.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)+_a,l=i.call(e,u,o)+_a;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>At)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=fs,t=ls,n=hf,r=Ba,i=ja;return s.radius=function(e){return arguments.length?(n=Cn(e),s):n},s.source=function(t){return arguments.length?(e=Cn(t),s):e},s.target=function(e){return arguments.length?(t=Cn(e),s):t},s.startAngle=function(e){return arguments.length?(r=Cn(e),s):r},s.endAngle=function(e){return arguments.length?(i=Cn(e),s):i},s},e.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=fs,t=ls,n=pf;return r.source=function(t){return arguments.length?(e=Cn(t),r):e},r.target=function(e){return arguments.length?(t=Cn(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=pf,r=t.projection;return t.projection=function(e){return arguments.length?r(df(n=e)):n},t},e.svg.symbol=function(){function n(n,r){return(yf.get(e.call(this,n,r))||gf)(t.call(this,n,r))}var e=mf,t=vf;return n.type=function(t){return arguments.length?(e=Cn(t),n):e},n.size=function(e){return arguments.length?(t=Cn(e),n):t},n};var yf=e.map({circle:gf,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*wf)),n=t*wf;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/bf),n=t*bf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/bf),n=t*bf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});e.svg.symbolTypes=yf.keys();var bf=Math.sqrt(3),wf=Math.tan(30*Pt),Sf=[],xf=0,Tf,Nf;Sf.call=K.call,Sf.empty=K.empty,Sf.node=K.node,Sf.size=K.size,e.transition=function(e){return arguments.length?Tf?e.transition():e:mt.transition()},e.transition.prototype=Sf,Sf.select=function(e){var t=this.id,n=[],r,i,s;e=Q(e);for(var o=-1,u=this.length;++o<u;){n.push(r=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(s=a[f])&&(i=e.call(s,s.__data__,f,o))?("__data__"in s&&(i.__data__=s.__data__),Lf(i,f,t,s.__transition__[t]),r.push(i)):r.push(null)}return Ef(n,t)},Sf.selectAll=function(e){var t=this.id,n=[],r,i,s,o,u;e=G(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(s=l[c]){u=s.__transition__[t],i=e.call(s,s.__data__,c,a),n.push(r=[]);for(var p=-1,d=i.length;++p<d;)(o=i[p])&&Lf(o,p,t,u),r.push(o)}return Ef(n,t)},Sf.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=ft(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]);for(var r=this[s],u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u,s)&&n.push(i)}return Ef(t,this.id)},Sf.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):ct(this,t==null?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},Sf.attr=function(t,n){function s(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function u(e){return e==null?s:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function a(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r=t=="transform"?eu:ko,i=e.ns.qualify(t);return Cf(this,"attr."+t,n,i.local?a:u)},Sf.attrTween=function(t,n){function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function s(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?s:i)},Sf.style=function(e,t,n){function i(){this.style.removeProperty(e)}function o(t){return t==null?i:(t+="",function(){var r=s.getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=ko(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Cf(this,"style."+e,t,o)},Sf.styleTween=function(e,t,n){function r(r,i){var o=t.call(this,r,i,s.getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Sf.text=function(e){return Cf(this,"text",e,kf)},Sf.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Sf.ease=function(t){var n=this.id;return arguments.length<1?this.node().__transition__[n].ease:(typeof t!="function"&&(t=e.ease.apply(e,arguments)),ct(this,function(e){e.__transition__[n].ease=t}))},Sf.delay=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:ct(this,typeof e=="function"?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Sf.duration=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:ct(this,typeof e=="function"?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Sf.each=function(t,n){var r=this.id;if(arguments.length<2){var i=Nf,s=Tf;Tf=r,ct(this,function(e,n,i){Nf=e.__transition__[r],t.call(e,e.__data__,n,i)}),Nf=i,Tf=s}else ct(this,function(i){var s=i.__transition__[r];(s.event||(s.event=e.dispatch("start","end"))).on(t,n)});return this},Sf.transition=function(){var e=this.id,t=++xf,n=[],r,i,s,o;for(var u=0,a=this.length;u<a;u++){n.push(r=[]);for(var i=this[u],f=0,l=i.length;f<l;f++){if(s=i[f])o=Object.create(s.__transition__[e]),o.delay+=o.duration,Lf(s,f,t,o);r.push(s)}}return Ef(n,t)},e.svg.axis=function(){function f(f){f.each(function(){var f=e.select(this),l=this.__chart__||t,c=this.__chart__=t.copy(),h=u==null?c.ticks?c.ticks.apply(c,o):c.domain():u,p=a==null?c.tickFormat?c.tickFormat.apply(c,o):kn:a,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",_t),m=e.transition(d.exit()).style("opacity",_t).remove(),g=e.transition(d.order()).style("opacity",1),y=Math.max(r,0)+s,b,w=ra(c),E=f.selectAll(".domain").data([0]),S=(E.enter().append("path").attr("class","domain"),e.transition(E));v.append("line"),v.append("text");var x=v.select("line"),T=g.select("line"),N=d.select("text").text(p),C=v.select("text"),k=g.select("text"),L=n==="top"||n==="left"?-1:1,A,O,M,_;n==="bottom"||n==="top"?(b=Mf,A="x",M="y",O="x2",_="y2",N.attr("dy",L<0?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+w[0]+","+L*i+"V0H"+w[1]+"V"+L*i)):(b=_f,A="y",M="x",O="y2",_="x2",N.attr("dy",".32em").style("text-anchor",L<0?"end":"start"),S.attr("d","M"+L*i+","+w[0]+"H0V"+w[1]+"H"+L*i)),x.attr(_,L*r),C.attr(M,L*y),T.attr(O,0).attr(_,L*r),k.attr(A,0).attr(M,L*y);if(c.rangeBand){var D=c,P=D.rangeBand()/2;l=c=function(e){return D(e)+P}}else l.rangeBand?l=c:m.call(b,c,l);v.call(b,l,c),g.call(b,c,c)})}var t=e.scale.linear(),n=Af,r=6,i=6,s=3,o=[10],u=null,a;return f.scale=function(e){return arguments.length?(t=e,f):t},f.orient=function(e){return arguments.length?(n=e in Of?e+"":Af,f):n},f.ticks=function(){return arguments.length?(o=arguments,f):o},f.tickValues=function(e){return arguments.length?(u=e,f):u},f.tickFormat=function(e){return arguments.length?(a=e,f):a},f.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],f):r},f.innerTickSize=function(e){return arguments.length?(r=+e,f):r},f.outerTickSize=function(e){return arguments.length?(i=+e,f):i},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.tickSubdivide=function(){return arguments.length&&f},f};var Af="bottom",Of={top:1,right:1,bottom:1,left:1};e.svg.brush=function(){function h(t){t.each(function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),i=t.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(c,kn);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Df[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",h.empty()?"none":null);var o=e.transition(t),u=e.transition(i),a;n&&(a=ra(n),u.attr("x",a[0]).attr("width",a[1]-a[0]),d(o)),r&&(a=ra(r),u.attr("y",a[0]).attr("height",a[1]-a[0]),v(o)),p(o)})}function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+i[+/e$/.test(e)]+","+o[+/^s/.test(e)]+")"})}function d(e){e.select(".extent").attr("x",i[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1]-i[0])}function v(e){e.select(".extent").attr("y",o[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",o[1]-o[0])}function m(){function O(){e.event.keyCode==32&&(S||(T=null,N[0]-=i[1],N[1]-=o[1],S=2),I())}function M(){e.event.keyCode==32&&S==2&&(N[0]+=i[1],N[1]+=o[1],S=0,I())}function _(){var t=e.mouse(c),s=!1;C&&(t[0]+=C[0],t[1]+=C[1]),S||(e.event.altKey?(T||(T=[(i[0]+i[1])/2,(o[0]+o[1])/2]),N[0]=i[+(t[0]<T[0])],N[1]=o[+(t[1]<T[1])]):T=null),w&&D(t,n,0)&&(d(y),s=!0),E&&D(t,r,1)&&(v(y),s=!0),s&&(p(y),g({type:"brush",mode:S?"move":"resize"}))}function D(e,t,n){var r=ra(t),s=r[0],c=r[1],h=N[n],p=n?o:i,d=p[1]-p[0],v,m;S&&(s-=h,c-=d+h),v=(n?l:f)?Math.max(s,Math.min(c,e[n])):e[n],S?m=(v+=h)+d:(T&&(h=Math.max(s,Math.min(c,2*T[n]-v))),h<v?(m=v,v=h):m=h);if(p[0]!=v||p[1]!=m)return n?a=null:u=null,p[0]=v,p[1]=m,!0}function P(){_(),y.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),e.select("body").style("cursor",null),k.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),x(),g({type:"brushend"})}var c=this,m=e.select(e.event.target),g=t.of(c,arguments),y=e.select(c),b=m.datum(),w=!/^(n|s)$/.test(b)&&n,E=!/^(e|w)$/.test(b)&&r,S=m.classed("extent"),x=xt(),T,N=e.mouse(c),C,k=e.select(s).on("keydown.brush",O).on("keyup.brush",M);e.event.changedTouches?k.on("touchmove.brush",_).on("touchend.brush",P):k.on("mousemove.brush",_).on("mouseup.brush",P),y.interrupt().selectAll("*").interrupt();if(S)N[0]=i[0]-N[0],N[1]=o[0]-N[1];else if(b){var L=+/w$/.test(b),A=+/^n/.test(b);C=[i[1-L]-N[0],o[1-A]-N[1]],N[0]=i[L],N[1]=o[A]}else e.event.altKey&&(T=N.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",m.style("cursor")),g({type:"brushstart"}),_()}var t=R(h,"brushstart","brush","brushend"),n=null,r=null,i=[0,0],o=[0,0],u,a,f=!0,l=!0,c=Pf[0];return h.event=function(n){n.each(function(){var n=t.of(this,arguments),r={x:i,y:o,i:u,j:a},s=this.__chart__||r;this.__chart__=r,Tf?e.select(this).transition().each("start.brush",function(){u=s.i,a=s.j,i=s.x,o=s.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=Lo(i,r.x),t=Lo(o,r.y);return u=a=null,function(s){i=r.x=e(s),o=r.y=t(s),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){u=r.i,a=r.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},h.x=function(e){return arguments.length?(n=e,c=Pf[!n<<1|!r],h):n},h.y=function(e){return arguments.length?(r=e,c=Pf[!n<<1|!r],h):r},h.clamp=function(e){return arguments.length?(n&&r?(f=!!e[0],l=!!e[1]):n?f=!!e:r&&(l=!!e),h):n&&r?[f,l]:n?f:r?l:null},h.extent=function(e){var t,s,f,l,c;if(!arguments.length)return n&&(u?(t=u[0],s=u[1]):(t=i[0],s=i[1],n.invert&&(t=n.invert(t),s=n.invert(s)),s<t&&(c=t,t=s,s=c))),r&&(a?(f=a[0],l=a[1]):(f=o[0],l=o[1],r.invert&&(f=r.invert(f),l=r.invert(l)),l<f&&(c=f,f=l,l=c))),n&&r?[[t,f],[s,l]]:n?[t,s]:r&&[f,l];if(n){t=e[0],s=e[1],r&&(t=t[0],s=s[0]),u=[t,s],n.invert&&(t=n(t),s=n(s)),s<t&&(c=t,t=s,s=c);if(t!=i[0]||s!=i[1])i=[t,s]}if(r){f=e[0],l=e[1],n&&(f=f[1],l=l[1]),a=[f,l],r.invert&&(f=r(f),l=r(l)),l<f&&(c=f,f=l,l=c);if(f!=o[0]||l!=o[1])o=[f,l]}return h},h.clear=function(){return h.empty()||(i=[0,0],o=[0,0],u=a=null),h},h.empty=function(){return!!n&&i[0]==i[1]||!!r&&o[0]==o[1]},e.rebind(h,t,"on")};var Df={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Hf=Jn.format=Tr.timeFormat,Bf=Hf.utc,jf=Bf("%Y-%m-%dT%H:%M:%S.%LZ");Hf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?Ff:jf,Ff.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ff.toString=jf.toString,Jn.second=Yn(function(e){return new Kn(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()}),Jn.seconds=Jn.second.range,Jn.seconds.utc=Jn.second.utc.range,Jn.minute=Yn(function(e){return new Kn(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()}),Jn.minutes=Jn.minute.range,Jn.minutes.utc=Jn.minute.utc.range,Jn.hour=Yn(function(e){var t=e.getTimezoneOffset()/60;return new Kn((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()}),Jn.hours=Jn.hour.range,Jn.hours.utc=Jn.hour.utc.range,Jn.month=Yn(function(e){return e=Jn.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Jn.months=Jn.month.range,Jn.months.utc=Jn.month.utc.range;var Rf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Uf=[[Jn.second,1],[Jn.second,5],[Jn.second,15],[Jn.second,30],[Jn.minute,1],[Jn.minute,5],[Jn.minute,15],[Jn.minute,30],[Jn.hour,1],[Jn.hour,3],[Jn.hour,6],[Jn.hour,12],[Jn.day,1],[Jn.day,2],[Jn.week,1],[Jn.month,1],[Jn.month,3],[Jn.year,1]],zf=Hf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",ai]]),Wf={range:function(t,n,r){return e.range(Math.ceil(t/r)*r,+n,r).map(qf)},floor:kn,ceil:kn};Uf.year=Jn.year,Jn.scale=function(){return If(e.scale.linear(),Uf,zf)};var Xf=Uf.map(function(e){return[e[0].utc,e[1]]}),Vf=Bf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",ai]]);Xf.year=Jn.year.utc,Jn.scale.utc=function(){return If(e.scale.linear(),Xf,Vf)},e.text=Ln(function(e){return e.responseText}),e.json=function(e,t){return An(e,"application/json",$f,t)},e.html=function(e,t){return An(e,"text/html",Jf,t)},e.xml=Ln(function(e){return e.responseXML}),typeof define=="function"&&define.amd?define("d3",e):typeof module=="object"&&module.exports&&(module.exports=e),this.d3=e}(),function(){define("cs/cs!views/svgDefs",[],function(){var e;return e=function(){function e(){}return e.prototype.addDefs=function(e,t,n){var r,i,s;e.append("svg:marker").attr("id","draghead").attr("viewBox","0 -5 10 10").attr("refX","5").attr("refY","0").attr("markerWidth","3").attr("markerHeight","3").attr("orient","auto").attr("fill","black").append("svg:path").attr("d","M0,-5L10,0L0,5"),e.append("svg:marker").attr("id","arrowhead").attr("viewBox","0 -5 10 10").attr("refX","8").attr("refY","0").attr("markerWidth","2").attr("markerHeight","2").attr("orient","auto").attr("fill","rgba(0,0,0,0.5)").append("svg:path").attr("d","M0,-3L8,0L0,3"),e.append("svg:marker").attr("id","arrowhead-selected").attr("viewBox","0 -5 10 10").attr("refX","12").attr("refY","0").attr("markerWidth","2").attr("markerHeight","2").attr("orient","auto").attr("fill","#004487").append("svg:path").attr("d","M0,-3L8,0L0,3"),e.append("svg:clipPath").attr("id","clipCircle").append("circle").attr("r","18").attr("cx",-n/2-20).attr("cy","0"),e.append("svg:clipPath").attr("id","clipCircleFixed").append("circle").attr("r","18").attr("cx",-n/2-20).attr("cy","0").attr("stroke","orange").attr("stroke-width","1px"),s=[];for(r in t)i=t[r],s.push(e.append("svg:marker").attr("id","arrowhead-"+r).attr("viewBox","0 -5 10 10").attr("refX","12").attr("refY","0").attr("markerWidth","2").attr("markerHeight","2").attr("orient","auto").attr("fill","rgba(0,0,0,0.5)").append("svg:path").attr("d","M0,-3L8,0L0,3"));return s},e}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/ConnectionAdder",["jquery","underscore","backbone","d3","cs!models/ConnectionModel"],function(e,n,r,i,s){var o,u=this;return o=function(n){function r(){var e=this;return this.tick=function(){return r.prototype.tick.apply(e,arguments)},this.makeConnection=function(t){return r.prototype.makeConnection.apply(e,arguments)},r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el=e("#graph"),r.prototype.events={"click .node-connect":"createDragLine"},r.prototype.initialize=function(){var t,n=this;return t=this,this.graphView=this.attributes.graphView,this.nodeBoxOffset=this.graphView.nodeBoxWidth/2+10,this.drag_line=this.graphView.workspace.append("svg:line").attr("class","dragline hidden").attr("marker-end","url(#draghead)").datum({x:0,y:0}),this.creatingConnection=!1,this.graphView.svg.on("mousemove",function(){var e,n;return e=(i.mouse(this)[0]-t.graphView.zoom.translate()[0])*1/t.graphView.zoom.scale(),n=(i.mouse(this)[1]-t.graphView.zoom.translate()[1])*1/t.graphView.zoom.scale(),t.drag_line.attr("x2",e).attr("y2",n)}),this.creatingConnection=!1,this.model.on("node:clicked",function(e){if(n.creatingConnection)return n.makeConnection(e),n.creatingConnection=!n.creatingConnection}),e("body").on("keydown",function(e){if(e.which===27)return n.clearDragLine()})},r.prototype.makeConnection=function(t){var n,r=this;this.drag_line.classed("hidden",!0);if(t!==this.drag_line.datum())return n=new s({source:this.drag_line.datum().get("_id"),target:t.get("_id"),_docId:this.model.documentModel.get("_id")}),e.when(n.save()).then(function(){var e;return r.model.getSourceOf(n).fetch(),r.model.getTargetOf(n).fetch(),e=r.model.putConnection(n),r.model.select(e),r.model.newConnectionCreated(e)})},r.prototype.createDragLine=function(t){var n,r,i=this;if(e("#add-node-form").length>0&&!this.graphView.gridViewOn)return n=parseInt(e(t.currentTarget).attr("data-id")),r=this.model.nodes.findWhere({_id:n}),this.drag_line.classed("hidden",!1).datum(r).attr("x1",function(e){return r.x-i.nodeBoxOffset}).attr("y1",function(e){return r.y}),this.creatingConnection=!this.creatingConnection},r.prototype.clearDragLine=function(){return this.drag_line.classed("hidden",!0),this.creatingConnection=!1},r.prototype.tick=function(){var e,t=this;return e=this,this.drag_line.attr("x1",function(e){return e.x-t.nodeBoxOffset}).attr("y1",function(e){return e.y})},r}(r.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/TrashBin",["jquery","underscore","backbone","socket-io"],function(e,n,r,i){var s;return s=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el=e("#graph"),r.prototype.socket=i.connect(""),r.prototype.events={"click #show-all":"bringBackAll","click #hide-all":"hideAll"},r.prototype.initialize=function(){var t=this;return this.trashBin=e("#trash-bin"),this.graphView=this.attributes.graphView,this.enteredWhileDragging=!1,this.trashBin.on("mouseover",function(e){if(!t.trashBin.hasClass("dragging")&&!t.enteredWhileDragging)return t.trashBin.addClass("hover")}),this.trashBin.on("mouseenter",function(e){if(t.trashBin.hasClass("dragging"))return t.enteredWhileDragging=!0}),this.trashBin.on("mouseleave",function(e){return t.trashBin.removeClass("hover"),t.enteredWhileDragging=!1}),this.graphView.on("node:drag",function(e,n){return t.graphView.isContainedIn(n.sourceEvent,t.trashBin)?t.trashBin.addClass("selected"):t.trashBin.removeClass("selected"),t.trashBin.addClass("dragging")}),this.graphView.on("node:dragend",function(e,n){var r,i,s,o;t.trashBin.removeClass("dragging");if(t.graphView.isContainedIn(n.sourceEvent,t.trashBin)){t.model.deSelect(e),i=t.model.connections.filter(function(t){return t.get("source")===e.get("_id")||t.get("target")===e.get("_id")});for(s=0,o=i.length;s<o;s++)r=i[s],t.model.deSelect(r);return t.model.removeNode(e),t.trashBin.removeClass("selected")}}),this.model.nodes.on("add remove",this.calcNumNodesHidden,this),this.model.on("init saved:node",this.calcNumNodesHidden,this),this.socket.on("/nodes:delete",function(){return t.calcNumNodesHidden()}),this.socket.on("/nodes:create",function(){return t.calcNumNodesHidden()})},r.prototype.calcNumNodesHidden=function(){var t=this;return this.model.getNodeNames(function(n){return n.length===0&&e("#add-title").focus(),n.length-t.model.nodes.length>=0?e("#number-hidden").text(n.length-t.model.nodes.length):e("#number-hidden").text(0)})},r.prototype.bringBackAll=function(){var t,n=this;return t=this.model.nodes.length,window.prefetch.nodes&&this.model.nodes.set(window.prefetch.nodes,{silent:!0}),window.prefetch.connections&&this.model.connections.set(window.prefetch.connections,{silent:!0}),e.when(this.model.nodes.fetch()).then(function(){return n.model.connections.fetch()}),this.model.trigger("init",this.model.nodes.length-t),this.trashBin.removeClass("hover"),this.enteredWhileDragging=!0},r.prototype.hideAll=function(){return this.model.connections.reset(),this.model.nodes.reset(),this.graphView.updateDetails(),this.calcNumNodesHidden(),this.trashBin.removeClass("hover"),this.enteredWhileDragging=!0},r}(r.View)})}.call(this),!function(e,t,n){"use strict";function r(e,t){this._defaults=i,this.element=e,this.setOptions(t),this.init()}var i={tagName:"a",newLine:"\n",target:"_blank",linkClass:null,linkClasses:[],linkAttributes:null};r.prototype={constructor:r,init:function(){1===this.element.nodeType?r.linkifyNode.call(this,this.element):this.element=r.linkify.call(this,this.element.toString())},setOptions:function(e){this.settings=r.extendSettings(e,this.settings)},toString:function(){return this.element.toString()}},r.extendSettings=function(e,t){var n;t=t||{};for(n in i)t[n]||(t[n]=i[n]);for(n in e)t[n]=e[n];return t},r.linkMatch=new RegExp(["(",'\\s|[^a-zA-Z0-9.\\+_\\/"\\>\\-]|^',")(?:","(","[a-zA-Z0-9\\+_\\-]+","(?:","\\.[a-zA-Z0-9\\+_\\-]+",")*@",")?(","http:\\/\\/|https:\\/\\/|ftp:\\/\\/",")?(","(?:(?:[a-z0-9][a-z0-9_%\\-_+]*\\.)+)",")(","(?:com|ca|co|edu|gov|net|org|dev|biz|cat|int|pro|tel|mil|aero|asia|coop|info|jobs|mobi|museum|name|post|travel|local|[a-z]{2})",")(","(?::\\d{1,5})",")?(","(?:","[\\/|\\?]","(?:","[\\-a-zA-Z0-9_%#*&+=~!?,;:.\\/]*",")*",")","[\\-\\/a-zA-Z0-9_%#*&+=~]","|","\\/?",")?",")(",'[^a-zA-Z0-9\\+_\\/"\\<\\-]|$',")"].join(""),"g"),r.emailLinkMatch=/(<[a-z]+ href=\")(http:\/\/)([a-zA-Z0-9\+_\-]+(?:\.[a-zA-Z0-9\+_\-]+)*@)/g,r.linkify=function(e,t){var n,i,s,o=[];this.constructor===r&&this.settings?(i=this.settings,t&&(i=r.extendSettings(t,i))):i=r.extendSettings(t),s=i.linkClass?i.linkClass.split(/\s+/):[],s.push.apply(s,i.linkClasses),e=e.replace(/</g,"&lt;").replace(/(\s)/g,"$1$1"),o.push("$1<"+i.tagName,'href="http://$2$4$5$6$7"'),o.push('class="linkified'+(s.length>0?" "+s.join(" "):"")+'"'),i.target&&o.push('target="'+i.target+'"');for(n in i.linkAttributes)o.push([n,'="',i.linkAttributes[n].replace(/\"/g,"&quot;").replace(/\$/g,"&#36;"),'"'].join(""));return o.push(">$2$3$4$5$6$7</"+i.tagName+">$8"),e=e.replace(r.linkMatch,o.join(" ")),e=e.replace(r.emailLinkMatch,"$1mailto:$3"),e=e.replace(/(\s){2}/g,"$1"),e=e.replace(/\n/g,i.newLine)},r.linkifyNode=function(e){var t,i,s,o,u;if(e&&"object"==typeof e&&1===e.nodeType&&"a"!==e.tagName.toLowerCase()&&!/[^\s]linkified[\s$]/.test(e.className)){for(t=[],o=r._dummyElement||n.createElement("div"),i=e.firstChild,s=e.childElementCount;i;){if(3===i.nodeType){for(;o.firstChild;)o.removeChild(o.firstChild);for(o.innerHTML=r.linkify.call(this,i.textContent||i.innerText||i.nodeValue),t.push.apply(t,o.childNodes);o.firstChild;)o.removeChild(o.firstChild)}else t.push(1===i.nodeType?r.linkifyNode.call(this,i):i);i=i.nextSibling}for(;e.firstChild;)e.removeChild(e.firstChild);for(u=0;u<t.length;u++)e.appendChild(t[u])}return e},r._dummyElement=n.createElement("div"),e.fn.linkify=function(t){return this.each(function(){var n;(n=e.data(this,"plugin-linkify"))?(n.setOptions(t),n.init()):e.data(this,"plugin-linkify",new r(this,t))})},e.fn.linkify.Constructor=r,e(t).on("load",function(){e("[data-linkify]").each(function(){var t,n=e(this),r=n.attr("data-linkify"),i={tagName:n.attr("data-linkify-tagname"),newLine:n.attr("data-linkify-newline"),target:n.attr("data-linkify-target"),linkClass:n.attr("data-linkify-linkclass")};for(var s in i)"undefined"==typeof i[s]&&delete i[s];t="this"===r?n:n.find(r),t.linkify(i)})}),e("body").on("click",".linkified",function(){var n=e(this),r=n.attr("href"),i=/^mailto:/i.test(r),s=n.attr("target");return i?t.location.href=r:t.open(r,s),!1})}(jQuery,window,document),define("linkify",["jquery"],function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/DataTooltip",["jquery","d3","underscore","backbone","linkify"],function(e,n,r,i,s){var o,u=this;return o=function(i){function s(){var e=this;return this.toggleFix=function(t){return s.prototype.toggleFix.apply(e,arguments)},this.showToolTip=function(t){return s.prototype.showToolTip.apply(e,arguments)},s.__super__.constructor.apply(this,arguments)}return t(s,i),s.prototype.el=e("#graph"),s.prototype.events={"mouseenter .node-title-span":"showToolTip","click .node-archive":"archiveObj","click .node-expand":"expandNode","click .node-fix":"toggleFix"},s.prototype.initialize=function(){var e=this;return this.model.nodes.on("remove",this.emptyTooltip,this),this.model.on("found:node",this.highlight,this),this.graphView=this.attributes.graphView,this.ignoreMouse=!1,this.graphView.on("node:mouseenter",function(t,n){e.showToolTip(t);if(!e.ignoreMouse&&!e.graphView.gridViewOn)return e.highlight(n)}),this.graphView.on("node:drag",function(){return e.ignoreMouse=!0}),this.graphView.on("node:dragend",function(){return e.ignoreMouse=!1}),this.expandArrayed=!1,this.graphView.on("node:mouseout node:right-click",function(t){!e.ignoreMouse&&!e.graphView.gridViewOn&&(e.model.dehighlight(),e.emptyTooltip());if(e.expandArrayed)return e.graphView.updateForceGraph(),e.expandArrayed=!1})},s.prototype.highlight=function(e){var t,n,i=this;return t=this.model.connections.filter(function(t){return t.get("source")===e.get("_id")||t.get("target")===e.get("_id")}),n=r.flatten(t.map(function(e){return[i.model.getSourceOf(e),i.model.getTargetOf(e)]})),n.push(e),this.model.highlight(n,t)},s.prototype.showToolTip=function(t){var n,r,i=this;if(!this.ignoreMouse&&!this.graphView.gridViewOn)return this.emptyTooltip(),n=e(t.currentTarget).closest(".node"),r=n.parent(),n.remove(),r.append(n),n.find(".node-title-body").addClass("shown"),n.find(".node-info-body").addClass("shown").linkify(),e(".tag-link").on("click",function(t){var n;return t.preventDefault(),n=e(t.currentTarget).attr("data-tag"),i.graphView.trigger("tag:click",n)})},s.prototype.emptyTooltip=function(){if(!this.graphView.gridViewOn)return e(".node-title-body").removeClass("shown"),e(".node-info-body").removeClass("shown")},s.prototype.archiveObj=function(t){var n,r;return e("#trash-bin").addClass("selected"),r=parseInt(e(t.currentTarget).attr("data-id")),n=this.model.nodes.findWhere({_id:r}),n.isNode?this.model.removeNode(n):n.isConnection&&this.model.removeConnection(n),setTimeout(function(){return e("#trash-bin").removeClass("selected")},300)},s.prototype.expandNode=function(t,i){var s,o,u=this;return s=parseInt(e(t.currentTarget).attr("data-id")),o=this.model.nodes.findWhere({_id:s}),o.set("fixed",!0),n.select(t.currentTarget).classed("fixed",o.fixed=!0),o.getNeighbors(function(e){var t,s,a,f,l,c,h,p,d,v;return f=r.map(e,function(e){return new o.constructor(e)}),a=r.map(f,function(e){return e.get("_id")}),r.each(f,function(e){return e.fixed=!0,e.x=o.x,e.y=o.y,u.model.putNode(e)}),v=i!=null&&i.duration!=null?i.duration:200,t=function(e,t){return!e.get("fixed")&&r.contains(a,e.get("_id"))},h=function(){var t,n,r;r=[];for(l=t=1,n=e.length;1<=n?t<=n:t>=n;l=1<=n?++t:--t)r.push(this.radialPosition(o,l,e.length));return r}.call(u),s=function(){var e,n,r,i;r=this.model.nodes.filter(t),i=[];for(e=0,n=r.length;e<n;e++)c=r[e],i.push([c.x,c.y]);return i}.call(u),p={},r.each(s,function(e,t){var n,i,s;return n=function(){var t,n,r;r=[];for(t=0,n=h.length;t<n;t++)s=h[t],r.push([this.distance(s,e),s]);return r}.call(u),i=r.sortBy(n,function(e){return e[0]})[0][1],h=h.filter(function(e){return e[0]!==i[0]||e[1]!==i[1]}),p[t]=i}),d=n.select(".node-container").selectAll(".node").filter(t),d.transition().duration(v).attr("transform",function(e,t){var n;return n=p[t],e.targetPos=n,"translate("+n[0]+","+n[1]+")"}),r.each(f,function(e){return e.getConnections(u.model.nodes,function(e){var n,r,i,s,o,a,f;f=[];for(o=0,a=e.length;o<a;o++)n=e[o],r=new u.model.connections.model(n),u.model.putConnection(r),i=u.model.getSourceOf(r),s=u.model.getTargetOf(r),t(i)?f.push(u.transitionConnection(r,"source",i.targetPos,v)):t(s)?f.push(u.transitionConnection(r,"target",s.targetPos,v)):f.push(void 0);return f})}),setTimeout(function(){var e;return e=u.model.nodes.filter(t),r.each(e,function(e,t){var n,r;return n=p[t],e.x=n[0],e.y=n[1],r=[e.x,e.y],e.px=r[0],e.py=r[1],e.set("fixed",!1),e.fixed=!1}),u.graphView.updateDetails(),u.expandArrayed=!0},v)})},s.prototype.transitionConnection=function(e,t,r,i){var s,o=this;s=n.select(".connection-container").selectAll(".connection").filter(function(t){return t.get("_id")===e.get("_id")});if(t==="source")return s.selectAll("line").transition().duration(i).attr("x1",function(e){return r[0]-(o.graphView.nodeBoxWidth/2+10)}).attr("y1",function(e){return r[1]}),s.select(".connection-text").transition().duration(i).attr("transform",function(t){return"translate("+((r[0]-o.model.getTargetOf(e).x)/2+o.model.getTargetOf(e).x-(o.graphView.nodeBoxWidth/2+10))+","+((r[1]-o.model.getTargetOf(e).y)/2+o.model.getTargetOf(e).y)+")"});if(t==="target")return s.selectAll("line").transition().duration(i).attr("x2",function(e){return r[0]-(o.graphView.nodeBoxWidth/2+10)}).attr("y2",function(e){return r[1]}),s.select(".connection-text").transition().duration(i).attr("transform",function(t){return"translate("+((o.model.getSourceOf(e).x-r[0])/2+r[0]-(o.graphView.nodeBoxWidth/2+10))+","+((o.model.getSourceOf(e).y-r[1])/2+r[1])+")"})},s.prototype.distance=function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},s.prototype.radialPosition=function(e,t,n){var r,i;return i=160,r=Math.PI/4,[e.x+i*Math.cos(2*Math.PI*t/n+r),e.y+i*Math.sin(2*Math.PI*t/n+r)]},s.prototype.toggleFix=function(t){var r,i;return r=parseInt(e(t.currentTarget).attr("data-id")),i=this.model.nodes.findWhere({_id:r}),i.set("fixed",!i.fixed),n.select(t.currentTarget).classed("fixed",i.fixed=!i.fixed),this.graphView.updateForceGraph()},s}(i.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/ZoomButtons",["jquery","underscore","backbone"],function(e,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el=e("#graph"),r.prototype.events={"click #zoom-in-button":"scaleZoom","click #zoom-out-button":"scaleZoom"},r.prototype.initialize=function(){return this.zoom=this.attributes.zoom,this.workspace=this.attributes.workspace},r.prototype.scaleZoom=function(t){var n,r,i,s,o,u,a;return e(t.currentTarget).attr("id")==="zoom-in-button"?s=1.3:e(t.currentTarget).attr("id")==="zoom-out-button"?s=1/1.3:s=1,n=[e(this.el).width()/2,e(this.el).height()/2],o=this.zoom.translate(),a={x:o[0],y:o[1]},i=this.zoom.scale()*s,u=[(n[0]-a.x)/this.zoom.scale(),(n[1]-a.y)/this.zoom.scale()],r=[u[0]*i+a.x,u[1]*i+a.y],a.x+=n[0]-r[0],a.y+=n[1]-r[1],this.zoom.translate([a.x,a.y]),this.zoom.scale(i),this.workspace.transition().ease("linear").attr("transform","translate("+[a.x,a.y]+") scale("+i+")")},r}(r.View)})}.call(this),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!templates/data_tooltip.html",[],function(){return'<div class="node-toolbar">\n  <button type="button" title="Pin node position" class="node-fix" data-id=<%=attributes._id%>><i class="fa fa-thumb-tack"></i></button>\n  <button type="button" title="Show archived neighboring nodes" class="node-expand" data-id=<%=attributes._id%>>\n    <i class="fa fa-expand"></i>\n    <span class="node-expand-count"></span>\n  </button>\n  <button type="button" title="Add connection from this node" class="node-connect" data-id=<%=attributes._id%>><i class="fa fa-link"></i></button>\n  <button type="button" title="Hide" class="node-archive" data-id=<%=attributes._id%>><i class="fa fa-eye-slash"></i></button>\n</div>\n\n<% if((attributes.description != null && attributes.description != "") || _.some(attributes.tags) || _.some(attributes.url)){ %>\n  <div class="pad">\n    <div>\n    <% if(_.some(attributes.url)){ %>\n      <a href=<%= attributes.url %> target="_blank" class="pull-right"><i class="fa fa-external-link"></i></a>\n    <% } %>\n    <% linkified = attributes.description.replace(/#(\\S*)/g,\'<a class="tag-link" data-tag=$1 href="">#$1</a>\'); %>\n    <%= linkified %>\n    </div>\n  </div>\n<% } %>'}),define("text!templates/node-title.html",[],function(){return"		<% if(attributes.name.length < 30) { %>\n		<%= attributes.name %>\n		<% } else { %>\n		<%= attributes.name.substring(0,27) %>...\n		<% } %>\n"}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/GraphView",["jquery","underscore","backbone","d3","cs!views/svgDefs","cs!views/ConnectionAdder","cs!views/TrashBin","cs!views/DataTooltip","cs!views/ZoomButtons","text!templates/data_tooltip.html","text!templates/node-title.html","linkify"],function(e,n,r,i,s,o,u,a,f,l,c,h){var p,d=this;return p=function(r){function h(){var e=this;return this.translateTo=function(t){return h.prototype.translateTo.apply(e,arguments)},this.centerOn=function(t){return h.prototype.centerOn.apply(e,arguments)},this.isContainedIn=function(t,n){return h.prototype.isContainedIn.apply(e,arguments)},h.__super__.constructor.apply(this,arguments)}return t(h,r),h.prototype.el=e("#graph"),h.prototype.events={contextmenu:"rightClicked","click #grid-view-button":"gridView","click #graph-view-button":"resetPositions"},h.prototype.maxConnTextLength=20,h.prototype.maxNodeBoxHeight=100,h.prototype.nodeBoxWidth=180,h.prototype.maxInfoBoxHeight=207,h.prototype.infoBoxWidth=180,h.prototype.initialize=function(){var t,n,r,l,c,h,p=this;return l=this,this.drawing=!0,this.model.on("init",this.backgroundRender,this),this.model.on("init:fixed",this.loadForce,this),this.model.nodes.on("add remove",this.updateForceGraph,this),this.model.connections.on("add remove",this.updateForceGraph,this),r="change:name change:description change:color change:url change:image",this.model.nodes.on(r,this.updateDetails,this),this.model.connections.on(r,this.updateDetails,this),this.model.on("found:node",this.centerOn,this),this.translateLock=!1,c=e(this.el).width(),n=e(this.el).height(),this.force=i.layout.force().nodes([]).links([]).size([c,n]).charge(-4e3).gravity(.2).distance(50),h=function(){if(p.translateLock)return;return p.workspace.attr("transform","translate("+i.event.translate+") scale("+i.event.scale+")")},this.zoom=i.behavior.zoom().on("zoom",h),this.currentZoom=void 0,this.cancelledDrag=!1,this.force.drag().on("dragstart",function(e){l.cancelledDrag=!1;if(i.event.sourceEvent.target.className.baseVal==="node-info"){l.cancelledDrag=!0,l.force.stop();return}return l.translateLock=!0,l.currentZoom=l.zoom.translate()}).on("drag",function(e){return!this.gridViewOn||!l.cancelledDrag?(i.select(this).classed("fixed",e.fixed=!0),l.trigger("node:drag",e,i.event)):l.force.stop()}).on("dragend",function(e){return l.cancelledDrag||(p.trigger("node:dragend",e,i.event),p.zoom.translate(p.currentZoom),p.translateLock=!1),p.force.stop()}),e("body").on("mousemove",function(t){if(e(t.target).is("svg")||e(t.target).is("foreignObject"))return p.trigger("node:mouseout",t,t)}),this.svg=i.select(this.el).append("svg:svg").attr("pointer-events","all").attr("width",c).attr("height",n).call(this.zoom).on("dblclick.zoom",null),t=this.svg.append("svg:defs"),(new s).addDefs(t,this.model.defaultColors,this.nodeBoxWidth),this.gridViewOn=!1,this.updateForceFlag=!1,this.grid={},this.grid.spacing=[20,20],this.grid.padding=[200,70],this.grid.colYs=[],this.workspace=this.svg.append("svg:g"),this.workspace.append("svg:g").classed("connection-container",!0),this.workspace.append("svg:g").classed("node-container",!0),this.connectionAdder=new o({model:this.model,attributes:{force:this.force,graphView:this}}),this.trashBin=new u({model:this.model,attributes:{graphView:this}}),this.dataTooltip=new a({model:this.model,attributes:{graphView:this}}),this.zoomButtons=new f({attributes:{zoom:this.zoom,workspace:this.workspace}}),e("body").on("keydown",function(t){if(!e(document.activeElement).is("input")&&!e(document.activeElement).is("textarea"))switch(t.which){case 37:return p.translateTo([p.zoom.translate()[0]+100*p.zoom.scale(),p.zoom.translate()[1]]);case 38:return p.translateTo([p.zoom.translate()[0],p.zoom.translate()[1]+100*p.zoom.scale()]);case 39:return p.translateTo([p.zoom.translate()[0]-100*p.zoom.scale(),p.zoom.translate()[1]]);case 40:return p.translateTo([p.zoom.translate()[0],p.zoom.translate()[1]-100*p.zoom.scale()])}})},h.prototype.loadForce=function(e){var t,r,i,s,o,u,a,f,l,c,h=this;i=this.model.nodes.models,t=this.model.connections.models,n.each(t,function(e){return e.source=h.model.getSourceOf(e),e.target=h.model.getTargetOf(e)}),e!=null&&e.zoom!=null&&(this.zoom.scale(e.zoom),this.zoom.translate(e.translate),this.workspace.transition().attr("transform","translate("+e.translate+") scale("+e.zoom+")"));if(e!=null&&e.nodePositions!=null){for(u=0,f=i.length;u<f;u++){r=i[u],c=e.nodePositions;for(a=0,l=c.length;a<l;a++)o=c[a],o._id===r.get("_id")&&(s=o);r.x=s.x,r.y=s.y,r.fixed=!0}return this.force.nodes(i).links(t).start(),this.updateDetails()}return this.force.nodes(i).links(t).start()},h.prototype.backgroundRender=function(e){var t,n,r,i,s=this;e!=null?r=e:r=this.model.nodes.length,this.loadForce(),n=r*r*r+50,this.drawing=!1;for(t=i=0;i<=n;t=i+=1)this.force.tick();return this.force.stop(),this.drawing=!0,setTimeout(function(){return s.updateDetails(),s.force.tick()},10)},h.prototype.updateForceGraph=function(){var e=this;return this.gridViewOn?(this.updateForceFlag=!0,this.gridView({duration:0})):(this.loadForce(),this.updateDetails(),setTimeout(function(){return e.force.stop()},1500))},h.prototype.updateDetails=function(t){var r,s,o,u,a,f,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F,I,q,R,U=this;if(t!=null){h=["dim","id","_id"],r=function(){var e,n;e=t.changed,n=[];for(d in e)H=e[d],n.push(d);return n}();if(n.difference(r,h).length===0)return}M=this,C=this.model.nodes.models,u=this.model.connections.models,this.gridViewOn&&(u=[]),s=i.select(".connection-container").selectAll(".connection").data(u,function(e){return e.cid}),o=s.enter().append("g").attr("class","connection").on("dragend",function(e){return i.event.preventDefault}).on("dblclick",function(e){return U.model.select(e),U.model.trigger("conn:dblclicked",e)}).on("mouseover",function(e){return U.trigger("connection:mouseover",e)}).on("mouseout",function(t){if(!e(i.event.toElement).closest(".connection").length)return U.trigger("connection:mouseout",t)}),o.append("line").attr("class","select-zone"),o.append("line").attr("class","visible-line").attr("marker-end","url(#arrowhead)").style("stroke",function(e){return U.getColor(e)}),O=o.append("g").attr("class","connection-text"),O.append("text").attr("text-anchor","middle"),s.attr("class","connection").classed("dim",function(e){return e.get("dim")}).each(function(e,t){var n;return n=i.select(this).select("line.visible-line"),n.style("stroke",function(e){return M.getColor(e)}),e.get("color")?n.attr("marker-end","url(#arrowhead-"+e.get("color")+")"):n.attr("marker-end","url(#arrowhead)")}),s.select("text").text(function(e){return e.get("name").length<U.maxConnTextLength?e.get("name"):e.get("name").substring(0,U.maxConnTextLength-3)+"..."}),s.select(".connection-info-body").html(function(e){return n.template(l,e)}),q=s.select("text")[0];for(B=0,F=q.length;B<F;B++)A=q[B],a=A.getBBox(),p=e(A).parent().find(".connection-info"),p.attr("x",a.x);s.exit().remove(),m=i.select(".node-container").selectAll(".node").data(C,function(e){return e.cid}),y=m.enter().append("g").attr("data-nodeid",function(e){return e.get("_id")}),T=y.append("rect").attr("x","-80").attr("y","-15").attr("width","20").attr("height","30").attr("class","node-rectangle clickable").attr("fill","transparent"),N=y.append("foreignObject").attr("y","5").attr("height",this.maxNodeBoxHeight).attr("width",this.nodeBoxWidth).attr("x",-this.nodeBoxWidth/2).attr("class","node-title"),E=N.append("xhtml:body").attr("class","node-title-body"),S=E.append("div").attr("class","pad"),x=S.append("span").attr("class","node-title-span"),g=y.append("circle").attr("r","5").attr("cx",-this.nodeBoxWidth/2-10).attr("cy","0").attr("class","node-connector clickable").attr("fill","#222"),w=y.append("foreignObject").attr("y","12").attr("height",this.maxInfoBoxHeight).attr("width",this.infoBoxWidth).attr("x","-21").attr("class","node-info").append("xhtml:body").attr("class","node-info-body"),b=y.append("image").attr("height","50").attr("width","50").attr("xlink:href","").attr("x",-this.nodeBoxWidth/2-50).attr("y","-25").attr("class","node-image").attr("clip-path","url(#clipCircle)"),m.on("click",function(e){return U.model.trigger("node:clicked",e)}),m.on("dblclick",function(e){return M.model.select(e),M.model.trigger("node:dblclicked",e)}).on("mouseout",function(t){return e(i.event.toElement||i.event.target).closest(".node").length||U.trigger("node:mouseout",t),t.fixed&=-5}).call(this.force.drag()),x.on("mouseenter",function(e){return U.trigger("node:mouseenter",i.event,e)}),m.attr("class","node").classed("dim",function(e){return e.get("dim")}).classed("fixed",function(e){return e.fixed&1}).classed("image",function(e){return e.get("image")}).call(this.force.drag),m.select(".node-title-span").html(function(e){return n.template(c,e)}),m.select(".node-connector").style("fill",function(e){return U.getColor(e)}),m.select(".node-info-body").html(function(e){return n.template(l,e)}),m.select(".node-title-body").style("color",function(e){var t;return t=U.getColor(e),U.darkenColor(t,-50)}),m.select(".node-image").attr("xlink:href",function(e){return e.get("image")}),m.select(".node-expand-count").each(function(t){var n,r,i,s=this;return r=t.get("neighborCount"),i=M.model.connections.filter(function(e){return e.source?e.source.id===t.id||e.target.id===t.id:!1}).length,n=r-i,e(this).text(n)}),L=4,k=12,R=m.select(".node-title")[0];for(j=0,I=R.length;j<I;j++)A=R[j],f=e(A).find(".node-title-body"),v=f.width()/2+parseInt(f.css("border-left-width"),10),P=f.height()/2+parseInt(f.css("border-bottom-width"),10),e(A).attr("y",-P),p=e(A).parent().find(".node-info"),p.attr("x",-v).attr("y",P);return m.exit().remove(),D=function(){return s.selectAll("line").attr("x1",function(e){return U.model.getSourceOf(e).x-(U.nodeBoxWidth/2+10)}).attr("y1",function(e){return U.model.getSourceOf(e).y}).attr("x2",function(e){return U.model.getTargetOf(e).x-(U.nodeBoxWidth/2+10)}).attr("y2",function(e){return U.model.getTargetOf(e).y}),s.select(".connection-text").attr("transform",function(e){return"translate("+((U.model.getSourceOf(e).x-U.model.getTargetOf(e).x)/2+U.model.getTargetOf(e).x-(U.nodeBoxWidth/2+10))+","+((U.model.getSourceOf(e).y-U.model.getTargetOf(e).y)/2+U.model.getTargetOf(e).y)+")"}),m.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),U.connectionAdder.tick},this.gridViewOn?(e(".node-title-body").addClass("shown"),e(".node-info-body").addClass("hide-toolbar"),e(".node-info-body").addClass("shown").linkify()):(e(".node-info-body").removeClass("hide-toolbar"),D()),this.force.on("tick",function(){if(U.drawing&&!U.gridViewOn&&!U.cancelledDrag)return D()})},h.prototype.addNodeGV=function(e){return this.updateDetails(e),this.resetPositions(),this.gridView({duration:0}),this.updateForceFlag=!0},h.prototype.removeNodeGV=function(e){return this.updateDetails(e),this.resetPositions(),this.gridView({duration:0})},h.prototype.gridView=function(t){var n,r,s,o=this;if(!this.gridViewOn)return this.gridViewOn=!0,this.model.dehighlight(),this.force.stop(),this.model.connections.off("add remove",this.updateForceGraph),this.model.connections.off("change",this.updateDetails),this.model.nodes.off("add remove",this.updateForceGraph,this),this.model.nodes.on("add",this.addNodeGV,this),this.model.nodes.on("remove",this.removeNodeGV,this),s=t.duration!=null?t.duration:900,n=1+Math.floor(e(window).width()-this.grid.padding[0])/(this.nodeBoxWidth+this.grid.spacing[0]),r=i.select(".node-container").selectAll(".node"),this.zoom.scale(1).translate([this.grid.padding[0],this.grid.padding[1]]),this.workspace.transition().ease("linear").attr("transform","translate("+[this.grid.padding[0],this.grid.padding[1]]+") scale(1)"),r.transition().duration(s).attr("transform",function(e,t){var n;return n=o.placeInGrid(e,t),"translate("+n.x+","+n.y+")"}),this.updateDetails()},h.prototype.resetPositions=function(){var e,t,n=this;if(this.gridViewOn)return this.grid.colYs.splice(0),this.gridViewOn=!1,this.model.connections.on("add remove",this.updateForceGraph,this),this.model.connections.on("change",this.updateDetails,this),this.model.nodes.on("add remove",this.updateForceGraph,this),this.model.nodes.off("add",this.addNodeGV,this),this.model.nodes.off("remove",this.removeNodeGV,this),t=i.select(".node-container").selectAll(".node"),e=900,t.transition().duration(e).attr("transform",function(e,t){return n.placeInGrid(e,t),"translate("+e.x+","+e.y+")"}),this.grid.colYs.splice(0),this.dataTooltip.emptyTooltip(),this.updateForceFlag&&this.force.start(),this.updateForceFlag=!1,setTimeout(function(){return n.updateDetails()},e)},h.prototype.placeInGrid=function(t,n){var r,i,s,o,u,a,f;return s=1+Math.floor((e(window).width()-this.grid.padding[0])/(this.nodeBoxWidth+this.grid.spacing[0])),i=n%s,o=e('[data-nodeid="'+t.get("_id")+'"]').eq(0),u=Math.min(this.maxInfoBoxHeight,o.find(".node-info-body").height())+Math.min(this.maxNodeBoxHeight,o.find(".node-title-body").height()),r=(this.grid.colYs[i]||0)+Math.min(this.maxNodeBoxHeight,o.find(".node-title-body").height())/2,a=i*(this.nodeBoxWidth+this.grid.spacing[0])+this.grid.spacing[0],f=r+this.grid.spacing[1],this.grid.colYs[i]=f+u,t.x||(t.x=a),t.y||(t.y=f),{x:a,y:f}},h.prototype.rightClicked=function(e){return this.connectionAdder.clearDragLine(),!0},h.prototype.isContainedIn=function(e,t){return(e.x||e.clientX)<t.offset().left+t.outerWidth()&&(e.x||e.clientX)>t.offset().left&&(e.y||e.clientY)>t.offset().top&&(e.y||e.clientY)<t.offset().top+t.outerHeight()},h.prototype.centerOn=function(t){var n,r,i,s,o;return this.gridViewOn?(s=function(){var e,t,n,i;n=this.model.nodes.models,i=[];for(e=0,t=n.length;e<t;e++)r=n[e],i.push(r.cid);return i}.call(this).sort(),n=s.indexOf(t.cid),i=this.placeInGrid(t,n),o=[e(window).width()/2-i.x*this.zoom.scale(),e(window).height()/2-i.y*this.zoom.scale()]):o=[e(window).width()/2-t.x*this.zoom.scale(),e(window).height()/2-t.y*this.zoom.scale()],this.zoom.translate([o[0],o[1]]),this.workspace.transition().ease("linear").attr("transform","translate("+o+") scale("+this.zoom.scale()+")")},h.prototype.translateTo=function(e){return this.zoom.translate([e[0],e[1]]),this.workspace.transition().ease("linear").attr("transform","translate("+e+") scale("+this.zoom.scale()+")")},h.prototype.getColor=function(e){return this.model.defaultColors[e.get("color")]},h.prototype.darkenColor=function(e,t){var n,r,i,s,o,u;return e===void 0?void 0:(o=parseInt(e.substring(1,3),16),i=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16),o=parseInt(o*(100+t)/100),i=parseInt(i*(100+t)/100),n=parseInt(n*(100+t)/100),o=o<255?o:255,i=i<255?i:255,n=n<255?n:255,u=o.toString(16).length===1?"0"+o.toString(16):o.toString(16),s=i.toString(16).length===1?"0"+i.toString(16):i.toString(16),r=n.toString(16).length===1?"0"+n.toString(16):n.toString(16),"#"+u+s+r)},h}(r.View)})}.call(this),function(){function n(t,n){return n=n||"",typeof t!="string"&&(t.global&&n.indexOf("g")<0&&(n+="g"),t.ignoreCase&&n.indexOf("i")<0&&(n+="i"),t.multiline&&n.indexOf("m")<0&&(n+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,n){var r=e.txt.regexen[n]||"";return typeof r!="string"&&(r=r.source),r}),n)}function r(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function i(e,t,n){var r=String.fromCharCode(t);return n!==t&&(r+="-"+String.fromCharCode(n)),e.push(r),e}function m(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function w(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:typeof e=="string"&&e.match(t)&&RegExp["$&"]===e}if(typeof e=="undefined"||e===null)var e={};e.txt={},e.txt.regexen={};var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};e.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return t[e]})},e.txt.regexSupplant=n,e.txt.stringSupplant=r,e.txt.addCharsToCharClass=i;var s=String.fromCharCode,o=[s(32),s(133),s(160),s(5760),s(6158),s(8232),s(8233),s(8239),s(8287),s(12288)];i(o,9,13),i(o,8192,8202);var u=[s(65534),s(65279),s(65535)];i(u,8234,8238),e.txt.regexen.spaces_group=n(o.join("")),e.txt.regexen.spaces=n("["+o.join("")+"]"),e.txt.regexen.invalid_chars_group=n(u.join("")),e.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,e.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,e.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;var a=[];i(a,1024,1279),i(a,1280,1319),i(a,11744,11775),i(a,42560,42655),i(a,1425,1471),i(a,1473,1474),i(a,1476,1477),i(a,1479,1479),i(a,1488,1514),i(a,1520,1524),i(a,64274,64296),i(a,64298,64310),i(a,64312,64316),i(a,64318,64318),i(a,64320,64321),i(a,64323,64324),i(a,64326,64335),i(a,1552,1562),i(a,1568,1631),i(a,1646,1747),i(a,1749,1756),i(a,1758,1768),i(a,1770,1775),i(a,1786,1788),i(a,1791,1791),i(a,1872,1919),i(a,2208,2208),i(a,2210,2220),i(a,2276,2302),i(a,64336,64433),i(a,64467,64829),i(a,64848,64911),i(a,64914,64967),i(a,65008,65019),i(a,65136,65140),i(a,65142,65276),i(a,8204,8204),i(a,3585,3642),i(a,3648,3662),i(a,4352,4607),i(a,12592,12677),i(a,43360,43391),i(a,44032,55215),i(a,55216,55295),i(a,65441,65500),i(a,12449,12538),i(a,12540,12542),i(a,65382,65439),i(a,65392,65392),i(a,65296,65305),i(a,65313,65338),i(a,65345,65370),i(a,12353,12438),i(a,12441,12446),i(a,13312,19903),i(a,19968,40959),i(a,173824,177983),i(a,177984,178207),i(a,194560,195103),i(a,12291,12291),i(a,12293,12293),i(a,12347,12347),e.txt.regexen.nonLatinHashtagChars=n(a.join(""));var f=[];i(f,192,214),i(f,216,246),i(f,248,255),i(f,256,591),i(f,595,596),i(f,598,599),i(f,601,601),i(f,603,603),i(f,611,611),i(f,616,616),i(f,623,623),i(f,626,626),i(f,649,649),i(f,651,651),i(f,699,699),i(f,768,879),i(f,7680,7935),e.txt.regexen.latinAccentChars=n(f.join("")),e.txt.regexen.hashSigns=/[#＃]/,e.txt.regexen.hashtagAlpha=n(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i),e.txt.regexen.hashtagAlphaNumeric=n(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i),e.txt.regexen.endHashtagMatch=n(/^(?:#{hashSigns}|:\/\/)/),e.txt.regexen.hashtagBoundary=n(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/),e.txt.regexen.validHashtag=n(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),e.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|(?:rt|RT|rT|Rt):?)/,e.txt.regexen.atSigns=/[@＠]/,e.txt.regexen.validMentionOrList=n("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),e.txt.regexen.validReply=n(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),e.txt.regexen.endMentionMatch=n(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),e.txt.regexen.validUrlPrecedingChars=n(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,e.txt.regexen.invalidDomainChars=r("#{punct}#{spaces_group}#{invalid_chars_group}",e.txt.regexen),e.txt.regexen.validDomainChars=n(/[^#{invalidDomainChars}]/),e.txt.regexen.validSubdomain=n(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validDomainName=n(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validGTLD=n(RegExp("(?:(?:academy|accountants|active|actor|aero|agency|airforce|archi|army|arpa|asia|associates|attorney|audio|autos|axa|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|blue|bmw|boutique|brussels|build|builders|buzz|bzh|cab|camera|camp|cancerresearch|capetown|capital|cards|care|career|careers|cash|cat|catering|center|ceo|cheap|christmas|church|citic|claims|cleaning|clinic|clothing|club|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cruises|cuisinella|dance|dating|degree|democrat|dental|dentist|desi|diamonds|digital|direct|directory|discount|dnp|domains|durban|edu|education|email|engineer|engineering|enterprises|equipment|estate|eus|events|exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|florist|foo|foundation|frogans|fund|furniture|futbol|gal|gallery|gift|gives|glass|global|globo|gmo|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|hiphop|hiv|holdings|holiday|homes|horse|host|house|immobilien|industries|info|ink|institute|insure|int|international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|kred|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|luxe|luxury|maison|management|mango|market|marketing|media|meet|menu|miami|mil|mini|mobi|moda|moe|monash|mortgage|moscow|motorcycles|museum|nagoya|name|navy|net|neustar|nhk|ninja|nyc|okinawa|onl|org|organic|ovh|paris|partners|parts|photo|photography|photos|physio|pics|pictures|pink|place|plumbing|post|press|pro|productions|properties|pub|qpon|quebec|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|reviews|rich|rio|rocks|rodeo|ruhr|ryukyu|saarland|schmidt|schule|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|systems|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|town|toys|trade|training|travel|university|uno|vacations|vegas|ventures|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wang|watch|webcam|website|wed|wien|wiki|works|wtc|wtf|xxx|xyz|yachts|yokohama|zone|дети|москва|онлайн|орг|сайт|بازار|شبكة|موقع|संगठन|みんな|世界|中信|中文网|公司|公益|商城|商标|在线|我爱你|政务|机构|游戏|移动|组织机构|网址|网络|集团|삼성)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validCCTLD=n(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|мкд|мон|рф|срб|укр|қаз|الاردن|الجزائر|السعودية|المغرب|امارات|ایران|بھارت|تونس|سودان|سورية|عمان|فلسطين|قطر|مصر|مليسيا|پاکستان|भारत|বাংলা|ভারত|ਭਾਰਤ|ભારત|இந்தியா|இலங்கை|சிங்கப்பூர்|భారత్|ලංකා|ไทย|გე|中国|中國|台湾|台灣|新加坡|香港|한국)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validPunycode=n(/(?:xn--[0-9a-z]+)/),e.txt.regexen.validSpecialCCTLD=n(RegExp("(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validDomain=n(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),e.txt.regexen.validAsciiDomain=n(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),e.txt.regexen.invalidShortDomain=n(/^#{validDomainName}#{validCCTLD}$/i),e.txt.regexen.validSpecialShortDomain=n(/^#{validDomainName}#{validSpecialCCTLD}$/i),e.txt.regexen.validPortNumber=n(/[0-9]+/),e.txt.regexen.validGeneralUrlPathChars=n(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),e.txt.regexen.validUrlBalancedParens=n("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),e.txt.regexen.validUrlPathEndingChars=n(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),e.txt.regexen.validUrlPath=n("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),e.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,e.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,e.txt.regexen.extractUrl=n("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),e.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,e.txt.regexen.urlHasProtocol=/^https?:\/\//i,e.txt.regexen.urlHasHttps=/^https:\/\//i,e.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,e.txt.regexen.validCashtag=n("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),e.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,e.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,e.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,e.txt.regexen.validateUrlPchar=n("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),e.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,e.txt.regexen.validateUrlUserinfo=n("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),e.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,e.txt.regexen.validateUrlIpv4=n(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),e.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,e.txt.regexen.validateUrlIp=n("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),e.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomain=n(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),e.txt.regexen.validateUrlHost=n("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),e.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomain=n(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),e.txt.regexen.validateUrlUnicodeHost=n("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),e.txt.regexen.validateUrlPort=/[0-9]{1,5}/,e.txt.regexen.validateUrlUnicodeAuthority=n("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlAuthority=n("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlPath=n(/(\/#{validateUrlPchar}*)*/i),e.txt.regexen.validateUrlQuery=n(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlFragment=n(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlUnencoded=n("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var l="tweet-url list-slug",c="tweet-url username",h="tweet-url hashtag",p="tweet-url cashtag",d={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},v={disabled:!0,readonly:!0,multiple:!0,checked:!0};e.txt.tagAttrs=function(t){var n="";for(var r in t){var i=t[r];v[r]&&(i=i?r:null);if(i==null)continue;n+=" "+e.txt.htmlEscape(r)+'="'+e.txt.htmlEscape(i.toString())+'"'}return n},e.txt.linkToText=function(t,n,i,s){s.suppressNoFollow||(i.rel="nofollow"),s.linkAttributeBlock&&s.linkAttributeBlock(t,i),s.linkTextBlock&&(n=s.linkTextBlock(t,n));var o={text:n,attr:e.txt.tagAttrs(i)};return r("<a#{attr}>#{text}</a>",o)},e.txt.linkToTextWithSymbol=function(t,n,r,i,s){var o=s.symbolTag?"<"+s.symbolTag+">"+n+"</"+s.symbolTag+">":n;r=e.txt.htmlEscape(r);var u=s.textWithSymbolTag?"<"+s.textWithSymbolTag+">"+r+"</"+s.textWithSymbolTag+">":r;return s.usernameIncludeSymbol||!n.match(e.txt.regexen.atSigns)?e.txt.linkToText(t,o+u,i,s):o+e.txt.linkToText(t,u,i,s)},e.txt.linkToHashtag=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.hashtag),o=m(r.htmlAttrs||{});return o.href=r.hashtagUrlBase+s,o.title="#"+s,o["class"]=r.hashtagClass,s.charAt(0).match(e.txt.regexen.rtl_chars)&&(o["class"]+=" rtl"),r.targetBlank&&(o.target="_blank"),e.txt.linkToTextWithSymbol(t,i,s,o,r)},e.txt.linkToCashtag=function(t,n,r){var i=e.txt.htmlEscape(t.cashtag),s=m(r.htmlAttrs||{});return s.href=r.cashtagUrlBase+i,s.title="$"+i,s["class"]=r.cashtagClass,r.targetBlank&&(s.target="_blank"),e.txt.linkToTextWithSymbol(t,"$",i,s,r)},e.txt.linkToMentionAndList=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.screenName),o=e.txt.htmlEscape(t.listSlug),u=t.listSlug&&!r.suppressLists,a=m(r.htmlAttrs||{});return a["class"]=u?r.listClass:r.usernameClass,a.href=u?r.listUrlBase+s+o:r.usernameUrlBase+s,!u&&!r.suppressDataScreenName&&(a["data-screen-name"]=s),r.targetBlank&&(a.target="_blank"),e.txt.linkToTextWithSymbol(t,i,u?s+o:s,a,r)},e.txt.linkToUrl=function(t,n,r){var i=t.url,s=i,o=e.txt.htmlEscape(s),u=r.urlEntities&&r.urlEntities[i]||t;u.display_url&&(o=e.txt.linkTextWithEntity(u,r));var a=m(r.htmlAttrs||{});return i.match(e.txt.regexen.urlHasProtocol)||(i="http://"+i),a.href=i,r.targetBlank&&(a.target="_blank"),r.urlClass&&(a["class"]=r.urlClass),r.urlTarget&&(a.target=r.urlTarget),!r.title&&u.display_url&&(a.title=u.expanded_url),e.txt.linkToText(t,o,a,r)},e.txt.linkTextWithEntity=function(t,n){var i=t.display_url,s=t.expanded_url,o=i.replace(/…/g,"");if(s.indexOf(o)!=-1){var u=s.indexOf(o),a={displayUrlSansEllipses:o,beforeDisplayUrl:s.substr(0,u),afterDisplayUrl:s.substr(u+o.length),precedingEllipsis:i.match(/^…/)?"…":"",followingEllipsis:i.match(/…$/)?"…":""};for(var f in a)a.hasOwnProperty(f)&&(a[f]=e.txt.htmlEscape(a[f]));return a.invisible=n.invisibleTagAttrs,r("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",a)}return i},e.txt.autoLinkEntities=function(t,n,r){r=m(r||{}),r.hashtagClass=r.hashtagClass||h,r.hashtagUrlBase=r.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",r.cashtagClass=r.cashtagClass||p,r.cashtagUrlBase=r.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",r.listClass=r.listClass||l,r.usernameClass=r.usernameClass||c,r.usernameUrlBase=r.usernameUrlBase||"https://twitter.com/",r.listUrlBase=r.listUrlBase||"https://twitter.com/",r.htmlAttrs=e.txt.extractHtmlAttrsFromOptions(r),r.invisibleTagAttrs=r.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var i,s,o;if(r.urlEntities){i={};for(s=0,o=r.urlEntities.length;s<o;s++)i[r.urlEntities[s].url]=r.urlEntities[s];r.urlEntities=i}var u="",a=0;n.sort(function(e,t){return e.indices[0]-t.indices[0]});var f=r.htmlEscapeNonEntities?e.txt.htmlEscape:function(e){return e};for(var s=0;s<n.length;s++){var d=n[s];u+=f(t.substring(a,d.indices[0])),d.url?u+=e.txt.linkToUrl(d,t,r):d.hashtag?u+=e.txt.linkToHashtag(d,t,r):d.screenName?u+=e.txt.linkToMentionAndList(d,t,r):d.cashtag&&(u+=e.txt.linkToCashtag(d,t,r)),a=d.indices[1]}return u+=f(t.substring(a,t.length)),u},e.txt.autoLinkWithJSON=function(t,n,r){if(n.user_mentions)for(var i=0;i<n.user_mentions.length;i++)n.user_mentions[i].screenName=n.user_mentions[i].screen_name;if(n.hashtags)for(var i=0;i<n.hashtags.length;i++)n.hashtags[i].hashtag=n.hashtags[i].text;if(n.symbols)for(var i=0;i<n.symbols.length;i++)n.symbols[i].cashtag=n.symbols[i].text;var s=[];for(var o in n)s=s.concat(n[o]);return e.txt.modifyIndicesFromUnicodeToUTF16(t,s),e.txt.autoLinkEntities(t,s,r)},e.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var r=e[n];if(d[n])continue;v[n]&&(r=r?n:null);if(r==null)continue;t[n]=r}return t},e.txt.autoLink=function(t,n){var r=e.txt.extractEntitiesWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUsernamesOrLists=function(t,n){var r=e.txt.extractMentionsOrListsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkHashtags=function(t,n){var r=e.txt.extractHashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkCashtags=function(t,n){var r=e.txt.extractCashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUrlsCustom=function(t,n){var r=e.txt.extractUrlsWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});var t=e[0];for(var n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},e.txt.extractEntitiesWithIndices=function(t,n){var r=e.txt.extractUrlsWithIndices(t,n).concat(e.txt.extractMentionsOrListsWithIndices(t)).concat(e.txt.extractHashtagsWithIndices(t,{checkUrlOverlap:!1})).concat(e.txt.extractCashtagsWithIndices(t));return r.length==0?[]:(e.txt.removeOverlappingEntities(r),r)},e.txt.extractMentions=function(t){var n=[],r=e.txt.extractMentionsWithIndices(t);for(var i=0;i<r.length;i++){var s=r[i].screenName;n.push(s)}return n},e.txt.extractMentionsWithIndices=function(t){var n=[],r,i=e.txt.extractMentionsOrListsWithIndices(t);for(var s=0;s<i.length;s++)r=i[s],r.listSlug==""&&n.push({screenName:r.screenName,indices:r.indices});return n},e.txt.extractMentionsOrListsWithIndices=function(t){if(!t||!t.match(e.txt.regexen.atSigns))return[];var n=[],r;return t.replace(e.txt.regexen.validMentionOrList,function(t,r,i,s,o,u,a){var f=a.slice(u+t.length);if(!f.match(e.txt.regexen.endMentionMatch)){o=o||"";var l=u+r.length,c=l+s.length+o.length+1;n.push({screenName:s,listSlug:o,indices:[l,c]})}}),n},e.txt.extractReplies=function(t){if(!t)return null;var n=t.match(e.txt.regexen.validReply);return!n||RegExp.rightContext.match(e.txt.regexen.endMentionMatch)?null:n[1]},e.txt.extractUrls=function(t,n){var r=[],i=e.txt.extractUrlsWithIndices(t,n);for(var s=0;s<i.length;s++)r.push(i[s].url);return r},e.txt.extractUrlsWithIndices=function(t,n){n||(n={extractUrlsWithoutProtocol:!0});if(!t||(n.extractUrlsWithoutProtocol?!t.match(/\./):!t.match(/:/)))return[];var r=[];while(e.txt.regexen.extractUrl.exec(t)){var i=RegExp.$2,s=RegExp.$3,o=RegExp.$4,u=RegExp.$5,a=RegExp.$7,f=e.txt.regexen.extractUrl.lastIndex,l=f-s.length;if(!o){if(!n.extractUrlsWithoutProtocol||i.match(e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,h=0;u.replace(e.txt.regexen.validAsciiDomain,function(t){var n=u.indexOf(t,h);h=n+t.length,c={url:t,indices:[l+n,l+h]},(a||t.match(e.txt.regexen.validSpecialShortDomain)||!t.match(e.txt.regexen.invalidShortDomain))&&r.push(c)});if(c==null)continue;a&&(c.url=s.replace(u,c.url),c.indices[1]=f)}else s.match(e.txt.regexen.validTcoUrl)&&(s=RegExp.lastMatch,f=l+s.length),r.push({url:s,indices:[l,f]})}return r},e.txt.extractHashtags=function(t){var n=[],r=e.txt.extractHashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].hashtag);return n},e.txt.extractHashtagsWithIndices=function(t,n){n||(n={checkUrlOverlap:!0});if(!t||!t.match(e.txt.regexen.hashSigns))return[];var r=[];t.replace(e.txt.regexen.validHashtag,function(t,n,i,s,o,u){var a=u.slice(o+t.length);if(a.match(e.txt.regexen.endHashtagMatch))return;var f=o+n.length,l=f+s.length+1;r.push({hashtag:s,indices:[f,l]})});if(n.checkUrlOverlap){var i=e.txt.extractUrlsWithIndices(t);if(i.length>0){var s=r.concat(i);e.txt.removeOverlappingEntities(s),r=[];for(var o=0;o<s.length;o++)s[o].hashtag&&r.push(s[o])}}return r},e.txt.extractCashtags=function(t){var n=[],r=e.txt.extractCashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].cashtag);return n},e.txt.extractCashtagsWithIndices=function(t){if(!t||t.indexOf("$")==-1)return[];var n=[];return t.replace(e.txt.regexen.validCashtag,function(e,t,r,i,s,o){var u=s+t.length,a=u+i.length+1;n.push({cashtag:i,indices:[u,a]})}),n},e.txt.modifyIndicesFromUnicodeToUTF16=function(t,n){e.txt.convertUnicodeIndices(t,n,!1)},e.txt.modifyIndicesFromUTF16ToUnicode=function(t,n){e.txt.convertUnicodeIndices(t,n,!0)},e.txt.getUnicodeTextLength=function(t){return t.replace(e.txt.regexen.non_bmp_code_pairs," ").length},e.txt.convertUnicodeIndices=function(e,t,n){if(t.length==0)return;var r=0,i=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});var s=0,o=t[0];while(r<e.length){if(o.indices[0]==(n?r:i)){var u=o.indices[1]-o.indices[0];o.indices[0]=n?i:r,o.indices[1]=o.indices[0]+u,s++;if(s==t.length)break;o=t[s]}var a=e.charCodeAt(r);55296<=a&&a<=56319&&r<e.length-1&&(a=e.charCodeAt(r+1),56320<=a&&a<=57343&&r++),i++,r++}},e.txt.splitTags=function(e){var t=e.split("<"),n,r=[],i;for(var s=0;s<t.length;s+=1){i=t[s];if(!i)r.push("");else{n=i.split(">");for(var o=0;o<n.length;o+=1)r.push(n[o])}}return r},e.txt.hitHighlight=function(t,n,r){var i="em";n=n||[],r=r||{};if(n.length===0)return t;var s=r.tag||i,o=["<"+s+">","</"+s+">"],u=e.txt.splitTags(t),a,f,l="",c=0,h=u[0],p=0,d=0,v=!1,m=h,g=[],y,b,w,E,S;for(a=0;a<n.length;a+=1)for(f=0;f<n[a].length;f+=1)g.push(n[a][f]);for(y=0;y<g.length;y+=1){b=g[y],w=o[y%2],E=!1;while(h!=null&&b>=p+h.length)l+=m.slice(d),v&&b===p+m.length&&(l+=w,E=!0),u[c+1]&&(l+="<"+u[c+1]+">"),p+=m.length,d=0,c+=2,h=u[c],m=h,v=!1;!E&&h!=null?(S=b-p,l+=m.slice(d,S)+w,d=S,y%2===0?v=!0:v=!1):E||(E=!0,l+=w)}if(h!=null){d<m.length&&(l+=m.slice(d));for(y=c+1;y<u.length;y+=1)l+=y%2===0?u[y]:"<"+u[y]+">"}return l};var g=140,y=[s(65534),s(65279),s(65535),s(8234),s(8235),s(8236),s(8237),s(8238)];e.txt.getTweetLength=function(t,n){n||(n={short_url_length:22,short_url_length_https:23});var r=e.txt.getUnicodeTextLength(t),i=e.txt.extractUrlsWithIndices(t);e.txt.modifyIndicesFromUTF16ToUnicode(t,i);for(var s=0;s<i.length;s++)r+=i[s].indices[0]-i[s].indices[1],i[s].url.toLowerCase().match(e.txt.regexen.urlHasHttps)?r+=n.short_url_length_https:r+=n.short_url_length;return r},e.txt.isInvalidTweet=function(t){if(!t)return"empty";if(e.txt.getTweetLength(t)>g)return"too_long";for(var n=0;n<y.length;n++)if(t.indexOf(y[n])>=0)return"invalid_characters";return!1},e.txt.isValidTweetText=function(t){return!e.txt.isInvalidTweet(t)},e.txt.isValidUsername=function(t){if(!t)return!1;var n=e.txt.extractMentions(t);return n.length===1&&n[0]===t.slice(1)};var b=n(/^#{validMentionOrList}$/);e.txt.isValidList=function(e){var t=e.match(b);return!!t&&t[1]==""&&!!t[4]},e.txt.isValidHashtag=function(t){if(!t)return!1;var n=e.txt.extractHashtags(t);return n.length===1&&n[0]===t.slice(1)},e.txt.isValidUrl=function(t,n,r){n==null&&(n=!0),r==null&&(r=!0);if(!t)return!1;var i=t.match(e.txt.regexen.validateUrlUnencoded);if(!i||i[0]!==t)return!1;var s=i[1],o=i[2],u=i[3],a=i[4],f=i[5];return(!r||w(s,e.txt.regexen.validateUrlScheme)&&s.match(/^https?$/i))&&w(u,e.txt.regexen.validateUrlPath)&&w(a,e.txt.regexen.validateUrlQuery,!0)&&w(f,e.txt.regexen.validateUrlFragment,!0)?n&&w(o,e.txt.regexen.validateUrlUnicodeAuthority)||!n&&w(o,e.txt.regexen.validateUrlAuthority):!1},typeof module!="undefined"&&module.exports&&(module.exports=e.txt),typeof define=="function"&&define.amd&&define("twittertext",[],e.txt);if(typeof window!="undefined")if(window.twttr)for(var E in e)window.twttr[E]=e[E];else window.twttr=e}(),function(e){var t={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},n=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],r,i=e('<textarea tabindex="-1"/>').data("autosize",!0)[0];i.style.cssText="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;",i.style.lineHeight="99px",e(i).css("lineHeight")==="99px"&&n.push("lineHeight"),i.style.lineHeight="",e.fn.autosize=function(s){return this.length?(s=e.extend({},t,s||{}),i.parentNode!==document.body&&e(document.body).append(i),this.each(function(){function v(){var n,r=window.getComputedStyle?window.getComputedStyle(t,null):null;r?(n=parseFloat(r.width),(r.boxSizing==="border-box"||r.webkitBoxSizing==="border-box"||r.mozBoxSizing==="border-box")&&e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,t){n-=parseFloat(r[t])})):n=o.width(),i.style.width=Math.max(n,0)+"px"}function m(){var a={};r=t,i.className=s.className,i.id=s.id,u=parseFloat(o.css("maxHeight")),e.each(n,function(e,t){a[t]=o.css(t)}),e(i).css(a).attr("wrap",o.attr("wrap")),v();if(window.chrome){var f=t.style.width;t.style.width="0px";var l=t.offsetWidth;t.style.width=f}}function g(){var e,n;r!==t?m():v(),!t.value&&s.placeholder?i.value=o.attr("placeholder")||"":i.value=t.value,i.value+=s.append||"",i.style.overflowY=t.style.overflowY,n=parseFloat(t.style.height)||0,i.scrollTop=0,i.scrollTop=9e4,e=i.scrollTop,u&&e>u?(t.style.overflowY="scroll",e=u):(t.style.overflowY="hidden",e<a&&(e=a)),e+=f,Math.abs(n-e)>.01&&(t.style.height=e+"px",i.className=i.className,l&&s.callback.call(t,t),o.trigger("autosize.resized"))}function y(){clearTimeout(h),h=setTimeout(function(){var e=o.width();e!==p&&(p=e,g())},parseInt(s.resizeDelay,10))}var t=this,o=e(t),u,a,f=0,l=e.isFunction(s.callback),c={height:t.style.height,overflow:t.style.overflow,overflowY:t.style.overflowY,wordWrap:t.style.wordWrap,resize:t.style.resize},h,p=o.width(),d=o.css("resize");if(o.data("autosize"))return;o.data("autosize",!0);if(o.css("box-sizing")==="border-box"||o.css("-moz-box-sizing")==="border-box"||o.css("-webkit-box-sizing")==="border-box")f=o.outerHeight()-o.height();a=Math.max(parseFloat(o.css("minHeight"))-f||0,o.height()),o.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),d==="vertical"?o.css("resize","none"):d==="both"&&o.css("resize","horizontal"),"onpropertychange"in t?"oninput"in t?o.on("input.autosize keyup.autosize",g):o.on("propertychange.autosize",function(){event.propertyName==="value"&&g()}):o.on("input.autosize",g),s.resizeDelay!==!1&&e(window).on("resize.autosize",y),o.on("autosize.resize",g),o.on("autosize.resizeIncludeStyle",function(){r=null,g()}),o.on("autosize.destroy",function(){r=null,clearTimeout(h),e(window).off("resize",y),o.off("autosize").off(".autosize").css(c).removeData("autosize")}),g()})):this}}(jQuery||$),define("jquery-autosize",["jquery"],function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/AddNodeView",["jquery","underscore","backbone","cs!models/WorkspaceModel","cs!models/NodeModel","atwho","twittertext","jquery-autosize"],function(e,n,r,i,s,o,u,a){var f;return f=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,r),i.prototype.el=e("#add-node-form"),i.prototype.createdThisSession=0,i.prototype.events={submit:"addNode"},i.prototype.initialize=function(){var t=this;return this.descriptionArea=e("#add-description"),this.titleArea=e("#add-title"),this.colorArea=e("#add-color"),this.imageArea=e("#add-image"),this.colorInput=e("#add-color-container"),this.imageInput=e("#add-image-container"),this.descriptionArea.autosize(),n.each(this.model.defaultColors,function(e,n){return t.colorInput.append('<div class="add-color-item color-circle" style="background-color:'+e+'" data-color="'+n+'"></div>')}),this.colorArea.css("color",this.model.defaultColors.defaultHex),this.colorArea.data("color",this.model.defaultColors.defaultHex),e(".add-color-item").on("click",function(n){return t.colorArea.css("color",e(n.currentTarget).css("background-color")),t.colorArea.data("color",e(n.currentTarget).data("color")),t.colorInput.addClass("hidden")}),this.colorArea.on("click",function(e){return t.colorInput.hasClass("hidden")?(t.imageInput.addClass("hidden"),t.colorInput.removeClass("hidden")):t.colorInput.addClass("hidden")}),this.imageArea.on("click",function(e){return t.imageInput.hasClass("hidden")?(t.colorInput.addClass("hidden"),t.imageInput.toggleClass("hidden"),t.imageInput.focus()):t.imageInput.addClass("hidden")}),this.titleArea.on("focus",function(){return t.expandAdder()}),e("body").on("click",function(n){if(e(n.currentTarget).parents("#atwho-container").length!==0)return;if(!e("#add").hasClass("contracted"))return t.resetAdd()}),e("#add-node-form").on("click",function(e){return e.stopPropagation()}),this.colorArea.on("hover",function(t){return e("#add-color-popover").show()}),this.descriptionArea.on("shown.atwho",function(e){return t.showingAtWho=!0}),this.descriptionArea.on("hidden.atwho",function(e){return t.showingAtWho=!1}),this.descriptionArea.on("keydown",function(n){var r;r=n.keyCode||n.which,r===13&&!t.showingAtWho&&!n.shiftKey&&(n.preventDefault(),e.when(t.addNode()).then(function(){return t.expandAdder(),t.titleArea.focus()}));if(r===9)return n.preventDefault(),t.titleArea.focus()}),this.titleArea.on("keydown",function(e){var n;n=e.keyCode||e.which;if(n===9||n===13)return e.preventDefault(),t.descriptionArea.focus()})},i.prototype.expandAdder=function(){var t=this;if(e("#add").hasClass("contracted"))return e("#add").removeClass("contracted"),this.descriptionArea.attr("rows","1"),this.descriptionArea.atwho({at:"+",data:this.model.nodes.pluck("name"),target:"#add-node-form"}).atwho({at:"#",data:this.model.filterModel.getTags("node"),target:"#add-node-form"}),this.descriptionArea.val()===""&&(this.mentions=[]),this.descriptionArea.on("inserted.atwho",function(e,n){var r,i;i=n.attr("data-value");if(i[0]==="+"){r=t.model.nodes.findWhere({name:i.slice(1)});if(r!=null)return t.mentions.push(r)}})},i.prototype.resetAdd=function(){return this.imageInput.addClass("hidden"),this.colorInput.addClass("hidden"),this.descriptionArea.atwho("destroy"),e("#atwho-container").remove(),this.titleArea.val(""),this.imageInput.val(""),this.descriptionArea.val(""),this.descriptionArea.trigger("autosize.resize"),this.descriptionArea.trigger("change"),this.titleArea.trigger("change"),e("#add").addClass("contracted")},i.prototype.stripUnwanted=function(e){var t,n,r,i,s;r=e.replace("\n",""),r=r.replace("\r","");for(n=i=0,s=e.length;i<s;n=++i){t=e[n];if(t!==" ")return r.substring(n)}return r},i.prototype.addNode=function(t){var r,i,o,u,a,f=this;return t!=null&&t.preventDefault(),r={_docId:this.model.nodes._docId},n.each(e("#add-node-form").serializeArray(),function(e){return r[e.name]=e.value}),r.selected=!0,r.color=this.colorArea.data("color"),r.image=this.imageInput.val(),r.name===""&&r.description!==""&&(r.name=r.description.substring(0,25)),r.name.length>=25&&(r.name+="..."),r.name=this.stripUnwanted(r.name),i=new s(r),i.isValid()?(i.set("tags",twttr.txt.extractHashtags(r.description)),this.mentions=n.filter(this.mentions,function(e){return r.description.indexOf(e.get("name"))>0}),a=n.uniq(this.mentions,null,function(e){return e.get("name")}),i.set("neighborCount",a.length),this.model.putNode(i),u=function(t,n,r){var s,o,u,l,c;f.model.trigger("saved:node"),c=[];for(u=0,l=a.length;u<l;u++)o=a[u],o!=null?(s=new f.model.connections.model({source:i.get("_id"),target:o.get("_id"),_docId:f.model.documentModel.get("_id"),description:i.get("description")}),e.when(s.save()).then(function(){return i.fetch(),o.fetch()}),c.push(f.model.putConnection(s))):c.push(void 0);return c},o=function(e,t,n){return alert("Whoops, node couldn't be added check your connection and try again."),f.model.removeNode(i)},i.save(null,{success:u,error:o}),this.resetAdd()):(alert("Nodes need a name and/or description."),e("input",this.el).attr("placeholder",i.validate()))},i.prototype.findUnoccupiedStage=function(){var t,r,i,s,o,u,a=this;return this.createdThisSession=this.createdThisSession+1,u=e(window).width()-150,o=function(){var e,t,n;n=[];for(s=e=0,t=this.createdThisSession-1;0<=t?e<=t:e>=t;s=0<=t?++e:--e)n.push({x:u,y:180+70*s});return n}.call(this),r=function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))},i=function(e,t){var i,s;return s=a.model.nodes.models,i=n.map(s,function(n){return r(e,t,n.x,n.y)}),i=i.sort(),i[0]>60},t=n.filter(o,function(e){return i(e.x,e.y)}),t.length<1&&(t[0]=o[o.length-1]),[t[0].x,t[0].y]},i}(r.View)})}.call(this),define("backbone-forms",["jquery","underscore","backbone"],function(e,t,n){var r=n.View.extend({initialize:function(e){var n=this;e=e||{};var r=this.schema=function(){if(e.schema)return t.result(e,"schema");var r=e.model;return r&&r.schema?t.isFunction(r.schema)?r.schema():r.schema:n.schema?t.isFunction(n.schema)?n.schema():n.schema:{}}();t.extend(this,t.pick(e,"model","data","idPrefix","templateData"));var i=this.constructor;this.template=e.template||this.template||i.template,this.Fieldset=e.Fieldset||this.Fieldset||i.Fieldset,this.Field=e.Field||this.Field||i.Field,this.NestedField=e.NestedField||this.NestedField||i.NestedField;var s=this.selectedFields=e.fields||t.keys(r),o=this.fields={};t.each(s,function(e){var t=r[e];o[e]=this.createField(e,t)},this);var u=e.fieldsets||[s],a=this.fieldsets=[];t.each(u,function(e){this.fieldsets.push(this.createFieldset(e))},this)},createFieldset:function(e){var t={schema:e,fields:this.fields};return new this.Fieldset(t)},createField:function(e,t){var n={form:this,key:e,schema:t,idPrefix:this.idPrefix};this.model?n.model=this.model:this.data?n.value=this.data[e]:n.value=null;var r=new this.Field(n);return this.listenTo(r.editor,"all",this.handleEditorEvent),r},handleEditorEvent:function(e,n){var r=n.key+":"+e;this.trigger.call(this,r,this,n,Array.prototype.slice.call(arguments,2));switch(e){case"change":this.trigger("change",this);break;case"focus":this.hasFocus||this.trigger("focus",this);break;case"blur":if(this.hasFocus){var i=this;setTimeout(function(){var e=t.find(i.fields,function(e){return e.editor.hasFocus});e||i.trigger("blur",i)},0)}}},render:function(){var n=this,r=this.fields,i=e(e.trim(this.template(t.result(this,"templateData"))));return i.find("[data-editors]").add(i).each(function(i,s){var o=e(s),u=o.attr("data-editors");if(t.isUndefined(u))return;var a=u=="*"?n.selectedFields||t.keys(r):u.split(",");t.each(a,function(e){var t=r[e];o.append(t.editor.render().el)})}),i.find("[data-fields]").add(i).each(function(i,s){var o=e(s),u=o.attr("data-fields");if(t.isUndefined(u))return;var a=u=="*"?n.selectedFields||t.keys(r):u.split(",");t.each(a,function(e){var t=r[e];o.append(t.render().el)})}),i.find("[data-fieldsets]").add(i).each(function(r,i){var s=e(i),o=s.attr("data-fieldsets");if(t.isUndefined(o))return;t.each(n.fieldsets,function(e){s.append(e.render().el)})}),this.setElement(i),i.addClass(this.className),this},validate:function(e){var n=this,r=this.fields,i=this.model,s={};e=e||{},t.each(r,function(e){var t=e.validate();t&&(s[e.key]=t)});if(!e.skipModelValidate&&i&&i.validate){var o=i.validate(this.getValue());if(o){var u=t.isObject(o)&&!t.isArray(o);u||(s._others=s._others||[],s._others.push(o)),u&&t.each(o,function(e,t){if(r[t]&&!s[t])r[t].setError(e),s[t]=e;else{s._others=s._others||[];var n={};n[t]=e,s._others.push(n)}})}}return t.isEmpty(s)?null:s},commit:function(e){e=e||{};var n={skipModelValidate:!e.validate},r=this.validate(n);if(r)return r;var i,s=t.extend({error:function(e,t){i=t}},e);this.model.set(this.getValue(),s);if(i)return i},getValue:function(e){if(e)return this.fields[e].getValue();var n={};return t.each(this.fields,function(e){n[e.key]=e.getValue()}),n},setValue:function(e,t){var n={};typeof e=="string"?n[e]=t:n=e;var r;for(r in this.schema)n[r]!==undefined&&this.fields[r].setValue(n[r])},getEditor:function(e){var t=this.fields[e];if(!t)throw new Error("Field not found: "+e);return t.editor},focus:function(){if(this.hasFocus)return;var e=this.fieldsets[0],t=e.getFieldAt(0);if(!t)return;t.editor.focus()},blur:function(){if(!this.hasFocus)return;var e=t.find(this.fields,function(e){return e.editor.hasFocus});e&&e.editor.blur()},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),n.View.prototype.trigger.apply(this,arguments)},remove:function(){return t.each(this.fieldsets,function(e){e.remove()}),t.each(this.fields,function(e){e.remove()}),n.View.prototype.remove.apply(this,arguments)}},{template:t.template("    <form data-fieldsets></form>  ",null,this.templateSettings),templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},editors:{}});return r.validators=function(){var e={};return e.errMessages={required:"Required",regexp:"Invalid",email:"Invalid email address",url:"Invalid URL",match:t.template('Must match field "<%= field %>"',null,r.templateSettings)},e.required=function(e){return e=t.extend({type:"required",message:this.errMessages.required},e),function(n){e.value=n;var r={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(n===null||n===undefined||n===!1||n==="")return r}},e.regexp=function(e){if(!e.regexp)throw new Error('Missing required "regexp" option for "regexp" validator');return e=t.extend({type:"regexp",message:this.errMessages.regexp},e),function(n){e.value=n;var r={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(n===null||n===undefined||n==="")return;if(!e.regexp.test(n))return r}},e.email=function(n){return n=t.extend({type:"email",message:this.errMessages.email,regexp:/^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/},n),e.regexp(n)},e.url=function(n){return n=t.extend({type:"url",message:this.errMessages.url,regexp:/^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i},n),e.regexp(n)},e.match=function(e){if(!e.field)throw new Error('Missing required "field" options for "match" validator');return e=t.extend({type:"match",message:this.errMessages.match},e),function(n,r){e.value=n;var i={type:e.type,message:t.isFunction(e.message)?e.message(e):e.message};if(n===null||n===undefined||n==="")return;if(n!==r[e.field])return i}},e}(),r.Fieldset=n.View.extend({initialize:function(e){e=e||{};var n=this.schema=this.createSchema(e.schema);this.fields=t.pick(e.fields,n.fields),this.template=e.template||this.constructor.template},createSchema:function(e){return t.isArray(e)&&(e={fields:e}),e.legend=e.legend||null,e},getFieldAt:function(e){var t=this.schema.fields[e];return this.fields[t]},templateData:function(){return this.schema},render:function(){var n=this.schema,r=this.fields,i=e(e.trim(this.template(t.result(this,"templateData"))));return i.find("[data-fields]").add(i).each(function(n,i){var s=e(i),o=s.attr("data-fields");if(t.isUndefined(o))return;t.each(r,function(e){s.append(e.render().el)})}),this.setElement(i),this},remove:function(){t.each(this.fields,function(e){e.remove()}),n.View.prototype.remove.call(this)}},{template:t.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ",null,r.templateSettings)}),r.Field=n.View.extend({initialize:function(e){e=e||{},t.extend(this,t.pick(e,"form","key","model","value","idPrefix"));var n=this.schema=this.createSchema(e.schema);this.template=e.template||n.template||this.constructor.template,this.errorClassName=e.errorClassName||this.constructor.errorClassName,this.editor=this.createEditor()},createSchema:function(e){return t.isString(e)&&(e={type:e}),e=t.extend({type:"Text",title:this.createTitle()},e),e.type=t.isString(e.type)?r.editors[e.type]:e.type,e},createEditor:function(){var e=t.extend(t.pick(this,"schema","form","key","model","value"),{id:this.createEditorId()}),n=this.schema.type;return new n(e)},createEditorId:function(){var e=this.idPrefix,n=this.key;return n=n.replace(/\./g,"_"),t.isString(e)||t.isNumber(e)?e+n:t.isNull(e)?n:this.model?this.model.cid+"_"+n:n},createTitle:function(){var e=this.key;return e=e.replace(/([A-Z])/g," $1"),e=e.replace(/^./,function(e){return e.toUpperCase()}),e},templateData:function(){var e=this.schema;return{help:e.help||"",title:e.title,fieldAttrs:e.fieldAttrs,editorAttrs:e.editorAttrs,key:this.key,editorId:this.editor.id}},render:function(){var n=this.schema,i=this.editor;if(n.type==r.editors.Hidden)return this.setElement(i.render().el);var s=e(e.trim(this.template(t.result(this,"templateData"))));return n.fieldClass&&s.addClass(n.fieldClass),n.fieldAttrs&&s.attr(n.fieldAttrs),s.find("[data-editor]").add(s).each(function(n,r){var s=e(r),o=s.attr("data-editor");if(t.isUndefined(o))return;s.append(i.render().el)}),this.setElement(s),this},validate:function(){var e=this.editor.validate();return e?this.setError(e.message):this.clearError(),e},setError:function(e){if(this.editor.hasNestedForm)return;this.$el.addClass(this.errorClassName),this.$("[data-error]").html(e)},clearError:function(){this.$el.removeClass(this.errorClassName),this.$("[data-error]").empty()},commit:function(){return this.editor.commit()},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),n.View.prototype.remove.call(this)}},{template:t.template('    <div>      <label for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ',null,r.templateSettings),errorClassName:"error"}),r.NestedField=r.Field.extend({template:t.template(e.trim("    <div>      <span data-editor></span>      <% if (help) { %>        <div><%= help %></div>      <% } %>      <div data-error></div>    </div>  "),null,r.templateSettings)}),r.Editor=r.editors.Base=n.View.extend({defaultValue:null,hasFocus:!1,initialize:function(e){var e=e||{};if(e.model){if(!e.key)throw new Error("Missing option: 'key'");this.model=e.model,this.value=this.model.get(e.key)}else e.value!==undefined&&(this.value=e.value);this.value===undefined&&(this.value=this.defaultValue),t.extend(this,t.pick(e,"key","form"));var n=this.schema=e.schema||{};this.validators=e.validators||n.validators,this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),n.editorClass&&this.$el.addClass(n.editorClass),n.editorAttrs&&this.$el.attr(n.editorAttrs)},getName:function(){var e=this.key||"";return e.replace(/\./g,"_")},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){throw new Error("Not implemented")},blur:function(){throw new Error("Not implemented")},commit:function(e){var t=this.validate();if(t)return t;this.listenTo(this.model,"invalid",function(e,n){t=n}),this.model.set(this.key,this.getValue(),e);if(t)return t},validate:function(){var e=this.$el,n=null,r=this.getValue(),i=this.form?this.form.getValue():{},s=this.validators,o=this.getValidator;return s&&t.every(s,function(e){return n=o(e)(r,i),n?!1:!0}),n},trigger:function(e){return e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),n.View.prototype.trigger.apply(this,arguments)},getValidator:function(e){var n=r.validators;if(t.isRegExp(e))return n.regexp({regexp:e});if(t.isString(e)){if(!n[e])throw new Error('Validator "'+e+'" not found');return n[e]()}if(t.isFunction(e))return e;if(t.isObject(e)&&e.type){var i=e;return n[i.type](i)}throw new Error("Invalid validator: "+e)}}),r.editors.Text=r.Editor.extend({tagName:"input",defaultValue:"",previousValue:"",events:{keyup:"determineChange",keypress:function(e){var t=this;setTimeout(function(){t.determineChange()},0)},select:function(e){this.trigger("select",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);var t=this.schema,n="text";t&&t.editorAttrs&&t.editorAttrs.type&&(n=t.editorAttrs.type),t&&t.dataType&&(n=t.dataType),this.$el.attr("type",n)},render:function(){return this.setValue(this.value),this},determineChange:function(e){var t=this.$el.val(),n=t!==this.previousValue;n&&(this.previousValue=t,this.trigger("change",this))},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},select:function(){this.$el.select()}}),r.editors.TextArea=r.editors.Text.extend({tagName:"textarea",initialize:function(e){r.editors.Base.prototype.initialize.call(this,e)}}),r.editors.Password=r.editors.Text.extend({initialize:function(e){r.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","password")}}),r.editors.Number=r.editors.Text.extend({defaultValue:0,events:t.extend({},r.editors.Text.prototype.events,{keypress:"onKeyPress",change:"onKeyPress"}),initialize:function(e){r.editors.Text.prototype.initialize.call(this,e);var t=this.schema;this.$el.attr("type","number"),(!t||!t.editorAttrs||!t.editorAttrs.step)&&this.$el.attr("step","any")},onKeyPress:function(e){var t=this,n=function(){setTimeout(function(){t.determineChange()},0)};if(e.charCode===0){n();return}var r=this.$el.val();e.charCode!=undefined&&(r+=String.fromCharCode(e.charCode));var i=/^[0-9]*\.?[0-9]*?$/.test(r);i?n():e.preventDefault()},getValue:function(){var e=this.$el.val();return e===""?null:parseFloat(e,10)},setValue:function(e){e=function(){return t.isNumber(e)?e:t.isString(e)&&e!==""?parseFloat(e,10):null}(),t.isNaN(e)&&(e=null),r.editors.Text.prototype.setValue.call(this,e)}}),r.editors.Hidden=r.editors.Text.extend({defaultValue:"",initialize:function(e){r.editors.Text.prototype.initialize.call(this,e),this.$el.attr("type","hidden")},focus:function(){},blur:function(){}}),r.editors.Checkbox=r.editors.Base.extend({defaultValue:!1,tagName:"input",events:{click:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e),this.$el.attr("type","checkbox")},render:function(){return this.setValue(this.value),this},getValue:function(){return this.$el.prop("checked")},setValue:function(e){e?this.$el.prop("checked",!0):this.$el.prop("checked",!1)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()}}),r.editors.Select=r.editors.Base.extend({tagName:"select",events:{change:function(e){this.trigger("change",this)},focus:function(e){this.trigger("focus",this)},blur:function(e){this.trigger("blur",this)}},initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);if(!this.schema||!this.schema.options)throw new Error("Missing required 'schema.options'")},render:function(){return this.setOptions(this.schema.options),this},setOptions:function(e){var r=this;if(e instanceof n.Collection){var i=e;i.length>0?this.renderOptions(e):i.fetch({success:function(t){r.renderOptions(e)}})}else t.isFunction(e)?e(function(e){r.renderOptions(e)},r):this.renderOptions(e)},renderOptions:function(e){var t=this.$el,n;n=this._getOptionsHtml(e),t.html(n),this.setValue(this.value)},_getOptionsHtml:function(e){var r;if(t.isString(e))r=e;else if(t.isArray(e))r=this._arrayToHtml(e);else if(e instanceof n.Collection)r=this._collectionToHtml(e);else if(t.isFunction(e)){var i;e(function(e){i=e},this),r=this._getOptionsHtml(i)}else r=this._objectToHtml(e);return r},getValue:function(){return this.$el.val()},setValue:function(e){this.$el.val(e)},focus:function(){if(this.hasFocus)return;this.$el.focus()},blur:function(){if(!this.hasFocus)return;this.$el.blur()},_collectionToHtml:function(e){var t=[];e.each(function(e){t.push({val:e.id,label:e.toString()})});var n=this._arrayToHtml(t);return n},_objectToHtml:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({val:n,label:e[n]});var r=this._arrayToHtml(t);return r},_arrayToHtml:function(e){var n=[];return t.each(e,function(e){if(t.isObject(e))if(e.group)n.push('<optgroup label="'+e.group+'">'),n.push(this._getOptionsHtml(e.options)),n.push("</optgroup>");else{var r=e.val||e.val===0?e.val:"";n.push('<option value="'+r+'">'+e.label+"</option>")}else n.push("<option>"+e+"</option>")},this),n.join("")}}),r.editors.Radio=r.editors.Select.extend({tagName:"ul",events:{"change input[type=radio]":function(){this.trigger("change",this)},"focus input[type=radio]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=radio]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=radio]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){return this.$("input[type=radio]:checked").val()},setValue:function(e){this.$("input[type=radio]").val([e])},focus:function(){if(this.hasFocus)return;var e=this.$("input[type=radio]:checked");if(e[0]){e.focus();return}this.$("input[type=radio]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=radio]:focus").blur()},_arrayToHtml:function(e){var n=[],r=this;return t.each(e,function(e,i){var s="<li>";if(t.isObject(e)){var o=e.val||e.val===0?e.val:"";s+='<input type="radio" name="'+r.getName()+'" value="'+o+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="radio" name="'+r.getName()+'" value="'+e+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e+"</label>";s+="</li>",n.push(s)}),n.join("")}}),r.editors.Checkboxes=r.editors.Select.extend({tagName:"ul",groupNumber:0,events:{"click input[type=checkbox]":function(){this.trigger("change",this)},"focus input[type=checkbox]":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur input[type=checkbox]":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("input[type=checkbox]:focus")[0])return;e.trigger("blur",e)},0)}},getValue:function(){var t=[];return this.$("input[type=checkbox]:checked").each(function(){t.push(e(this).val())}),t},setValue:function(e){t.isArray(e)||(e=[e]),this.$("input[type=checkbox]").val(e)},focus:function(){if(this.hasFocus)return;this.$("input[type=checkbox]").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("input[type=checkbox]:focus").blur()},_arrayToHtml:function(e){var n=[],r=this;return t.each(e,function(e,i){var s="<li>",o=!0;if(t.isObject(e))if(e.group){var u=r.id;r.id+="-"+r.groupNumber++,s='<fieldset class="group"> <legend>'+e.group+"</legend>",s+=r._arrayToHtml(e.options),s+="</fieldset>",r.id=u,o=!1}else{var a=e.val||e.val===0?e.val:"";s+='<input type="checkbox" name="'+r.getName()+'" value="'+a+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e.label+"</label>"}else s+='<input type="checkbox" name="'+r.getName()+'" value="'+e+'" id="'+r.id+"-"+i+'" />',s+='<label for="'+r.id+"-"+i+'">'+e+"</label>";o&&(s+="</li>"),n.push(s)}),n.join("")}}),r.editors.Object=r.editors.Base.extend({hasNestedForm:!0,initialize:function(e){this.value={},r.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw new Error('Missing required option "form"');if(!this.schema.subSchema)throw new Error("Missing required 'schema.subSchema' option for Object editor")},render:function(){var e=this.form.constructor;return this.nestedForm=new e({schema:this.schema.subSchema,data:this.value,idPrefix:this.id+"_",Field:e.NestedField}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){return this.nestedForm?this.nestedForm.getValue():this.value},setValue:function(e){this.value=e,this.render()},focus:function(){if(this.hasFocus)return;this.nestedForm.focus()},blur:function(){if(!this.hasFocus)return;this.nestedForm.blur()},remove:function(){this.nestedForm.remove(),n.View.prototype.remove.call(this)},validate:function(){return this.nestedForm.validate()},_observeFormEvents:function(){if(!this.nestedForm)return;this.nestedForm.on("all",function(){var e=t.toArray(arguments);e[1]=this,this.trigger.apply(this,e)},this)}}),r.editors.NestedModel=r.editors.Object.extend({initialize:function(e){r.editors.Base.prototype.initialize.call(this,e);if(!this.form)throw new Error('Missing required option "form"');if(!e.schema.model)throw new Error('Missing required "schema.model" option for NestedModel editor')},render:function(){var e=this.form.constructor,t=this.value||{},n=this.key,r=this.schema.model,i=t.constructor===r?t:new r(t);return this.nestedForm=new e({model:i,idPrefix:this.id+"_",fieldTemplate:"nestedField"}),this._observeFormEvents(),this.$el.html(this.nestedForm.render().el),this.hasFocus&&this.trigger("blur",this),this},commit:function(){var e=this.nestedForm.commit();return e?(this.$el.addClass("error"),e):r.editors.Object.prototype.commit.call(this)}}),r.editors.Date=r.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},r.editors.Base.prototype.initialize.call(this,e);var n=r.editors.Date,i=new Date;this.options=t.extend({monthNames:n.monthNames,showMonthNames:n.showMonthNames},e),this.schema=t.extend({yearStart:i.getFullYear()-100,yearEnd:i.getFullYear()},e.schema||{}),this.value&&!t.isDate(this.value)&&(this.value=new Date(this.value));if(!this.value){var s=new Date;s.setSeconds(0),s.setMilliseconds(0),this.value=s}this.template=e.template||this.constructor.template},render:function(){var n=this.options,r=this.schema,i=t.map(t.range(1,32),function(e){return'<option value="'+e+'">'+e+"</option>"}),s=t.map(t.range(0,12),function(e){var t=n.showMonthNames?n.monthNames[e]:e+1;return'<option value="'+e+'">'+t+"</option>"}),o=r.yearStart<r.yearEnd?t.range(r.yearStart,r.yearEnd+1):t.range(r.yearStart,r.yearEnd-1,-1),u=t.map(o,function(e){return'<option value="'+e+'">'+e+"</option>"}),a=e(e.trim(this.template({dates:i.join(""),months:s.join(""),years:u.join("")})));return this.$date=a.find('[data-type="date"]'),this.$month=a.find('[data-type="month"]'),this.$year=a.find('[data-type="year"]'),this.$hidden=e('<input type="hidden" name="'+this.key+'" />'),a.append(this.$hidden),this.setValue(this.value),this.setElement(a),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.$year.val(),t=this.$month.val(),n=this.$date.val();return!e||!t||!n?null:new Date(e,t,n)},setValue:function(e){this.$date.val(e.getDate()),this.$month.val(e.getMonth()),this.$year.val(e.getFullYear()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();t.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)}},{template:t.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ',null,r.templateSettings),showMonthNames:!0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}),r.editors.DateTime=r.editors.Base.extend({events:{"change select":function(){this.updateHidden(),this.trigger("change",this)},"focus select":function(){if(this.hasFocus)return;this.trigger("focus",this)},"blur select":function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(e.$("select:focus")[0])return;e.trigger("blur",e)},0)}},initialize:function(e){e=e||{},r.editors.Base.prototype.initialize.call(this,e),this.options=t.extend({DateEditor:r.editors.DateTime.DateEditor},e),this.schema=t.extend({minsInterval:15},e.schema||{}),this.dateEditor=new this.options.DateEditor(e),this.value=this.dateEditor.value,this.template=e.template||this.constructor.template},render:function(){function n(e){return e<10?"0"+e:e}var r=this.schema,i=t.map(t.range(0,24),function(e){return'<option value="'+e+'">'+n(e)+"</option>"}),s=t.map(t.range(0,60,r.minsInterval),function(e){return'<option value="'+e+'">'+n(e)+"</option>"}),o=e(e.trim(this.template({hours:i.join(),mins:s.join()})));return o.find("[data-date]").append(this.dateEditor.render().el),this.$hour=o.find('select[data-type="hour"]'),this.$min=o.find('select[data-type="min"]'),this.$hidden=o.find('input[type="hidden"]'),this.setValue(this.value),this.setElement(o),this.$el.attr("id",this.id),this.$el.attr("name",this.getName()),this.hasFocus&&this.trigger("blur",this),this},getValue:function(){var e=this.dateEditor.getValue(),t=this.$hour.val(),n=this.$min.val();return!e||!t||!n?null:(e.setHours(t),e.setMinutes(n),e)},setValue:function(e){t.isDate(e)||(e=new Date(e)),this.dateEditor.setValue(e),this.$hour.val(e.getHours()),this.$min.val(e.getMinutes()),this.updateHidden()},focus:function(){if(this.hasFocus)return;this.$("select").first().focus()},blur:function(){if(!this.hasFocus)return;this.$("select:focus").blur()},updateHidden:function(){var e=this.getValue();t.isDate(e)&&(e=e.toISOString()),this.$hidden.val(e)},remove:function(){this.dateEditor.remove(),r.editors.Base.prototype.remove.call(this)}},{template:t.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ',null,r.templateSettings),DateEditor:r.editors.Date}),r.VERSION="0.13.0",n.Form=r,r}),define("list",["jquery","underscore","backbone","backbone-forms"],function(e,t,n){(function(r){r.editors.List=r.editors.Base.extend({events:{'click [data-action="add"]':function(e){e.preventDefault(),this.addItem(null,!0)}},initialize:function(e){e=e||{};var t=r.editors;t.Base.prototype.initialize.call(this,e);var n=this.schema;if(!n)throw new Error("Missing required option 'schema'");this.template=e.template||this.constructor.template,this.Editor=function(){var e=n.itemType;return e?t.List[e]?t.List[e]:t[e]:t.Text}(),this.items=[]},render:function(){var n=this,r=this.value||[],i=e(e.trim(this.template()));return this.$list=i.is("[data-items]")?i:i.find("[data-items]"),r.length?t.each(r,function(e){n.addItem(e)}):this.Editor.isAsync||this.addItem(),this.setElement(i),this.$el.attr("id",this.id),this.$el.attr("name",this.key),this.hasFocus&&this.trigger("blur",this),this},addItem:function(e,n){var i=this,s=r.editors,o=(new s.List.Item({list:this,form:this.form,schema:this.schema,value:e,Editor:this.Editor,key:this.key})).render(),u=function(){i.items.push(o),i.$list.append(o.el),o.editor.on("all",function(e){if(e==="change")return;var n=t.toArray(arguments);n[0]="item:"+e,n.splice(1,0,i),s.List.prototype.trigger.apply(this,n)},i),o.editor.on("change",function(){o.addEventTriggered||(o.addEventTriggered=!0,this.trigger("add",this,o.editor)),this.trigger("item:change",this,o.editor),this.trigger("change",this)},i),o.editor.on("focus",function(){if(this.hasFocus)return;this.trigger("focus",this)},i),o.editor.on("blur",function(){if(!this.hasFocus)return;var e=this;setTimeout(function(){if(t.find(e.items,function(e){return e.editor.hasFocus}))return;e.trigger("blur",e)},0)},i);if(n||e)o.addEventTriggered=!0;n&&(i.trigger("add",i,o.editor),i.trigger("change",i))};return this.Editor.isAsync?o.editor.on("readyToAdd",u,this):(u(),o.editor.focus()),o},removeItem:function(e){var n=this.schema.confirmDelete;if(n&&!confirm(n))return;var r=t.indexOf(this.items,e);this.items[r].remove(),this.items.splice(r,1),e.addEventTriggered&&(this.trigger("remove",this,e.editor),this.trigger("change",this)),!this.items.length&&!this.Editor.isAsync&&this.addItem()},getValue:function(){var e=t.map(this.items,function(e){return e.getValue()});return t.without(e,undefined,"")},setValue:function(e){this.value=e,this.render()},focus:function(){if(this.hasFocus)return;this.items[0]&&this.items[0].editor.focus()},blur:function(){if(!this.hasFocus)return;var e=t.find(this.items,function(e){return e.editor.hasFocus});e&&e.editor.blur()},remove:function(){t.invoke(this.items,"remove"),r.editors.Base.prototype.remove.call(this)},validate:function(){if(!this.validators)return null;var e=t.map(this.items,function(e){return e.validate()}),n=t.compact(e).length?!0:!1;if(!n)return null;var r={type:"list",message:"Some of the items in the list failed validation",errors:e};return r}},{template:t.template('      <div>        <div data-items></div>        <button type="button" data-action="add">Add</button>      </div>    ',null,r.templateSettings)}),r.editors.List.Item=r.editors.Base.extend({events:{'click [data-action="remove"]':function(e){e.preventDefault(),this.list.removeItem(this)},"keydown input[type=text]":function(e){if(e.keyCode!==13)return;e.preventDefault(),this.list.addItem(),this.list.$list.find("> li:last input").focus()}},initialize:function(e){this.list=e.list,this.schema=e.schema||this.list.schema,this.value=e.value,this.Editor=e.Editor||r.editors.Text,this.key=e.key,this.template=e.template||this.schema.itemTemplate||this.constructor.template,this.errorClassName=e.errorClassName||this.constructor.errorClassName,this.form=e.form},render:function(){this.editor=(new this.Editor({key:this.key,schema:this.schema,value:this.value,list:this.list,item:this,form:this.form})).render();var t=e(e.trim(this.template()));return t.find("[data-editor]").append(this.editor.el),this.setElement(t),this},getValue:function(){return this.editor.getValue()},setValue:function(e){this.editor.setValue(e)},focus:function(){this.editor.focus()},blur:function(){this.editor.blur()},remove:function(){this.editor.remove(),n.View.prototype.remove.call(this)},validate:function(){var e=this.getValue(),n=this.list.form?this.list.form.getValue():{},r=this.schema.validators,i=this.getValidator;if(!r)return null;var s=null;return t.every(r,function(t){return s=i(t)(e,n),s?!1:!0}),s?this.setError(s):this.clearError(),s?s:null},setError:function(e){this.$el.addClass(this.errorClassName),this.$el.attr("title",e.message)},clearError:function(){this.$el.removeClass(this.errorClassName),this.$el.attr("title",null)}},{template:t.template('      <div>        <span data-editor></span>        <button type="button" data-action="remove">&times;</button>      </div>    ',null,r.templateSettings),errorClassName:"error"}),r.editors.List.Modal=r.editors.Base.extend({events:{click:"openEditor"},initialize:function(e){e=e||{},r.editors.Base.prototype.initialize.call(this,e);if(!r.editors.List.Modal.ModalAdapter)throw new Error("A ModalAdapter is required");this.form=e.form;if(!e.form)throw new Error('Missing required option: "form"');this.template=e.template||this.constructor.template},render:function(){var e=this;return t.isEmpty(this.value)?this.openEditor():(this.renderSummary(),setTimeout(function(){e.trigger("readyToAdd")},0)),this.hasFocus&&this.trigger("blur",this),this},renderSummary:function(){this.$el.html(e.trim(this.template({summary:this.getStringValue()})))},itemToString:function(e){var n=function(e){var t={key:e};return r.Field.prototype.createTitle.call(t)};e=e||{};var i=[];return t.each(this.nestedSchema,function(r,s){var o=r.title?r.title:n(s),u=e[s];if(t.isUndefined(u)||t.isNull(u))u="";i.push(o+": "+u)}),i.join("<br />")},getStringValue:function(){var e=this.schema,n=this.getValue();return t.isEmpty(n)?"[Empty]":e.itemToString?e.itemToString(n):this.itemToString(n)},openEditor:function(){var e=this,n=this.form.constructor,i=this.modalForm=new n({schema:this.nestedSchema,data:this.value}),s=this.modal=new r.editors.List.Modal.ModalAdapter({content:i,animate:!0});s.open(),this.trigger("open",this),this.trigger("focus",this),s.on("cancel",this.onModalClosed,this),s.on("ok",t.bind(this.onModalSubmitted,this))},onModalSubmitted:function(){var e=this.modal,t=this.modalForm,n=!this.value,r=t.validate();if(r)return e.preventClose();this.value=t.getValue(),this.renderSummary(),n&&this.trigger("readyToAdd"),this.trigger("change",this),this.onModalClosed()},onModalClosed:function(){this.modal=null,this.modalForm=null,this.trigger("close",this),this.trigger("blur",this)},getValue:function(){return this.value},setValue:function(e){this.value=e},focus:function(){if(this.hasFocus)return;this.openEditor()},blur:function(){if(!this.hasFocus)return;this.modal&&this.modal.trigger("cancel")}},{template:t.template("      <div><%= summary %></div>    ",null,r.templateSettings),ModalAdapter:n.BootstrapModal,isAsync:!0}),r.editors.List.Object=r.editors.List.Modal.extend({initialize:function(){r.editors.List.Modal.prototype.initialize.apply(this,arguments);var e=this.schema;if(!e.subSchema)throw new Error('Missing required option "schema.subSchema"');this.nestedSchema=e.subSchema}}),r.editors.List.NestedModel=r.editors.List.Modal.extend({initialize:function(){r.editors.List.Modal.prototype.initialize.apply(this,arguments);var e=this.schema;if(!e.model)throw new Error('Missing required option "schema.model"');var n=e.model.prototype.schema;this.nestedSchema=t.isFunction(n)?n():n},getStringValue:function(){var e=this.schema,n=this.getValue();return t.isEmpty(n)?null:e.itemToString?e.itemToString(n):(new e.model(n)).toString()}})})(n.Form)}),define("backbone-forms-bootstrap",["jquery","underscore","backbone","backbone-forms"],function(e,t,n){var r=n.Form;r.template=t.template('    <form role="form" data-fieldsets></form>  '),r.Fieldset.template=t.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  "),r.Field.template=t.template('    <div class="form-group field-<%= key %> edit-details-form">      <label class="control-label" for="<%= editorId %>"><%= title %></label>      <div>        <span data-editor></span>        <span class="help-block" data-error></span>        <span class="help-block"><%= help %></span>      </div>    </div>  '),r.NestedField.template=t.template('    <div class="field-<%= key %>">      <div title="<%= title %>" class="input-xlarge">        <span data-editor></span>        <div class="help-inline" data-error></div>      </div>      <div class="help-block"><%= help %></div>    </div>  '),r.editors.Base.prototype.className="form-control",r.Field.errorClassName="has-error",r.editors.List&&(r.editors.List.template=t.template('      <div class="bbf-list">        <ul class="list-unstyled clearfix" data-items></ul>        <button type="button" class="btn bbf-add" data-action="add">Add</button>      </div>    '),r.editors.List.Item.template=t.template('      <li class="clearfix">        <span class="pull-left" data-editor></span>        <button type="button" class="btn bbf-del" data-action="remove">&times;</button>      </li>    '),r.editors.List.Object.template=r.editors.List.NestedModel.template=t.template('      <div class="bbf-list-modal"><%= summary %></div>    '))});if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",s.resetText||r.data("resetText",r[i]()),r[i](s[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof n&&n;i||r.data("bs.button",i=new t(this,s)),"toggle"==n?i.toggle():n&&i.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,r=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o="next"==t?"left":"right",u="next"==t?"first":"last",f=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[u]()}if(i.hasClass("active"))return this.sliding=!1;var l=e.Event("slide.bs.carousel",{relatedTarget:i[0],direction:o});return this.$element.trigger(l),l.isDefaultPrevented()?void 0:(this.sliding=!0,s&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(f.$indicators.children()[f.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),r.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*r.css("transition-duration").slice(0,-1))):(r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),s&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n),o="string"==typeof n?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),"number"==typeof n?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,r=e(this),i=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),r.data()),o=r.attr("data-slide-to");o&&(s.interval=!1),i.carousel(s),(o=r.attr("data-slide-to"))&&i.data("bs.carousel").to(o),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",i].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[i](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350):r.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&s.toggle&&"show"==n&&(n=!n),i||r.data("bs.collapse",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,r=e(this),i=r.attr("data-target")||t.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.collapse"),u=o?"toggle":r.data(),f=r.attr("data-parent"),l=f&&e(f);o&&o.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+f+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(u)})}(jQuery),+function(e){"use strict";function t(t){e(r).remove(),e(i).each(function(){var r=n(e(this)),i={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",i)),t.isDefaultPrevented()||r.removeClass("open").trigger("hidden.bs.dropdown",i))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var r=".dropdown-backdrop",i="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown",u),i.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var s=n(r),o=s.hasClass("open");if(!o||o&&27==t.keyCode)return 27==t.which&&s.find(i).focus(),r.click();var u=" li:not(.divider):visible a",f=s.find("[role=menu]"+u+", [role=listbox]"+u);if(f.length){var l=f.index(f.filter(":focus"));38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<f.length-1&&l++,~l||(l=0),f.eq(l).focus()}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new s(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,s.prototype.toggle).on("keydown.bs.dropdown.data-api",i+", [role=menu], [role=listbox]",s.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),r&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(i)}).emulateTransitionEnd(300):n.$element.focus().trigger(i)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);s||i.data("bs.modal",s=new t(this,o)),"string"==typeof n?s[n](r):o.show&&s.show(r)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());n.is("a")&&t.preventDefault(),i.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,r=this.tip();this.setContent(),this.options.animation&&r.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(i);o&&(i=i.replace(s,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),f=r[0].offsetWidth,l=r[0].offsetHeight;if(o){var c=this.$element.parent(),h=i,p=document.documentElement.scrollTop||document.body.scrollTop,d="body"==this.options.container?window.innerWidth:c.outerWidth(),v="body"==this.options.container?window.innerHeight:c.outerHeight(),m="body"==this.options.container?0:c.offset().left;i="bottom"==i&&u.top+u.height+l-p>v?"top":"top"==i&&u.top-p-l<0?"bottom":"right"==i&&u.right+f>d?"left":"left"==i&&u.left-f<m?"right":i,r.removeClass(h).addClass(i)}var g=this.getCalculatedOffset(i,u,f,l);this.applyPlacement(g,i),this.hoverState=null;var y=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,y).emulateTransitionEnd(150):y()}},t.prototype.applyPlacement=function(t,n){var r,i=this.tip(),s=i[0].offsetWidth,o=i[0].offsetHeight,u=parseInt(i.css("margin-top"),10),f=parseInt(i.css("margin-left"),10);isNaN(u)&&(u=0),isNaN(f)&&(f=0),t.top=t.top+u,t.left=t.left+f,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;if("top"==n&&c!=o&&(r=!0,t.top=t.top+o-c),/bottom|top/.test(n)){var h=0;t.left<0&&(h=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,c=i[0].offsetHeight),this.replaceArrow(h-s+l,l,"left")}else this.replaceArrow(c-o,c,"top");r&&i.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&r.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.tooltip",i=new t(this,s)),"string"==typeof n&&i[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.popover",i=new t(this,s)),"string"==typeof n&&i[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(n,r){var i,s=e.proxy(this.process,this);this.$element=e(e(n).is("body")?window:n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||(i=e(n).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var r=e(this),i=r.data("target")||r.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,r=n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(t>=r)return o!=(e=s.last()[0])&&this.activate(e);if(o&&t<=i[0])return o!=(e=s[0])&&this.activate(e);for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(!i[e+1]||t<=i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(s),!s.isDefaultPrevented()){var o=e(r);this.activate(t.parent("li"),n),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},t.prototype.activate=function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),s.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),"string"==typeof n&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),r=this.$window.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.top,u=s.bottom;"top"==this.affixed&&(i.top+=r),"object"!=typeof s&&(u=o=s),"function"==typeof o&&(o=s.top(this.$element)),"function"==typeof u&&(u=s.bottom(this.$element));var f=null!=this.unpin&&r+this.unpin<=i.top?!1:null!=u&&i.top+this.$element.height()>=n-u?"bottom":null!=o&&o>=r?"top":!1;if(this.affixed!==f){this.unpin&&this.$element.css("top","");var l="affix"+(f?"-"+f:""),c=e.Event(l+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=f,this.unpin="bottom"==f?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(l).trigger(e.Event(l.replace("affix","affixed"))),"bottom"==f&&this.$element.offset({top:n-u-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof n&&n;i||r.data("bs.affix",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery),define("bootstrap",["jquery","backbone"],function(){}),define("text!templates/details_box.html",[],function(){return'<div id=\'details-container\'>\n  <div class="panel panel-default">\n    <div id="collapse-one" class="panel-collapse collapse in">\n      <div class="panel-body">\n        <div class="detail-controls">\n          <% if(isEditable) {%>\n            <% if (node.isNode) {%>\n              <button id="edit-node-button" class="btn btn-primary btn-sm">Edit</button>\n            <% } else { %>\n              <button id="edit-connection-button" class="btn btn-default btn-sm">Edit</button>\n              <button id="archive-connection-button" class="btn btn-warning btn-sm">Hide</button>\n            <% } %>\n          <% } %>\n        </div>\n          <% if (node.attributes.image && node.attributes.image.length > 0) { %>\n            <img src="<%= node.attributes.image %>" width="100%">\n          <% } %>\n          <% if (node.attributes.description.length > 0) { %>\n            <% linkified = node.attributes.description.replace(/#(\\S*)/g,\'<a class="tag-link" data-tag=$1 href="">#$1</a>\').replace(/(((ftp|https?):\\/\\/)[\\-\\w@:%_\\+.~#?,&\\/\\/=]+)|((mailto:)?[_.\\w-]+@([\\w][\\w\\-]+\\.)+[a-zA-Z]{2,3})/g, \'<a class="url-link" href="$1">$1</a>\');\n            %>\n            <p class="lead"><%= linkified %></p>\n          <% } %>\n          <% if (node.attributes.url) { %>\n              URL: <a href="<%= node.attributes.url %>"><%= node.attributes.url %></a><br/>\n          <% }; %>\n          <% if (node.isNode) {%>\n            <ul class="list-group">\n              <% _.each(spokes, function(conn) { %>\n                <li class="list-group-item"><%= conn.source.get(\'name\')%>&nbsp;<i class="fa fa-long-arrow-right"></i>&nbsp;<%=conn.get(\'name\')%>&nbsp;<i class="fa fa-long-arrow-right"></i>&nbsp;<%=conn.target.get(\'name\')%></li>\n              <% }); %>\n            </ul>\n          <% } %>\n        </p>\n      </div>\n    </div>\n\n  </div>\n</div>\n'}),define("text!templates/edit_form.html",[],function(){return'<form class="form" id="edit-node-form" role="form">\n  <div data-fields="name,url,description,image"></div>\n  <div class="colorpalette"></div>\n  <button id=\'save-node-connection-button\' class="btn btn-success" type="submit">\n    <i class="fa fa-save"></i> Save Changes\n  </button>\n  <button id="delete-button" class="btn btn-danger pull-right" type="button">\n  	<i class="fa fa-times-circle"></i> Delete\n  </button>\n  <button id="archive-button" class="btn btn-warning" type="button">\n  	<i class="fa-eye-slash fa"></i> Hide\n  </button>\n</form>\n'}),function(e){"use strict";var t=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],n=function(t,n){t.addClass("bootstrap-colorpalette");var r=[];e.each(n,function(t,n){r.push("<div>"),e.each(n,function(e,t){var n=['<button type="button" class="btn-color" style="background-color:',t,'" data-value="',t,'" title="',t,'"></button>'].join("");r.push(n)}),r.push("</div>")}),t.html(r.join(""))},r=function(t){t.element.on("click",function(n){var r=e(n.target),i=r.closest(".btn-color");if(!i[0])return;var s=i.attr("data-value");t.value=s,t.element.trigger({type:"selectColor",color:s,element:t.element})})},i=function(e,i){this.element=e,n(e,i&&i.colors||t),r(this)};e.fn.extend({colorPalette:function(t){return this.each(function(){var n=e(this),r=n.data("colorpalette");r||n.data("colorpalette",new i(n,t))}),this}})}(jQuery),define("bootstrap-color",function(){}),!function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function r(e,t){return n(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){return(r=n.call(null,i,e,t))?void 0:!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){return(r=n.call(null,i,e,t))?!1:void 0}),!!r):r},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s,o,u=this,a=arguments;return s=function(){r=null,n||(i=e.apply(u,a))},o=n&&!r,clearTimeout(r),r=setTimeout(s,t),o&&(i=e.apply(u,a)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},noop:function(){}}}(),n=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),r=function(){"use strict";var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),i=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var r="typeahead:";return t.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(r+e,t)}}),n}(),s=function(){"use strict";function e(e,t,n,r){var i;if(!n)return this;for(t=t.split(a),n=r?u(n,r):n,this._callbacks=this._callbacks||{};i=t.shift();)this._callbacks[i]=this._callbacks[i]||{sync:[],async:[]},this._callbacks[i][e].push(n);return this}function t(t,n,r){return e.call(this,"async",t,n,r)}function n(t,n,r){return e.call(this,"sync",t,n,r)}function r(e){var t;if(!this._callbacks)return this;for(e=e.split(a);t=e.shift();)delete this._callbacks[t];return this}function i(e){var t,n,r,i,o;if(!this._callbacks)return this;for(e=e.split(a),r=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)i=s(n.sync,this,[t].concat(r)),o=s(n.async,this,[t].concat(r)),i()&&f(o);return this}function s(e,t,n){function r(){for(var r,i=0,s=e.length;!r&&s>i;i+=1)r=e[i].apply(t,n)===!1;return!r}return r}function o(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function u(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var a=/\s+/,f=o();return{onSync:n,onAsync:t,off:r,trigger:i}}(),o=function(e){"use strict";function n(e,n,r){for(var i,s=[],o=0,u=e.length;u>o;o++)s.push(t.escapeRegExChars(e[o]));return i=r?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(i):new RegExp(i,"i")}var r={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(i){function s(t){var n,r,s;return(n=u.exec(t.data))&&(s=e.createElement(i.tagName),i.className&&(s.className=i.className),r=t.splitText(n.index),r.splitText(n[0].length),s.appendChild(r.cloneNode(!0)),t.parentNode.replaceChild(s,r)),!!n}function o(e,t){for(var n,r=3,i=0;i<e.childNodes.length;i++)n=e.childNodes[i],n.nodeType===r?i+=t(n)?1:0:o(n,t)}var u;i=t.mixin({},r,i),i.node&&i.pattern&&(i.pattern=t.isArray(i.pattern)?i.pattern:[i.pattern],u=n(i.pattern,i.caseSensitive,i.wordsOnly),o(i.node,s))}}(window.document),u=function(){"use strict";function n(n){var i,s,o,a,f=this;n=n||{},n.input||e.error("input is missing"),i=t.bind(this._onBlur,this),s=t.bind(this._onFocus,this),o=t.bind(this._onKeydown,this),a=t.bind(this._onInput,this),this.$hint=e(n.hint),this.$input=e(n.input).on("blur.tt",i).on("focus.tt",s).on("keydown.tt",o),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){u[e.which||e.keyCode]||t.defer(t.bind(f._onInput,f,e))}):this.$input.on("input.tt",a),this.query=this.$input.val(),this.$overflowHelper=r(this.$input)}function r(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function i(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function o(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var u;return u={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=u[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,r,i;switch(e){case"tab":r=this.getHint(),i=this.getInputValue(),n=r&&r!==i&&!o(t);break;case"up":case"down":n=!o(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!o(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;e=this.getInputValue(),t=i(e,this.query),n=t?this.query.length!==e.length:!1,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,r;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),r=""!==e&&n&&!this.hasOverflow(),!r&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,r;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(r=document.selection.createRange(),r.moveStart("character",-e),e===r.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),a=function(){"use strict";function i(r){r=r||{},r.templates=r.templates||{},r.source||e.error("missing source"),r.name&&!f(r.name)&&e.error("invalid dataset name: "+r.name),this.query=null,this.highlight=!!r.highlight,this.name=r.name||t.getUniqueId(),this.source=r.source,this.displayFn=u(r.display||r.displayKey),this.templates=a(r.templates,this.displayFn),this.$el=e(n.dataset.replace("%CLASS%",this.name))}function u(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function a(e,n){function r(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||r}}function f(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var l="ttDataset",h="ttValue",p="ttDatum";return i.extractDatasetName=function(t){return e(t).data(l)},i.extractValue=function(t){return e(t).data(h)},i.extractDatum=function(t){return e(t).data(p)},t.mixin(i.prototype,s,{_render:function(i,s){function u(){return w.templates.empty({query:i,isEmpty:!0})}function a(){function u(t){var i;return i=e(n.suggestion).append(w.templates.suggestion(t)).data(l,w.name).data(h,w.displayFn(t)).data(p,t),i.children().each(function(){e(this).css(r.suggestionChild)}),i}var a,f;return a=e(n.suggestions).css(r.suggestions),f=t.map(s,u),a.append.apply(a,f),w.highlight&&o({className:"tt-highlight",node:a[0],pattern:i}),a}function f(){return w.templates.header({query:i,isEmpty:!y})}function v(){return w.templates.footer({query:i,isEmpty:!y})}if(this.$el){var y,w=this;this.$el.empty(),y=s&&s.length,!y&&this.templates.empty?this.$el.html(u()).prepend(w.templates.header?f():null).append(w.templates.footer?v():null):y&&this.$el.html(a()).prepend(w.templates.header?f():null).append(w.templates.footer?v():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),i}(),f=function(){"use strict";function n(n){var r,s,o,u=this;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),r=t.bind(this._onSuggestionClick,this),s=t.bind(this._onSuggestionMouseEnter,this),o=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",r).on("mouseenter.tt",".tt-suggestion",s).on("mouseleave.tt",".tt-suggestion",o),t.each(this.datasets,function(e){u.$menu.append(e.getRoot()),e.onSync("rendered",u._onRendered,u)})}function i(e){return new a(e)}return t.mixin(n.prototype,s,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,n,r,i;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),r=t.index(n)+e,r=(r+1)%(t.length+1)-1,-1===r)return void this.trigger("cursorRemoved");-1>r&&(r=t.length-1),this._setCursor(i=t.eq(r)),this._ensureVisible(i)}},_ensureVisible:function(e){var t,n,r,i;t=e.position().top,n=t+e.outerHeight(!0),r=this.$menu.scrollTop(),i=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>t?this.$menu.scrollTop(r+t):n>i&&this.$menu.scrollTop(r+(n-i))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?r.ltr:r.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:a.extractDatum(e),value:a.extractValue(e),datasetName:a.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),n}(),l=function(){"use strict";function s(n){var r,s,a;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=o(n.input,n.withHint),r=this.$node.find(".tt-dropdown-menu"),s=this.$node.find(".tt-input"),a=this.$node.find(".tt-hint"),s.on("blur.tt",function(e){var n,i,o;n=document.activeElement,i=r.is(n),o=r.has(n).length>0,t.isMsie()&&(i||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){s.focus()}))}),r.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new i({el:s}),this.dropdown=(new f({menu:r,datasets:n.datasets})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=(new u({input:s,hint:a})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function o(t,i){var s,o,u,f;s=e(t),o=e(n.wrapper).css(r.wrapper),u=e(n.dropdown).css(r.dropdown),f=s.clone().css(r.hint).css(a(s)),f.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),s.data(p,{dir:s.attr("dir"),autocomplete:s.attr("autocomplete"),spellcheck:s.attr("spellcheck"),style:s.attr("style")}),s.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?r.input:r.inputWithNoHint);try{!s.attr("dir")&&s.attr("dir","auto")}catch(l){}return s.wrap(o).parent().prepend(i?f:null).append(u)}function a(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function l(e){var n=e.find(".tt-input");t.each(n.data(p),function(e,r){t.isUndefined(e)?n.removeAttr(r):n.attr(r,e)}),n.detach().removeData(p).removeClass("tt-input").insertAfter(e),e.remove()}var p="ttAttrs";return t.mixin(s.prototype,{_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var n,r;n=this.dropdown.getDatumForCursor(),r=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&r&&(this._select(r),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,n,r,i,s,o;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),r=u.normalizeQuery(n),i=t.escapeRegExChars(r),s=new RegExp("^(?:"+i+")(.+$)","i"),o=s.exec(e.value),o?this.input.setHint(n+o[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,r,i;t=this.input.getHint(),n=this.input.getQuery(),r=e||this.input.isCursorAtEnd(),t&&n!==t&&r&&(i=this.dropdown.getDatumForTopSuggestion(),i&&this.input.setInputValue(i.value),this.eventBus.trigger("autocompleted",i.raw,i.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),l(this.$node),this.$node=null}}),s}();!function(){"use strict";var n,r,s;n=e.fn.typeahead,r="ttTypeahead",s={initialize:function(n,s){function o(){var o,u,a=e(this);t.each(s,function(e){e.highlight=!!n.highlight}),u=new l({input:a,eventBus:o=new i({el:a}),withHint:t.isUndefined(n.hint)?!0:!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:s}),a.data(r,u)}return s=t.isArray(s)?s:[].slice.call(arguments,1),n=n||{},this.each(o)},open:function(){function t(){var t,n=e(this);(t=n.data(r))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(r))&&t.close()}return this.each(t)},val:function(t){function n(){var n,i=e(this);(n=i.data(r))&&n.setVal(t)}function i(e){var t,n;return(t=e.data(r))&&(n=t.getVal()),n}return arguments.length?this.each(n):i(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(r))&&(t.destroy(),n.removeData(r))}return this.each(t)}},e.fn.typeahead=function(t){var n;return s[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(r)}),s[t].apply(n,[].slice.call(arguments,1))):s.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()}(window.jQuery),define("typeahead",["jquery"],function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/DetailsView",["jquery","underscore","backbone","backbone-forms","list","backbone-forms-bootstrap","bootstrap","text!templates/details_box.html","text!templates/edit_form.html","cs!models/NodeModel","cs!models/ConnectionModel","bootstrap-color","atwho","twittertext","linkify","typeahead"],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m;return m=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,i),s.prototype.el=e("body"),s.prototype.events={"click .close":"closeDetail","click #edit-node-button":"editNodeConnection","click #edit-connection-button":"editNodeConnection","submit #edit-node-form":"saveNodeConnection","click #archive-node-button":"archiveObj","click #archive-connection-button":"archiveObj","click #delete-button":"deleteObj","click #archive-button":"archiveObj","click #expand-node-button":"expandNode"},s.prototype.initialize=function(){return this.loadBBModal(),this.graphView=this.attributes.graphView,this.model.on("conn:dblclicked",this.openDetails,this),this.model.on("node:dblclicked",this.openDetails,this),this.model.on("create:connection",this.openAndEditConnection,this),this.model.on("edit:conn",this.openDetails,this),this.setupAtWho()},s.prototype.openDetails=function(t){var i,s,o,u=this;return this.currentNC=t,o=this.model.getSpokes(t),this.updateColor(this.model.defaultColors[t.get("color")]),t.on("change:color",function(e){return u.updateColor(u.model.defaultColors[t.get("color")])}),i=e("#add").length!==0,t.isConnection?s=""+t.source.get("name")+'\n  &nbsp;<i class="fa fa-long-arrow-right"></i>&nbsp;\n'+t.get("name")+'\n  &nbsp;<i class="fa fa-long-arrow-right"></i>&nbsp;\n'+t.target.get("name"):s=t.get("name"),this.detailsModal=(new r.BootstrapModal({content:n.template(a,{node:t,spokes:o,isEditable:i}),animate:!1,showFooter:!1,title:s})).open(),e(".tag-link").on("click",function(t){var n;return t.preventDefault(),n=e(t.currentTarget).attr("data-tag"),u.graphView.trigger("tag:click",n)})},s.prototype.updateColor=function(t){return e("#details-container .panel-heading").css("background",t)},s.prototype.closeDetail=function(){return this.detailsModal.close(),this.graphView.trigger("node:mouseout")},s.prototype.openAndEditConnection=function(e){return this.currentNC=e,this.openDetails(e),this.editNodeConnection()},s.prototype.editNodeConnection=function(){var t,i,s,o,u=this;if(e("#add-node-form").length>0)return s=this.currentNC,this.nodeConnectionForm=(new r.Form({model:s,template:n.template(f)})).on("name:blur url:blur tags:blur",function(e,t){return e.fields[t.key].validate()}).render(),e("#details-container .panel-body").empty().append(this.nodeConnectionForm.el),s.isNode&&e("#details-container input[name=name]",this.el).focus(),i={colors:[function(){var e,n;e=this.model.defaultColors,n=[];for(t in e)o=e[t],(t!=="grey"||!s.isNode)&&n.push(o);return n}.call(this)]},e(".colorpalette").colorPalette(i).on("selectColor",function(e){var t;return t=e.color,s.set("color",n.invert(u.model.defaultColors)[t]),s.save()})},s.prototype.saveNodeConnection=function(e){var t,r,i,s;e.preventDefault(),this.nodeConnectionForm.commit(),this.nodeConnectionForm.model.save();if(this.nodeConnectionForm.model.isNode){r=n.uniq(this.mentionedConns,function(e){return e.get("target")});for(i=0,s=r.length;i<s;i++)t=r[i],t.save(),this.model.putConnection(t)}return this.closeDetail(),!1},s.prototype.archiveObj=function(){return this.currentNC.isNode?this.model.removeNode(this.currentNC):this.currentNC.isConnection&&this.model.removeConnection(this.currentNC),this.closeDetail()},s.prototype.deleteObj=function(){var e=this;return this.currentNC.isNode?(window.prefetch.nodes=n.filter(window.prefetch.nodes,function(t){return e.currentNC.get("_id")!==t._id}),window.prefetch.connections=n.filter(window.prefetch.connections,function(t){return e.currentNC.get("_id")!==t.source&&e.currentNC.get("_id")!==t.target}),this.model.deleteNode(this.currentNC,function(){return e.model.nodes.map(function(e){return e.fetch()})})):this.currentNC.isConnection&&(window.prefetch.connections=n.filter(window.prefetch.connections,function(t){return e.currentNC.get("_id")!==t._id}),this.model.deleteConnection(this.currentNC)),this.closeDetail()},s.prototype.expandNode=function(){var e=this;return this.currentNC.getNeighbors(function(t){var n,r,i,s,o;o=[];for(i=0,s=t.length;i<s;i++)r=t[i],n=new l(r),e.model.putNode(n)?o.push(n.getConnections(e.model.nodes,function(t){var n,r,i,s;s=[];for(r=0,i=t.length;r<i;r++)n=t[r],s.push(e.model.putConnection(new c(n)));return s})):o.push(void 0);return o})},s.prototype.setupAtWho=function(){var t,i,s,o=this;return i=this,this.mentionedConns=[],t=function(){var t;return t=function(t,r){return e.get("/document/"+o.model.documentModel.get("_id")+"/connections",function(e){var i;return i=n.uniq(o.findMatchingObjects(t,e),function(e){return e.name}),r(n.map(i,function(e){return{value:e.name,type:"connection"}}))})}},s={hint:!1,highlight:!0,minLength:0,autoselect:!0},r.Form.editors.ConnDropdown=r.Form.editors.Text.extend({render:function(){var e=this;return r.Form.editors.Text.prototype.render.call(this),setTimeout(function(){return e.$el.typeahead(s,{name:"connection-names",source:t()}),e.$el.focus()},10),this}}),r.Form.editors.AtWhoEditor=r.Form.editors.TextArea.extend({render:function(){var e=this;return r.Form.editors.TextArea.prototype.render.call(this),this.$el.atwho({at:"+",data:n.filter(i.model.nodes.pluck("name"),function(t){return t!==e.model.get("name")}),target:".modal-content"}).atwho({at:"#",data:i.model.filterModel.getTags("node"),target:".modal-content"}),this.mentions=[],this.$el.on("inserted.atwho",function(t,n){var r,s;s=n.attr("data-value");if(s[0]==="+")return r=i.model.nodes.findWhere({name:s.slice(1)}),e.mentions.push(r)}),this},getValue:function(){var e,t,r,s,o,u,a,f,l=this;s=this.$el.val(),this.model.set("tags",twttr.txt.extractHashtags(s)),this.mentions=n.filter(this.mentions,function(e){return s.indexOf(e.get("name"))>0}),f=this.mentions;for(u=0,a=f.length;u<a;u++){o=f[u];if(o.get("_id")===this.model.get("_id"))continue;r=i.model.connections.filter(function(e){return e.get("source")===l.model.get("_id")}),t=r.map(function(e){return i.model.getTargetOf(e).get("name")}),o!=null&&!n.contains(t,name)&&(e=new c({source:this.model.get("_id"),target:o.get("_id"),_docId:i.model.documentModel.get("_id"),description:s}),i.mentionedConns.push(e))}return this.$el.val()}})},s.prototype.findMatchingObjects=function(e,t){var r;return r=new RegExp(e,"i"),n.filter(t,function(e){return r.test(e.name)})},s.prototype.loadBBModal=function(){return function(e,t,n){var r,i,s;return s=t.templateSettings,t.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g},i=t.template('<div class="modal-dialog">\n  <div class="modal-content">\n    <% if (title) { %>\n    <div class="modal-header">\n      <% if (allowCancel) { %>\n      <a class="close">&times;</a>\n      <% } %>\n      <h4>{{title}}</h4>\n    </div>\n    <% } %>\n  <div class="modal-body">{{content}}</div>\n  <% if (showFooter) { %>\n    <div class="modal-footer">\n      <% if (allowCancel) { %>\n        <% if (cancelText) { %>\n          <a href="#" class="btn cancel">{{cancelText}}</a>\n        <% } %>\n      <% } %>\n      <a href="#" class="btn ok btn-primary">{{okText}}</a>\n    </div>\n  <% } %>\n  </div>\n</div>'),t.templateSettings=s,r=n.View.extend({className:"modal",events:{"click .close":function(e){e.preventDefault(),this.trigger("cancel");if(this.options.content&&this.options.content.trigger)return this.options.content.trigger("cancel",this)},"click .cancel":function(e){e.preventDefault(),this.trigger("cancel");if(this.options.content&&this.options.content.trigger)return this.options.content.trigger("cancel",this)},"click .ok":function(e){e.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this);if(this.options.okCloses)return this.close()},keypress:function(e){if(this.options.enterTriggersOk&&e.which===13){e.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this);if(this.options.okCloses)return this.close()}}},initialize:function(e){return this.options=t.extend({title:null,okText:"OK",focusOk:!0,okCloses:!0,cancelText:"Cancel",showFooter:!0,allowCancel:!0,escape:!0,animate:!1,template:i,enterTriggersOk:!1},e)},render:function(){var e,t,n,r;return t=this.$el,r=this.options,n=r.content,t.html(r.template(r)),e=this.$content=t.find(".modal-body"),n&&n.$el&&(n.render(),t.find(".modal-body").html(n.$el)),r.animate&&t.addClass("fade"),this.isRendered=!0,this},open:function(n){var i,s,o,u,a,f;return this.isRendered||this.render(),f=this,s=this.$el,s.modal(t.extend({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"},this.options.modalOptions)),s.one("shown.bs.modal",function(){return f.options.focusOk&&s.find(".btn.ok").focus(),f.options.content&&f.options.content.trigger&&f.options.content.trigger("shown",f),f.trigger("shown")}),a=r.count,i=e(".modal-backdrop:eq("+a+")"),o=parseInt(i.css("z-index"),10),u=parseInt(i.css("z-index"),10),i.css("z-index",o+a),this.$el.css("z-index",u+a),this.options.allowCancel&&(i.one("click",function(){return f.options.content&&f.options.content.trigger&&f.options.content.trigger("cancel",f),f.trigger("cancel")}),e(document).one("keyup.dismiss.modal",function(e){e.which===27&&f.trigger("cancel");if(f.options.content&&f.options.content.trigger)return e.which===27&&f.options.content.trigger("shown",f)})),this.on("cancel",function(){return f.close()}),r.count++,n&&f.on("ok",n),this},close:function(){var e,t,n;n=this,e=this.$el;if(this._preventClose){this._preventClose=!1;return}e.one("hidden.bs.modal",t=function(r){if(r.target!==r.currentTarget)return e.one("hidden",t);n.remove(),n.options.content&&n.options.content.trigger&&n.options.content.trigger("hidden",n),n.trigger("hidden")}),e.modal("hide"),r.count--},preventClose:function(){this._preventClose=!0}},{count:0}),n.BootstrapModal=r}(jQuery,n,r)},s}(r.View)})}.call(this),define("text!templates/filters_template.html",[],function(){return'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n        Node Filters\n    </h4>\n  </div>\n\n  <div class="panel-body" id="filter-panel">\n    <p>\n      <ul class="list-group">\n          <li class="list-group-item list-group-item-info">\n            <input type=\'checkbox\' class="filter-toggle-all" checked=\'false\'>\n            <b>Toggle all</b>\n          </li>\n        <% _.each(_.keys(tagTable), function(tag) { %>\n          <li class="list-group-item">\n            <% if(tagTable[tag]) { %>\n              <input type=\'checkbox\' class="filter-toggle" checked=\'true\' data-id=<%= tag %>>\n                <%= tag %>\n              </input>\n            <% } else { %>\n              <input type=\'checkbox\' class="filter-toggle" data-id=<%= tag %>>\n                <%= tag %>\n              </input>\n            <% } %>\n          </li>\n        <% }); %>\n      </ul>\n    </p>\n  </div>\n\n</div>\n\n<button class="btn btn-primary" id="filter-button" type="button">Apply Filter</button>\n'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/FilterView",["jquery","underscore","backbone","text!templates/filters_template.html"],function(e,n,r,i){var s,o=this;return s=function(s){function o(){var e=this;return this.updateFilter=function(t){return o.prototype.updateFilter.apply(e,arguments)},o.__super__.constructor.apply(this,arguments)}return t(o,s),o.prototype.el=e("#toolbar-bottom-right"),o.prototype.events={"click #filter-modal-toggle":"openFilterModal"},o.prototype.initialize=function(){return this.workspaceModel=this.attributes.workspaceModel},o.prototype.openFilterModal=function(){var t,s,o,u,a,f,l=this;s=this.model.get("initial_tags"),t=this.model.get("node_tags"),u={};for(a=0,f=s.length;a<f;a++)o=s[a],u[o]=n.contains(t,o);return this.FilterModal=(new r.BootstrapModal({content:n.template(i,{tagTable:u}),title:"Filters",animate:!0,showFooter:!1})).open(),e(".filter-toggle",this.FilterModal.$el).click(function(e){return l.updateFilter(e)}),e(".filter-toggle-all",this.FilterModal.$el).click(function(t){return t.currentTarget.checked?e.each(e(".filter-toggle"),function(t,r){return l.model.set("node_tags",n.union(l.model.get("node_tags"),e(r).data("id"))),e(r).prop("checked",!0)}):e.each(e(".filter-toggle"),function(t,r){return l.model.set("node_tags",n.without(l.model.get("node_tags"),e(r).data("id"))),e(r).prop("checked",!1)})}),e("#filter-button",this.FilterModal.$el).click(function(e){return l.applyFilter(),l.FilterModal.close()})},o.prototype.updateFilter=function(t){var r;return r=t.currentTarget,r.checked?this.model.set("node_tags",n.union(this.model.get("node_tags"),e(r).data("id"))):this.model.set("node_tags",n.without(this.model.get("node_tags"),e(r).data("id")))},o.prototype.applyFilter=function(){return this.workspaceModel.filter()},o}(r.View)})}.call(this),!function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function r(e,t){return n(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){return(r=n.call(null,i,e,t))?void 0:!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){return(r=n.call(null,i,e,t))?!1:void 0}),!!r):r},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s,o,u=this,a=arguments;return s=function(){r=null,n||(i=e.apply(u,a))},o=n&&!r,clearTimeout(r),r=setTimeout(s,t),o&&(i=e.apply(u,a)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,l=t-(a-o);return n=this,r=arguments,0>=l?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,l)),s}},noop:function(){}}}(),n="0.10.5",r=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function r(e){return function(){var n=[].slice.call(arguments,0);return function(r){var i=[];return t.each(n,function(n){i=i.concat(e(t.toStr(r[n])))}),i}}}return{nonword:n,whitespace:e,obj:{nonword:r(n),whitespace:r(e)}}}(),i=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function r(){this.head=this.tail=null}function i(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new i(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];return t?(this.list.moveToFront(t),t.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new r}}),t.mixin(r.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),s=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function r(e){return JSON.stringify(t.isUndefined(e)?null:e)}function i(e){return JSON.parse(e)}var s,o;try{s=window.localStorage,s.setItem("~~~","!"),s.removeItem("~~~")}catch(u){s=null}return o=s&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),i(s.getItem(this._prefix(e)))},set:function(e,i,o){return t.isNumber(o)?s.setItem(this._ttlKey(e),r(n()+o)):s.removeItem(this._ttlKey(e)),s.setItem(this._prefix(e),r(i))},remove:function(e){return s.removeItem(this._ttlKey(e)),s.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],r=s.length;for(e=0;r>e;e++)(t=s.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var r=i(s.getItem(this._ttlKey(e)));return t.isNumber(r)&&n()>r?!0:!1}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,o),e}(),o=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?r(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=t.cache===!1?new i(0):a}function r(n){return function(r,i){function s(e){t.defer(function(){u.resolve(e)})}function o(e){t.defer(function(){u.reject(e)})}var u=e.Deferred();return n(r,i,s,o),u}}var s=0,o={},u=6,a=new i(10);return n.setMaxPendingRequests=function(e){u=e},n.resetCache=function(){a.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function r(t){n&&n(null,t),c._cache.set(e,t)}function i(){n&&n(!0)}function a(){s--,delete o[e],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var l,c=this;this.cancelled||e!==this.lastUrl||((l=o[e])?l.done(r).fail(i):u>s?(s++,o[e]=this._send(e,t).done(r).fail(i).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,r){var i;return t.isFunction(n)&&(r=n,n={}),this.cancelled=!1,this.lastUrl=e,(i=this._cache.get(e))?t.defer(function(){r&&r(null,i)}):this._get(e,n,r),!!i},cancel:function(){this.cancelled=!0}}),n}(),u=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function r(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function i(){return{ids:[],children:{}}}function s(e){for(var t={},n=[],r=0,i=e.length;i>r;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}function o(e,t){function n(e,t){return e-t}var r=0,i=0,s=[];e=e.sort(n),t=t.sort(n);for(var o=e.length,u=t.length;o>r&&u>i;)e[r]<t[i]?r++:e[r]>t[i]?i++:(s.push(e[r]),r++,i++);return s}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var s,o;s=n.datums.push(e)-1,o=r(n.datumTokenizer(e)),t.each(o,function(e){var t,r,o;for(t=n.trie,r=e.split("");o=r.shift();)t=t.children[o]||(t.children[o]=i()),t.ids.push(s)})})},get:function(e){var n,i,u=this;return n=r(this.queryTokenizer(e)),t.each(n,function(e){var t,n,r,s;if(i&&0===i.length)return!1;for(t=u.trie,n=e.split("");t&&(r=n.shift());)t=t.children[r];return t&&0===n.length?(s=t.ids.slice(0),void (i=i?o(i,s):s)):(i=[],!1)}),i?t.map(s(i),function(e){return u.datums[e]}):[]},reset:function(){this.datums=[],this.trie=i()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),a=function(){"use strict";function r(e){return e.local||null}function i(r){var i,s;return s={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(i=r.prefetch||null)&&(i=t.isString(i)?{url:i}:i,i=t.mixin(s,i),i.thumbprint=n+i.thumbprint,i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",!i.url&&e.error("prefetch requires url to be set")),i}function s(n){function r(e){return function(n){return t.debounce(n,e)}}function i(e){return function(n){return t.throttle(n,e)}}var s,o;return o={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(s=n.remote||null)&&(s=t.isString(s)?{url:s}:s,s=t.mixin(o,s),s.rateLimiter=/^throttle$/i.test(s.rateLimitBy)?i(s.rateLimitWait):r(s.rateLimitWait),s.ajax.type=s.ajax.type||"GET",s.ajax.dataType=s.ajax.dataType||"json",delete s.rateLimitBy,delete s.rateLimitWait,!s.url&&e.error("remote requires url to be set")),s}return{local:r,prefetch:i,remote:s}}();!function(n){"use strict";function i(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=l(t.sorter),this.dupDetector=t.dupDetector||c,this.local=a.local(t),this.prefetch=a.prefetch(t),this.remote=a.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new u({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new s(this.cacheKey):null}function l(e){function n(t){return t.sort(e)}function r(e){return e}return t.isFunction(e)?n:r}function c(){return!1}var p,v;return p=n.Bloodhound,v={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=i,i.noConflict=function(){return n.Bloodhound=p,i},i.tokenizers=r,t.mixin(i.prototype,{_loadPrefetch:function(t){function n(e){s.clear(),s.add(t.filter?t.filter(e):e),s._saveToStorage(s.index.serialize(),t.thumbprint,t.ttl)}var r,i,s=this;return(r=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(r),i=e.Deferred().resolve()):i=e.ajax(t.url,t.ajax).done(n),i},_getFromRemote:function(e,t){function n(e,n){t(e?[]:s.remote.filter?s.remote.filter(n):n)}var r,i,s=this;if(this.transport)return e=e||"",i=encodeURIComponent(e),r=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,i),this.transport.get(r,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(v.data,e,n),this.storage.set(v.protocol,location.protocol,n),this.storage.set(v.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(v.data),n.protocol=this.storage.get(v.protocol),n.thumbprint=this.storage.get(v.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){i.add(t.isFunction(s)?s():s)}var r,i=this,s=this.local;return r=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),s&&r.done(n),this.transport=this.remote?new o(this.remote):null,this.initPromise=r.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function r(e){var r=s.slice(0);t.each(e,function(e){var n;return n=t.some(r,function(t){return i.dupDetector(e,t)}),!n&&r.push(e),r.length<i.limit}),n&&n(i.sorter(r))}var i=this,s=[],o=!1;s=this.index.get(e),s=this.sorter(s).slice(0,this.limit),s.length<this.limit?o=this._getFromRemote(e,r):this._cancelLastRemoteRequest(),o||(s.length>0||!this.transport)&&n&&n(s)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&o.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),i}(this)}(window.jQuery),define("bloodhound",["jquery"],function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/SearchView",["jquery","backbone","bloodhound","typeahead","cs!models/WorkspaceModel","cs!models/ConnectionModel"],function(e,n,r,i,s,o){var u;return u=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el=e("#search-form"),r.prototype.events={"click button":"search"},r.prototype.initialize=function(){var t,n,r,i,s=this;return r=function(e){var t;return t=function(t,n){return e.getNodeNames(function(e){return e=s.findMatchingObjects(t,e),n(_.map(e,function(e){return{value:e.name,type:"node"}}))})}},t=function(t){var n;return n=function(t,n){var r;return r=s.model.documentModel.get("_id"),e.get("/document/"+r+"/connections",function(e){var r;return r=_.uniq(s.findMatchingObjects(t,e),function(e){return e.name}),n(_.map(r,function(e){return{value:e.name,type:"connection"}}))})}},n=function(e,t){return s.model.getTagNames(function(n){var r;return r=s.findMatchingNames(e,n),t(_.map(r,function(e){return{value:e,type:"tag"}}))})},e("#search-input").typeahead({hint:!0,highlight:!0,minLength:0,autoselect:!0},{name:"node-names",source:r(this.model),templates:{empty:" ",header:'<span class="search-title">Nodes</span>'}},{name:"tags",source:n,templates:{empty:" ",header:'<span class="search-title">Tags</span>'}},{name:"conn-names",source:t(this.model),templates:{empty:" ",header:'<span class="search-title">Connections</span>'}}),i=e(".tt-dropdown-menu").remove(),e(".twitter-typeahead").prepend(i).css("max-width","209px").css("overflow-x","hidden").css("box-sizing","border-box"),e(".tt-dropdown-menu").css("position","relative").css("top","auto").css("bottom","5px"),e("#search-input").on("keyup",function(t){if(t.which!==40&&t.which!==38)return e(".tt-suggestion").first().addClass("tt-cursor")}),e("#search-input").on("typeahead:selected",function(e,t,n){return s.search(t)})},r.prototype.search=function(t){var n,r,i=this;return t.type==="node"?(r=this.findLocalNode(t.value),r?(this.model.select(r),this.model.trigger("found:node",r)):this.getNodeByName(t.value,function(e){return setTimeout(function(){return i.model.trigger("found:node",i.model.nodes.findWhere({_id:e._id}))},1500)})):t.type==="tag"?this.model.getNodesByTag(t.value,function(e){var t,n,s,o;o=[];for(n=0,s=e.length;n<s;n++)r=e[n],t=i.findLocalNode(r.name),t?o.push(i.model.select(t)):o.push(i.addNode(r));return o}):t.type==="connection"&&(n=this.findLocalConn(t.value),n&&(this.model.select(n),this.model.trigger("found:node",n.source)),this.model.getConnsByName(t.value,function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],i.model.putNodeFromData(t.source),i.model.putNodeFromData(t.target),i.model.putConnection(new o(t.connection));return setTimeout(function(){return i.model.trigger("found:node",i.model.nodes.findWhere({_id:e[0].source._id}))},500)})),e("#search-input").val("")},r.prototype.addNode=function(e){var t,n=this;return t=this.model.putNodeFromData(e,{force:!0}),t.getConnections(this.model.nodes,function(e){var t,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)t=e[r],s.push(n.model.putConnection(new o(t)));return s})},r.prototype.findLocalNode=function(e){var t;return t=this.findMatchingNames(e,this.model.nodes.pluck("name")),this.model.nodes.findWhere({name:t[0]})},r.prototype.findLocalConn=function(e){var t;return t=this.findMatchingNames(e,this.model.connections.pluck("name")),this.model.connections.findWhere({name:t[0]})},r.prototype.getNodeByName=function(e,t){var n=this;return this.model.getNodeByName(e,function(e){return n.addNode(e),t(e)})},r.prototype.findMatchingNames=function(e,t){var n;return n=new RegExp(e,"i"),_.filter(t,function(e){return n.test(e)})},r.prototype.findMatchingObjects=function(e,t){var n;return n=new RegExp(e,"i"),_.filter(t,function(e){return n.test(e.name)})},r}(n.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/SideBarView",["jquery","underscore","backbone"],function(e,n,r){var i,s=this;return i=function(n){function r(){var e=this;return this.openSidebar=function(t){return r.prototype.openSidebar.apply(e,arguments)},r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el=e("#graph"),r.prototype.events={"click #sidebar-toggle":"toggleSidebar"},r.prototype.initialize=function(){return this.sidebarShown=!1},r.prototype.openSidebar=function(e){if(e.get("selected")&&!this.sidebarShown)return this.toggleSidebar()},r.prototype.toggleSidebar=function(){return this.sidebarShown?(e("#sidebar").animate({width:"0%"}),e("#graph").animate({width:"100%"})):(e("#sidebar").animate({width:"25%"}),e("#graph").animate({width:"75%"})),this.sidebarShown=!this.sidebarShown},r}(r.View)})}.call(this),define("text!templates/new_doc_modal.html",[],function(){return'<form role="form" id="new-doc-form">\n  <div class="form-group">\n    <label for="newDocName">Cograph Name</label>\n    <input type="name" class="form-control" id="newDocName" placeholder="Enter Doc Name">\n  </div>\n  <button type="submit" class="btn btn-primary">Create New</button>\n</form>\n'}),define("text!templates/open_doc_modal.html",[],function(){return'<ul class="document-list list-group">\n  <% documents.each(function(document){ %>\n    <% if (document.get(\'createdBy\') != null) { %>\n      <a href="/<%= document.get(\'createdBy\') %>/document/<%= document.id %>" target="_blank" class="list-group-item">\n        <%= document.get(\'name\') %>\n      </a>\n    <% } else { %>\n      <a href="<%= document.id %>" target="_blank" class="list-group-item">\n        <%= document.get(\'name\') %>\n      </a>\n    <% } %>\n  <% }); %>\n<ul>\n'}),define("text!templates/analytics_modal.html",[],function(){return'<ul class="list-group">\n  <li class="list-group-item">Total nodes: <%=nodeCount%></li>\n  <li class="list-group-item">Total connections: <%=relCount%></li>\n  <% if(typeof highDegreeNode.name !== "undefined" && highDegreeNode.name !== null) { %>\n  <li class="list-group-item">\n    The node with the highest degree is <%= highDegreeNode.name%> with <%=highDegreeNode.degree%> connections.\n  </li>\n  <% } %>\n  <li class="list-group-item">Average connections per node: <%=avgDegree%></li>\n<ul>\n'}),define("text!templates/workspaces_menu_modal.html",[],function(){return'<ul class="workspaces-list list-group">\n  <% _.each(workspaces, function(workspace){ \n    if(workspace._id > 0 && (typeof(workspace.name) !== \'undefined\') && (workspace.name !== null) && workspace.name.length > 0){%>\n    <% if (createdBy != null && createdBy.length > 0) { %>\n      <a href=\'/<%= createdBy %>/document/<%= docId %>/view/<%= workspace._id %>\' target="_blank" class="list-group-item">\n    <% } else { %>\n      <a href=<%= docId %>#<%= workspace._id %> target="_blank" class="list-group-item">\n    <% } %>\n      <%= workspace.name %>\n      <button type="button" class="btn btn-danger btn-sm pull-right center-block delete-workspace", data-id=<%= workspace._id %>>\n        <i class="fa fa-trash-o"></i>\n      </button>\n    </a>\n  <% }}); %>\n  <% if(workspaces.length == 0 ||  _.every(workspaces, function(workspace){\n      return !(workspace._id > 0 && (typeof(workspace.name) !== \'undefined\') && (workspace.name !== null) && workspace.name.length > 0)\n    })) { %>\n  <i>There are no named views for this cograph. Use the save view button to create one</i>\n  <% } %>\n<ul>\n'}),define("text!templates/graph_settings.html",[],function(){return'<form>\n  <div class="form-group">\n    <label for="settings-menu-title">Cograph Name</label>\n    <input id="settings-menu-title" class="form-control" type="text" placeholder="Untitled Doc" value="<%=name%>" />\n  </div>\n</form>\n<h6>Who can view it</h6>\n<a class="public-button-view clickable" title="who can see this graph"></a>\n<div class="btn-group btn-group-justified">\n  <div class="btn-group">\n    <button type="button" data-type="2" class="btn <%=canPublicView == 2 ? \'selected\' : \'\'%> btn-default public-button-view">Anyone</button>\n  </div>\n  <div class="btn-group">\n    <button type="button" data-type="1" class="btn <%=canPublicView == 1 ? \'selected\' : \'\'%> btn-default public-button-view">Anyone with the link</button>\n  </div>\n  <div class="btn-group">\n    <button type="button" data-type="0" class="btn <%=canPublicView == 0 ? \'selected\' : \'\'%> btn-default public-button-view">Only me</button>\n  </div>\n</div>\n<h6>Who can edit it</h6>\n<a class="public-button-edit clickable" title="who can see this graph"></a>\n<div class="btn-group btn-group-justified">\n  <div class="btn-group">\n    <button type="button" data-type="2" class="btn <%=canPublicEdit == 2 ? \'selected\' : \'\'%> btn-default public-button-edit">Anyone</button>\n  </div>\n  <div class="btn-group">\n    <button type="button" data-type="1" class="btn <%=canPublicEdit == 1 ? \'selected\' : \'\'%> btn-default public-button-edit">Anyone with the link</button>\n  </div>\n  <div class="btn-group">\n    <button type="button" data-type="0" class="btn <%=canPublicEdit == 0 ? \'selected\' : \'\'%> btn-default public-button-edit">Only me</button>\n  </div>\n</div>\n<h6>Embed Code</h6>\n<i>(Only works with Viewable by Anyone / Anyone with the link)</i>\n<textarea><%= embed %></textarea>\n<br/>\n<button id="save-graph-settings" class="btn btn-info pull-right">Save Changes</button>'}),define("text!templates/description_box.html",[],function(){return'<% if(description.length > 0 || editable) { %>\n	<div>\n		<span id="description-toggle" class="clickable">\n			<i class="fa fa-caret-up"></i>\n			<small>Description</small> \n		</span> \n	</div>\n	<section id="editable" <% if(editable) { %> contenteditable="true" <% } %>>\n	  <% if(description.length > 0) { %>\n	    <%= description %>\n	  <% } else { %>\n	    Type a short description for your cograph here.\n	  <% } %>\n	</section>\n<% } %>\n'}),define("text!templates/import_tweets_modal.html",[],function(){return'<form role="form" id="twitter-query-form" oninput="amount.value=twitterQuerySlider.value">\n  <div class="form-group">\n    <label for="twitterQueryInput">Search Query</label>\n    <input type="name" class="form-control" id="twitterQueryInput" placeholder="enter search query">\n  </div>\n  <div class="form-group">\n  	<label for="twitterQuerySlider"># of tweets to import</label>\n  	<input id="twitterQuerySlider" type="range" max="100" min="1" step="1" defaultValue="20">\n  	<output name="amount" for="twitterQuerySlider">20</output>\n  </div>\n  <button type="submit" class="btn btn-primary pull-right">Import tweets</button>\n</form>\n'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/MenuView",["jquery","underscore","backbone","bloodhound","typeahead","bootstrap","text!templates/new_doc_modal.html","text!templates/open_doc_modal.html","text!templates/analytics_modal.html","text!templates/workspaces_menu_modal.html","cs!models/DocumentModel","socket-io","text!templates/graph_settings.html","text!templates/description_box.html","text!templates/import_tweets_modal.html"],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m,g;return m=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=c,n.prototype.url="documents",n.prototype.socket=h.connect(""),n}(r.Collection),g=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,i),s.prototype.el=e("body"),s.prototype.events={"click #new-doc-button":"newDocumentModal","click #open-doc-button":"openDocumentModal","click #analytics-button":"openAnalyticsModal","click #workspaces-button":"openWorkspacesModal","click #settings-button":"openSettingsModal","click .public-button-display":"openSettingsModal","click #save-graph-settings":"saveSettings","click .public-button-view":"publicViewChange","click .public-button-edit":"publicEditChange","click #maybe-publish-button":"openSettingsModal","blur #description":"saveDescription","click #description-toggle":"toggleDescription","click #import-tweets-button":"openImportTweetsModal"},s.prototype.initialize=function(){return this.loadBBModal(),this.model.on("document:change",this.render,this),this.model.getDocument().on("change",this.render,this),this.model.getDocument().on("change:public",this.updatePublicButton,this),this.render()},s.prototype.render=function(){var t;return this.updateTitle(),this.updatePublicButton(),this.updatePublishButton(),t=this.model.getDocument().get("publicEdit")>0||n.contains(window.user.documents,this.model.getDocument().get("_id")),e("#description").html(n.template(d,{description:this.model.getDocument().get("description"),editable:t}))},s.prototype.updatePublishButton=function(){return this.model.getDocument().get("publicView")===0||this.model.getDocument().get("publicView")===1?e("#maybe-publish-button").html("<a class='clickable'>Publish</a>"):e(".public-button-display").hasClass("clickable")?e("#maybe-publish-button").html("<a class='clickable'>Settings</a>"):e("#maybe-publish-button").html("")},s.prototype.newDocumentModal=function(){var t=this;return this.newDocModal=(new r.BootstrapModal({content:n.template(u,{}),title:"New Cograph",animate:!0,showFooter:!1})).open(),this.newDocModal.on("shown",function(){return e("#newDocName").focus(),e("#new-doc-form").submit(function(e){return!1})}),e("#new-doc-form",this.newDocModal.$el).click(function(){return t.newDocument(),t.newDocModal.close()})},s.prototype.newDocument=function(){var t,n,r=this;return t=e("#newDocName",this.newDocModal.el).val(),n=new c({name:t}),e.when(n.save()).then(function(){var e;return window.user!=null?(e=window.user.local.name,window.open("/"+e+"/document/"+n.get("_id"),"_blank")):window.open("/"+n.get("_id"),"_blank")})},s.prototype.openImportTweetsModal=function(){return this.importTweetsModal=(new r.BootstrapModal({content:n.template(v,{}),title:"Import tweets",animate:!0,showFooter:!1})).open(),this.importTweetsModal.on("shown",function(){return e("#twitterQueryInput").focus(),e("#twitter-query-form").submit(function(e){})})},s.prototype.importTweets=function(e,t){return!1},s.prototype.openSettingsModal=function(){var t,i,s;if(e(".public-button-display").hasClass("clickable"))return s=this.model.getDocument().get("name"),i=this.model.getDocument().get("publicView"),t=this.model.getDocument().get("publicEdit"),this.openSettingsModal=(new r.BootstrapModal({content:n.template(p,{name:s,canPublicView:i,canPublicEdit:t,embed:this.getEmbed(window.location.href)}),title:"Graph Settings",animate:!0,showFooter:!1})).open()},s.prototype.publicViewChange=function(t){return e(".public-button-view").removeClass("selected"),e(t.currentTarget).addClass("selected")},s.prototype.publicEditChange=function(t){return e(".public-button-edit").removeClass("selected"),e(t.currentTarget).addClass("selected")},s.prototype.saveSettings=function(){var t,n,r;return t=this.model.getDocument(),t.set("name",e("#settings-menu-title").val()),r=e(".public-button-view.selected").data("type"),n=e(".public-button-edit.selected").data("type"),t.set("publicView",r),t.set("publicEdit",n),t.save(),this.openSettingsModal.close(),this.updateTitle(),this.updatePublicButton(),this.updatePublishButton()},s.prototype.saveDescription=function(){return this.model.getDocument().set("description",e.trim(e("#editable").text())),this.model.getDocument().save()},s.prototype.toggleDescription=function(){return e("#description-toggle > i").toggleClass("fa-rotate-180"),e("#description > section").toggle()},s.prototype.updatePublicButton=function(){return this.model.getDocument().get("publicView")!==0?e(".public-button-display").html('<i class="fa fa-globe" title="public"></i>'):e(".public-button-display").html('<i class="fa fa-lock" title="private"></i>')},s.prototype.updateTitle=function(){return e("#menu-title-display").text(this.model.getDocument().get("name")),e(".navbar-doc-title").css("left","calc(50% - "+e(".navbar-doc-title").width()/2+"px")},s.prototype.openDocumentModal=function(){var t,i,s,o=this;return s=window.user,i=new m,s!=null?t={documentIds:s.documents}:t={},e.when(i.fetch({data:t})).then(function(){var e;return e=(new r.BootstrapModal({content:n.template(a,{documents:i}),title:"Open Cograph",animate:!0,showFooter:!1})).open()}),!1},s.prototype.openAnalyticsModal=function(){return this.model.getDocument().getAnalytics(function(e){var t;return t=(new r.BootstrapModal({content:n.template(f,e),title:"Stats",animate:!0,showFooter:!1})).open()}),!1},s.prototype.getEmbed=function(e){return"<div style=\"width: 100%;margin: 0px auto\">\n  <div style='height: 0;width: 100%;padding-bottom: 57.5%;\n  overflow: hidden;position: relative;'>\n    <iframe src='"+e+"' style=\"width: 100%;height: 100%;position: absolute;top: 0;left: 0;\"\n    scrolling='no' frameborder='0' allowfullscreen>\n    </iframe>\n  </div>\n</div>"},s.prototype.openWorkspacesModal=function(){var t,i,s,o,u=this;return i=this.model.getDocument().get("_id"),o=this.model.getDocument().get("workspaces"),t=this.model.getDocument().get("createdBy"),s=(new r.BootstrapModal({content:n.template(l,{docId:i,workspaces:o,createdBy:t}),title:"Open View",animate:!0,showFooter:!1})).open(),s.on("shown",function(){return e(".delete-workspace").on("click",function(t){return t.preventDefault(),u.model.deleteWorkspace(e(t.currentTarget).attr("data-id"),function(e){return s.close()})})}),!1},s.prototype.loadBBModal=function(){return function(e,t,n){var r,i,s;return s=t.templateSettings,t.templateSettings={interpolate:/\{\{(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g},i=t.template('<div class="modal-dialog">\n  <div class="modal-content">\n    <% if (title) { %>\n    <div class="modal-header">\n      <% if (allowCancel) { %>\n      <a class="close">&times;</a>\n      <% } %>\n      <h4>{{title}}</h4>\n    </div>\n    <% } %>\n  <div class="modal-body">{{content}}</div>\n  <% if (showFooter) { %>\n    <div class="modal-footer">\n      <% if (allowCancel) { %>\n        <% if (cancelText) { %>\n          <a href="#" class="btn cancel">{{cancelText}}</a>\n        <% } %>\n      <% } %>\n      <a href="#" class="btn ok btn-primary">{{okText}}</a>\n    </div>\n  <% } %>\n  </div>\n</div>'),t.templateSettings=s,r=n.View.extend({className:"modal",events:{"click .close":function(e){e.preventDefault(),this.trigger("cancel");if(this.options.content&&this.options.content.trigger)return this.options.content.trigger("cancel",this)},"click .cancel":function(e){e.preventDefault(),this.trigger("cancel");if(this.options.content&&this.options.content.trigger)return this.options.content.trigger("cancel",this)},"click .ok":function(e){e.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this);if(this.options.okCloses)return this.close()},keypress:function(e){if(this.options.enterTriggersOk&&e.which===13){e.preventDefault(),this.trigger("ok"),this.options.content&&this.options.content.trigger&&this.options.content.trigger("ok",this);if(this.options.okCloses)return this.close()}}},initialize:function(e){return this.options=t.extend({title:null,okText:"OK",focusOk:!0,okCloses:!0,cancelText:"Cancel",showFooter:!0,allowCancel:!0,escape:!0,animate:!1,template:i,enterTriggersOk:!1},e)},render:function(){var e,t,n,r;return t=this.$el,r=this.options,n=r.content,t.html(r.template(r)),e=this.$content=t.find(".modal-body"),n&&n.$el&&(n.render(),t.find(".modal-body").html(n.$el)),r.animate&&t.addClass("fade"),this.isRendered=!0,this},open:function(n){var i,s,o,u,a,f;return this.isRendered||this.render(),f=this,s=this.$el,s.modal(t.extend({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"},this.options.modalOptions)),s.one("shown.bs.modal",function(){return f.options.focusOk&&s.find(".btn.ok").focus(),f.options.content&&f.options.content.trigger&&f.options.content.trigger("shown",f),f.trigger("shown")}),a=r.count,i=e(".modal-backdrop:eq("+a+")"),o=parseInt(i.css("z-index"),10),u=parseInt(i.css("z-index"),10),i.css("z-index",o+a),this.$el.css("z-index",u+a),this.options.allowCancel&&(i.one("click",function(){return f.options.content&&f.options.content.trigger&&f.options.content.trigger("cancel",f),f.trigger("cancel")}),e(document).one("keyup.dismiss.modal",function(e){e.which===27&&f.trigger("cancel");if(f.options.content&&f.options.content.trigger)return e.which===27&&f.options.content.trigger("shown",f)})),this.on("cancel",function(){return f.close()}),r.count++,n&&f.on("ok",n),this},close:function(){var e,t,n;n=this,e=this.$el;if(this._preventClose){this._preventClose=!1;return}e.one("hidden.bs.modal",t=function(r){if(r.target!==r.currentTarget)return e.one("hidden",t);n.remove(),n.options.content&&n.options.content.trigger&&n.options.content.trigger("hidden",n),n.trigger("hidden")}),e.modal("hide"),r.count--},preventClose:function(){this._preventClose=!0}},{count:0}),n.BootstrapModal=r}(jQuery,n,r)},s}(r.View)})}.call(this),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("share-button",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Share=e()}}(function(){function r(e){return""+e.selector+"{width:92px;height:20px;-webkit-touch-callout:none;-khtml-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"+e.selector+" [class*=entypo-]:before{font-family:entypo,sans-serif}"+e.selector+" label{font-size:16px;cursor:pointer;margin:0;padding:5px 10px;border-radius:5px;background:#a29baa;color:#333;-webkit-transition:all .3s ease;transition:all .3s ease}"+e.selector+" label:hover{opacity:.8}"+e.selector+" label span{text-transform:uppercase;font-size:.9em;font-family:Lato,sans-serif;font-weight:700;-webkit-font-smoothing:antialiased;padding-left:6px}"+e.selector+" .social{opacity:0;-webkit-transition:all .4s ease;transition:all .4s ease;margin-left:-15px;visibility:hidden}"+e.selector+" .social.top{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;margin-top:-80px}"+e.selector+" .social.bottom{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;margin-top:5px}"+e.selector+" .social.middle{margin-top:-34px}"+e.selector+" .social.middle.right{-webkit-transform-origin:5% 50%;-ms-transform-origin:5% 50%;transform-origin:5% 50%;margin-left:105px}"+e.selector+" .social.middle.left{-webkit-transform-origin:5% 50%;-ms-transform-origin:5% 50%;transform-origin:5% 50%}"+e.selector+" .social.right{margin-left:14px}"+e.selector+" .social.load{-webkit-transition:none!important;transition:none!important}"+e.selector+" .social.networks-1{width:60px}"+e.selector+" .social.networks-1.center,"+e.selector+" .social.networks-1.left{margin-left:14px}"+e.selector+" .social.networks-1.middle.left{margin-left:-70px}"+e.selector+" .social.networks-1 ul{width:60px}"+e.selector+" .social.networks-2{width:120px}"+e.selector+" .social.networks-2.center{margin-left:-13px}"+e.selector+" .social.networks-2.left{margin-left:-44px}"+e.selector+" .social.networks-2.middle.left{margin-left:-130px}"+e.selector+" .social.networks-2 ul{width:120px}"+e.selector+" .social.networks-3{width:180px}"+e.selector+" .social.networks-3.center{margin-left:-45px}"+e.selector+" .social.networks-3.left{margin-left:-102px}"+e.selector+" .social.networks-3.middle.left{margin-left:-190px}"+e.selector+" .social.networks-3 ul{width:180px}"+e.selector+" .social.networks-4{width:240px}"+e.selector+" .social.networks-4.center{margin-left:-75px}"+e.selector+" .social.networks-4.left{margin-left:162px}"+e.selector+" .social.networks-4.middle.left{margin-left:-250px}"+e.selector+" .social.networks-4 ul{width:240px}"+e.selector+" .social.networks-5{width:300px}"+e.selector+" .social.networks-5.center{margin-left:-105px}"+e.selector+" .social.networks-5.left{margin-left:-225px}"+e.selector+" .social.networks-5.middle.left{margin-left:-320px}"+e.selector+" .social.networks-5 ul{width:300px}"+e.selector+" .social.active{opacity:1;-webkit-transition:all .4s ease;transition:all .4s ease;visibility:visible}"+e.selector+" .social.active.top{-webkit-transform:scale(1) translateY(-10px);-ms-transform:scale(1) translateY(-10px);transform:scale(1) translateY(-10px)}"+e.selector+" .social.active.bottom{-webkit-transform:scale(1) translateY(15px);-ms-transform:scale(1) translateY(15px);transform:scale(1) translateY(15px)}"+e.selector+" .social.active.middle.right{-webkit-transform:scale(1) translateX(10px);-ms-transform:scale(1) translateX(10px);transform:scale(1) translateX(10px)}"+e.selector+" .social.active.middle.left{-webkit-transform:scale(1) translateX(-10px);-ms-transform:scale(1) translateX(-10px);transform:scale(1) translateX(-10px)}"+e.selector+" .social ul{position:relative;left:0;right:0;height:46px;color:#fff;margin:auto;padding:0;list-style:none}"+e.selector+" .social ul li{font-size:20px;cursor:pointer;width:60px;margin:0;padding:12px 0;text-align:center;float:left;display:none;height:22px;position:relative;z-index:2;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-transition:all .3s ease;transition:all .3s ease}"+e.selector+" .social ul li:hover{color:rgba(0,0,0,.5)}"+e.selector+" .social li[class*=facebook]{background:#3b5998;display:"+e.networks.facebook.display+"}"+e.selector+" .social li[class*=twitter]{background:#6cdfea;display:"+e.networks.twitter.display+"}"+e.selector+" .social li[class*=gplus]{background:#e34429;display:"+e.networks.google_plus.display+"}"+e.selector+" .social li[class*=pinterest]{background:#c5282f;display:"+e.networks.pinterest.display+"}"+e.selector+" .social li[class*=paper-plane]{background:#42c5b0;display:"+e.networks.email.display+"}"}var e,t,n,i;"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var e,t,n;return n=function(e){return function(n){var r,i;r=t.className.split(/\s+/),i=r.indexOf(n),e(r,i,n),t.className=r.join(" ")}},t=this,e={add:n(function(e,t,n){~t||e.push(n)}),remove:n(function(e,t){~t&&e.splice(t,1)}),toggle:n(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}},Object.defineProperty(e,"length",{get:function(){return t.className.split(/\s+/).length}}),e}}),i=function(){function e(){}return e.prototype.extend=function(e,t,n){var r,i;for(i in t)r=void 0!==e[i],r&&"object"==typeof t[i]?this.extend(e[i],t[i],n):(n||!r)&&(e[i]=t[i])},e.prototype.hide=function(e){return e.style.display="none"},e.prototype.show=function(e){return e.style.display="block"},e.prototype.has_class=function(e,t){return e.classList.contains(t)},e.prototype.add_class=function(e,t){return e.classList.add(t)},e.prototype.remove_class=function(e,t){return e.classList.remove(t)},e.prototype.is_encoded=function(e){return decodeURIComponent(e)!==e},e.prototype.encode=function(e){return this.is_encoded(e)?e:encodeURIComponent(e)},e.prototype.popup=function(e,t){var n,r,i,s;return null==t&&(t={}),r={width:500,height:350},r.top=screen.height/2-r.height/2,r.left=screen.width/2-r.width/2,i=function(){var e;e=[];for(n in t)s=t[n],e.push(""+n+"="+this.encode(s));return e}.call(this).join("&"),i&&(i="?"+i),window.open(e+i,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,left="+r.left+",top="+r.top+",width="+r.width+",height="+r.height)},e}();var s,o={}.hasOwnProperty,u=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};return s=function(e){function t(e,t){var n;return this.element=e,this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabled_networks:0,protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",url:window.location.href,caption:null,title:(n=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))?n.getAttribute("content"):(n=document.querySelector("title"))?n.innerText:void 0,image:(n=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))?n.getAttribute("content"):void 0,description:(n=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?n.getAttribute("content"):"",ui:{flyout:"top center",button_text:"Share",button_font:!0,icon_font:!0},networks:{google_plus:{enabled:!0,url:null},twitter:{enabled:!0,url:null,description:null},facebook:{enabled:!0,load_sdk:!0,url:null,app_id:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!0,url:null,image:null,description:null},email:{enabled:!0,title:null,description:null}}},this.setup(e,t),this}return u(t,e),t.prototype.setup=function(e,t){var n,r,i,s,o;for(i=document.querySelectorAll(e),this.extend(this.config,t,!0),this.set_global_configuration(),this.normalize_network_configuration(),this.config.ui.icon_font&&this.inject_icons(),this.config.ui.button_font&&this.inject_fonts(),this.config.networks.facebook.enabled&&this.config.networks.facebook.load_sdk&&this.inject_facebook_sdk(),n=s=0,o=i.length;o>s;n=++s)r=i[n],this.setup_instance(e,n)},t.prototype.setup_instance=function(e,t){var n,r,i,s,o,u,a,f,l=this;for(r=document.querySelectorAll(e)[t],this.hide(r),this.add_class(r,"sharer-"+t),r=document.querySelectorAll(e)[t],this.inject_css(r),this.inject_html(r),this.show(r),i=r.getElementsByTagName("label")[0],n=r.getElementsByClassName("social")[0],o=r.getElementsByTagName("li"),this.add_class(n,"networks-"+this.config.enabled_networks),i.addEventListener("click",function(){return l.event_toggle(n)}),l=this,f=[],t=u=0,a=o.length;a>u;t=++u)s=o[t],f.push(s.addEventListener("click",function(){return l.event_network(r,this),l.event_close(n)}));return f},t.prototype.event_toggle=function(e){return this.has_class(e,"active")?this.event_close(e):this.event_open(e)},t.prototype.event_open=function(e){return this.has_class(e,"load")&&this.remove_class(e,"load"),this.add_class(e,"active")},t.prototype.event_close=function(e){return this.remove_class(e,"active")},t.prototype.event_network=function(e,t){var n;return n=t.getAttribute("data-network"),this.hook("before",n,e),this["network_"+n](),this.hook("after",n,e)},t.prototype.open=function(){return this["public"]("open")},t.prototype.close=function(){return this["public"]("close")},t.prototype.toggle=function(){return this["public"]("toggle")},t.prototype["public"]=function(e){var t,n,r,i,s,o,u;for(o=document.querySelectorAll(this.element),u=[],n=i=0,s=o.length;s>i;n=++i)r=o[n],t=r.getElementsByClassName("social")[0],u.push(this["event_"+e](t));return u},t.prototype.network_facebook=function(){return this.config.networks.facebook.load_sdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this.popup("https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})},t.prototype.network_twitter=function(){return this.popup("https://twitter.com/intent/tweet",{text:this.config.networks.twitter.description,url:this.config.networks.twitter.url})},t.prototype.network_google_plus=function(){return this.popup("https://plus.google.com/share",{url:this.config.networks.google_plus.url})},t.prototype.network_pinterest=function(){return this.popup("https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})},t.prototype.network_email=function(){return this.popup("mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description})},t.prototype.inject_icons=function(){return this.inject_stylesheet("https://www.sharebutton.co/fonts/v2/entypo.min.css")},t.prototype.inject_fonts=function(){return this.inject_stylesheet("http://fonts.googleapis.com/css?family=Lato:900&text="+this.config.ui.button_text)},t.prototype.inject_stylesheet=function(e){var t;return this.el.head.querySelector('link[href="'+e+'"]')?void 0:(t=document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),this.el.head.appendChild(t))},t.prototype.inject_css=function(e){var t,n,i,s;return i="."+e.getAttribute("class").split(" ").join("."),this.el.head.querySelector("meta[name='sharer"+i+"']")?void 0:(this.config.selector=i,t=r(this.config),s=document.createElement("style"),s.type="text/css",s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t)),this.el.head.appendChild(s),delete this.config.selector,n=document.createElement("meta"),n.setAttribute("name","sharer"+i),this.el.head.appendChild(n))},t.prototype.inject_html=function(e){return e.innerHTML="<label class='entypo-export'><span>"+this.config.ui.button_text+"</span></label><div class='social load "+this.config.ui.flyout+"'><ul><li class='entypo-pinterest' data-network='pinterest'></li><li class='entypo-twitter' data-network='twitter'></li><li class='entypo-facebook' data-network='facebook'></li><li class='entypo-gplus' data-network='google_plus'></li><li class='entypo-paper-plane' data-network='email'></li></ul></div>"},t.prototype.inject_facebook_sdk=function(){var e,t;return window.FB||!this.config.networks.facebook.app_id||this.el.body.querySelector("#fb-root")?void 0:(t=document.createElement("script"),t.text="window.fbAsyncInit=function(){FB.init({appId:'"+this.config.networks.facebook.app_id+"',status:true,xfbml:true})};(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n)){return}r=e.createElement(t);r.id=n;r.src='"+this.config.protocol+"connect.facebook.net/en_US/all.js';i.parentNode.insertBefore(r,i)})(document,'script','facebook-jssdk')",e=document.createElement("div"),e.id="fb-root",this.el.body.appendChild(e),this.el.body.appendChild(t))},t.prototype.hook=function(e,t,n){var r,i;r=this.config.networks[t][e],"function"==typeof r&&(i=r.call(this.config.networks[t],n),void 0!==i&&(i=this.normalize_filter_config_updates(i),this.extend(this.config.networks[t],i,!0),this.normalize_network_configuration()))},t.prototype.set_global_configuration=function(){var e,t,n,r,i,s;i=this.config.networks,s=[];for(t in i){r=i[t];for(n in r)null==this.config.networks[t][n]&&(this.config.networks[t][n]=this.config[n]);this.config.networks[t].enabled?(e="block",this.config.enabled_networks+=1):e="none",s.push(this.config.networks[t].display=e)}return s},t.prototype.normalize_network_configuration=function(){return this.config.networks.facebook.app_id||(this.config.networks.facebook.load_sdk=!1),this.is_encoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description)),"integer"==typeof this.config.networks.facebook.app_id?this.config.networks.facebook.app_id=this.config.networks.facebook.app_id.toString():void 0},t.prototype.normalize_filter_config_updates=function(e){return this.config.networks.facebook.app_id!==e.app_id&&(console.warn("You are unable to change the Facebook app_id after the button has been initialized. Please update your Facebook filters accordingly."),delete e.app_id),this.config.networks.facebook.load_sdk!==e.load_sdk&&(console.warn("You are unable to change the Facebook load_sdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete e.app_id),e},t}(i),s}),define("text!templates/save_view_modal.html",[],function(){return'<form role="form" id="save-doc-form">\n  <div class="form-group">\n    <label for="saveDocName">View Name</label>\n    <input type="name" class="form-control" id="saveDocName" placeholder="Enter View Name">\n  </div>\n  <button type="submit" class="btn btn-primary">Create View</button>\n</form>\n'}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/ShareView",["jquery","underscore","backbone","share-button","text!templates/save_view_modal.html"],function(e,n,r,i,s){var o;return o=function(o){function u(){return u.__super__.constructor.apply(this,arguments)}return t(u,o),u.prototype.el=e("body"),u.prototype.events={"click #save-workspace-button":"saveWorkspaceModal"},u.prototype.initialize=function(){var t=this;return this.graphView=this.attributes.graphView,this.showingShareButtons=!1,e("#sharing-toggle").click(function(){return t.showingShareButtons?t.share.close():t.saveWorkspace("",function(){return e(".entypo-export").trigger("click")}),t.showingShareButtons=!t.showingShareButtons}),e("#graph").click(function(){if(t.showingShareButtons)return e("#sharing-toggle").trigger("click")})},u.prototype.updateSharing=function(){return this.share=new i("#phantom-share",{ui:{flyout:"bottom right"},title:"Check out "+this.model.documentModel.get("name")+" on cograph.",networks:{pinterest:{enabled:!1},email:{description:"Check out "+this.model.documentModel.get("name")+" on cograph at "+window.location.href+"."},facebook:{title:this.model.documentModel.get("name")+" on cograph",description:"Check out "+this.model.documentModel.get("name")+" on cograph.",app_id:315770905267996},twitter:{description:"Check out "+this.model.documentModel.get("name")+" on cograph: "}}}),e(".entypo-export").hide()},u.prototype.saveWorkspace=function(e,t){var n=this;return this.model.sync("create",this.model,{success:function(r){n.trigger("save:workspace",r._id),n.model.set("name",e||""),n.model.sync("update",n.model),n.updateSharing();if(t)return t()}})},u.prototype.saveWorkspaceModal=function(){var t=this;return this.saveDocModal=(new r.BootstrapModal({content:n.template(s,{}),title:"Save View",animate:!0,showFooter:!1})).open(),this.saveDocModal.on("shown",function(){return e("#saveDocName").focus()}),this.model.set("zoom",this.graphView.zoom.scale()),this.model.set("translate",this.graphView.zoom.translate()),e("#save-doc-form",this.saveDocModal.$el).submit(function(){return t.saveWorkspace(e("#saveDocName").val()),t.saveDocModal.close(),!1})},u}(r.View)})}.call(this);var Base64=function(){return{encode:function(e){var t="",n,r,i,s,o,u,a=0;do n=e.charCodeAt(a++),r=e.charCodeAt(a++),i=e.charCodeAt(a++),s=n>>2,n=(n&3)<<4|r>>4,o=(r&15)<<2|i>>6,u=i&63,isNaN(r)?o=u=64:isNaN(i)&&(u=64),t=t+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(u);while(a<e.length);return t},decode:function(e){var t="",n,r,i,s,o,u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(u++)),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(u++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(u++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(u++)),n=n<<2|r>>4,r=(r&15)<<4|s>>2,i=(s&3)<<6|o,t+=String.fromCharCode(n),64!=s&&(t+=String.fromCharCode(r)),64!=o&&(t+=String.fromCharCode(i));while(u<e.length);return t}}}();"undefined"!=typeof exports?module.exports=Base64:window.Base64=Base64,function(e){e.feedback=function(t){function n(){canDraw=!1,e(document).off("mouseenter mouseleave",".feedback-helper"),e(document).off("mouseup keyup"),e(document).off("mousedown",".feedback-setblackout"),e(document).off("mousedown",".feedback-sethighlight"),e(document).off("mousedown click","#feedback-close"),e(document).off("mousedown","#feedback-canvas"),e(document).off("click","#feedback-highlighter-next"),e(document).off("click","#feedback-highlighter-back"),e(document).off("click","#feedback-welcome-next"),e(document).off("click","#feedback-overview-back"),e(document).off("mouseleave","body"),e(document).off("mouseenter",".feedback-helper"),e(document).off("selectstart dragstart",document),e("#feedback-module").off("click",".feedback-wizard-close,.feedback-close-btn"),e(document).off("click","#feedback-submit"),u.highlightElement&&(e(document).off("click","#feedback-canvas"),e(document).off("mousemove","#feedback-canvas")),e('[data-highlighted="true"]').removeAttr("data-highlight-id").removeAttr("data-highlighted"),e("#feedback-module").remove(),e(".feedback-btn").show(),u.onClose.call(this)}function r(t,n){n="undefined"!=typeof n?n:!0,t.clearRect(0,0,e("#feedback-canvas").width(),e("#feedback-canvas").height()),t.fillStyle="rgba(102,102,102,0.5)",t.fillRect(0,0,e("#feedback-canvas").width(),e("#feedback-canvas").height()),e(".feedback-helper").each(function(){"highlight"==e(this).attr("data-type")&&n&&i(t,parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height())}),e(".feedback-helper").each(function(){"highlight"==e(this).attr("data-type")&&t.clearRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height())}),e(".feedback-helper").each(function(){"blackout"==e(this).attr("data-type")&&(t.fillStyle="rgba(0,0,0,1)",t.fillRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height()))})}function i(e,t,n,r,i){e.strokeStyle=u.strokeStyle,e.shadowColor=u.shadowColor,e.shadowOffsetX=u.shadowOffsetX,e.shadowOffsetY=u.shadowOffsetY,e.shadowBlur=u.shadowBlur,e.lineJoin=u.lineJoin,e.lineWidth=u.lineWidth,e.strokeRect(t,n,r,i),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.lineWidth=1}function s(){var t=post.img.replace("data:image/png;base64","");e.ajax({url:"https://api.imgur.com/3/image",method:"POST",headers:{Authorization:"Client-ID f96237dac275b5e",Accept:"application/json"},data:{image:t,type:"base64"},success:function(t){u.imgurURL=String("https://i.imgur.com/"+t.data.id+".png"),e("#feedback-canvas").remove(),o()}})}function o(){e.ajax({url:u.serverURL,type:"POST",crossDomain:!0,contentType:"application/json",data:JSON.stringify({url:u.githubpath,title:"Feedback: "+post.note.substring(0,20),body:post.note+"\n![screenshot]("+u.imgurURL+")\n"+JSON.stringify(post.browser)+"\n",labels:["feedback"]}),dataType:"text",success:function(e){console.log(e)},error:function(e){console.error("Failed to connect"),console.log(e)}})}var u=e.extend({imgurURL:"",serverURL:"",githubpath:"",placement:"bottom",hexColor:"#146eb4",postBrowserInfo:!0,postHTML:!0,postURL:!0,proxy:void 0,letterRendering:!1,initButtonText:"Feedback",strokeStyle:"black",shadowColor:"black",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:10,lineJoin:"bevel",lineWidth:3,html2canvasURL:"html2canvas.js",tpl:{description:'<div id="feedback-welcome"><div class="feedback-logo">Feedback</div><p>Feedback lets you send us suggestions about our products. We welcome problem reports, feature ideas and general comments.</p><p>Start by writing a brief description:</p><textarea id="feedback-note-tmp"></textarea><p>Next we\'ll let you identify areas of the page related to your description.</p><button id="feedback-welcome-next" class="feedback-next-btn feedback-btn-gray">Next</button><div id="feedback-welcome-error">Please enter a description.</div><div class="feedback-wizard-close"></div></div>',highlighter:'<div id="feedback-highlighter"><div class="feedback-logo">Feedback</div><p>Click and drag on the page to help us better understand your feedback. You can move this dialog if it\'s in the way.</p><button class="feedback-sethighlight feedback-active"><div class="ico"></div><span>Highlight</span></button><label>Highlight areas relevant to your feedback.</label><button class="feedback-setblackout"><div class="ico"></div><span>Black out</span></button><label class="lower">Black out any personal information.</label><div class="feedback-buttons"><button id="feedback-highlighter-next" class="feedback-next-btn feedback-btn-gray">Next</button><button id="feedback-highlighter-back" class="feedback-back-btn feedback-btn-gray">Back</button></div><div class="feedback-wizard-close"></div></div>',overview:'<div id="feedback-overview"><div class="feedback-logo">Feedback</div><div id="feedback-overview-description"><div id="feedback-overview-description-text"><h3>Description</h3><h3 class="feedback-additional">Additional info</h3><div id="feedback-additional-none"><span>None</span></div><div id="feedback-browser-info"><span>Browser Info</span></div><div id="feedback-page-info"><span>Page Info</span></div><div id="feedback-page-structure"><span>Page Structure</span></div></div></div><div id="feedback-overview-screenshot"><h3>Screenshot</h3></div><div class="feedback-buttons"><button id="feedback-submit" class="feedback-submit-btn feedback-btn-blue">Submit</button><button id="feedback-overview-back" class="feedback-back-btn feedback-btn-gray">Back</button></div><div id="feedback-overview-error">Please enter a description.</div><div class="feedback-wizard-close"></div></div>',submitSuccess:'<div id="feedback-submit-success"><div class="feedback-logo">Feedback</div><p>Thank you for your feedback. We value every piece of feedback we receive.</p><p>We cannot respond individually to every one, but we will use your comments as we strive to improve your experience.</p><button class="feedback-close-btn feedback-btn-blue">OK</button><div class="feedback-wizard-close"></div></div>',submitError:'<div id="feedback-submit-error"><div class="feedback-logo">Feedback</div><p>Sadly an error occured while sending your feedback. Please try again.</p><button class="feedback-close-btn feedback-btn-blue">OK</button><div class="feedback-wizard-close"></div></div>'},onClose:function(){},screenshotStroke:!0,highlightElement:!0,initialBox:!1},t),f=!1;window.HTMLCanvasElement&&(e("body").eq(0).append('<button style="background:'+u.hexColor+'" class="feedback-btn feedback-btn-blue feedback-placement-'+u.placement+'">'+u.initButtonText+"</button>"),e(document).on("click",".feedback-btn",function(){e(this).hide(),f||e.getScript(u.html2canvasURL,function(){f=!0});var t=!1,o="",l=e(document).height(),c=e(document).width(),h='<div id="feedback-module">';u.initialBox&&(h+=u.tpl.description),h+=u.tpl.highlighter+u.tpl.overview+'<canvas id="feedback-canvas"></canvas><div id="feedback-helpers"></div><input id="feedback-note" name="feedback-note" type="hidden"></div>',e("body").eq(0).append(h),moduleStyle={position:"absolute",left:"0px",top:"0px"},canvasAttr={width:c,height:l},e("#feedback-module").css(moduleStyle),e("#feedback-canvas").attr(canvasAttr).css("z-index","30000"),u.initialBox||(e("#feedback-highlighter-back").remove(),t=!0,e("#feedback-canvas").css("cursor","crosshair"),e("#feedback-helpers").show(),e("#feedback-welcome").hide(),e("#feedback-highlighter").show()),e("#feedback-highlighter").on("mousedown",function(t){var n=e(this).addClass("feedback-draggable"),r=n.outerHeight(),i=n.outerWidth(),s=n.offset().top+r-t.pageY,o=n.offset().left+i-t.pageX;n.css("z-index",4e4).parents().on("mousemove",function(t){_top=t.pageY+s-r,_left=t.pageX+o-i,_bottom=r-t.pageY,_right=i-t.pageX,0>_left&&(_left=0),0>_top&&(_top=0),_right>e(window).width()&&(_left=e(window).width()-i),_left>e(window).width()-i&&(_left=e(window).width()-i),_bottom>e(document).height()&&(_top=e(document).height()-r),_top>e(document).height()-r&&(_top=e(document).height()-r),e(".feedback-draggable").offset({top:_top,left:_left}).on("mouseup",function(){e(this).removeClass("feedback-draggable")})}),t.preventDefault()}).on("mouseup",function(){e(this).removeClass("feedback-draggable"),e(this).parents().off("mousemove mousedown")});var p=e("#feedback-canvas")[0].getContext("2d");p.fillStyle="rgba(102,102,102,0.5)",p.fillRect(0,0,e("#feedback-canvas").width(),e("#feedback-canvas").height()),rect={},drag=!1,highlight=1,post={},u.postBrowserInfo&&(post.browser={},post.browser.appCodeName=navigator.appCodeName,post.browser.appName=navigator.appName,post.browser.appVersion=navigator.appVersion,post.browser.cookieEnabled=navigator.cookieEnabled,post.browser.onLine=navigator.onLine,post.browser.platform=navigator.platform,post.browser.userAgent=navigator.userAgent,post.browser.plugins=[],e.each(navigator.plugins,function(e){post.browser.plugins.push(navigator.plugins[e].name)}),e("#feedback-browser-info").show()),u.postURL&&(post.url=document.URL,e("#feedback-page-info").show()),u.postHTML&&(post.html=e("html").html(),e("#feedback-page-structure").show()),u.postBrowserInfo||u.postURL||u.postHTML||e("#feedback-additional-none").show(),e(document).on("mousedown","#feedback-canvas",function(n){t&&(rect.startX=n.pageX-e(this).offset().left,rect.startY=n.pageY-e(this).offset().top,rect.w=0,rect.h=0,drag=!0)}),e(document).on("mouseup",function(){if(t){drag=!1;var n=rect.startY,i=rect.startX,s=rect.w,o=rect.h;dtype="highlight",0!=s&&0!=o&&(0>s&&(i+=s,s*=-1),0>o&&(n+=o,o*=-1),n+o>e(document).height()&&(o=e(document).height()-n),i+s>e(document).width()&&(s=e(document).width()-i),0==highlight&&(dtype="blackout"),e("#feedback-helpers").append('<div class="feedback-helper" data-type="'+dtype+'" data-time="'+Date.now()+'" style="position:absolute;top:'+n+"px;left:"+i+"px;width:"+s+"px;height:"+o+'px;z-index:30000;"></div>'),r(p),rect.w=0)}}),e(document).on("mousemove",function(n){t&&drag&&(e("#feedback-highlighter").css("cursor","default"),rect.w=n.pageX-e("#feedback-canvas").offset().left-rect.startX,rect.h=n.pageY-e("#feedback-canvas").offset().top-rect.startY,p.clearRect(0,0,e("#feedback-canvas").width(),e("#feedback-canvas").height()),p.fillStyle="rgba(102,102,102,0.5)",p.fillRect(0,0,e("#feedback-canvas").width(),e("#feedback-canvas").height()),e(".feedback-helper").each(function(){"highlight"==e(this).attr("data-type")&&i(p,parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height())}),1==highlight&&(i(p,rect.startX,rect.startY,rect.w,rect.h),p.clearRect(rect.startX,rect.startY,rect.w,rect.h)),e(".feedback-helper").each(function(){"highlight"==e(this).attr("data-type")&&p.clearRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height())}),e(".feedback-helper").each(function(){"blackout"==e(this).attr("data-type")&&(p.fillStyle="rgba(0,0,0,1)",p.fillRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height()))}),0==highlight&&(p.fillStyle="rgba(0,0,0,0.5)",p.fillRect(rect.startX,rect.startY,rect.w,rect.h)))});if(u.highlightElement){var d=[],v=[],m=0;e(document).on("mousemove click","#feedback-canvas",function(n){if(t){r(p),v=[],e("#feedback-canvas").css("cursor","crosshair"),e("* :not(body,script,iframe,div,section,.feedback-btn,#feedback-module *)").each(function(){"true"!==e(this).attr("data-highlighted")&&n.pageX>e(this).offset().left&&n.pageX<e(this).offset().left+e(this).width()&&n.pageY>e(this).offset().top+parseInt(e(this).css("padding-top"),10)&&n.pageY<e(this).offset().top+e(this).height()+parseInt(e(this).css("padding-top"),10)&&v.push(e(this))});var s=v[v.length-1];if(s&&!drag){e("#feedback-canvas").css("cursor","pointer");var o=s.offset().left-2,u=s.offset().top-2,f=s.width()+parseInt(s.css("padding-left"),10)+parseInt(s.css("padding-right"),10)+6,s=s.height()+parseInt(s.css("padding-top"),10)+parseInt(s.css("padding-bottom"),10)+6;1==highlight&&(i(p,o,u,f,s),p.clearRect(o,u,f,s),dtype="highlight"),e(".feedback-helper").each(function(){"highlight"==e(this).attr("data-type")&&p.clearRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height())}),0==highlight&&(dtype="blackout",p.fillStyle="rgba(0,0,0,0.5)",p.fillRect(o,u,f,s)),e(".feedback-helper").each(function(){"blackout"==e(this).attr("data-type")&&(p.fillStyle="rgba(0,0,0,1)",p.fillRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height()))}),"click"==n.type&&n.pageX==rect.startX&&n.pageY==rect.startY&&(e("#feedback-helpers").append('<div class="feedback-helper" data-highlight-id="'+m+'" data-type="'+dtype+'" data-time="'+Date.now()+'" style="position:absolute;top:'+u+"px;left:"+o+"px;width:"+f+"px;height:"+s+'px;z-index:30000;"></div>'),d.push(m),++m,r(p))}}})}e(document).on("mouseleave","body,#feedback-canvas",function(){r(p)}),e(document).on("mouseenter",".feedback-helper",function(){r(p)}),e(document).on("click","#feedback-welcome-next",function(){0<e("#feedback-note").val().length?(t=!0,e("#feedback-canvas").css("cursor","crosshair"),e("#feedback-helpers").show(),e("#feedback-welcome").hide(),e("#feedback-highlighter").show()):e("#feedback-welcome-error").show()}),e(document).on("mouseenter mouseleave",".feedback-helper",function(t){drag||(rect.w=0,rect.h=0,"mouseenter"===t.type?(e(this).css("z-index","30001"),e(this).append('<div class="feedback-helper-inner" style="width:'+(e(this).width()-2)+"px;height:"+(e(this).height()-2)+'px;position:absolute;margin:1px;"></div>'),e(this).append('<div id="feedback-close"></div>'),e(this).find("#feedback-close").css({top:-1*(e(this).find("#feedback-close").height()/2)+"px",left:e(this).width()-e(this).find("#feedback-close").width()/2+"px"}),"blackout"==e(this).attr("data-type")&&(p.clearRect(0,0,e("#feedback-canvas").width(),e("#feedback-canvas").height()),p.fillStyle="rgba(102,102,102,0.5)",p.fillRect(0,0,e("#feedback-canvas").width(),e("#feedback-canvas").height()),e(".feedback-helper").each(function(){"highlight"==e(this).attr("data-type")&&i(p,parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height())}),e(".feedback-helper").each(function(){"highlight"==e(this).attr("data-type")&&p.clearRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height())}),p.clearRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height()),p.fillStyle="rgba(0,0,0,0.75)",p.fillRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height()),ignore=e(this).attr("data-time"),e(".feedback-helper").each(function(){if(e(this).attr("data-time")==ignore)return!0;"blackout"==e(this).attr("data-type")&&(p.fillStyle="rgba(0,0,0,1)",p.fillRect(parseInt(e(this).css("left"),10),parseInt(e(this).css("top"),10),e(this).width(),e(this).height()))}))):(e(this).css("z-index","30000"),e(this).children().remove(),"blackout"==e(this).attr("data-type")&&r(p)))}),e(document).on("click","#feedback-close",function(){if(u.highlightElement&&e(this).parent().attr("data-highlight-id"))var t=e(this).parent().attr("data-highlight-id");e(this).parent().remove(),u.highlightElement&&t&&e('[data-highlight-id="'+t+'"]').removeAttr("data-highlighted").removeAttr("data-highlight-id"),r(p)}),e("#feedback-module").on("click",".feedback-wizard-close,.feedback-close-btn",function(){n()}),e(document).on("keyup",function(e){27==e.keyCode&&n()}),e(document).on("selectstart dragstart",document,function(e){e.preventDefault()}),e(document).on("click","#feedback-highlighter-back",function(){t=!1,e("#feedback-canvas").css("cursor","default"),e("#feedback-helpers").hide(),e("#feedback-highlighter").hide(),e("#feedback-welcome-error").hide(),e("#feedback-welcome").show()}),e(document).on("mousedown",".feedback-sethighlight",function(){highlight=1,e(this).addClass("feedback-active"),e(".feedback-setblackout").removeClass("feedback-active")}),e(document).on("mousedown",".feedback-setblackout",function(){highlight=0,e(this).addClass("feedback-active"),e(".feedback-sethighlight").removeClass("feedback-active")}),e(document).on("click","#feedback-highlighter-next",function(){t=!1,e("#feedback-canvas").css("cursor","default");var n=e(document).scrollTop(),i=e(window).height();e("#feedback-helpers").hide(),e("#feedback-highlighter").hide(),u.screenshotStroke||r(p,!1),html2canvas(e("body").eq(0),{onrendered:function(t){u.screenshotStroke||r(p),_canvas=e('<canvas id="feedback-canvas-tmp" width="'+c+'" height="'+i+'"/>').hide().appendTo(e("body").eq(0)),_ctx=_canvas.get(0).getContext("2d"),_ctx.drawImage(t,0,n,c,i,0,0,c,i),o=_canvas.get(0).toDataURL(),e(document).scrollTop(n),e("#feedback-canvas-tmp").remove(),e("#feedback-overview").show(),e("#feedback-overview-description-text>textarea").remove(),e("#feedback-overview-screenshot>img").remove(),e('<textarea id="feedback-overview-note">'+e("#feedback-note").val()+"</textarea>").insertAfter("#feedback-overview-description-text h3:eq(0)"),e("#feedback-overview-screenshot").append('<img class="feedback-screenshot" src="'+o+'" />')},proxy:u.proxy,letterRendering:u.letterRendering})}),e(document).on("click","#feedback-overview-back",function(n){t=!0,e("#feedback-canvas").css("cursor","crosshair"),e("#feedback-overview").hide(),e("#feedback-helpers").show(),e("#feedback-highlighter").show(),e("#feedback-overview-error").hide()}),e(document).on("keyup","#feedback-note-tmp,#feedback-overview-note",function(t){"feedback-note-tmp"===t.target.id?t=e("#feedback-note-tmp").val():(t=e("#feedback-overview-note").val(),e("#feedback-note-tmp").val(t)),e("#feedback-note").val(t)}),e(document).on("click","#feedback-submit",function(){t=!1,0<e("#feedback-note").val().length?(e("#feedback-submit-success,#feedback-submit-error").remove(),e("#feedback-overview").hide(),post.img=o,post.note=e("#feedback-note").val(),s()):e("#feedback-overview-error").show()})}))}}(jQuery),function(e,t,n){function r(e,t,n){var r,i=e.runtimeStyle&&e.runtimeStyle[t],s=e.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(r=s.left,i&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":n||0,n=s.pixelLeft+"px",s.left=r,i&&(e.runtimeStyle.left=i)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function i(e){return parseInt(e,10)}function s(e,t,n,r,i,s){var o,u,f;return t=a.Util.getCSS(t,e,i),(1===t.length&&(u=t[0],t=[],t[0]=u,t[1]=u),-1!==(""+t[0]).indexOf("%"))?(f=parseFloat(t[0])/100,u=n.width*f,"backgroundSize"!==e&&(u-=(s||r).width*f)):"backgroundSize"===e?"auto"===t[0]?u=r.width:/contain|cover/.test(t[0])?(o=a.Util.resizeBounds(r.width,r.height,n.width,n.height,t[0]),u=o.width,o=o.height):u=parseInt(t[0],10):u=parseInt(t[0],10),"auto"===t[1]?o=u/r.width*r.height:-1!==(""+t[1]).indexOf("%")?(f=parseFloat(t[1])/100,o=n.height*f,"backgroundSize"!==e&&(o-=(s||r).height*f)):o=parseInt(t[1],10),[u,o]}function o(e,t){var n=[];return{storage:n,width:e,height:t,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return n.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){return n.push({type:"variable",name:e,arguments:t}),t}}}var u,a={Util:{}};a.Util.log=function(t){a.logging&&e.console&&e.console.log&&e.console.log(t)},a.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),a.Util.asFloat=function(e){return parseFloat(e)},function(){var e=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,t=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;a.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];n=n.match(e);for(var r=[],i=0;n&&n.length>i;i++){var s=n[i].match(t);r.push({color:s[0],offsetX:s[1]?s[1].replace("px",""):0,offsetY:s[2]?s[2].replace("px",""):0,blur:s[3]?s[3].replace("px",""):0})}return r}}(),a.Util.parseBackgroundImage=function(e){var t,n,r,i,s,o,u,a,f=[],l=0,c=0,h=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&a.push(n),"-"===t.substr(0,1)&&0<(i=t.indexOf("-",1)+1)&&(r=t.substr(0,i),t=t.substr(i)),f.push({prefix:r,method:t.toLowerCase(),value:s,args:a})),a=[],t=r=n=s=""};h();for(var p=0,d=e.length;d>p;p++)if(o=e[p],!(0===l&&-1<" \r\n	".indexOf(o))){switch(o){case'"':u?u===o&&(u=null):u=o;break;case"(":if(u)break;if(0===l){l=1,s+=o;continue}c++;break;case")":if(u)break;if(1===l){if(0===c){l=0,s+=o,h();continue}c--}break;case",":if(u)break;if(0===l){h();continue}if(1===l&&0===c&&!t.match(/^url$/i)){a.push(n),n="",s+=o;continue}}s+=o,0===l?t+=o:n+=o}return h(),f},a.Util.Bounds=function(e){var t,n={};return e.getBoundingClientRect&&(t=e.getBoundingClientRect(),n.top=t.top,n.bottom=t.bottom||t.top+t.height,n.left=t.left,n.width=e.offsetWidth,n.height=e.offsetHeight),n},a.Util.OffsetBounds=function(e){var t=e.offsetParent?a.Util.OffsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},a.Util.getCSS=function(e,s,o){void 0!==e&&(u=t.defaultView.getComputedStyle(e,null));var f=u[s];if(/^background(Size|Position)$/.test(s)){e:{if(f=(f||"").split(","),f=f[o||0]||f[0]||"auto",f=a.Util.trimText(f).split(" "),"backgroundSize"!==s||f[0]&&!f[0].match(/cover|contain|auto/)){if(f[0]=-1===f[0].indexOf("%")?r(e,s+"X",f[0]):f[0],f[1]===n){if("backgroundSize"===s){e=(f[1]="auto",f);break e}f[1]=f[0]}f[1]=-1===f[1].indexOf("%")?r(e,s+"Y",f[1]):f[1]}e=f}return e}return/border(Top|Bottom)(Left|Right)Radius/.test(s)?(e=f.split(" "),1>=e.length&&(e[1]=e[0]),e.map(i)):f},a.Util.resizeBounds=function(e,t,n,r,i){var s,o;return e/=t,i&&"auto"!==i?e>n/r^"contain"===i?(o=r,s=r*e):(s=n,o=n/e):(s=n,o=r),{width:s,height:o}},a.Util.BackgroundPosition=function(e,t,n,r,i){return e=s("backgroundPosition",e,t,n,r,i),{left:e[0],top:e[1]}},a.Util.BackgroundSize=function(e,t,n,r){return e=s("backgroundSize",e,t,n,r),{width:e[0],height:e[1]}},a.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},a.Util.Children=function(e){var t;try{var r;if(e.nodeName&&"IFRAME"===e.nodeName.toUpperCase())r=e.contentDocument||e.contentWindow.document;else{var i=e.childNodes;e=[];if(null!==i){var s=e.length,o=0;if("number"==typeof i.length)for(var u=i.length;u>o;o++)e[s++]=i[o];else for(;i[o]!==n;)e[s++]=i[o++];e.length=s}r=e}t=r}catch(f){a.Util.log("html2canvas.Util.Children failed with exception: "+f.message),t=[]}return t},a.Util.isTransparent=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},a.Util.Font=function(){var e={};return function(t,r,i){if(e[t+"-"+r]!==n)return e[t+"-"+r];var s,o,u,a=i.createElement("div"),f=i.createElement("img"),l=i.createElement("span");return a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin=0,a.style.padding=0,i.body.appendChild(a),f.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",f.width=1,f.height=1,f.style.margin=0,f.style.padding=0,f.style.verticalAlign="baseline",l.style.fontFamily=t,l.style.fontSize=r,l.style.margin=0,l.style.padding=0,l.appendChild(i.createTextNode("Hidden Text")),a.appendChild(l),a.appendChild(f),s=f.offsetTop-l.offsetTop+1,a.removeChild(l),a.appendChild(i.createTextNode("Hidden Text")),a.style.lineHeight="normal",f.style.verticalAlign="super",o=f.offsetTop-a.offsetTop+1,u={baseline:s,lineWidth:1,middle:o},e[t+"-"+r]=u,i.body.removeChild(a),u}}(),function(){function e(e){return function(t){try{e.addColorStop(t.stop,t.color)}catch(r){n.log(["failed to add color stop: ",r,"; tried to add: ",t])}}}var n=a.Util,r={};a.Generate=r;var i=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];r.parseGradient=function(e,t){var n,r,s,o,u,a,l;a=i.length;for(r=0;a>r&&!(s=e.match(i[r]));r+=1);if(s)switch(s[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},u=s[2].match(/\w+/g))for(a=u.length,r=0;a>r;r+=1)switch(u[r]){case"top":n.y0=0,n.y1=t.height;break;case"right":n.x0=t.width,n.x1=0;break;case"bottom":n.y0=t.height,n.y1=0;break;case"left":n.x0=0,n.x1=t.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=t.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=t.height/2),u=s[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(a=u.length,s=1/Math.max(a-1,1),r=0;a>r;r+=1)l=u[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),l[2]?(o=parseFloat(l[2]),o/="%"===l[3]?100:t.width):o=r*s,n.colorStops.push({color:l[1],stop:o});break;case"-webkit-gradient":if(n={type:"radial"===s[2]?"circle":s[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},u=s[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),u&&(n.x0=u[1]*t.width/100,n.y0=u[2]*t.height/100,n.x1=u[3]*t.width/100,n.y1=u[4]*t.height/100),u=s[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(a=u.length,r=0;a>r;r+=1)l=u[r].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),o=parseFloat(l[2]),"from"===l[1]&&(o=0),"to"===l[1]&&(o=1),n.colorStops.push({color:l[3],stop:o});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},u=s[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),u&&(n.x0=u[1]*t.width/100,n.y0=u[2]*t.height/100,n.x1=t.width-n.x0,n.y1=t.height-n.y0),u=s[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(a=u.length,s=1/Math.max(a-1,1),r=0;a>r;r+=1)l=u[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),l[2]?(o=parseFloat(l[2]),l[3]&&(o/=100)):o=r*s,n.colorStops.push({color:l[1],stop:o});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:t.width,y1:t.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},u=s[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),u&&(n.cx=u[1]*t.width/100,n.cy=u[2]*t.height/100),u=s[3].match(/\w+/),l=s[4].match(/[a-z\-]*/),u&&l)switch(l[0]){case"farthest-corner":case"cover":case"":r=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),l=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),a=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(r,u,l,a);break;case"closest-corner":r=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),u=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),l=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),a=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(r,u,l,a);break;case"farthest-side":"circle"===u[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=u[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===u[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=u[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(u=s[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(a=u.length,s=1/Math.max(a-1,1),r=0;a>r;r+=1)l=u[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),l[2]?(o=parseFloat(l[2]),o/="%"===l[3]?100:t.width):o=r*s,n.colorStops.push({color:l[1],stop:o})}return n},r.Gradient=function(n,r){if(0!==r.width&&0!==r.height){var i,s,o=t.createElement("canvas"),u=o.getContext("2d");if(o.width=r.width,o.height=r.height,i=a.Generate.parseGradient(n,r))switch(i.type){case"linear":s=u.createLinearGradient(i.x0,i.y0,i.x1,i.y1),i.colorStops.forEach(e(s)),u.fillStyle=s,u.fillRect(0,0,r.width,r.height);break;case"circle":s=u.createRadialGradient(i.cx,i.cy,0,i.cx,i.cy,i.rx),i.colorStops.forEach(e(s)),u.fillStyle=s,u.fillRect(0,0,r.width,r.height);break;case"ellipse":var f=t.createElement("canvas"),l=f.getContext("2d");s=Math.max(i.rx,i.ry);var c=2*s;f.width=f.height=c,s=l.createRadialGradient(i.rx,i.ry,0,i.rx,i.ry,s),i.colorStops.forEach(e(s)),l.fillStyle=s,l.fillRect(0,0,c,c),u.fillStyle=i.colorStops[i.colorStops.length-1].color,u.fillRect(0,0,o.width,o.height),u.drawImage(f,i.cx-i.rx,i.cy-i.ry,2*i.rx,2*i.ry)}return o}},r.ListAlpha=function(e){var t,n="";do t=e%26,n=String.fromCharCode(t+64)+n,e/=26;while(26<26*e);return n},r.ListRoman=function(e){var t,n="M CM D CD C XC L XL X IX V IV I".split(" "),r=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],i="",s=n.length;if(0>=e||4e3<=e)return e;for(t=0;s>t;t+=1)for(;e>=r[t];)e-=r[t],i+=n[t];return i}}(),a.Parse=function(r,i){function s(e,t){var n=parseInt(Q(e,t),10);return isNaN(n)?0:n}function u(e,t,n,r,i,s){"transparent"!==s&&(e.setVariable("fillStyle",s),e.fillRect(t,n,r,i))}function f(e,t,r){return 0<e.length?t+r.toUpperCase():n}function l(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,f);case"uppercase":return e.toUpperCase();default:return e}}function c(e){return/^(normal|none|0px)$/.test(e)}function h(e,t,r,i){var s=Q(t,"fontWeight"),o=Q(t,"fontFamily"),u=Q(t,"fontSize"),a=V.parseTextShadows(Q(t,"textShadow"));switch(parseInt(s,10)){case 401:s="bold";break;case 400:s="normal"}return e.setVariable("fillStyle",i),e.setVariable("font",[Q(t,"fontStyle"),Q(t,"fontVariant"),s,u,o].join(" ")),e.setVariable("textAlign","left"),a.length&&(e.setVariable("shadowColor",a[0].color),e.setVariable("shadowOffsetX",a[0].offsetX),e.setVariable("shadowOffsetY",a[0].offsetY),e.setVariable("shadowBlur",a[0].blur)),"none"!==r?V.Font(o,u,X):n}function p(e,t,n){var r,s,o=n.ctx,a=Q(e,"color"),f=Q(e,"textDecoration"),p=Q(e,"textAlign"),d=t,v=0;0<V.trimText(t.nodeValue).length&&(t.nodeValue=l(t.nodeValue,Q(e,"textTransform")),p=p.replace(["-webkit-auto"],["auto"]),s=!i.letterRendering&&/^(left|right|justify|auto)$/.test(p)&&c(Q(e,"letterSpacing"))?t.nodeValue.split(/(\b| )/):t.nodeValue.split(""),r=h(o,e,f,a),i.chinese&&s.forEach(function(e,t){/.*[\u4E00-\u9FA5].*$/.test(e)&&(e=e.split(""),e.unshift(t,1),s.splice.apply(s,e))}),s.forEach(function(e,t){var i,l=s.length-1>t;i=n.transform.matrix;var c;if($.rangeBounds&&!i){if("none"!==f||0!==V.trimText(e).length)i=d,l=v,c=X.createRange(),c=(c.setStart(i,l),c.setEnd(i,l+e.length),c.getBoundingClientRect());v+=e.length}else if(d&&"string"==typeof d.nodeValue){var l=l?d.splitText(e.length):null,h=d;c=h.parentNode;var p=X.createElement("wrapper"),m=h.cloneNode(!0);p.appendChild(h.cloneNode(!0)),c.replaceChild(p,h),i=i?V.OffsetBounds(p):V.Bounds(p),c=(c.replaceChild(m,p),i),d=l}if(i=c)switch(l=i.left,c=i.bottom,null!==e&&0<V.trimText(e).length&&o.fillText(e,l,c),f){case"underline":u(o,i.left,Math.round(i.top+r.baseline+r.lineWidth),i.width,1,a);break;case"overline":u(o,i.left,Math.round(i.top),i.width,1,a);break;case"line-through":u(o,i.left,Math.ceil(i.top+r.middle+r.lineWidth),i.width,1,a)}}))}function d(e,t,n){var r;t=t.ctx;var i=Q(e,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(i)){var s;s=-1;var o=1,u=e.parentNode.childNodes;if(e.parentNode){for(;u[++s]!==e;)1===u[s].nodeType&&o++;s=o}else s=-1;switch(i){case"decimal":r=s;break;case"decimal-leading-zero":r=1===(""+s).length?"0"+s:""+s;break;case"upper-roman":r=a.Generate.ListRoman(s);break;case"lower-roman":r=a.Generate.ListRoman(s).toLowerCase();break;case"lower-alpha":r=a.Generate.ListAlpha(s).toLowerCase();break;case"upper-alpha":r=a.Generate.ListAlpha(s)}r+=". ";var f,l,i=X.createElement("boundelement"),i=(i.style.display="inline",f=e.style.listStyleType,e.style.listStyleType="none",i.appendChild(X.createTextNode(r)),e.insertBefore(i,e.firstChild),l=V.Bounds(i),e.removeChild(i),e.style.listStyleType=f,l);if(h(t,e,"none",Q(e,"color")),"inside"===Q(e,"listStylePosition"))t.setVariable("textAlign","left"),e=n.left,n=i.bottom,null!==r&&0<V.trimText(r).length&&t.fillText(r,e,n)}}function m(e){return(e=r[e])&&!0===e.succeeded?e.img:!1}function y(e,t){var n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:r,width:i-n,height:s-r}}function b(e,t,n,r,i){var o=s(t,"paddingLeft"),u=s(t,"paddingTop"),a=s(t,"paddingRight");t=s(t,"paddingBottom"),L(e,n,0,0,n.width,n.height,r.left+o+i[3].width,r.top+u+i[0].width,r.width-(i[1].width+i[3].width+o+a),r.height-(i[0].width+i[2].width+u+t))}function w(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:s(e,"border"+t+"Width"),color:Q(e,"border"+t+"Color")}})}function E(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return Q(e,"border"+t+"Radius")})}function S(e,t,n,r){var i=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:r,subdivide:function(s){var o=i(e,t,s),u=i(t,n,s),a=i(n,r,s),f=i(o,u,s),u=i(u,a,s);return s=i(f,u,s),[S(e,o,f,s),S(s,u,a,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function x(e,t,n,r,i,s,o){0<t[0]||0<t[1]?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",s,o]),(0<n[0]||0<n[1])&&e.push(["line",i[0].start.x,i[0].start.y])}function T(e,t,n,r,i,s,o){var u=[];return 0<t[0]||0<t[1]?(u.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(u)):u.push(["line",e.c1[0],e.c1[1]]),0<n[0]||0<n[1]?(u.push(["line",s[0].start.x,s[0].start.y]),s[0].curveTo(u),u.push(["line",o[0].end.x,o[0].end.y]),o[0].curveToReversed(u)):(u.push(["line",e.c2[0],e.c2[1]]),u.push(["line",e.c3[0],e.c3[1]])),0<t[0]||0<t[1]?(u.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(u)):u.push(["line",e.c4[0],e.c4[1]]),u}function N(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v=t.left,m=t.top,g=t.width,y=t.height,b=E(e);l=t.left,c=t.top,a=t.width,f=t.height,i=b[0][0],s=b[0][1],o=b[1][0],u=b[1][1];var w=b[2][0],S=b[2][1];h=b[3][0],p=b[3][1];var N=a-o,C=f-S,k=a-w,L=f-p;r=Z(l,c,i,s).topLeft.subdivide(.5),i=Z(l+n[3].width,c+n[0].width,Math.max(0,i-n[3].width),Math.max(0,s-n[0].width)).topLeft.subdivide(.5),s=Z(l+N,c,o,u).topRight.subdivide(.5),o=Z(l+Math.min(N,a+n[3].width),c+n[0].width,N>a+n[3].width?0:o-n[3].width,u-n[0].width).topRight.subdivide(.5),u=Z(l+k,c+C,w,S).bottomRight.subdivide(.5),a=Z(l+Math.min(k,a+n[3].width),c+Math.min(C,f+n[0].width),Math.max(0,w-n[1].width),Math.max(0,S-n[2].width)).bottomRight.subdivide(.5),f=Z(l,c+L,h,p).bottomLeft.subdivide(.5),l=Z(l+n[3].width,c+L,Math.max(0,h-n[3].width),Math.max(0,p-n[2].width)).bottomLeft.subdivide(.5),c=[];switch(Q(e,"backgroundClip")){case"content-box":case"padding-box":x(c,b[0],b[1],i,o,t.left+n[3].width,t.top+n[0].width),x(c,b[1],b[2],o,a,t.left+t.width-n[1].width,t.top+n[0].width),x(c,b[2],b[3],a,l,t.left+t.width-n[1].width,t.top+t.height-n[2].width),x(c,b[3],b[0],l,i,t.left+n[3].width,t.top+t.height-n[2].width);break;default:x(c,b[0],b[1],r,s,t.left,t.top),x(c,b[1],b[2],s,u,t.left+t.width,t.top),x(c,b[2],b[3],u,f,t.left+t.width,t.top+t.height),x(c,b[3],b[0],f,r,t.left,t.top+t.height)}L={clip:c,borders:[]};for(e=0;4>e;e++)if(0<n[e].width){switch(t=v,c=m,h=g,p=y-n[2].width,e){case 0:p=n[0].width,d=T({c1:[t,c],c2:[t+h,c],c3:[t+h-n[1].width,c+p],c4:[t+n[3].width,c+p]},b[0],b[1],r,i,s,o);break;case 1:t=v+g-n[1].width,h=n[1].width,d=T({c1:[t+h,c],c2:[t+h,c+p+n[2].width],c3:[t,c+p],c4:[t,c+n[0].width]},b[1],b[2],s,o,u,a);break;case 2:c=c+y-n[2].width,p=n[2].width,d=T({c1:[t+h,c+p],c2:[t,c+p],c3:[t+n[3].width,c],c4:[t+h-n[3].width,c]},b[2],b[3],u,a,f,l);break;case 3:h=n[3].width,d=T({c1:[t,c+p+n[2].width],c2:[t,c],c3:[t+h,c+n[0].width],c4:[t+h,c+p]},b[3],b[0],f,l,r,i)}L.borders.push({args:d,color:n[e].color})}return L}function C(e,t){var n=e.drawShape();return t.forEach(function(e,t){n[0===t?"moveTo":e[0]+"To"].apply(null,e.slice(1))}),n}function k(e,t,n){var r=X.createElement("valuewrap");"lineHeight textAlign fontFamily color fontSize paddingLeft paddingTop width height border borderLeftWidth borderTopWidth".split(" ").forEach(function(t){try{r.style[t]=Q(e,t)}catch(n){V.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(r.style.lineHeight=Q(e,"height")),r.style.top=t.top+"px",r.style.left=t.left+"px",(t="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value)||(t=e.placeholder),t=X.createTextNode(t),r.appendChild(t),K.appendChild(r),p(e,t,n),K.removeChild(r)}function L(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1))}function A(n,r){var i=e.getComputedStyle(n,r);if(i&&i.content&&"none"!==i.content&&"-moz-alt-content"!==i.content&&"none"!==i.display){var s=i.content+"",o=s.substr(0,1);o===s.substr(s.length-1)&&o.match(/'|"/)&&(s=s.substr(1,s.length-2));var o="url"===s.substr(0,3),u=t.createElement(o?"img":"span");return u.className=G+"-before "+G+"-after",Object.keys(i).filter(O).forEach(function(e){try{u.style[e]=i[e]}catch(t){V.log(["Tried to assign readonly property ",e,"Error:",t])}}),o?u.src=V.parseBackgroundImage(s)[0].args[0]:u.innerHTML=s,u}}function O(t){return isNaN(e.parseInt(t,10))}function M(e,t){var n=A(e,":before"),r=A(e,":after");(n||r)&&(n&&(e.className+=" "+G+"-before",e.parentNode.insertBefore(n,e),U(n,t,!0),e.parentNode.removeChild(n),e.className=e.className.replace(G+"-before","").trim()),r&&(e.className+=" "+G+"-after",e.appendChild(r),U(r,t,!0),e.removeChild(r),e.className=e.className.replace(G+"-after","").trim()))}function _(e,t,n,r){var i=Math.round(r.left+n.left);n=Math.round(r.top+n.top),e.createPattern(t),e.translate(i,n),e.fill(),e.translate(-i,-n)}function D(e,t,n,r,i,s,o,u){var a=[];a.push(["line",Math.round(i),Math.round(s)]),a.push(["line",Math.round(i+o),Math.round(s)]),a.push(["line",Math.round(i+o),Math.round(u+s)]),a.push(["line",Math.round(i),Math.round(u+s)]),C(e,a),e.save(),e.clip(),_(e,t,n,r),e.restore()}function P(e,t,n){for(var r,i=Q(e,"backgroundImage"),s=V.parseBackgroundImage(i),o=s.length;o--;)if(i=s[o],i.args&&0!==i.args.length)if(r=m("url"===i.method?i.args[0]:i.value)){var u=e,a=t,f=n,l=r;r=o;var c=V.BackgroundSize(u,a,l,r),h=V.BackgroundPosition(u,a,l,r,c),u=Q(u,"backgroundRepeat").split(",").map(V.trimText),p=c;if(l.width!==p.width||l.height!==p.height)var c=void 0,d=X.createElement("canvas"),l=(d.width=p.width,d.height=p.height,c=d.getContext("2d"),L(c,l,0,0,l.width,l.height,0,0,p.width,p.height),d);switch(u[r]||u[0]){case"repeat-x":D(f,l,h,a,a.left,a.top+h.top,99999,l.height);break;case"repeat-y":D(f,l,h,a,a.left+h.left,a.top,l.width,99999);break;case"no-repeat":D(f,l,h,a,a.left+h.left,a.top+h.top,l.width,l.height);break;default:_(f,l,h,{top:a.top,left:a.left,width:l.width,height:l.height})}}else V.log("html2canvas: Error loading background:",i)}function H(e){return e.replace("px","")}function B(e){var t=Q(e,"transform")||Q(e,"-webkit-transform")||Q(e,"-moz-transform")||Q(e,"-ms-transform")||Q(e,"-o-transform");e=Q(e,"transform-origin")||Q(e,"-webkit-transform-origin")||Q(e,"-moz-transform-origin")||Q(e,"-ms-transform-origin")||Q(e,"-o-transform-origin")||"0px 0px",e=e.split(" ").map(H).map(V.asFloat);var n;if(t&&"none"!==t&&(t=t.match(et)))switch(t[1]){case"matrix":n=t[2].split(",").map(V.trimText).map(V.asFloat)}return{origin:e,matrix:n}}function j(e,t,n,r){var s=o(t?n.width:Math.max(Math.max(X.body.scrollWidth,X.documentElement.scrollWidth),Math.max(X.body.offsetWidth,X.documentElement.offsetWidth),Math.max(X.body.clientWidth,X.documentElement.clientWidth)),t?n.height:Math.max(Math.max(X.body.scrollHeight,X.documentElement.scrollHeight),Math.max(X.body.offsetHeight,X.documentElement.offsetHeight),Math.max(X.body.clientHeight,X.documentElement.clientHeight))),u;u=s.setVariable("globalAlpha",Q(e,"opacity")*(t?t.opacity:1)),r={ctx:s,opacity:u,cssPosition:Q(e,"position"),borders:w(e),transform:r,clip:t&&t.clip?V.Extend({},t.clip):null};var a=(u="static"!==r.cssPosition)?Q(e,"zIndex"):"auto",f=Q(e,"opacity"),l="none"!==Q(e,"cssFloat");return r.zIndex=s={zindex:a,children:[]},s.isPositioned=u,s.isFloated=l,s.opacity=f,s.ownStacking="auto"!==a||1>f,t&&t.zIndex.children.push(r),!0===i.useOverflow&&!0===/(hidden|scroll|auto)/.test(Q(e,"overflow"))&&!1===/(BODY)/i.test(e.nodeName)&&(r.clip=r.clip?y(r.clip,n):n),r}function I(e,t,n){return e={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)},n&&(e=y(e,n)),e}function q(e,t){var n=t.matrix?V.OffsetBounds(e):V.Bounds(e);return t.origin[0]+=n.left,t.origin[1]+=n.top,n}function R(e,t,n,r){var i,s=B(e,t),o=q(e,s);t=j(e,t,o,s);var s=t.borders,a=t.ctx,f=I(s,o,t.clip),l=N(e,o,s),c=J.test(e.nodeName)?"#efefef":Q(e,"backgroundColor");C(a,l.clip),a.save(),a.clip(),0<f.height&&0<f.width&&!r?(u(a,o.left,o.top,o.width,o.height,c),P(e,f,a)):r&&(t.backgroundColor=c);switch(a.restore(),l.borders.forEach(function(e){var t=e.args;e=e.color,"transparent"!==e&&(a.setVariable("fillStyle",e),C(a,t),a.fill())}),n||M(e,t),e.nodeName){case"IMG":(i=m(e.getAttribute("src")))?b(a,e,i,o,s):V.log("html2canvas: Error loading <img>:"+e.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&0<(e.value||e.placeholder||"").length&&k(e,o,t);break;case"TEXTAREA":0<(e.value||e.placeholder||"").length&&k(e,o,t);break;case"SELECT":0<(e.options||e.placeholder||"").length&&k(e,o,t);break;case"LI":d(e,t,f);break;case"CANVAS":b(a,e,e,o,s)}return t}function U(e,t,n){"none"!==Q(e,"display")&&"hidden"!==Q(e,"visibility")&&!e.hasAttribute("data-html2canvas-ignore")&&(t=R(e,t,n,!1)||t,J.test(e.nodeName)||z(e,t,n))}function z(e,t,n){V.Children(e).forEach(function(r){r.nodeType===r.ELEMENT_NODE?U(r,t,n):r.nodeType===r.TEXT_NODE&&p(e,r,t)})}e.scroll(0,0);var W=i.elements===n?t.body:i.elements[0],X=W.ownerDocument,V=a.Util,$=V.Support(i,X),J=RegExp("("+i.ignoreElements+")"),K=X.body,Q=V.getCSS,G="___html2canvas___pseudoelement",Y=X.createElement("style");Y.innerHTML="."+G+'-before:before { content: "" !important; display: none !important; }.'+G+'-after:after { content: "" !important; display: none !important; }',K.appendChild(Y),r=r||{};var Z=function(e){return function(t,n,r,i){var s=r*e,o=i*e;return r=t+r,i=n+i,{topLeft:S({x:t,y:i},{x:t,y:i-o},{x:r-s,y:n},{x:r,y:n}),topRight:S({x:t,y:n},{x:t+s,y:n},{x:r,y:i-o},{x:r,y:i}),bottomRight:S({x:r,y:n},{x:r,y:n+o},{x:t+s,y:i},{x:t,y:i}),bottomLeft:S({x:r,y:i},{x:r-s,y:i},{x:t,y:n+o},{x:t,y:n})}}}(4*((Math.sqrt(2)-1)/3)),et=/(matrix)\((.+)\)/;return function(){var e=Q(t.documentElement,"backgroundColor"),n=V.isTransparent(e)&&W===t.body,r=R(W,null,!1,n);return z(W,r),n&&(e=r.backgroundColor),K.removeChild(Y),{backgroundColor:e,stack:r}}()},a.Preload=function(r){function i(){b.log("html2canvas: start: images: "+y.numLoaded+" / "+y.numTotal+" (failed: "+y.numFailed+")"),!y.firstRun&&y.numLoaded>=y.numTotal&&(b.log("Finished loading images: # "+y.numTotal+" (failed: "+y.numFailed+")"),"function"==typeof r.complete&&r.complete(y))}function s(t,s,o){var u,a,f=r.proxy;T.href=t,t=T.href,u="html2canvas_"+w++,o.callbackname=u,f+=-1<f.indexOf("?")?"&":"?",f+="url="+encodeURIComponent(t)+"&callback="+u,a=E.createElement("script"),e[u]=function(t){"error:"===t.substring(0,6)?(o.succeeded=!1,y.numLoaded++,y.numFailed++,i()):(c(s,o),s.src=t),e[u]=n;try{delete e[u]}catch(r){}a.parentNode.removeChild(a),a=null,delete o.script,delete o.callbackname},a.setAttribute("type","text/javascript"),a.setAttribute("src",f),o.script=a,e.document.body.appendChild(a)}function o(t,n){var r=e.getComputedStyle(t,n),i=r.content;"url"===i.substr(0,3)&&p.loadImage(a.Util.parseBackgroundImage(i)[0].args[0]),f(r.backgroundImage,t)}function u(e){return e&&e.method&&e.args&&0<e.args.length}function f(e,t){var r;a.Util.parseBackgroundImage(e).filter(u).forEach(function(e){if("url"===e.method)p.loadImage(e.args[0]);else if(e.method.match(/\-?gradient$/)){r===n&&(r=a.Util.Bounds(t)),e=e.value;var s=a.Generate.Gradient(e,r);s!==n&&(y[e]={img:s,succeeded:!0},y.numTotal++,y.numLoaded++,i())}})}function l(e){var t=!1;try{b.Children(e).forEach(l)}catch(r){}try{t=e.nodeType}catch(i){t=!1,b.log("html2canvas: failed to access some element's nodeType - Exception: "+i.message)}if(1===t||t===n){o(e,":before"),o(e,":after");try{f(b.getCSS(e,"backgroundImage"),e)}catch(s){b.log("html2canvas: failed to get background-image - Exception: "+s.message)}f(e)}}function c(t,o){t.onload=function(){o.timer!==n&&e.clearTimeout(o.timer),y.numLoaded++,o.succeeded=!0,t.onerror=t.onload=null,i()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(o.timer),r.proxy)){var u=t.src;return t=new Image,o.img=t,t.src=u,s(t.src,t,o),n}y.numLoaded++,y.numFailed++,o.succeeded=!1,t.onerror=t.onload=null,i()}}var h,p,d,m,y={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},b=a.Util,w=0;d=r.elements[0]||t.body;var E=d.ownerDocument,S=d.getElementsByTagName("img"),x=S.length,T=E.createElement("a"),N=function(e){return e.crossOrigin!==n}(new Image);T.href=e.location.href,h=T.protocol+T.host,p={loadImage:function(e){var t,i;e&&y[e]===n&&(t=new Image,e.match(/data:image\/.*;base64,/i)?(t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),i=y[e]={img:t},y.numTotal++,c(t,i)):(T.href=e,T.href=T.href,T.protocol+T.host===h||!0===r.allowTaint?(i=y[e]={img:t},y.numTotal++,c(t,i),t.src=e):N&&!r.allowTaint&&r.useCORS?(t.crossOrigin="anonymous",i=y[e]={img:t},y.numTotal++,c(t,i),t.src=e):r.proxy&&(i=y[e]={img:t},y.numTotal++,s(e,t,i))))},cleanupDOM:function(s){var o,u;if(!y.cleanupDone){s&&"string"==typeof s?b.log("html2canvas: Cleanup because: "+s):b.log("html2canvas: Cleanup after timeout: "+r.timeout+" ms.");for(u in y)if(y.hasOwnProperty(u)&&(o=y[u],"object"==typeof o&&o.callbackname&&o.succeeded===n)){e[o.callbackname]=n;try{delete e[o.callbackname]}catch(a){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),y.numLoaded++,y.numFailed++,b.log("html2canvas: Cleaned up failed img: '"+u+"' Steps: "+y.numLoaded+" / "+y.numTotal)}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),y.cleanupDone=!0,s&&"string"==typeof s||i()}},renderingDone:function(){m&&e.clearTimeout(m)}},0<r.timeout&&(m=e.setTimeout(p.cleanupDOM,r.timeout)),b.log("html2canvas: Preload starts: finding background-images"),y.firstRun=!0,l(d),b.log("html2canvas: Preload: Finding images");for(d=0;x>d;d+=1)p.loadImage(S[d].getAttribute("src"));return y.firstRun=!1,b.log("html2canvas: Preload: Done."),y.numTotal===y.numLoaded&&i(),p},a.Renderer=function(e,r){return function(e){if("string"==typeof r.renderer&&a.Renderer[e]!==n)e=a.Renderer[e](r);else{if("function"!=typeof e)throw Error("Unknown renderer");e=e(r)}if("function"!=typeof e)throw Error("Invalid renderer defined");return e}(r.renderer)(e,r,t,function(e){function t(e){Object.keys(e).sort().forEach(function(n){var r=[],s=[],o=[],u=[];e[n].forEach(function(e){e.node.zIndex.isPositioned||1>e.node.zIndex.opacity?o.push(e):e.node.zIndex.isFloated?s.push(e):r.push(e)}),function a(e){e.forEach(function(e){u.push(e),e.children&&a(e.children)})}(r.concat(s,o)),u.forEach(function(e){e.context?t(e.context):i.push(e.node)})})}var r,i=[];return r=function(e){function t(e,r,i){var s="auto"===r.zIndex.zindex?0:Number(r.zIndex.zindex),o=e,u=r.zIndex.isPositioned,a=r.zIndex.isFloated,f={node:r},l=i;r.zIndex.ownStacking?(o=f.context={"!":[{node:r,children:[]}]},l=n):(u||a)&&(l=f.children=[]),0===s&&i?i.push(f):(e[s]||(e[s]=[]),e[s].push(f)),r.zIndex.children.forEach(function(e){t(o,e,l)})}var r={};return t(r,e),r}(e),t(r),i}(e.stack),a)},a.Util.Support=function(e,t){function r(){var e=new Image,r=t.createElement("canvas"),i=r.getContext===n?!1:r.getContext("2d");if(!1===i)return!1;r.width=r.height=10,e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><foreignObject width='10' height='10'><div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>sup</div></foreignObject></svg>";try{i.drawImage(e,0,0),r.toDataURL()}catch(s){return!1}return a.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}return{rangeBounds:function(){var e,n,r,i,s=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),r=e.getBoundingClientRect(),i=r.height,123===i&&(s=!0),t.body.removeChild(n))),s}(),svgRendering:e.svgRendering&&r()}},e.html2canvas=function(t,n){t=t.length?t:[t];var r,i,s={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return s=a.Util.Extend(n,s),a.logging=s.logging,s.complete=function(e){"function"==typeof s.onpreloaded&&!1===s.onpreloaded(e)||(r=a.Parse(e,s),"function"==typeof s.onparsed&&!1===s.onparsed(r)||(i=a.Renderer(r,s),"function"!=typeof s.onrendered||s.onrendered(i)))},e.setTimeout(function(){a.Preload(s)},0),{render:function(e,t){return a.Renderer(e,a.Util.Extend(t,s))},parse:function(e,t){return a.Parse(e,a.Util.Extend(t,s))},preload:function(e){return a.Preload(a.Util.Extend(e,s))},log:a.Util.log}},e.html2canvas.log=a.Util.log,e.html2canvas.Renderer={Canvas:n},a.Renderer.Canvas=function(e){function r(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}e=e||{};var i=[],s=t.createElement("canvas"),o=s.getContext("2d"),u=a.Util,f=e.canvas||t.createElement("canvas");return function(a,h,p,m,g){var y,w,E,S=f.getContext("2d"),x=a.stack;return f.width=f.style.width=h.width||x.ctx.width,f.height=f.style.height=h.height||x.ctx.height,E=S.fillStyle,S.fillStyle=u.isTransparent(x.backgroundColor)&&h.background!==n?h.background:a.backgroundColor,S.fillRect(0,0,f.width,f.height),S.fillStyle=E,m.forEach(function(n){S.textBaseline="bottom",S.save(),n.transform.matrix&&(S.translate(n.transform.origin[0],n.transform.origin[1]),S.transform.apply(S,n.transform.matrix),S.translate(-n.transform.origin[0],-n.transform.origin[1])),n.clip&&(S.beginPath(),S.rect(n.clip.left,n.clip.top,n.clip.width,n.clip.height),S.clip()),n.ctx.storage&&n.ctx.storage.forEach(function(n){var a=S;switch(n.type){case"variable":a[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(0<n.arguments[0].width&&0<n.arguments[0].height)try{a.fillStyle=a.createPattern(n.arguments[0],"repeat")}catch(f){u.log("html2canvas: Renderer: Error creating pattern",f.message)}break;case"drawShape":r(a,n.arguments);break;case"drawImage":var h;if((h=0<n.arguments[8]&&0<n.arguments[7])&&!(h=!e.taintTest)&&(h=e.taintTest))e:{if(-1===i.indexOf(n.arguments[0].src)){o.drawImage(n.arguments[0],0,0);try{o.getImageData(0,0,1,1)}catch(p){h=(s=t.createElement("canvas"),o=s.getContext("2d"),!1);break e}i.push(n.arguments[0].src)}h=!0}h&&a.drawImage.apply(a,n.arguments);break;default:a[n.name].apply(a,n.arguments)}}}),S.restore()}),u.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===h.elements.length&&"object"==typeof h.elements[0]&&"BODY"!==h.elements[0].nodeName?(w=g.Util.Bounds(h.elements[0]),y=p.createElement("canvas"),y.width=Math.ceil(w.width),y.height=Math.ceil(w.height),S=y.getContext("2d"),S.drawImage(f,w.left,w.top,w.width,w.height,0,0,w.width,w.height),f=null,y):f}}}(window,document),define("feedback-bot",["jquery"],function(){}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!views/FeedbackView",["jquery","feedback-bot","backbone"],function(e,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.el=e("body"),r.prototype.initialize=function(){var t=this;return e(document).ready(function(){return e.feedback({html2canvasURL:"/assets/libs/feedback-bot/src/html2canvas.min.js",githubpath:"davidfurlong/cograph-feedback",serverURL:"http://feedbackbot.herokuapp.com",placement:"left"})})},r}(r.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cs/cs!routes/routes",["jquery","underscore","backbone","cs!models/NodeModel","cs!models/ConnectionModel","cs!models/WorkspaceModel","cs!models/FilterModel","cs!views/GraphView","cs!views/AddNodeView","cs!views/DetailsView","cs!views/FilterView","cs!views/SearchView","cs!views/SideBarView","cs!views/MenuView","cs!views/ShareView","cs!views/FeedbackView"],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g,y=this;return g=function(s){function u(){var e=this;return this.home=function(){return u.prototype.home.apply(e,arguments)},u.__super__.constructor.apply(this,arguments)}return t(u,s),u.prototype.initialize=function(){var e,t,n=this;return this.workspaceModel=new o,this.graphView=new a({model:this.workspaceModel}),this.addNodeView=new f({model:this.workspaceModel}),this.detailsView=new l({model:this.workspaceModel,attributes:{graphView:this.graphView}}),this.filterView=new c({model:this.workspaceModel.getFilter(),attributes:{workspaceModel:this.workspaceModel}}),this.searchView=new h({model:this.workspaceModel}),this.sidebarView=new p({model:this.workspaceModel}),this.menuView=new d({model:this.workspaceModel}),this.shareView=new v({model:this.workspaceModel,attributes:{graphView:this.graphView}}),this.feedbackView=new m,this.shareView.on("save:workspace",function(e){return n.navigate("view/"+e)}),this.graphView.on("tag:click",function(e){return n.workspaceModel.filterModel.set("node_tags",[e]),n.workspaceModel.filter(),n.searchView.search({value:e,type:"tag"}),n.navigate("search/"+e)}),window.gm=this.workspaceModel,t=/^((?:\/\w+\/document)?\/\d+\/?)(?:.+)?$/,e=t.exec(window.location.pathname),this.workspaceModel.root=window.location.origin+e[1],r.history.start({pushState:!0,root:e[1]})},u.prototype.routes={"":"home","view/:id":"workspace","search/:tag":"loadByTag"},u.prototype.home=function(){return this.setDoc(),this.loadGraph()},u.prototype.workspace=function(e){var t=this;return e=parseInt(e),this.setDoc(),this.workspaceModel.set("_id",e),this.workspaceModel.getWorkspace(function(e){var r,i;return e.err?(t.navigate("/"),t.loadGraph()):(i=function(t){return n.contains(e.nodes,t._id)},r=function(t){return n.contains(e.connections,t._id)},e.zoom!=null?t.loadGraph(i,r,JSON.parse(e.nodePositions),e.zoom,e.translate):t.loadGraph(i,r),t.workspaceModel.filterModel.set("node_tags",e.nodeTags))})},u.prototype.loadGraph=function(t,r,i,s,o){var u,a;return t==null&&(t=function(e){return!0}),r==null&&(r=function(e){return!0}),window.prefetch.nodes&&(a=n.filter(window.prefetch.nodes,t),this.workspaceModel.nodes.set(a,{silent:!0})),window.prefetch.connections&&(u=n.filter(window.prefetch.connections,r),this.workspaceModel.connections.set(u,{silent:!0})),i!=null?this.workspaceModel.trigger("init:fixed",{nodePositions:i,zoom:s,translate:o}):this.workspaceModel.trigger("init"),e(".loading-container").remove()},u.prototype.setDoc=function(){var e=this;return this.workspaceModel.getDocument().set(window.prefetch.theDocument),this.workspaceModel.socket.emit("open:document",window.prefetch.theDocument),this.workspaceModel.nodes._docId=window.prefetch.theDocument._id,this.workspaceModel.connections._docId=window.prefetch.theDocument._id,this.workspaceModel.getTagNames(function(t){return e.workspaceModel.filterModel.addInitialTags(t),e.workspaceModel.filterModel.addNodeTags(t)})},u.prototype.loadByTag=function(t){return this.setDoc(),this.searchView.search({value:t,type:"tag"}),e(".loading-container").remove()},u.prototype.navigate=function(e){return this.workspaceModel.trigger("navigate",e),r.Router.prototype.navigate(e)},u.prototype.randomPopulate=function(){var e,t,r,s,o,u,a,f;s=Math.round(3+Math.random()*15),t=0,r=[];while(t<s)r.push(t.toString()),t++;n.each(r,function(e){return gm.putNode(new i({name:Math.random().toString(36).substring(7),description:e+" is a wonderful number",tags:["conjecture"]}))}),a=Math.round(1+r.length*(r.length-1)/2*Math.random()/5),e=0,f=[];while(e<a){u=Math.round((r.length-1)*Math.random()),o=Math.round((r.length-1)*Math.random());if(u===o)continue;gm.connections.add({name:"related to"+u+o,source:gm.nodes.models[u],target:gm.nodes.models[o]}),f.push(e++)}return f},u}(r.Router)})}.call(this),function(){define("cs/cs!GraphDocs",["cs!routes/routes"],function(e){return{initialize:function(){return this.router=new e}}})}.call(this),requirejs.config({baseUrl:"/",paths:{jquery:"/assets/libs/jquery/dist/jquery.min",underscore:"/assets/libs/underscore/underscore",backbone:"/assets/libs/backbone/backbone",text:"/assets/libs/requirejs-text/text",d3:"/assets/libs/d3/d3","backbone-forms":"/assets/libs/backbone-forms/distribution.amd/backbone-forms.min","backbone-forms-bootstrap":"/assets/js/backbone-forms/bootstrap3",list:"/assets/libs/backbone-forms/distribution.amd/editors/list.min",typeahead:"/assets/libs/typeahead.js/dist/typeahead.jquery.min",bloodhound:"/assets/libs/typeahead.js/dist/bloodhound.min",bootstrap:"/assets/libs/bootstrap/dist/js/bootstrap.min","bb-modal":"/assets/libs/new-bb-modal/src/backbone.bootstrap-modal","bootstrap-color":"/assets/libs/bootstrap-colorpalette/js/bootstrap-colorpalette","share-button":"/assets/libs/share-button/build/share.min","socket-io":"/socket.io/socket.io","b-iosync":"/assets/libs/backbone.iobind/dist/backbone.iosync","b-iobind":"/assets/libs/backbone.iobind/dist/backbone.iobind",caret:"/assets/libs/caret.js/dist/jquery.caret.min",atwho:"/assets/libs/targeted-atwho/dist/js/jquery.atwho.min",twittertext:"/assets/libs/twitter-text/pkg/twitter-text-1.9.4.min",linkify:"/assets/libs/jQuery-linkify/dist/jquery.linkify.min","jquery-autosize":"/assets/libs/jquery-autosize/jquery.autosize","feedback-bot":"/assets/libs/feedback-bot/dist/feedback.0.3.1"},shim:{backbone:{deps:["underscore","jquery"],exports:"Backbone"},typeahead:{deps:["jquery"]},bloodhound:{deps:["jquery"]},bootstrap:{deps:["jquery"]},"bb-modal":{deps:["underscore","jquery","backbone"]},"b-iosync":{deps:["underscore","backbone","socket-io"]},"b-iobind":{deps:["underscore","backbone","socket-io"]},caret:{deps:["jquery"],exports:"jQuery.fn.caret"},atwho:{deps:["jquery","caret"],exports:"jQuery.fn.atwho"},twittertext:{deps:["jquery"]},linkify:{deps:["jquery"]},"feedback-bot":{deps:["jquery"]},"jquery-autosize":{deps:["jquery"]}},packages:[{name:"cs",location:"/assets/libs/require-cs",main:"cs"},{name:"coffee-script",location:"/assets/libs/coffee-script",main:"index"}]}),require(["jquery","caret","atwho","cs!GraphDocs"],function(e,t,n,r){r.initialize()}),define("main",function(){});